{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Api = require(\"../shared/Api.bs.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../shared/components/FaIcon.bs.js\");\n\nvar DomUtils = require(\"../shared/utils/DomUtils.bs.js\");\n\nvar EmailUtils = require(\"../shared/utils/EmailUtils.bs.js\");\n\nvar Json_decode = require(\"@glennsl/bs-json/src/Json_decode.bs.js\");\n\nvar OptionUtils = require(\"../shared/utils/OptionUtils.bs.js\");\n\nvar EmailSentIconSvg = require(\"./images/email-sent-icon.svg\");\n\nvar ResetPasswordIconSvg = require(\"./images/reset-password-icon.svg\");\n\nvar FederatedSignInIconSvg = require(\"./images/federated-sign-in-icon.svg\");\n\nvar ContinueWithEmailIconSvg = require(\"./images/continue-with-email-icon.svg\");\n\nrequire(\"./UserSessionNew.css\");\n\nvar federatedSignInIcon = FederatedSignInIconSvg[\"default\"];\nvar signInWithPasswordIcon = ContinueWithEmailIconSvg[\"default\"];\nvar signInEmailSentIcon = EmailSentIconSvg[\"default\"];\nvar forgotPasswordIcon = ResetPasswordIconSvg[\"default\"];\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleErrorCB(setSaving, param) {\n  return Curry._1(setSaving, function (param) {\n    return false;\n  });\n}\n\nfunction handleSignInWithPasswordCB(response) {\n  var path = Json_decode.field(\"path\", function (param) {\n    return Json_decode.nullable(Json_decode.string, param);\n  }, response);\n\n  if (path !== null) {\n    return DomUtils.redirect(path);\n  } else {\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction handleSignInWithEmailCB(setView, param) {\n  return Curry._1(setView, function (param) {\n    return (\n      /* SignInEmailSent */\n      2\n    );\n  });\n}\n\nfunction signInWithPassword(authenticityToken, email, password, setSaving, sharedDevice) {\n  var payload = {};\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"shared_device\"] = sharedDevice ? \"1\" : \"0\";\n  payload[\"password\"] = password;\n\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  return Api.create(\"/users/sign_in\", payload, handleSignInWithPasswordCB, function (param) {\n    return Curry._1(setSaving, function (param) {\n      return false;\n    });\n  });\n}\n\nfunction sendSignInEmail(authenticityToken, email, setView, setSaving, sharedDevice) {\n  var payload = {};\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"referer\"] = \"\";\n  payload[\"shared_device\"] = sharedDevice ? \"1\" : \"0\";\n  payload[\"username\"] = \"\";\n\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  return Api.create(\"/users/send_login_email\", payload, function (param) {\n    return Curry._1(setView, function (param) {\n      return (\n        /* SignInEmailSent */\n        2\n      );\n    });\n  }, function (param) {\n    return Curry._1(setSaving, function (param) {\n      return false;\n    });\n  });\n}\n\nfunction sendResetPasswordEmail(authenticityToken, email, setView, setSaving) {\n  var payload = {};\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"username\"] = \"\";\n\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  return Api.create(\"/users/send_reset_password_email\", payload, function (param) {\n    return Curry._1(setView, function (param) {\n      return (\n        /* SignInEmailSent */\n        2\n      );\n    });\n  }, function (param) {\n    return Curry._1(setSaving, function (param) {\n      return false;\n    });\n  });\n}\n\nfunction renderIcon(view) {\n  var iconUrl;\n\n  switch (view) {\n    case\n    /* FederatedSignIn */\n    0:\n      iconUrl = federatedSignInIcon;\n      break;\n\n    case\n    /* SignInWithPassword */\n    1:\n      iconUrl = signInWithPasswordIcon;\n      break;\n\n    case\n    /* SignInEmailSent */\n    2:\n      iconUrl = signInEmailSentIcon;\n      break;\n\n    case\n    /* ForgotPassword */\n    3:\n      iconUrl = forgotPasswordIcon;\n      break;\n  }\n\n  return React.createElement(\"img\", {\n    className: \"mx-auto w-32 sm:w-42\",\n    src: iconUrl\n  });\n}\n\nfunction headerText(view, schoolName) {\n  switch (view) {\n    case\n    /* FederatedSignIn */\n    0:\n      return \"Sign in to \" + schoolName;\n\n    case\n    /* SignInWithPassword */\n    1:\n      return \"Continue with email\";\n\n    case\n    /* SignInEmailSent */\n    2:\n      return \"We've sent you a magic link!\";\n\n    case\n    /* ForgotPassword */\n    3:\n      return \"Reset password\";\n  }\n}\n\nfunction federatedLoginUrl(oauthHost, fqdn, provider) {\n  var tmp;\n\n  switch (provider) {\n    case\n    /* Google */\n    0:\n      tmp = \"google\";\n      break;\n\n    case\n    /* Facebook */\n    1:\n      tmp = \"facebook\";\n      break;\n\n    case\n    /* Github */\n    2:\n      tmp = \"github\";\n      break;\n\n    case\n    /* Developer */\n    3:\n      tmp = \"developer\";\n      break;\n  }\n\n  return \"//\" + (oauthHost + (\"/oauth/\" + (tmp + (\"?fqdn=\" + fqdn))));\n}\n\nfunction buttonText(provider) {\n  var tmp;\n\n  switch (provider) {\n    case\n    /* Google */\n    0:\n      tmp = \"with Google\";\n      break;\n\n    case\n    /* Facebook */\n    1:\n      tmp = \"with Facebook\";\n      break;\n\n    case\n    /* Github */\n    2:\n      tmp = \"with Github\";\n      break;\n\n    case\n    /* Developer */\n    3:\n      tmp = \"as Developer\";\n      break;\n  }\n\n  return \"Continue \" + tmp;\n}\n\nfunction buttonClasses(provider) {\n  var tmp;\n\n  switch (provider) {\n    case\n    /* Google */\n    0:\n      tmp = \"federated-sigin-in__google-btn hover:bg-red-600 text-white\";\n      break;\n\n    case\n    /* Facebook */\n    1:\n      tmp = \"federated-sigin-in__facebook-btn hover:bg-blue-800 text-white\";\n      break;\n\n    case\n    /* Github */\n    2:\n      tmp = \"federated-sigin-in__github-btn hover:bg-black text-white\";\n      break;\n\n    case\n    /* Developer */\n    3:\n      tmp = \"bg-green-100 border-green-400 text-green-800 hover:bg-green-200\";\n      break;\n  }\n\n  return \"flex justify-center items-center px-3 py-2 leading-snug border border-transparent rounded-lg cursor-pointer font-semibold mt-4 w-full \" + tmp;\n}\n\nfunction iconClasses(provider) {\n  switch (provider) {\n    case\n    /* Google */\n    0:\n      return \"fab fa-google\";\n\n    case\n    /* Facebook */\n    1:\n      return \"fab fa-facebook-f mr-1\";\n\n    case\n    /* Github */\n    2:\n      return \"fab fa-github\";\n\n    case\n    /* Developer */\n    3:\n      return \"fas fa-laptop-code\";\n  }\n}\n\nfunction providers(param) {\n  var defaultProvides = [\n  /* Google */\n  0,\n  /* Facebook */\n  1,\n  /* Github */\n  2];\n\n  if (DomUtils.isDevelopment(\n  /* () */\n  0)) {\n    return $$Array.append([\n    /* Developer */\n    3], defaultProvides);\n  } else {\n    return defaultProvides;\n  }\n}\n\nfunction renderFederatedlogin(fqdn, oauthHost) {\n  return React.createElement(\"div\", {\n    className: \"flex flex-col pb-5 md:px-9 items-center max-w-sm mx-auto\"\n  }, $$Array.map(function (provider) {\n    return React.createElement(\"a\", {\n      key: buttonText(provider),\n      className: buttonClasses(provider),\n      href: federatedLoginUrl(oauthHost, fqdn, provider)\n    }, React.createElement(\"span\", {\n      className: \"w-1/5 text-right text-lg\"\n    }, React.createElement(FaIcon.make, {\n      classes: iconClasses(provider)\n    })), React.createElement(\"span\", {\n      className: \"w-4/5 pl-3 text-left\"\n    }, buttonText(provider)));\n  }, providers(\n  /* () */\n  0)));\n}\n\nfunction validPassword(password) {\n  return password !== \"\";\n}\n\nfunction validEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction renderSignInWithEmail(email, setEmail, password, setPassword, authenticityToken, setView, saving, setSaving, sharedDevice, setSharedDevice) {\n  return React.createElement(\"div\", {\n    className: \"pt-4 pb-5 md:px-9 items-center max-w-sm mx-auto\"\n  }, React.createElement(\"div\", undefined, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n    htmlFor: \"email\"\n  }, \"Email Address\"), React.createElement(\"input\", {\n    className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n    id: \"email\",\n    disabled: saving,\n    placeholder: \"john@example.com\",\n    type: \"text\",\n    value: email,\n    onChange: function onChange($$event) {\n      return Curry._1(setEmail, $$event.target.value);\n    }\n  })), React.createElement(\"div\", {\n    className: \"mt-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex justify-between\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n    htmlFor: \"password\"\n  }, \"Password\"), React.createElement(\"button\", {\n    className: \"text-primary-400 text-center text-xs font-semibold hover:text-primary-600 cursor-pointer whitespace-no-wrap hover:underline inline\",\n    disabled: saving,\n    onClick: function onClick(param) {\n      if (saving) {\n        return (\n          /* () */\n          0\n        );\n      } else {\n        return Curry._1(setView, function (param) {\n          return (\n            /* ForgotPassword */\n            3\n          );\n        });\n      }\n    }\n  }, \"Set a New Password\")), React.createElement(\"input\", {\n    className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n    id: \"password\",\n    disabled: saving,\n    placeholder: \"Type your password\",\n    type: \"password\",\n    value: password,\n    onChange: function onChange($$event) {\n      return Curry._1(setPassword, $$event.target.value);\n    }\n  })), React.createElement(\"div\", {\n    className: \"flex justify-between items-center leading-snug mt-4 flex-col flex-col-reverse sm:flex-row\"\n  }, React.createElement(\"div\", {\n    className: \"flex items-strecth text-gray-700 hover:text-gray-900\"\n  }, React.createElement(\"input\", {\n    id: \"sharedDevice\",\n    checked: sharedDevice,\n    disabled: saving,\n    type: \"checkbox\",\n    onChange: function onChange(param) {\n      return Curry._1(setSharedDevice, function (sharedDevice) {\n        return !sharedDevice;\n      });\n    }\n  }), React.createElement(\"label\", {\n    className: \"block pl-2 font-semibold cursor-pointer text-xs select-none whitespace-no-wrap\",\n    htmlFor: \"sharedDevice\"\n  }, \"Are you using a shared device?\"))), React.createElement(\"div\", {\n    className: \"mt-6\"\n  }, password !== \"\" ? React.createElement(\"button\", {\n    className: \"btn btn-success btn-large text-center w-full\",\n    disabled: saving || EmailUtils.isInvalid(false, email),\n    onClick: function onClick(param) {\n      return signInWithPassword(authenticityToken, email, password, setSaving, sharedDevice);\n    }\n  }, saving ? React.createElement(FaIcon.make, {\n    classes: \"fas fa-spinner fa-spin mr-2\"\n  }) : null, React.createElement(\"span\", undefined, saving ? \"Signing in\" : \"Sign in with password\")) : React.createElement(\"button\", {\n    className: \"btn btn-primary btn-large text-center w-full\",\n    disabled: saving || EmailUtils.isInvalid(false, email),\n    onClick: function onClick(param) {\n      return sendSignInEmail(authenticityToken, email, setView, setSaving, sharedDevice);\n    }\n  }, saving ? React.createElement(FaIcon.make, {\n    classes: \"fas fa-spinner fa-spin mr-2\"\n  }) : null, React.createElement(\"span\", undefined, saving ? \"Signing in\" : \"Email me a link to sign in\"))));\n}\n\nfunction renderSignInEmailSent(param) {\n  return React.createElement(\"div\", {\n    className: \"max-w-sm mx-auto\"\n  }, React.createElement(\"p\", {\n    className: \"mt-4 text-center\"\n  }, \"It should reach you in less than a minute. Click the link in the email, and you'll be signed in.\"));\n}\n\nfunction renderForgotPassword(authenticityToken, email, saving, setEmail, setSaving, setView) {\n  return React.createElement(\"div\", {\n    className: \"max-w-sm mx-auto md:px-9 pb-4\"\n  }, React.createElement(\"div\", {\n    className: \"text-sm mt-2 text-center pb-3\"\n  }, \"Enter your email for password recovery\"), React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n    htmlFor: \"email\"\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n    id: \"email\",\n    disabled: saving,\n    placeholder: \"john@example.com\",\n    type: \"text\",\n    value: email,\n    onChange: function onChange($$event) {\n      return Curry._1(setEmail, $$event.target.value);\n    }\n  }), React.createElement(\"button\", {\n    className: \"btn btn-primary btn-large text-center w-full mt-4 mr-2\",\n    disabled: saving || EmailUtils.isInvalid(false, email),\n    onClick: function onClick(param) {\n      return sendResetPasswordEmail(authenticityToken, email, setView, setSaving);\n    }\n  }, saving ? React.createElement(FaIcon.make, {\n    classes: \"fas fa-spinner fa-spin mr-2\"\n  }) : null, React.createElement(\"span\", undefined, saving ? \"Dispatching email\" : \"Send Email\")));\n}\n\nfunction UserSessionNew(Props) {\n  var schoolName = Props.schoolName;\n  var authenticityToken = Props.authenticityToken;\n  var fqdn = Props.fqdn;\n  var oauthHost = Props.oauthHost;\n  var match = React.useState(function () {\n    return OptionUtils.mapWithDefault(function (param) {\n      return (\n        /* FederatedSignIn */\n        0\n      );\n    },\n    /* SignInWithPassword */\n    1, oauthHost);\n  });\n  var setView = match[1];\n  var view = match[0];\n  var match$1 = React.useState(function () {\n    return \"\";\n  });\n  var setEmail = match$1[1];\n  var email = match$1[0];\n  var match$2 = React.useState(function () {\n    return \"\";\n  });\n  var match$3 = React.useState(function () {\n    return false;\n  });\n  var match$4 = React.useState(function () {\n    return false;\n  });\n  var setSaving = match$4[1];\n  var saving = match$4[0];\n  var tmp;\n  var exit = 0;\n  var exit$1 = 0;\n\n  if (oauthHost !== undefined) {\n    if (view !== 0) {\n      exit$1 = 2;\n    } else {\n      tmp = renderFederatedlogin(fqdn, oauthHost);\n    }\n  } else if (view !== 0) {\n    exit$1 = 2;\n  } else {\n    exit = 1;\n  }\n\n  if (exit$1 === 2) {\n    switch (view - 1 | 0) {\n      case\n      /* FederatedSignIn */\n      0:\n        exit = 1;\n        break;\n\n      case\n      /* SignInWithPassword */\n      1:\n        tmp = renderSignInEmailSent(\n        /* () */\n        0);\n        break;\n\n      case\n      /* SignInEmailSent */\n      2:\n        tmp = renderForgotPassword(authenticityToken, email, saving, setEmail, setSaving, setView);\n        break;\n    }\n  }\n\n  if (exit === 1) {\n    tmp = renderSignInWithEmail(email, setEmail, match$2[0], match$2[1], authenticityToken, setView, saving, setSaving, match$3[0], match$3[1]);\n  }\n\n  var tmp$1;\n  var exit$2 = 0;\n\n  if (view >= 3) {\n    exit$2 = 1;\n  } else {\n    switch (view) {\n      case\n      /* FederatedSignIn */\n      0:\n        tmp$1 = React.createElement(\"div\", {\n          className: \"max-w-sm mx-auto md:px-9\"\n        }, React.createElement(\"span\", {\n          className: \"federated-signin-in__seperator block relative z-10 text-center text-xs text-gray-600 font-semibold\"\n        }, React.createElement(\"span\", {\n          className: \"bg-white px-2\"\n        }, \"OR\")), React.createElement(\"button\", {\n          className: \"flex justify-center items-center px-3 py-2 leading-snug border border-gray-400 text-primary-500 hover:bg-gray-100 hover:border-primary-500 focus:bg-gray-200 focus::border-primary-500 focus:outline-none rounded-lg cursor-pointer font-semibold mt-4 w-full\",\n          disabled: saving,\n          onClick: function onClick(param) {\n            return Curry._1(setView, function (param) {\n              return (\n                /* SignInWithPassword */\n                1\n              );\n            });\n          }\n        }, React.createElement(\"span\", {\n          className: \"w-1/5 text-right text-lg\"\n        }, React.createElement(FaIcon.make, {\n          classes: \"fas fa-envelope\"\n        })), React.createElement(\"span\", {\n          className: \"w-4/5 pl-3 text-left\"\n        }, \"Continue with email\")));\n        break;\n\n      case\n      /* SignInWithPassword */\n      1:\n        exit$2 = 1;\n        break;\n\n      case\n      /* SignInEmailSent */\n      2:\n        tmp$1 = null;\n        break;\n    }\n  }\n\n  if (exit$2 === 1) {\n    tmp$1 = oauthHost !== undefined ? React.createElement(\"div\", {\n      className: \"max-w-sm mx-auto md:px-9\"\n    }, React.createElement(\"button\", {\n      className: \"w-full p-3 text-primary-500 leading-snug rounded-lg underline cursor-pointer text-sm text-center font-semibold hover:bg-gray-200 focus:bg-gray-200 focus:outline-none\",\n      disabled: saving,\n      onClick: function onClick(param) {\n        return Curry._1(setView, function (param) {\n          return (\n            /* FederatedSignIn */\n            0\n          );\n        });\n      }\n    }, \"Sign in with Google, Facebook, or Github\")) : null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"bg-gray-100 sm:py-10\"\n  }, React.createElement(\"div\", {\n    className: \"container mx-auto max-w-lg px-4 py-6 sm:py-8 bg-white rounded-lg shadow\"\n  }, renderIcon(view), React.createElement(\"div\", {\n    className: \"max-w-sm mx-auto text-lg sm:text-2xl font-bold text-center mt-4\"\n  }, headerText(view, schoolName)), tmp, tmp$1));\n}\n\nvar make = UserSessionNew;\nexports.federatedSignInIcon = federatedSignInIcon;\nexports.signInWithPasswordIcon = signInWithPasswordIcon;\nexports.signInEmailSentIcon = signInEmailSentIcon;\nexports.forgotPasswordIcon = forgotPasswordIcon;\nexports.str = str;\nexports.handleErrorCB = handleErrorCB;\nexports.handleSignInWithPasswordCB = handleSignInWithPasswordCB;\nexports.handleSignInWithEmailCB = handleSignInWithEmailCB;\nexports.signInWithPassword = signInWithPassword;\nexports.sendSignInEmail = sendSignInEmail;\nexports.sendResetPasswordEmail = sendResetPasswordEmail;\nexports.renderIcon = renderIcon;\nexports.headerText = headerText;\nexports.federatedLoginUrl = federatedLoginUrl;\nexports.buttonText = buttonText;\nexports.buttonClasses = buttonClasses;\nexports.iconClasses = iconClasses;\nexports.providers = providers;\nexports.renderFederatedlogin = renderFederatedlogin;\nexports.validPassword = validPassword;\nexports.validEmail = validEmail;\nexports.renderSignInWithEmail = renderSignInWithEmail;\nexports.renderSignInEmailSent = renderSignInEmailSent;\nexports.renderForgotPassword = renderForgotPassword;\nexports.make = make;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/users/UserSessionNew.bs.js"],"names":["Api","require","$$Array","Curry","React","FaIcon","DomUtils","EmailUtils","Json_decode","OptionUtils","EmailSentIconSvg","ResetPasswordIconSvg","FederatedSignInIconSvg","ContinueWithEmailIconSvg","federatedSignInIcon","signInWithPasswordIcon","signInEmailSentIcon","forgotPasswordIcon","str","prim","handleErrorCB","setSaving","param","_1","handleSignInWithPasswordCB","response","path","field","nullable","string","redirect","handleSignInWithEmailCB","setView","signInWithPassword","authenticityToken","email","password","sharedDevice","payload","create","sendSignInEmail","sendResetPasswordEmail","renderIcon","view","iconUrl","createElement","className","src","headerText","schoolName","federatedLoginUrl","oauthHost","fqdn","provider","tmp","buttonText","buttonClasses","iconClasses","providers","defaultProvides","isDevelopment","append","renderFederatedlogin","map","key","href","make","classes","validPassword","validEmail","isInvalid","renderSignInWithEmail","setEmail","setPassword","saving","setSharedDevice","undefined","htmlFor","id","disabled","placeholder","type","value","onChange","$$event","target","onClick","checked","renderSignInEmailSent","renderForgotPassword","UserSessionNew","Props","match","useState","mapWithDefault","match$1","match$2","match$3","match$4","exit","exit$1","tmp$1","exit$2","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Api = require(\"../shared/Api.bs.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../shared/components/FaIcon.bs.js\");\nvar DomUtils = require(\"../shared/utils/DomUtils.bs.js\");\nvar EmailUtils = require(\"../shared/utils/EmailUtils.bs.js\");\nvar Json_decode = require(\"@glennsl/bs-json/src/Json_decode.bs.js\");\nvar OptionUtils = require(\"../shared/utils/OptionUtils.bs.js\");\nvar EmailSentIconSvg = require(\"./images/email-sent-icon.svg\");\nvar ResetPasswordIconSvg = require(\"./images/reset-password-icon.svg\");\nvar FederatedSignInIconSvg = require(\"./images/federated-sign-in-icon.svg\");\nvar ContinueWithEmailIconSvg = require(\"./images/continue-with-email-icon.svg\");\n\n((require(\"./UserSessionNew.css\")));\n\nvar federatedSignInIcon = FederatedSignInIconSvg.default;\n\nvar signInWithPasswordIcon = ContinueWithEmailIconSvg.default;\n\nvar signInEmailSentIcon = EmailSentIconSvg.default;\n\nvar forgotPasswordIcon = ResetPasswordIconSvg.default;\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleErrorCB(setSaving, param) {\n  return Curry._1(setSaving, (function (param) {\n                return false;\n              }));\n}\n\nfunction handleSignInWithPasswordCB(response) {\n  var path = Json_decode.field(\"path\", (function (param) {\n          return Json_decode.nullable(Json_decode.string, param);\n        }), response);\n  if (path !== null) {\n    return DomUtils.redirect(path);\n  } else {\n    return /* () */0;\n  }\n}\n\nfunction handleSignInWithEmailCB(setView, param) {\n  return Curry._1(setView, (function (param) {\n                return /* SignInEmailSent */2;\n              }));\n}\n\nfunction signInWithPassword(authenticityToken, email, password, setSaving, sharedDevice) {\n  var payload = { };\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"shared_device\"] = sharedDevice ? \"1\" : \"0\";\n  payload[\"password\"] = password;\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  return Api.create(\"/users/sign_in\", payload, handleSignInWithPasswordCB, (function (param) {\n                return Curry._1(setSaving, (function (param) {\n                              return false;\n                            }));\n              }));\n}\n\nfunction sendSignInEmail(authenticityToken, email, setView, setSaving, sharedDevice) {\n  var payload = { };\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"referer\"] = \"\";\n  payload[\"shared_device\"] = sharedDevice ? \"1\" : \"0\";\n  payload[\"username\"] = \"\";\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  return Api.create(\"/users/send_login_email\", payload, (function (param) {\n                return Curry._1(setView, (function (param) {\n                              return /* SignInEmailSent */2;\n                            }));\n              }), (function (param) {\n                return Curry._1(setSaving, (function (param) {\n                              return false;\n                            }));\n              }));\n}\n\nfunction sendResetPasswordEmail(authenticityToken, email, setView, setSaving) {\n  var payload = { };\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"email\"] = email;\n  payload[\"username\"] = \"\";\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  return Api.create(\"/users/send_reset_password_email\", payload, (function (param) {\n                return Curry._1(setView, (function (param) {\n                              return /* SignInEmailSent */2;\n                            }));\n              }), (function (param) {\n                return Curry._1(setSaving, (function (param) {\n                              return false;\n                            }));\n              }));\n}\n\nfunction renderIcon(view) {\n  var iconUrl;\n  switch (view) {\n    case /* FederatedSignIn */0 :\n        iconUrl = federatedSignInIcon;\n        break;\n    case /* SignInWithPassword */1 :\n        iconUrl = signInWithPasswordIcon;\n        break;\n    case /* SignInEmailSent */2 :\n        iconUrl = signInEmailSentIcon;\n        break;\n    case /* ForgotPassword */3 :\n        iconUrl = forgotPasswordIcon;\n        break;\n    \n  }\n  return React.createElement(\"img\", {\n              className: \"mx-auto w-32 sm:w-42\",\n              src: iconUrl\n            });\n}\n\nfunction headerText(view, schoolName) {\n  switch (view) {\n    case /* FederatedSignIn */0 :\n        return \"Sign in to \" + schoolName;\n    case /* SignInWithPassword */1 :\n        return \"Continue with email\";\n    case /* SignInEmailSent */2 :\n        return \"We've sent you a magic link!\";\n    case /* ForgotPassword */3 :\n        return \"Reset password\";\n    \n  }\n}\n\nfunction federatedLoginUrl(oauthHost, fqdn, provider) {\n  var tmp;\n  switch (provider) {\n    case /* Google */0 :\n        tmp = \"google\";\n        break;\n    case /* Facebook */1 :\n        tmp = \"facebook\";\n        break;\n    case /* Github */2 :\n        tmp = \"github\";\n        break;\n    case /* Developer */3 :\n        tmp = \"developer\";\n        break;\n    \n  }\n  return \"//\" + (oauthHost + (\"/oauth/\" + (tmp + (\"?fqdn=\" + fqdn))));\n}\n\nfunction buttonText(provider) {\n  var tmp;\n  switch (provider) {\n    case /* Google */0 :\n        tmp = \"with Google\";\n        break;\n    case /* Facebook */1 :\n        tmp = \"with Facebook\";\n        break;\n    case /* Github */2 :\n        tmp = \"with Github\";\n        break;\n    case /* Developer */3 :\n        tmp = \"as Developer\";\n        break;\n    \n  }\n  return \"Continue \" + tmp;\n}\n\nfunction buttonClasses(provider) {\n  var tmp;\n  switch (provider) {\n    case /* Google */0 :\n        tmp = \"federated-sigin-in__google-btn hover:bg-red-600 text-white\";\n        break;\n    case /* Facebook */1 :\n        tmp = \"federated-sigin-in__facebook-btn hover:bg-blue-800 text-white\";\n        break;\n    case /* Github */2 :\n        tmp = \"federated-sigin-in__github-btn hover:bg-black text-white\";\n        break;\n    case /* Developer */3 :\n        tmp = \"bg-green-100 border-green-400 text-green-800 hover:bg-green-200\";\n        break;\n    \n  }\n  return \"flex justify-center items-center px-3 py-2 leading-snug border border-transparent rounded-lg cursor-pointer font-semibold mt-4 w-full \" + tmp;\n}\n\nfunction iconClasses(provider) {\n  switch (provider) {\n    case /* Google */0 :\n        return \"fab fa-google\";\n    case /* Facebook */1 :\n        return \"fab fa-facebook-f mr-1\";\n    case /* Github */2 :\n        return \"fab fa-github\";\n    case /* Developer */3 :\n        return \"fas fa-laptop-code\";\n    \n  }\n}\n\nfunction providers(param) {\n  var defaultProvides = [\n    /* Google */0,\n    /* Facebook */1,\n    /* Github */2\n  ];\n  if (DomUtils.isDevelopment(/* () */0)) {\n    return $$Array.append([/* Developer */3], defaultProvides);\n  } else {\n    return defaultProvides;\n  }\n}\n\nfunction renderFederatedlogin(fqdn, oauthHost) {\n  return React.createElement(\"div\", {\n              className: \"flex flex-col pb-5 md:px-9 items-center max-w-sm mx-auto\"\n            }, $$Array.map((function (provider) {\n                    return React.createElement(\"a\", {\n                                key: buttonText(provider),\n                                className: buttonClasses(provider),\n                                href: federatedLoginUrl(oauthHost, fqdn, provider)\n                              }, React.createElement(\"span\", {\n                                    className: \"w-1/5 text-right text-lg\"\n                                  }, React.createElement(FaIcon.make, {\n                                        classes: iconClasses(provider)\n                                      })), React.createElement(\"span\", {\n                                    className: \"w-4/5 pl-3 text-left\"\n                                  }, buttonText(provider)));\n                  }), providers(/* () */0)));\n}\n\nfunction validPassword(password) {\n  return password !== \"\";\n}\n\nfunction validEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction renderSignInWithEmail(email, setEmail, password, setPassword, authenticityToken, setView, saving, setSaving, sharedDevice, setSharedDevice) {\n  return React.createElement(\"div\", {\n              className: \"pt-4 pb-5 md:px-9 items-center max-w-sm mx-auto\"\n            }, React.createElement(\"div\", undefined, React.createElement(\"label\", {\n                      className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n                      htmlFor: \"email\"\n                    }, \"Email Address\"), React.createElement(\"input\", {\n                      className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n                      id: \"email\",\n                      disabled: saving,\n                      placeholder: \"john@example.com\",\n                      type: \"text\",\n                      value: email,\n                      onChange: (function ($$event) {\n                          return Curry._1(setEmail, $$event.target.value);\n                        })\n                    })), React.createElement(\"div\", {\n                  className: \"mt-4\"\n                }, React.createElement(\"div\", {\n                      className: \"flex justify-between\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n                          htmlFor: \"password\"\n                        }, \"Password\"), React.createElement(\"button\", {\n                          className: \"text-primary-400 text-center text-xs font-semibold hover:text-primary-600 cursor-pointer whitespace-no-wrap hover:underline inline\",\n                          disabled: saving,\n                          onClick: (function (param) {\n                              if (saving) {\n                                return /* () */0;\n                              } else {\n                                return Curry._1(setView, (function (param) {\n                                              return /* ForgotPassword */3;\n                                            }));\n                              }\n                            })\n                        }, \"Set a New Password\")), React.createElement(\"input\", {\n                      className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n                      id: \"password\",\n                      disabled: saving,\n                      placeholder: \"Type your password\",\n                      type: \"password\",\n                      value: password,\n                      onChange: (function ($$event) {\n                          return Curry._1(setPassword, $$event.target.value);\n                        })\n                    })), React.createElement(\"div\", {\n                  className: \"flex justify-between items-center leading-snug mt-4 flex-col flex-col-reverse sm:flex-row\"\n                }, React.createElement(\"div\", {\n                      className: \"flex items-strecth text-gray-700 hover:text-gray-900\"\n                    }, React.createElement(\"input\", {\n                          id: \"sharedDevice\",\n                          checked: sharedDevice,\n                          disabled: saving,\n                          type: \"checkbox\",\n                          onChange: (function (param) {\n                              return Curry._1(setSharedDevice, (function (sharedDevice) {\n                                            return !sharedDevice;\n                                          }));\n                            })\n                        }), React.createElement(\"label\", {\n                          className: \"block pl-2 font-semibold cursor-pointer text-xs select-none whitespace-no-wrap\",\n                          htmlFor: \"sharedDevice\"\n                        }, \"Are you using a shared device?\"))), React.createElement(\"div\", {\n                  className: \"mt-6\"\n                }, password !== \"\" ? React.createElement(\"button\", {\n                        className: \"btn btn-success btn-large text-center w-full\",\n                        disabled: saving || EmailUtils.isInvalid(false, email),\n                        onClick: (function (param) {\n                            return signInWithPassword(authenticityToken, email, password, setSaving, sharedDevice);\n                          })\n                      }, saving ? React.createElement(FaIcon.make, {\n                              classes: \"fas fa-spinner fa-spin mr-2\"\n                            }) : null, React.createElement(\"span\", undefined, saving ? \"Signing in\" : \"Sign in with password\")) : React.createElement(\"button\", {\n                        className: \"btn btn-primary btn-large text-center w-full\",\n                        disabled: saving || EmailUtils.isInvalid(false, email),\n                        onClick: (function (param) {\n                            return sendSignInEmail(authenticityToken, email, setView, setSaving, sharedDevice);\n                          })\n                      }, saving ? React.createElement(FaIcon.make, {\n                              classes: \"fas fa-spinner fa-spin mr-2\"\n                            }) : null, React.createElement(\"span\", undefined, saving ? \"Signing in\" : \"Email me a link to sign in\"))));\n}\n\nfunction renderSignInEmailSent(param) {\n  return React.createElement(\"div\", {\n              className: \"max-w-sm mx-auto\"\n            }, React.createElement(\"p\", {\n                  className: \"mt-4 text-center\"\n                }, \"It should reach you in less than a minute. Click the link in the email, and you'll be signed in.\"));\n}\n\nfunction renderForgotPassword(authenticityToken, email, saving, setEmail, setSaving, setView) {\n  return React.createElement(\"div\", {\n              className: \"max-w-sm mx-auto md:px-9 pb-4\"\n            }, React.createElement(\"div\", {\n                  className: \"text-sm mt-2 text-center pb-3\"\n                }, \"Enter your email for password recovery\"), React.createElement(\"label\", {\n                  className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold\",\n                  htmlFor: \"email\"\n                }, \"Email\"), React.createElement(\"input\", {\n                  className: \"appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n                  id: \"email\",\n                  disabled: saving,\n                  placeholder: \"john@example.com\",\n                  type: \"text\",\n                  value: email,\n                  onChange: (function ($$event) {\n                      return Curry._1(setEmail, $$event.target.value);\n                    })\n                }), React.createElement(\"button\", {\n                  className: \"btn btn-primary btn-large text-center w-full mt-4 mr-2\",\n                  disabled: saving || EmailUtils.isInvalid(false, email),\n                  onClick: (function (param) {\n                      return sendResetPasswordEmail(authenticityToken, email, setView, setSaving);\n                    })\n                }, saving ? React.createElement(FaIcon.make, {\n                        classes: \"fas fa-spinner fa-spin mr-2\"\n                      }) : null, React.createElement(\"span\", undefined, saving ? \"Dispatching email\" : \"Send Email\")));\n}\n\nfunction UserSessionNew(Props) {\n  var schoolName = Props.schoolName;\n  var authenticityToken = Props.authenticityToken;\n  var fqdn = Props.fqdn;\n  var oauthHost = Props.oauthHost;\n  var match = React.useState((function () {\n          return OptionUtils.mapWithDefault((function (param) {\n                        return /* FederatedSignIn */0;\n                      }), /* SignInWithPassword */1, oauthHost);\n        }));\n  var setView = match[1];\n  var view = match[0];\n  var match$1 = React.useState((function () {\n          return \"\";\n        }));\n  var setEmail = match$1[1];\n  var email = match$1[0];\n  var match$2 = React.useState((function () {\n          return \"\";\n        }));\n  var match$3 = React.useState((function () {\n          return false;\n        }));\n  var match$4 = React.useState((function () {\n          return false;\n        }));\n  var setSaving = match$4[1];\n  var saving = match$4[0];\n  var tmp;\n  var exit = 0;\n  var exit$1 = 0;\n  if (oauthHost !== undefined) {\n    if (view !== 0) {\n      exit$1 = 2;\n    } else {\n      tmp = renderFederatedlogin(fqdn, oauthHost);\n    }\n  } else if (view !== 0) {\n    exit$1 = 2;\n  } else {\n    exit = 1;\n  }\n  if (exit$1 === 2) {\n    switch (view - 1 | 0) {\n      case /* FederatedSignIn */0 :\n          exit = 1;\n          break;\n      case /* SignInWithPassword */1 :\n          tmp = renderSignInEmailSent(/* () */0);\n          break;\n      case /* SignInEmailSent */2 :\n          tmp = renderForgotPassword(authenticityToken, email, saving, setEmail, setSaving, setView);\n          break;\n      \n    }\n  }\n  if (exit === 1) {\n    tmp = renderSignInWithEmail(email, setEmail, match$2[0], match$2[1], authenticityToken, setView, saving, setSaving, match$3[0], match$3[1]);\n  }\n  var tmp$1;\n  var exit$2 = 0;\n  if (view >= 3) {\n    exit$2 = 1;\n  } else {\n    switch (view) {\n      case /* FederatedSignIn */0 :\n          tmp$1 = React.createElement(\"div\", {\n                className: \"max-w-sm mx-auto md:px-9\"\n              }, React.createElement(\"span\", {\n                    className: \"federated-signin-in__seperator block relative z-10 text-center text-xs text-gray-600 font-semibold\"\n                  }, React.createElement(\"span\", {\n                        className: \"bg-white px-2\"\n                      }, \"OR\")), React.createElement(\"button\", {\n                    className: \"flex justify-center items-center px-3 py-2 leading-snug border border-gray-400 text-primary-500 hover:bg-gray-100 hover:border-primary-500 focus:bg-gray-200 focus::border-primary-500 focus:outline-none rounded-lg cursor-pointer font-semibold mt-4 w-full\",\n                    disabled: saving,\n                    onClick: (function (param) {\n                        return Curry._1(setView, (function (param) {\n                                      return /* SignInWithPassword */1;\n                                    }));\n                      })\n                  }, React.createElement(\"span\", {\n                        className: \"w-1/5 text-right text-lg\"\n                      }, React.createElement(FaIcon.make, {\n                            classes: \"fas fa-envelope\"\n                          })), React.createElement(\"span\", {\n                        className: \"w-4/5 pl-3 text-left\"\n                      }, \"Continue with email\")));\n          break;\n      case /* SignInWithPassword */1 :\n          exit$2 = 1;\n          break;\n      case /* SignInEmailSent */2 :\n          tmp$1 = null;\n          break;\n      \n    }\n  }\n  if (exit$2 === 1) {\n    tmp$1 = oauthHost !== undefined ? React.createElement(\"div\", {\n            className: \"max-w-sm mx-auto md:px-9\"\n          }, React.createElement(\"button\", {\n                className: \"w-full p-3 text-primary-500 leading-snug rounded-lg underline cursor-pointer text-sm text-center font-semibold hover:bg-gray-200 focus:bg-gray-200 focus:outline-none\",\n                disabled: saving,\n                onClick: (function (param) {\n                    return Curry._1(setView, (function (param) {\n                                  return /* FederatedSignIn */0;\n                                }));\n                  })\n              }, \"Sign in with Google, Facebook, or Github\")) : null;\n  }\n  return React.createElement(\"div\", {\n              className: \"bg-gray-100 sm:py-10\"\n            }, React.createElement(\"div\", {\n                  className: \"container mx-auto max-w-lg px-4 py-6 sm:py-8 bg-white rounded-lg shadow\"\n                }, renderIcon(view), React.createElement(\"div\", {\n                      className: \"max-w-sm mx-auto text-lg sm:text-2xl font-bold text-center mt-4\"\n                    }, headerText(view, schoolName)), tmp, tmp$1));\n}\n\nvar make = UserSessionNew;\n\nexports.federatedSignInIcon = federatedSignInIcon;\nexports.signInWithPasswordIcon = signInWithPasswordIcon;\nexports.signInEmailSentIcon = signInEmailSentIcon;\nexports.forgotPasswordIcon = forgotPasswordIcon;\nexports.str = str;\nexports.handleErrorCB = handleErrorCB;\nexports.handleSignInWithPasswordCB = handleSignInWithPasswordCB;\nexports.handleSignInWithEmailCB = handleSignInWithEmailCB;\nexports.signInWithPassword = signInWithPassword;\nexports.sendSignInEmail = sendSignInEmail;\nexports.sendResetPasswordEmail = sendResetPasswordEmail;\nexports.renderIcon = renderIcon;\nexports.headerText = headerText;\nexports.federatedLoginUrl = federatedLoginUrl;\nexports.buttonText = buttonText;\nexports.buttonClasses = buttonClasses;\nexports.iconClasses = iconClasses;\nexports.providers = providers;\nexports.renderFederatedlogin = renderFederatedlogin;\nexports.validPassword = validPassword;\nexports.validEmail = validEmail;\nexports.renderSignInWithEmail = renderSignInWithEmail;\nexports.renderSignInEmailSent = renderSignInEmailSent;\nexports.renderForgotPassword = renderForgotPassword;\nexports.make = make;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}