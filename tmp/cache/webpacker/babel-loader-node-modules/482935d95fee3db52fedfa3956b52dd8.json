{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Sorter = require(\"../../../shared/components/Sorter.bs.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Caml_obj = require(\"bs-platform/lib/js/caml_obj.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\n\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar LoadingSpinner = require(\"../../../shared/components/LoadingSpinner.bs.js\");\n\nvar SkeletonLoading = require(\"../../../shared/components/SkeletonLoading.bs.js\");\n\nvar MultiselectDropdown = require(\"../../../packages/multiselect-dropdown/src/components/MultiselectDropdown.bs.js\");\n\nvar CoursesReport__Level = require(\"../types/CoursesReport__Level.bs.js\");\n\nvar CoursesReport__Submission = require(\"../types/CoursesReport__Submission.bs.js\");\n\nvar CoursesReport__Submissions = require(\"../types/CoursesReport__Submissions.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar sortBy = {\n  criterion: \"Submitted At\",\n  criterionType:\n  /* Number */\n  -703661335\n};\n\nfunction statusString(targetStatus) {\n  if (targetStatus !== 479410653) {\n    if (targetStatus >= 583419792) {\n      return \"Passed\";\n    } else {\n      return \"Submitted\";\n    }\n  } else {\n    return \"Failed\";\n  }\n}\n\nvar ppx_printed_query = \"query StudentsReportSubmissionsQuery($studentId: ID!, $after: String, $status: SubmissionReviewStatus, $levelId: ID, $sortDirection: SortDirection!)  {\\nstudentSubmissions(studentId: $studentId, after: $after, first: 20, status: $status, levelId: $levelId, sortDirection: $sortDirection)  {\\nnodes  {\\nid  \\ncreatedAt  \\nlevelId  \\ntargetId  \\npassedAt  \\ntitle  \\nevaluatorId  \\nstudentIds  \\nteamTarget  \\n}\\n\\npageInfo  {\\nhasNextPage  \\nendCursor  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"studentSubmissions\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"nodes\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Js_option.getExn(Js_json.decodeArray(value$3)).map(function (value) {\n        var match = Js_json.decodeNull(value);\n\n        if (match !== undefined) {\n          return;\n        } else {\n          var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n          var match$1 = Js_dict.get(value$1, \"id\");\n          var tmp;\n\n          if (match$1 !== undefined) {\n            var value$2 = Caml_option.valFromOption(match$1);\n            var match$2 = Js_json.decodeString(value$2);\n            tmp = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n          } else {\n            tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type StudentSubmission is missing\");\n          }\n\n          var match$3 = Js_dict.get(value$1, \"createdAt\");\n          var match$4 = Js_dict.get(value$1, \"levelId\");\n          var tmp$1;\n\n          if (match$4 !== undefined) {\n            var value$3 = Caml_option.valFromOption(match$4);\n            var match$5 = Js_json.decodeString(value$3);\n            tmp$1 = match$5 !== undefined ? match$5 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n          } else {\n            tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field levelId on type StudentSubmission is missing\");\n          }\n\n          var match$6 = Js_dict.get(value$1, \"targetId\");\n          var tmp$2;\n\n          if (match$6 !== undefined) {\n            var value$4 = Caml_option.valFromOption(match$6);\n            var match$7 = Js_json.decodeString(value$4);\n            tmp$2 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n          } else {\n            tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field targetId on type StudentSubmission is missing\");\n          }\n\n          var match$8 = Js_dict.get(value$1, \"passedAt\");\n          var tmp$3;\n\n          if (match$8 !== undefined) {\n            var value$5 = Caml_option.valFromOption(match$8);\n            var match$9 = Js_json.decodeNull(value$5);\n            tmp$3 = match$9 !== undefined ? undefined : Caml_option.some(value$5);\n          } else {\n            tmp$3 = undefined;\n          }\n\n          var match$10 = Js_dict.get(value$1, \"title\");\n          var tmp$4;\n\n          if (match$10 !== undefined) {\n            var value$6 = Caml_option.valFromOption(match$10);\n            var match$11 = Js_json.decodeString(value$6);\n            tmp$4 = match$11 !== undefined ? match$11 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n          } else {\n            tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field title on type StudentSubmission is missing\");\n          }\n\n          var match$12 = Js_dict.get(value$1, \"evaluatorId\");\n          var tmp$5;\n\n          if (match$12 !== undefined) {\n            var value$7 = Caml_option.valFromOption(match$12);\n            var match$13 = Js_json.decodeNull(value$7);\n\n            if (match$13 !== undefined) {\n              tmp$5 = undefined;\n            } else {\n              var match$14 = Js_json.decodeString(value$7);\n              tmp$5 = match$14 !== undefined ? match$14 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$7));\n            }\n          } else {\n            tmp$5 = undefined;\n          }\n\n          var match$15 = Js_dict.get(value$1, \"studentIds\");\n          var match$16 = Js_dict.get(value$1, \"teamTarget\");\n          var tmp$6;\n\n          if (match$16 !== undefined) {\n            var value$8 = Caml_option.valFromOption(match$16);\n            var match$17 = Js_json.decodeBoolean(value$8);\n            tmp$6 = match$17 !== undefined ? match$17 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$8));\n          } else {\n            tmp$6 = Js_exn.raiseError(\"graphql_ppx: Field teamTarget on type StudentSubmission is missing\");\n          }\n\n          return {\n            id: tmp,\n            createdAt: match$3 !== undefined ? Caml_option.valFromOption(match$3) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type StudentSubmission is missing\"),\n            levelId: tmp$1,\n            targetId: tmp$2,\n            passedAt: tmp$3,\n            title: tmp$4,\n            evaluatorId: tmp$5,\n            studentIds: match$15 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$15))).map(function (value) {\n              var match = Js_json.decodeString(value);\n\n              if (match !== undefined) {\n                return match;\n              } else {\n                return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n              }\n            }) : Js_exn.raiseError(\"graphql_ppx: Field studentIds on type StudentSubmission is missing\"),\n            teamTarget: tmp$6\n          };\n        }\n      });\n    } else {\n      tmp$1 = undefined;\n    }\n\n    var match$3 = Js_dict.get(value$2, \"pageInfo\");\n    var tmp$2;\n\n    if (match$3 !== undefined) {\n      var value$4 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match$3)));\n      var match$4 = Js_dict.get(value$4, \"hasNextPage\");\n      var tmp$3;\n\n      if (match$4 !== undefined) {\n        var value$5 = Caml_option.valFromOption(match$4);\n        var match$5 = Js_json.decodeBoolean(value$5);\n        tmp$3 = match$5 !== undefined ? match$5 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$5));\n      } else {\n        tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field hasNextPage on type PageInfo is missing\");\n      }\n\n      var match$6 = Js_dict.get(value$4, \"endCursor\");\n      var tmp$4;\n\n      if (match$6 !== undefined) {\n        var value$6 = Caml_option.valFromOption(match$6);\n        var match$7 = Js_json.decodeNull(value$6);\n\n        if (match$7 !== undefined) {\n          tmp$4 = undefined;\n        } else {\n          var match$8 = Js_json.decodeString(value$6);\n          tmp$4 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n        }\n      } else {\n        tmp$4 = undefined;\n      }\n\n      tmp$2 = {\n        hasNextPage: tmp$3,\n        endCursor: tmp$4\n      };\n    } else {\n      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field pageInfo on type StudentSubmissionConnection is missing\");\n    }\n\n    tmp = {\n      nodes: tmp$1,\n      pageInfo: tmp$2\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field studentSubmissions on type Query is missing\");\n  }\n\n  return {\n    studentSubmissions: tmp\n  };\n}\n\nfunction json_of_SubmissionReviewStatus(value) {\n  if (value !== 479410653) {\n    if (value >= 583419792) {\n      return \"Passed\";\n    } else {\n      return \"Submitted\";\n    }\n  } else {\n    return \"Failed\";\n  }\n}\n\nfunction json_of_SortDirection(value) {\n  if (value >= 235215128) {\n    return \"Descending\";\n  } else {\n    return \"Ascending\";\n  }\n}\n\nfunction make(studentId, after, status, levelId, sortDirection, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"studentId\", studentId],\n    /* tuple */\n    [\"after\", after !== undefined ? after : null],\n    /* tuple */\n    [\"status\", status !== undefined ? json_of_SubmissionReviewStatus(status) : null],\n    /* tuple */\n    [\"levelId\", levelId !== undefined ? levelId : null],\n    /* tuple */\n    [\"sortDirection\", json_of_SortDirection(sortDirection)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var studentId = variables.studentId;\n  var after = variables.after;\n  var status = variables.status;\n  var levelId = variables.levelId;\n  var sortDirection = variables.sortDirection;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"studentId\", studentId],\n    /* tuple */\n    [\"after\", after !== undefined ? after : null],\n    /* tuple */\n    [\"status\", status !== undefined ? json_of_SubmissionReviewStatus(status) : null],\n    /* tuple */\n    [\"levelId\", levelId !== undefined ? levelId : null],\n    /* tuple */\n    [\"sortDirection\", json_of_SortDirection(sortDirection)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(studentId, after, status, levelId, sortDirection, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"studentId\", studentId],\n  /* tuple */\n  [\"after\", after !== undefined ? after : null],\n  /* tuple */\n  [\"status\", status !== undefined ? json_of_SubmissionReviewStatus(status) : null],\n  /* tuple */\n  [\"levelId\", levelId !== undefined ? levelId : null],\n  /* tuple */\n  [\"sortDirection\", json_of_SortDirection(sortDirection)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, studentId, after, status, levelId, sortDirection, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"studentId\", studentId],\n  /* tuple */\n  [\"after\", after !== undefined ? after : null],\n  /* tuple */\n  [\"status\", status !== undefined ? json_of_SubmissionReviewStatus(status) : null],\n  /* tuple */\n  [\"levelId\", levelId !== undefined ? levelId : null],\n  /* tuple */\n  [\"sortDirection\", json_of_SortDirection(sortDirection)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar StudentSubmissionsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  json_of_SubmissionReviewStatus: json_of_SubmissionReviewStatus,\n  json_of_SortDirection: json_of_SortDirection,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction label(t) {\n  if (t.tag) {\n    return \"Status\";\n  } else {\n    return \"Level \" + String(CoursesReport__Level.number(t[0]));\n  }\n}\n\nfunction value(t) {\n  if (t.tag) {\n    return statusString(t[0]);\n  } else {\n    return CoursesReport__Level.name(t[0]);\n  }\n}\n\nfunction searchString(t) {\n  if (t.tag) {\n    return \"status \" + statusString(t[0]);\n  } else {\n    var level = t[0];\n    return \"level \" + (String(CoursesReport__Level.number(level)) + (\" \" + CoursesReport__Level.name(level)));\n  }\n}\n\nfunction color(t) {\n  if (t.tag) {\n    var status = t[0];\n\n    if (status !== 479410653) {\n      if (status >= 583419792) {\n        return \"green\";\n      } else {\n        return \"blue\";\n      }\n    } else {\n      return \"red\";\n    }\n  } else {\n    return \"gray\";\n  }\n}\n\nfunction level(level$1) {\n  return (\n    /* Level */\n    Block.__(0, [level$1])\n  );\n}\n\nfunction targetStatus(targetStatus$1) {\n  return (\n    /* TargetStatus */\n    Block.__(1, [targetStatus$1])\n  );\n}\n\nvar Selectable = {\n  label: label,\n  value: value,\n  searchString: searchString,\n  color: color,\n  level: level,\n  targetStatus: targetStatus\n};\nvar Multiselect = MultiselectDropdown.Make(Selectable);\n\nfunction unselected(levels, selectedLevel, selectedStatus) {\n  var unselectedLevels = $$Array.map(level, levels.filter(function (level) {\n    return CoursesReport__Level.number(level) !== 0;\n  }).filter(function (level) {\n    return OptionUtils.mapWithDefault(function (selectedLevel) {\n      return CoursesReport__Level.id(level) !== CoursesReport__Level.id(selectedLevel);\n    }, true, selectedLevel);\n  }));\n  var unselectedStatus = $$Array.map(targetStatus, [\n  /* Submitted */\n  -896990053,\n  /* Failed */\n  479410653,\n  /* Passed */\n  583419792].filter(function (status) {\n    return OptionUtils.mapWithDefault(function (selectedStatus) {\n      return status !== selectedStatus;\n    }, true, selectedStatus);\n  }));\n  return $$Array.append(unselectedStatus, unselectedLevels);\n}\n\nfunction selected(selectedLevel, selectedStatus) {\n  var selectedLevel$1 = OptionUtils.mapWithDefault(function (selectedLevel) {\n    return [\n    /* Level */\n    Block.__(0, [selectedLevel])];\n  }, [], selectedLevel);\n  var selectedStatus$1 = OptionUtils.mapWithDefault(function (selectedStatus) {\n    return [\n    /* TargetStatus */\n    Block.__(1, [selectedStatus])];\n  }, [], selectedStatus);\n  return $$Array.append(selectedStatus$1, selectedLevel$1);\n}\n\nfunction onSelectFilter(send, updateSelectedLevelCB, updateSelectedStatusCB, selectable) {\n  Curry._1(send,\n  /* UpdateFilterString */\n  [\"\"]);\n\n  if (selectable.tag) {\n    return Curry._1(updateSelectedStatusCB, selectable[0]);\n  } else {\n    return Curry._1(updateSelectedLevelCB, selectable[0]);\n  }\n}\n\nfunction onDeselectFilter(updateSelectedLevelCB, updateSelectedStatusCB, selectable) {\n  if (selectable.tag) {\n    return Curry._1(updateSelectedStatusCB, undefined);\n  } else {\n    return Curry._1(updateSelectedLevelCB, undefined);\n  }\n}\n\nfunction criterion(t) {\n  return t.criterion;\n}\n\nfunction criterionType(t) {\n  return t.criterionType;\n}\n\nvar Sortable = {\n  criterion: criterion,\n  criterionType: criterionType\n};\nvar SubmissionsSorter = Sorter.Make(Sortable);\n\nfunction submissionsSorter(sortDirection, updateSortDirectionCB) {\n  var criteria = [sortBy];\n  return React.createElement(\"div\", {\n    \"aria-label\": \"Change submissions sorting\",\n    className: \"flex-shrink-0 mt-3 md:mt-0 md:ml-2\"\n  }, React.createElement(\"label\", {\n    className: \"block text-tiny font-semibold uppercase\"\n  }, \"Sort by:\"), React.createElement(SubmissionsSorter.make, {\n    criteria: criteria,\n    selectedCriterion: sortBy,\n    direction: sortDirection,\n    onDirectionChange: Curry.__1(updateSortDirectionCB),\n    onCriterionChange: function onCriterionChange(param) {\n      return (\n        /* () */\n        0\n      );\n    }\n  }));\n}\n\nfunction filterPlaceholder(selectedLevel, selectedStatus) {\n  if (selectedLevel !== undefined) {\n    if (selectedStatus !== undefined) {\n      return \"Filter by another level\";\n    } else {\n      return \"Filter by another level, or by status\";\n    }\n  } else if (selectedStatus !== undefined) {\n    return \"Filter by level\";\n  } else {\n    return \"Filter by level, or by status\";\n  }\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* BeginLoadingMore */\n      0:\n        return {\n          loading:\n          /* LoadingMore */\n          2,\n          filterString: state.filterString\n        };\n\n      case\n      /* BeginReloading */\n      1:\n        return {\n          loading:\n          /* Reloading */\n          1,\n          filterString: state.filterString\n        };\n\n      case\n      /* CompletedLoading */\n      2:\n        return {\n          loading:\n          /* Loaded */\n          0,\n          filterString: state.filterString\n        };\n    }\n  } else {\n    return {\n      loading: state.loading,\n      filterString: action[0]\n    };\n  }\n}\n\nfunction updateStudentSubmissions(send, updateSubmissionsCB, endCursor, hasNextPage, submissions, selectedLevel, selectedStatus, sortDirection, nodes) {\n  var updatedSubmissions = $$Array.append(ArrayUtils.flatten(nodes !== undefined ? CoursesReport__Submission.makeFromJs(nodes) : []), submissions);\n  var filter = CoursesReport__Submissions.makeFilter(selectedLevel, selectedStatus);\n  var submissionsData = CoursesReport__Submissions.make(updatedSubmissions, filter, sortDirection);\n  var submissionsData$1 = hasNextPage && endCursor !== undefined ?\n  /* PartiallyLoaded */\n  Block.__(0, [submissionsData, endCursor]) :\n  /* FullyLoaded */\n  Block.__(1, [submissionsData]);\n\n  Curry._1(updateSubmissionsCB, submissionsData$1);\n\n  return Curry._1(send,\n  /* CompletedLoading */\n  2);\n}\n\nfunction getStudentSubmissions(studentId, cursor, send, level, status, sortDirection, submissions, updateSubmissionsCB) {\n  var levelId = Belt_Option.flatMap(level, function (level) {\n    return CoursesReport__Level.id(level);\n  });\n  var status$1 = Belt_Option.flatMap(status, function (status) {\n    return status;\n  });\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(cursor !== undefined ? make(studentId, cursor, status$1, levelId, sortDirection,\n  /* () */\n  0) : make(studentId, undefined, status$1, levelId, sortDirection,\n  /* () */\n  0)).then(function (response) {\n    updateStudentSubmissions(send, updateSubmissionsCB, response.studentSubmissions.pageInfo.endCursor, response.studentSubmissions.pageInfo.hasNextPage, submissions, level, status$1, sortDirection, response.studentSubmissions.nodes);\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction showSubmissionStatus(submission) {\n  var match = CoursesReport__Submission.status(submission);\n\n  if (match !== 479410653) {\n    if (match >= 583419792) {\n      return React.createElement(\"div\", {\n        className: \"bg-green-100 border border-green-500 flex-shrink-0 leading-normal text-green-800 font-semibold px-3 py-px rounded\"\n      }, \"Passed\");\n    } else {\n      return React.createElement(\"div\", {\n        className: \"bg-blue-100 border border-blue-500 flex-shrink-0 leading-normal text-blue-800 font-semibold px-3 py-px rounded\"\n      }, \"Submitted\");\n    }\n  } else {\n    return React.createElement(\"div\", {\n      className: \"bg-red-100 border border-red-500 flex-shrink-0 leading-normal text-red-800 font-semibold px-3 py-px rounded\"\n    }, \"Failed\");\n  }\n}\n\nfunction submissionCardClasses(submission) {\n  var match = CoursesReport__Submission.status(submission);\n  return \"flex flex-col md:flex-row items-start md:items-center justify-between bg-white border-l-3 p-3 md:py-6 md:px-5 mt-4 cursor-pointer rounded-r-lg shadow hover:border-primary-500 hover:text-primary-500 hover:shadow-md \" + (match !== 479410653 ? match >= 583419792 ? \"border-green-500\" : \"border-blue-500\" : \"border-red-500\");\n}\n\nfunction showSubmission(submissions, levels, teamStudentIds) {\n  return React.createElement(\"div\", undefined, $$Array.map(function (submission) {\n    var match = CoursesReport__Submission.targetRole(submission);\n    return React.createElement(\"div\", {\n      key: CoursesReport__Submission.id(submission),\n      \"aria-label\": \"student-submission-\" + CoursesReport__Submission.id(submission)\n    }, React.createElement(\"a\", {\n      className: \"block relative z-10\",\n      href: \"/targets/\" + CoursesReport__Submission.targetId(submission),\n      target: \"_blank\"\n    }, React.createElement(\"div\", {\n      key: CoursesReport__Submission.id(submission),\n      \"aria-label\": \"student-submission-card-\" + CoursesReport__Submission.id(submission),\n      className: submissionCardClasses(submission)\n    }, React.createElement(\"div\", {\n      className: \"w-full md:w-3/4\"\n    }, React.createElement(\"div\", {\n      className: \"block text-sm md:pr-2\"\n    }, React.createElement(\"span\", {\n      className: \"bg-gray-300 text-xs font-semibold px-2 py-px rounded\"\n    }, CoursesReport__Level.levelLabel(levels, CoursesReport__Submission.levelId(submission))), React.createElement(\"span\", {\n      className: \"ml-2 font-semibold text-base\"\n    }, CoursesReport__Submission.title(submission))), React.createElement(\"div\", {\n      className: \"mt-1 ml-px text-xs text-gray-900\"\n    }, React.createElement(\"span\", {\n      className: \"ml-1\"\n    }, \"Submitted on \" + CoursesReport__Submission.createdAtPretty(submission)))), React.createElement(\"div\", {\n      className: \"w-auto md:w-1/4 text-xs flex justify-end mt-2 md:mt-0\"\n    }, showSubmissionStatus(submission)))), match && !Caml_obj.caml_equal(teamStudentIds, match[0]) ? React.createElement(\"div\", {\n      \"aria-label\": \"Team change notice for submission \" + CoursesReport__Submission.id(submission),\n      className: \"w-full text-xs rounded-b bg-indigo-100 text-indigo-700 px-4 pt-3 pb-2 -mt-1 flex flex-1 justify-between items-center\"\n    }, React.createElement(\"div\", {\n      className: \"flex flex-1 justify-start items-start pr-8\"\n    }, React.createElement(FaIcon.make, {\n      classes: \"fas fa-exclamation-triangle text-sm md:text-base mt-1\"\n    }), React.createElement(\"div\", {\n      className: \"inline-block pl-3\"\n    }, \"This submission is not considered towards its target's completion; it was a \", React.createElement(\"span\", {\n      className: \"italic\"\n    }, \"team\"), \" target, and your team changed after you made this submission.\")), React.createElement(\"a\", {\n      className: \"flex-shrink-0 px-2 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-200 hover:text-indigo-800 rounded\",\n      href: \"/submissions/\" + CoursesReport__Submission.id(submission)\n    }, React.createElement(\"span\", {\n      className: \"hidden md:inline\"\n    }, \"View Submission\"), React.createElement(FaIcon.make, {\n      classes: \"fas fa-arrow-right ml-2\"\n    }))) : null);\n  }, submissions));\n}\n\nfunction showSubmissions(submissions, levels, teamStudentIds) {\n  if (ArrayUtils.isEmpty(submissions)) {\n    return React.createElement(\"div\", {\n      className: \"course-review__reviewed-empty text-lg font-semibold text-center py-4\"\n    }, React.createElement(\"h5\", {\n      className: \"py-4 mt-4 bg-gray-200 text-gray-800 font-semibold\"\n    }, \"No submissions to show \"));\n  } else {\n    return showSubmission(submissions, levels, teamStudentIds);\n  }\n}\n\nfunction CoursesReport__SubmissionsList(Props) {\n  var studentId = Props.studentId;\n  var levels = Props.levels;\n  var submissions = Props.submissions;\n  var updateSubmissionsCB = Props.updateSubmissionsCB;\n  var teamStudentIds = Props.teamStudentIds;\n  var selectedLevel = Props.selectedLevel;\n  var selectedStatus = Props.selectedStatus;\n  var sortDirection = Props.sortDirection;\n  var updateSelectedLevelCB = Props.updateSelectedLevelCB;\n  var updateSelectedStatusCB = Props.updateSelectedStatusCB;\n  var updateSortDirectionCB = Props.updateSortDirectionCB;\n  var match = React.useReducer(reducer, {\n    loading:\n    /* Loaded */\n    0,\n    filterString: \"\"\n  });\n  var send = match[1];\n  var state = match[0];\n  React.useEffect(function (param) {\n    if (CoursesReport__Submissions.needsReloading(selectedLevel, selectedStatus, sortDirection, submissions)) {\n      Curry._1(send,\n      /* BeginReloading */\n      1);\n\n      getStudentSubmissions(studentId, undefined, send, selectedLevel, selectedStatus, sortDirection, [], updateSubmissionsCB);\n    }\n\n    return;\n  },\n  /* tuple */\n  [selectedLevel, selectedStatus, sortDirection]);\n  var tmp;\n\n  if (typeof submissions === \"number\") {\n    tmp = SkeletonLoading.multiple(3, SkeletonLoading.card(undefined,\n    /* () */\n    0));\n  } else if (submissions.tag) {\n    tmp = showSubmissions(submissions[0].submissions, levels, teamStudentIds);\n  } else {\n    var cursor = submissions[1];\n    var submissions$1 = submissions[0].submissions;\n    var match$1 = state.loading;\n    var tmp$1;\n\n    switch (match$1) {\n      case\n      /* Loaded */\n      0:\n        tmp$1 = React.createElement(\"button\", {\n          className: \"btn btn-primary-ghost cursor-pointer w-full mt-4\",\n          onClick: function onClick(param) {\n            Curry._1(send,\n            /* BeginLoadingMore */\n            0);\n\n            return getStudentSubmissions(studentId, cursor, send, selectedLevel, selectedStatus, sortDirection, submissions$1, updateSubmissionsCB);\n          }\n        }, \"Load More...\");\n        break;\n\n      case\n      /* Reloading */\n      1:\n        tmp$1 = null;\n        break;\n\n      case\n      /* LoadingMore */\n      2:\n        tmp$1 = SkeletonLoading.multiple(3, SkeletonLoading.card(undefined,\n        /* () */\n        0));\n        break;\n    }\n\n    tmp = React.createElement(\"div\", undefined, showSubmissions(submissions$1, levels, teamStudentIds), tmp$1);\n  }\n\n  var tmp$2;\n\n  if (typeof submissions === \"number\") {\n    tmp$2 = null;\n  } else {\n    var match$2 = state.loading;\n    var loading = match$2 === 1;\n    tmp$2 = React.createElement(LoadingSpinner.make, {\n      loading: loading\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto\"\n  }, React.createElement(\"div\", {\n    className: \"md:flex w-full items-start pb-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex-1\"\n  }, React.createElement(\"label\", {\n    className: \"block text-tiny font-semibold uppercase\"\n  }, \"Filter by:\"), React.createElement(Multiselect.make, {\n    id: \"filter\",\n    placeholder: filterPlaceholder(selectedLevel, selectedStatus),\n    onChange: function onChange(filterString) {\n      return Curry._1(send,\n      /* UpdateFilterString */\n      [filterString]);\n    },\n    value: state.filterString,\n    unselected: unselected(levels, selectedLevel, selectedStatus),\n    selected: selected(selectedLevel, selectedStatus),\n    onSelect: function onSelect(param) {\n      return onSelectFilter(send, updateSelectedLevelCB, updateSelectedStatusCB, param);\n    },\n    onDeselect: function onDeselect(param) {\n      return onDeselectFilter(updateSelectedLevelCB, updateSelectedStatusCB, param);\n    }\n  })), submissionsSorter(sortDirection, updateSortDirectionCB)), React.createElement(\"div\", {\n    \"aria-label\": \"student-submissions\"\n  }, tmp), tmp$2);\n}\n\nvar make$1 = CoursesReport__SubmissionsList;\nexports.str = str;\nexports.sortBy = sortBy;\nexports.statusString = statusString;\nexports.StudentSubmissionsQuery = StudentSubmissionsQuery;\nexports.Selectable = Selectable;\nexports.Multiselect = Multiselect;\nexports.unselected = unselected;\nexports.selected = selected;\nexports.onSelectFilter = onSelectFilter;\nexports.onDeselectFilter = onDeselectFilter;\nexports.Sortable = Sortable;\nexports.SubmissionsSorter = SubmissionsSorter;\nexports.submissionsSorter = submissionsSorter;\nexports.filterPlaceholder = filterPlaceholder;\nexports.reducer = reducer;\nexports.updateStudentSubmissions = updateStudentSubmissions;\nexports.getStudentSubmissions = getStudentSubmissions;\nexports.showSubmissionStatus = showSubmissionStatus;\nexports.submissionCardClasses = submissionCardClasses;\nexports.showSubmission = showSubmission;\nexports.showSubmissions = showSubmissions;\nexports.make = make$1;\n/* Multiselect Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/report/components/CoursesReport__SubmissionsList.bs.js"],"names":["$$Array","require","Block","Curry","React","FaIcon","Js_exn","Sorter","Js_dict","Js_json","Caml_obj","Js_option","ArrayUtils","Belt_Option","Caml_option","OptionUtils","GraphqlQuery","LoadingSpinner","SkeletonLoading","MultiselectDropdown","CoursesReport__Level","CoursesReport__Submission","CoursesReport__Submissions","str","prim","sortBy","criterion","criterionType","statusString","targetStatus","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeNull","decodeArray","map","decodeString","raiseError","JSON","stringify","match$3","match$4","match$5","match$6","tmp$2","value$4","match$7","match$8","tmp$3","value$5","match$9","some","match$10","tmp$4","value$6","match$11","match$12","tmp$5","value$7","match$13","match$14","match$15","match$16","tmp$6","value$8","match$17","decodeBoolean","id","createdAt","levelId","targetId","passedAt","title","evaluatorId","studentIds","teamTarget","hasNextPage","endCursor","nodes","pageInfo","studentSubmissions","json_of_SubmissionReviewStatus","json_of_SortDirection","make","studentId","after","status","sortDirection","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","StudentSubmissionsQuery","label","t","tag","String","number","name","searchString","level","color","level$1","__","targetStatus$1","Selectable","Multiselect","Make","unselected","levels","selectedLevel","selectedStatus","unselectedLevels","mapWithDefault","unselectedStatus","append","selected","selectedLevel$1","selectedStatus$1","onSelectFilter","send","updateSelectedLevelCB","updateSelectedStatusCB","selectable","onDeselectFilter","Sortable","SubmissionsSorter","submissionsSorter","updateSortDirectionCB","criteria","createElement","className","selectedCriterion","direction","onDirectionChange","__1","onCriterionChange","filterPlaceholder","reducer","state","action","loading","filterString","updateStudentSubmissions","updateSubmissionsCB","submissions","updatedSubmissions","flatten","makeFromJs","makeFilter","submissionsData","submissionsData$1","getStudentSubmissions","cursor","flatMap","status$1","eta","sendQuery","then","response","Promise","resolve","showSubmissionStatus","submission","submissionCardClasses","showSubmission","teamStudentIds","targetRole","key","href","target","levelLabel","createdAtPretty","caml_equal","classes","showSubmissions","isEmpty","CoursesReport__SubmissionsList","Props","useReducer","useEffect","needsReloading","multiple","card","submissions$1","onClick","placeholder","onChange","onSelect","onDeselect","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Sorter = require(\"../../../shared/components/Sorter.bs.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Caml_obj = require(\"bs-platform/lib/js/caml_obj.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar LoadingSpinner = require(\"../../../shared/components/LoadingSpinner.bs.js\");\nvar SkeletonLoading = require(\"../../../shared/components/SkeletonLoading.bs.js\");\nvar MultiselectDropdown = require(\"../../../packages/multiselect-dropdown/src/components/MultiselectDropdown.bs.js\");\nvar CoursesReport__Level = require(\"../types/CoursesReport__Level.bs.js\");\nvar CoursesReport__Submission = require(\"../types/CoursesReport__Submission.bs.js\");\nvar CoursesReport__Submissions = require(\"../types/CoursesReport__Submissions.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar sortBy = {\n  criterion: \"Submitted At\",\n  criterionType: /* Number */-703661335\n};\n\nfunction statusString(targetStatus) {\n  if (targetStatus !== 479410653) {\n    if (targetStatus >= 583419792) {\n      return \"Passed\";\n    } else {\n      return \"Submitted\";\n    }\n  } else {\n    return \"Failed\";\n  }\n}\n\nvar ppx_printed_query = \"query StudentsReportSubmissionsQuery($studentId: ID!, $after: String, $status: SubmissionReviewStatus, $levelId: ID, $sortDirection: SortDirection!)  {\\nstudentSubmissions(studentId: $studentId, after: $after, first: 20, status: $status, levelId: $levelId, sortDirection: $sortDirection)  {\\nnodes  {\\nid  \\ncreatedAt  \\nlevelId  \\ntargetId  \\npassedAt  \\ntitle  \\nevaluatorId  \\nstudentIds  \\nteamTarget  \\n}\\n\\npageInfo  {\\nhasNextPage  \\nendCursor  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"studentSubmissions\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"nodes\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Js_option.getExn(Js_json.decodeArray(value$3)).map((function (value) {\n                var match = Js_json.decodeNull(value);\n                if (match !== undefined) {\n                  return ;\n                } else {\n                  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n                  var match$1 = Js_dict.get(value$1, \"id\");\n                  var tmp;\n                  if (match$1 !== undefined) {\n                    var value$2 = Caml_option.valFromOption(match$1);\n                    var match$2 = Js_json.decodeString(value$2);\n                    tmp = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n                  } else {\n                    tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type StudentSubmission is missing\");\n                  }\n                  var match$3 = Js_dict.get(value$1, \"createdAt\");\n                  var match$4 = Js_dict.get(value$1, \"levelId\");\n                  var tmp$1;\n                  if (match$4 !== undefined) {\n                    var value$3 = Caml_option.valFromOption(match$4);\n                    var match$5 = Js_json.decodeString(value$3);\n                    tmp$1 = match$5 !== undefined ? match$5 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n                  } else {\n                    tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field levelId on type StudentSubmission is missing\");\n                  }\n                  var match$6 = Js_dict.get(value$1, \"targetId\");\n                  var tmp$2;\n                  if (match$6 !== undefined) {\n                    var value$4 = Caml_option.valFromOption(match$6);\n                    var match$7 = Js_json.decodeString(value$4);\n                    tmp$2 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n                  } else {\n                    tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field targetId on type StudentSubmission is missing\");\n                  }\n                  var match$8 = Js_dict.get(value$1, \"passedAt\");\n                  var tmp$3;\n                  if (match$8 !== undefined) {\n                    var value$5 = Caml_option.valFromOption(match$8);\n                    var match$9 = Js_json.decodeNull(value$5);\n                    tmp$3 = match$9 !== undefined ? undefined : Caml_option.some(value$5);\n                  } else {\n                    tmp$3 = undefined;\n                  }\n                  var match$10 = Js_dict.get(value$1, \"title\");\n                  var tmp$4;\n                  if (match$10 !== undefined) {\n                    var value$6 = Caml_option.valFromOption(match$10);\n                    var match$11 = Js_json.decodeString(value$6);\n                    tmp$4 = match$11 !== undefined ? match$11 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n                  } else {\n                    tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field title on type StudentSubmission is missing\");\n                  }\n                  var match$12 = Js_dict.get(value$1, \"evaluatorId\");\n                  var tmp$5;\n                  if (match$12 !== undefined) {\n                    var value$7 = Caml_option.valFromOption(match$12);\n                    var match$13 = Js_json.decodeNull(value$7);\n                    if (match$13 !== undefined) {\n                      tmp$5 = undefined;\n                    } else {\n                      var match$14 = Js_json.decodeString(value$7);\n                      tmp$5 = match$14 !== undefined ? match$14 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$7));\n                    }\n                  } else {\n                    tmp$5 = undefined;\n                  }\n                  var match$15 = Js_dict.get(value$1, \"studentIds\");\n                  var match$16 = Js_dict.get(value$1, \"teamTarget\");\n                  var tmp$6;\n                  if (match$16 !== undefined) {\n                    var value$8 = Caml_option.valFromOption(match$16);\n                    var match$17 = Js_json.decodeBoolean(value$8);\n                    tmp$6 = match$17 !== undefined ? match$17 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$8));\n                  } else {\n                    tmp$6 = Js_exn.raiseError(\"graphql_ppx: Field teamTarget on type StudentSubmission is missing\");\n                  }\n                  return {\n                          id: tmp,\n                          createdAt: match$3 !== undefined ? Caml_option.valFromOption(match$3) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type StudentSubmission is missing\"),\n                          levelId: tmp$1,\n                          targetId: tmp$2,\n                          passedAt: tmp$3,\n                          title: tmp$4,\n                          evaluatorId: tmp$5,\n                          studentIds: match$15 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$15))).map((function (value) {\n                                    var match = Js_json.decodeString(value);\n                                    if (match !== undefined) {\n                                      return match;\n                                    } else {\n                                      return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n                                    }\n                                  })) : Js_exn.raiseError(\"graphql_ppx: Field studentIds on type StudentSubmission is missing\"),\n                          teamTarget: tmp$6\n                        };\n                }\n              }));\n    } else {\n      tmp$1 = undefined;\n    }\n    var match$3 = Js_dict.get(value$2, \"pageInfo\");\n    var tmp$2;\n    if (match$3 !== undefined) {\n      var value$4 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match$3)));\n      var match$4 = Js_dict.get(value$4, \"hasNextPage\");\n      var tmp$3;\n      if (match$4 !== undefined) {\n        var value$5 = Caml_option.valFromOption(match$4);\n        var match$5 = Js_json.decodeBoolean(value$5);\n        tmp$3 = match$5 !== undefined ? match$5 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$5));\n      } else {\n        tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field hasNextPage on type PageInfo is missing\");\n      }\n      var match$6 = Js_dict.get(value$4, \"endCursor\");\n      var tmp$4;\n      if (match$6 !== undefined) {\n        var value$6 = Caml_option.valFromOption(match$6);\n        var match$7 = Js_json.decodeNull(value$6);\n        if (match$7 !== undefined) {\n          tmp$4 = undefined;\n        } else {\n          var match$8 = Js_json.decodeString(value$6);\n          tmp$4 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n        }\n      } else {\n        tmp$4 = undefined;\n      }\n      tmp$2 = {\n        hasNextPage: tmp$3,\n        endCursor: tmp$4\n      };\n    } else {\n      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field pageInfo on type StudentSubmissionConnection is missing\");\n    }\n    tmp = {\n      nodes: tmp$1,\n      pageInfo: tmp$2\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field studentSubmissions on type Query is missing\");\n  }\n  return {\n          studentSubmissions: tmp\n        };\n}\n\nfunction json_of_SubmissionReviewStatus(value) {\n  if (value !== 479410653) {\n    if (value >= 583419792) {\n      return \"Passed\";\n    } else {\n      return \"Submitted\";\n    }\n  } else {\n    return \"Failed\";\n  }\n}\n\nfunction json_of_SortDirection(value) {\n  if (value >= 235215128) {\n    return \"Descending\";\n  } else {\n    return \"Ascending\";\n  }\n}\n\nfunction make(studentId, after, status, levelId, sortDirection, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"studentId\",\n                    studentId\n                  ],\n                  /* tuple */[\n                    \"after\",\n                    after !== undefined ? after : null\n                  ],\n                  /* tuple */[\n                    \"status\",\n                    status !== undefined ? json_of_SubmissionReviewStatus(status) : null\n                  ],\n                  /* tuple */[\n                    \"levelId\",\n                    levelId !== undefined ? levelId : null\n                  ],\n                  /* tuple */[\n                    \"sortDirection\",\n                    json_of_SortDirection(sortDirection)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var studentId = variables.studentId;\n  var after = variables.after;\n  var status = variables.status;\n  var levelId = variables.levelId;\n  var sortDirection = variables.sortDirection;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"studentId\",\n                    studentId\n                  ],\n                  /* tuple */[\n                    \"after\",\n                    after !== undefined ? after : null\n                  ],\n                  /* tuple */[\n                    \"status\",\n                    status !== undefined ? json_of_SubmissionReviewStatus(status) : null\n                  ],\n                  /* tuple */[\n                    \"levelId\",\n                    levelId !== undefined ? levelId : null\n                  ],\n                  /* tuple */[\n                    \"sortDirection\",\n                    json_of_SortDirection(sortDirection)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(studentId, after, status, levelId, sortDirection, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"studentId\",\n                  studentId\n                ],\n                /* tuple */[\n                  \"after\",\n                  after !== undefined ? after : null\n                ],\n                /* tuple */[\n                  \"status\",\n                  status !== undefined ? json_of_SubmissionReviewStatus(status) : null\n                ],\n                /* tuple */[\n                  \"levelId\",\n                  levelId !== undefined ? levelId : null\n                ],\n                /* tuple */[\n                  \"sortDirection\",\n                  json_of_SortDirection(sortDirection)\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, studentId, after, status, levelId, sortDirection, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"studentId\",\n                      studentId\n                    ],\n                    /* tuple */[\n                      \"after\",\n                      after !== undefined ? after : null\n                    ],\n                    /* tuple */[\n                      \"status\",\n                      status !== undefined ? json_of_SubmissionReviewStatus(status) : null\n                    ],\n                    /* tuple */[\n                      \"levelId\",\n                      levelId !== undefined ? levelId : null\n                    ],\n                    /* tuple */[\n                      \"sortDirection\",\n                      json_of_SortDirection(sortDirection)\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar StudentSubmissionsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  json_of_SubmissionReviewStatus: json_of_SubmissionReviewStatus,\n  json_of_SortDirection: json_of_SortDirection,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction label(t) {\n  if (t.tag) {\n    return \"Status\";\n  } else {\n    return \"Level \" + String(CoursesReport__Level.number(t[0]));\n  }\n}\n\nfunction value(t) {\n  if (t.tag) {\n    return statusString(t[0]);\n  } else {\n    return CoursesReport__Level.name(t[0]);\n  }\n}\n\nfunction searchString(t) {\n  if (t.tag) {\n    return \"status \" + statusString(t[0]);\n  } else {\n    var level = t[0];\n    return \"level \" + (String(CoursesReport__Level.number(level)) + (\" \" + CoursesReport__Level.name(level)));\n  }\n}\n\nfunction color(t) {\n  if (t.tag) {\n    var status = t[0];\n    if (status !== 479410653) {\n      if (status >= 583419792) {\n        return \"green\";\n      } else {\n        return \"blue\";\n      }\n    } else {\n      return \"red\";\n    }\n  } else {\n    return \"gray\";\n  }\n}\n\nfunction level(level$1) {\n  return /* Level */Block.__(0, [level$1]);\n}\n\nfunction targetStatus(targetStatus$1) {\n  return /* TargetStatus */Block.__(1, [targetStatus$1]);\n}\n\nvar Selectable = {\n  label: label,\n  value: value,\n  searchString: searchString,\n  color: color,\n  level: level,\n  targetStatus: targetStatus\n};\n\nvar Multiselect = MultiselectDropdown.Make(Selectable);\n\nfunction unselected(levels, selectedLevel, selectedStatus) {\n  var unselectedLevels = $$Array.map(level, levels.filter((function (level) {\n                return CoursesReport__Level.number(level) !== 0;\n              })).filter((function (level) {\n              return OptionUtils.mapWithDefault((function (selectedLevel) {\n                            return CoursesReport__Level.id(level) !== CoursesReport__Level.id(selectedLevel);\n                          }), true, selectedLevel);\n            })));\n  var unselectedStatus = $$Array.map(targetStatus, [\n          /* Submitted */-896990053,\n          /* Failed */479410653,\n          /* Passed */583419792\n        ].filter((function (status) {\n              return OptionUtils.mapWithDefault((function (selectedStatus) {\n                            return status !== selectedStatus;\n                          }), true, selectedStatus);\n            })));\n  return $$Array.append(unselectedStatus, unselectedLevels);\n}\n\nfunction selected(selectedLevel, selectedStatus) {\n  var selectedLevel$1 = OptionUtils.mapWithDefault((function (selectedLevel) {\n          return [/* Level */Block.__(0, [selectedLevel])];\n        }), [], selectedLevel);\n  var selectedStatus$1 = OptionUtils.mapWithDefault((function (selectedStatus) {\n          return [/* TargetStatus */Block.__(1, [selectedStatus])];\n        }), [], selectedStatus);\n  return $$Array.append(selectedStatus$1, selectedLevel$1);\n}\n\nfunction onSelectFilter(send, updateSelectedLevelCB, updateSelectedStatusCB, selectable) {\n  Curry._1(send, /* UpdateFilterString */[\"\"]);\n  if (selectable.tag) {\n    return Curry._1(updateSelectedStatusCB, selectable[0]);\n  } else {\n    return Curry._1(updateSelectedLevelCB, selectable[0]);\n  }\n}\n\nfunction onDeselectFilter(updateSelectedLevelCB, updateSelectedStatusCB, selectable) {\n  if (selectable.tag) {\n    return Curry._1(updateSelectedStatusCB, undefined);\n  } else {\n    return Curry._1(updateSelectedLevelCB, undefined);\n  }\n}\n\nfunction criterion(t) {\n  return t.criterion;\n}\n\nfunction criterionType(t) {\n  return t.criterionType;\n}\n\nvar Sortable = {\n  criterion: criterion,\n  criterionType: criterionType\n};\n\nvar SubmissionsSorter = Sorter.Make(Sortable);\n\nfunction submissionsSorter(sortDirection, updateSortDirectionCB) {\n  var criteria = [sortBy];\n  return React.createElement(\"div\", {\n              \"aria-label\": \"Change submissions sorting\",\n              className: \"flex-shrink-0 mt-3 md:mt-0 md:ml-2\"\n            }, React.createElement(\"label\", {\n                  className: \"block text-tiny font-semibold uppercase\"\n                }, \"Sort by:\"), React.createElement(SubmissionsSorter.make, {\n                  criteria: criteria,\n                  selectedCriterion: sortBy,\n                  direction: sortDirection,\n                  onDirectionChange: Curry.__1(updateSortDirectionCB),\n                  onCriterionChange: (function (param) {\n                      return /* () */0;\n                    })\n                }));\n}\n\nfunction filterPlaceholder(selectedLevel, selectedStatus) {\n  if (selectedLevel !== undefined) {\n    if (selectedStatus !== undefined) {\n      return \"Filter by another level\";\n    } else {\n      return \"Filter by another level, or by status\";\n    }\n  } else if (selectedStatus !== undefined) {\n    return \"Filter by level\";\n  } else {\n    return \"Filter by level, or by status\";\n  }\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* BeginLoadingMore */0 :\n          return {\n                  loading: /* LoadingMore */2,\n                  filterString: state.filterString\n                };\n      case /* BeginReloading */1 :\n          return {\n                  loading: /* Reloading */1,\n                  filterString: state.filterString\n                };\n      case /* CompletedLoading */2 :\n          return {\n                  loading: /* Loaded */0,\n                  filterString: state.filterString\n                };\n      \n    }\n  } else {\n    return {\n            loading: state.loading,\n            filterString: action[0]\n          };\n  }\n}\n\nfunction updateStudentSubmissions(send, updateSubmissionsCB, endCursor, hasNextPage, submissions, selectedLevel, selectedStatus, sortDirection, nodes) {\n  var updatedSubmissions = $$Array.append(ArrayUtils.flatten(nodes !== undefined ? CoursesReport__Submission.makeFromJs(nodes) : []), submissions);\n  var filter = CoursesReport__Submissions.makeFilter(selectedLevel, selectedStatus);\n  var submissionsData = CoursesReport__Submissions.make(updatedSubmissions, filter, sortDirection);\n  var submissionsData$1 = hasNextPage && endCursor !== undefined ? /* PartiallyLoaded */Block.__(0, [\n        submissionsData,\n        endCursor\n      ]) : /* FullyLoaded */Block.__(1, [submissionsData]);\n  Curry._1(updateSubmissionsCB, submissionsData$1);\n  return Curry._1(send, /* CompletedLoading */2);\n}\n\nfunction getStudentSubmissions(studentId, cursor, send, level, status, sortDirection, submissions, updateSubmissionsCB) {\n  var levelId = Belt_Option.flatMap(level, (function (level) {\n          return CoursesReport__Level.id(level);\n        }));\n  var status$1 = Belt_Option.flatMap(status, (function (status) {\n          return status;\n        }));\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(cursor !== undefined ? make(studentId, cursor, status$1, levelId, sortDirection, /* () */0) : make(studentId, undefined, status$1, levelId, sortDirection, /* () */0)).then((function (response) {\n          updateStudentSubmissions(send, updateSubmissionsCB, response.studentSubmissions.pageInfo.endCursor, response.studentSubmissions.pageInfo.hasNextPage, submissions, level, status$1, sortDirection, response.studentSubmissions.nodes);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction showSubmissionStatus(submission) {\n  var match = CoursesReport__Submission.status(submission);\n  if (match !== 479410653) {\n    if (match >= 583419792) {\n      return React.createElement(\"div\", {\n                  className: \"bg-green-100 border border-green-500 flex-shrink-0 leading-normal text-green-800 font-semibold px-3 py-px rounded\"\n                }, \"Passed\");\n    } else {\n      return React.createElement(\"div\", {\n                  className: \"bg-blue-100 border border-blue-500 flex-shrink-0 leading-normal text-blue-800 font-semibold px-3 py-px rounded\"\n                }, \"Submitted\");\n    }\n  } else {\n    return React.createElement(\"div\", {\n                className: \"bg-red-100 border border-red-500 flex-shrink-0 leading-normal text-red-800 font-semibold px-3 py-px rounded\"\n              }, \"Failed\");\n  }\n}\n\nfunction submissionCardClasses(submission) {\n  var match = CoursesReport__Submission.status(submission);\n  return \"flex flex-col md:flex-row items-start md:items-center justify-between bg-white border-l-3 p-3 md:py-6 md:px-5 mt-4 cursor-pointer rounded-r-lg shadow hover:border-primary-500 hover:text-primary-500 hover:shadow-md \" + (\n          match !== 479410653 ? (\n              match >= 583419792 ? \"border-green-500\" : \"border-blue-500\"\n            ) : \"border-red-500\"\n        );\n}\n\nfunction showSubmission(submissions, levels, teamStudentIds) {\n  return React.createElement(\"div\", undefined, $$Array.map((function (submission) {\n                    var match = CoursesReport__Submission.targetRole(submission);\n                    return React.createElement(\"div\", {\n                                key: CoursesReport__Submission.id(submission),\n                                \"aria-label\": \"student-submission-\" + CoursesReport__Submission.id(submission)\n                              }, React.createElement(\"a\", {\n                                    className: \"block relative z-10\",\n                                    href: \"/targets/\" + CoursesReport__Submission.targetId(submission),\n                                    target: \"_blank\"\n                                  }, React.createElement(\"div\", {\n                                        key: CoursesReport__Submission.id(submission),\n                                        \"aria-label\": \"student-submission-card-\" + CoursesReport__Submission.id(submission),\n                                        className: submissionCardClasses(submission)\n                                      }, React.createElement(\"div\", {\n                                            className: \"w-full md:w-3/4\"\n                                          }, React.createElement(\"div\", {\n                                                className: \"block text-sm md:pr-2\"\n                                              }, React.createElement(\"span\", {\n                                                    className: \"bg-gray-300 text-xs font-semibold px-2 py-px rounded\"\n                                                  }, CoursesReport__Level.levelLabel(levels, CoursesReport__Submission.levelId(submission))), React.createElement(\"span\", {\n                                                    className: \"ml-2 font-semibold text-base\"\n                                                  }, CoursesReport__Submission.title(submission))), React.createElement(\"div\", {\n                                                className: \"mt-1 ml-px text-xs text-gray-900\"\n                                              }, React.createElement(\"span\", {\n                                                    className: \"ml-1\"\n                                                  }, \"Submitted on \" + CoursesReport__Submission.createdAtPretty(submission)))), React.createElement(\"div\", {\n                                            className: \"w-auto md:w-1/4 text-xs flex justify-end mt-2 md:mt-0\"\n                                          }, showSubmissionStatus(submission)))), match && !Caml_obj.caml_equal(teamStudentIds, match[0]) ? React.createElement(\"div\", {\n                                      \"aria-label\": \"Team change notice for submission \" + CoursesReport__Submission.id(submission),\n                                      className: \"w-full text-xs rounded-b bg-indigo-100 text-indigo-700 px-4 pt-3 pb-2 -mt-1 flex flex-1 justify-between items-center\"\n                                    }, React.createElement(\"div\", {\n                                          className: \"flex flex-1 justify-start items-start pr-8\"\n                                        }, React.createElement(FaIcon.make, {\n                                              classes: \"fas fa-exclamation-triangle text-sm md:text-base mt-1\"\n                                            }), React.createElement(\"div\", {\n                                              className: \"inline-block pl-3\"\n                                            }, \"This submission is not considered towards its target's completion; it was a \", React.createElement(\"span\", {\n                                                  className: \"italic\"\n                                                }, \"team\"), \" target, and your team changed after you made this submission.\")), React.createElement(\"a\", {\n                                          className: \"flex-shrink-0 px-2 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-200 hover:text-indigo-800 rounded\",\n                                          href: \"/submissions/\" + CoursesReport__Submission.id(submission)\n                                        }, React.createElement(\"span\", {\n                                              className: \"hidden md:inline\"\n                                            }, \"View Submission\"), React.createElement(FaIcon.make, {\n                                              classes: \"fas fa-arrow-right ml-2\"\n                                            }))) : null);\n                  }), submissions));\n}\n\nfunction showSubmissions(submissions, levels, teamStudentIds) {\n  if (ArrayUtils.isEmpty(submissions)) {\n    return React.createElement(\"div\", {\n                className: \"course-review__reviewed-empty text-lg font-semibold text-center py-4\"\n              }, React.createElement(\"h5\", {\n                    className: \"py-4 mt-4 bg-gray-200 text-gray-800 font-semibold\"\n                  }, \"No submissions to show \"));\n  } else {\n    return showSubmission(submissions, levels, teamStudentIds);\n  }\n}\n\nfunction CoursesReport__SubmissionsList(Props) {\n  var studentId = Props.studentId;\n  var levels = Props.levels;\n  var submissions = Props.submissions;\n  var updateSubmissionsCB = Props.updateSubmissionsCB;\n  var teamStudentIds = Props.teamStudentIds;\n  var selectedLevel = Props.selectedLevel;\n  var selectedStatus = Props.selectedStatus;\n  var sortDirection = Props.sortDirection;\n  var updateSelectedLevelCB = Props.updateSelectedLevelCB;\n  var updateSelectedStatusCB = Props.updateSelectedStatusCB;\n  var updateSortDirectionCB = Props.updateSortDirectionCB;\n  var match = React.useReducer(reducer, {\n        loading: /* Loaded */0,\n        filterString: \"\"\n      });\n  var send = match[1];\n  var state = match[0];\n  React.useEffect((function (param) {\n          if (CoursesReport__Submissions.needsReloading(selectedLevel, selectedStatus, sortDirection, submissions)) {\n            Curry._1(send, /* BeginReloading */1);\n            getStudentSubmissions(studentId, undefined, send, selectedLevel, selectedStatus, sortDirection, [], updateSubmissionsCB);\n          }\n          return ;\n        }), /* tuple */[\n        selectedLevel,\n        selectedStatus,\n        sortDirection\n      ]);\n  var tmp;\n  if (typeof submissions === \"number\") {\n    tmp = SkeletonLoading.multiple(3, SkeletonLoading.card(undefined, /* () */0));\n  } else if (submissions.tag) {\n    tmp = showSubmissions(submissions[0].submissions, levels, teamStudentIds);\n  } else {\n    var cursor = submissions[1];\n    var submissions$1 = submissions[0].submissions;\n    var match$1 = state.loading;\n    var tmp$1;\n    switch (match$1) {\n      case /* Loaded */0 :\n          tmp$1 = React.createElement(\"button\", {\n                className: \"btn btn-primary-ghost cursor-pointer w-full mt-4\",\n                onClick: (function (param) {\n                    Curry._1(send, /* BeginLoadingMore */0);\n                    return getStudentSubmissions(studentId, cursor, send, selectedLevel, selectedStatus, sortDirection, submissions$1, updateSubmissionsCB);\n                  })\n              }, \"Load More...\");\n          break;\n      case /* Reloading */1 :\n          tmp$1 = null;\n          break;\n      case /* LoadingMore */2 :\n          tmp$1 = SkeletonLoading.multiple(3, SkeletonLoading.card(undefined, /* () */0));\n          break;\n      \n    }\n    tmp = React.createElement(\"div\", undefined, showSubmissions(submissions$1, levels, teamStudentIds), tmp$1);\n  }\n  var tmp$2;\n  if (typeof submissions === \"number\") {\n    tmp$2 = null;\n  } else {\n    var match$2 = state.loading;\n    var loading = match$2 === 1;\n    tmp$2 = React.createElement(LoadingSpinner.make, {\n          loading: loading\n        });\n  }\n  return React.createElement(\"div\", {\n              className: \"max-w-3xl mx-auto\"\n            }, React.createElement(\"div\", {\n                  className: \"md:flex w-full items-start pb-4\"\n                }, React.createElement(\"div\", {\n                      className: \"flex-1\"\n                    }, React.createElement(\"label\", {\n                          className: \"block text-tiny font-semibold uppercase\"\n                        }, \"Filter by:\"), React.createElement(Multiselect.make, {\n                          id: \"filter\",\n                          placeholder: filterPlaceholder(selectedLevel, selectedStatus),\n                          onChange: (function (filterString) {\n                              return Curry._1(send, /* UpdateFilterString */[filterString]);\n                            }),\n                          value: state.filterString,\n                          unselected: unselected(levels, selectedLevel, selectedStatus),\n                          selected: selected(selectedLevel, selectedStatus),\n                          onSelect: (function (param) {\n                              return onSelectFilter(send, updateSelectedLevelCB, updateSelectedStatusCB, param);\n                            }),\n                          onDeselect: (function (param) {\n                              return onDeselectFilter(updateSelectedLevelCB, updateSelectedStatusCB, param);\n                            })\n                        })), submissionsSorter(sortDirection, updateSortDirectionCB)), React.createElement(\"div\", {\n                  \"aria-label\": \"student-submissions\"\n                }, tmp), tmp$2);\n}\n\nvar make$1 = CoursesReport__SubmissionsList;\n\nexports.str = str;\nexports.sortBy = sortBy;\nexports.statusString = statusString;\nexports.StudentSubmissionsQuery = StudentSubmissionsQuery;\nexports.Selectable = Selectable;\nexports.Multiselect = Multiselect;\nexports.unselected = unselected;\nexports.selected = selected;\nexports.onSelectFilter = onSelectFilter;\nexports.onDeselectFilter = onDeselectFilter;\nexports.Sortable = Sortable;\nexports.SubmissionsSorter = SubmissionsSorter;\nexports.submissionsSorter = submissionsSorter;\nexports.filterPlaceholder = filterPlaceholder;\nexports.reducer = reducer;\nexports.updateStudentSubmissions = updateStudentSubmissions;\nexports.getStudentSubmissions = getStudentSubmissions;\nexports.showSubmissionStatus = showSubmissionStatus;\nexports.submissionCardClasses = submissionCardClasses;\nexports.showSubmission = showSubmission;\nexports.showSubmissions = showSubmissions;\nexports.make = make$1;\n/* Multiselect Not a pure module */\n"]},"metadata":{},"sourceType":"module"}