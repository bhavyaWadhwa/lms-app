{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar User = require(\"../../shared/types/User.bs.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar PfIcon = require(\"../../packages/pf-icon/src/PfIcon.bs.js\");\n\nvar DateFns = require(\"../../shared/utils/DateFns.bs.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Dropdown = require(\"../../shared/components/Dropdown.bs.js\");\n\nvar Inflector = require(\"../../shared/utils/Inflector.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ArrayUtils = require(\"../../shared/utils/ArrayUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../shared/utils/GraphqlQuery.bs.js\");\n\nvar MarkdownBlock = require(\"../../shared/components/MarkdownBlock.bs.js\");\n\nvar TopicsShow__Post = require(\"../types/TopicsShow__Post.bs.js\");\n\nvar TopicsShow__UserShow = require(\"./TopicsShow__UserShow.bs.js\");\n\nvar TopicsShow__PostReply = require(\"./TopicsShow__PostReply.bs.js\");\n\nvar TopicsShow__PostEditor = require(\"./TopicsShow__PostEditor.bs.js\");\n\nvar TopicsShow__LikeManager = require(\"./TopicsShow__LikeManager.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nrequire(\"./TopicsShow__PostShow.css\");\n\nvar solutionIcon = React.createElement(\"div\", {\n  \"aria-label\": \"Marked as solution icon\",\n  className: \"flex lg:flex-col items-center px-2 lg:pl-0 py-1 lg:pr-1 lg:pr-4 lg:pb-4 lg:pt-2 bg-green-200 lg:bg-transparent rounded\"\n}, React.createElement(\"div\", {\n  className: \"flex items-center justify-center lg:w-8 lg:h-8 bg-green-200 text-green-800 rounded-full\"\n}, React.createElement(PfIcon.make, {\n  className: \"if i-check-solid text-sm lg:text-base\"\n})), React.createElement(\"div\", {\n  className: \"text-xs lg:text-tiny font-semibold text-green-800 pl-2 lg:pl-0 lg:pt-1\"\n}, \"Solution\"));\n\nfunction findUser(users, userId) {\n  return User.findById(userId, $$Array.to_list(users));\n}\n\nvar ppx_printed_query = \"mutation MarkAsSolutionMutation($id: ID!)  {\\nmarkPostAsSolution(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"markPostAsSolution\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type MarkPostAsSolutionPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field markPostAsSolution on type Mutation is missing\");\n  }\n\n  return {\n    markPostAsSolution: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar MarkPostAsSolutionQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\nvar ppx_printed_query$1 = \"mutation ArchivePostMutation($id: ID!)  {\\narchivePost(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"archivePost\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type ArchivePostPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field archivePost on type Mutation is missing\");\n  }\n\n  return {\n    archivePost: tmp\n  };\n}\n\nfunction make$1(id, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar ArchivePostQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction markPostAsSolution(postId, markPostAsSolutionCB) {\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(postId,\n  /* () */\n  0)).then(function (response) {\n    if (response.markPostAsSolution.success) {\n      Curry._1(markPostAsSolutionCB,\n      /* () */\n      0);\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction archivePost(isFirstPost, postId, archivePostCB) {\n  if (window.confirm((isFirstPost ? \"Are you sure you want to delete the topic? \" : \"Are you sure you want to delete the post? \") + \"This cannot be undone.\")) {\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make$1(postId,\n    /* () */\n    0)).then(function (response) {\n      if (response.archivePost.success) {\n        Curry._1(archivePostCB,\n        /* () */\n        0);\n      }\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  } else {\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, replies, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) {\n  var selected = React.createElement(\"div\", {\n    \"aria-label\": \"Options for post \" + TopicsShow__Post.id(post),\n    className: \"flex items-center justify-center w-8 h-8 rounded leading-tight border bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200\"\n  }, React.createElement(PfIcon.make, {\n    className: \"if i-ellipsis-h-regular text-base\"\n  }));\n  var postTypeString = isFirstPost ? \"Post\" : \"Reply\";\n  var editPostButton = React.createElement(\"button\", {\n    className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n    onClick: function onClick(param) {\n      return Curry._1(toggleShowPostEdit, function (param) {\n        return true;\n      });\n    }\n  }, React.createElement(FaIcon.make, {\n    classes: \"fas fa-edit fa-fw text-base\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, \"Edit \" + postTypeString));\n  var markAsSolutionButton = isFirstPost || TopicsShow__Post.solution(post) ? null : React.createElement(\"button\", {\n    className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n    onClick: function onClick(param) {\n      return markPostAsSolution(TopicsShow__Post.id(post), markPostAsSolutionCB);\n    }\n  }, React.createElement(PfIcon.make, {\n    className: \"if i-check-circle-alt-regular if-fw text-base\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, \"Mark as solution\"));\n  var showDelete = isFirstPost ? isCoach || isPostCreator && ArrayUtils.isEmpty(replies) : isCoach || isPostCreator;\n  var deletePostButton = showDelete ? React.createElement(\"button\", {\n    className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n    onClick: function onClick(param) {\n      return archivePost(isFirstPost, TopicsShow__Post.id(post), archivePostCB);\n    }\n  }, React.createElement(FaIcon.make, {\n    classes: \"fas fa-trash-alt fa-fw text-base\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, \"Delete \" + postTypeString)) : null;\n  var match = TopicsShow__Post.editorId(post);\n  var historyButton = match !== undefined ? React.createElement(\"a\", {\n    className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n    href: \"/posts/\" + (TopicsShow__Post.id(post) + \"/versions\")\n  }, React.createElement(FaIcon.make, {\n    classes: \"fas fa-history fa-fw text-base\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, \"History\")) : null;\n  var contents = isCoach ? [editPostButton, markAsSolutionButton, historyButton, deletePostButton] : isTopicCreator ? isPostCreator ? [editPostButton, markAsSolutionButton, historyButton, deletePostButton] : [markAsSolutionButton, historyButton] : isPostCreator ? [editPostButton, historyButton, deletePostButton] : [];\n  return React.createElement(Dropdown.make, {\n    selected: selected,\n    contents: contents,\n    right: true\n  });\n}\n\nfunction onBorderAnimationEnd($$event) {\n  var element = $$event.target;\n  element.className = \"\";\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction navigateToEditor(param) {\n  var element = document.getElementById(\"add-reply-to-topic\");\n  setTimeout(function (param) {\n    if (element == null) {\n      Rollbar.error(\"Could not find the post to scroll to.\");\n      return (\n        /* () */\n        0\n      );\n    } else {\n      element.scrollIntoView();\n      element.className = \"w-full flex flex-col topics-show__highlighted-item\";\n      return (\n        /* () */\n        0\n      );\n    }\n  }, 50);\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction TopicsShow__PostShow(Props) {\n  var post = Props.post;\n  var topic = Props.topic;\n  var users = Props.users;\n  var posts = Props.posts;\n  var currentUserId = Props.currentUserId;\n  var isCoach = Props.isCoach;\n  var isTopicCreator = Props.isTopicCreator;\n  var updatePostCB = Props.updatePostCB;\n  var addNewReplyCB = Props.addNewReplyCB;\n  var addPostLikeCB = Props.addPostLikeCB;\n  var removePostLikeCB = Props.removePostLikeCB;\n  var markPostAsSolutionCB = Props.markPostAsSolutionCB;\n  var archivePostCB = Props.archivePostCB;\n  var isPostCreator = currentUserId === TopicsShow__Post.creatorId(post);\n  var isFirstPost = TopicsShow__Post.postNumber(post) === 1;\n  var repliesToPost = isFirstPost ? [] : TopicsShow__Post.repliesToPost(posts, post);\n  var match = React.useState(function () {\n    return false;\n  });\n  var toggleShowPostEdit = match[1];\n  var match$1 = React.useState(function () {\n    return false;\n  });\n  var toggleShowReplies = match$1[1];\n  var showReplies = match$1[0];\n  var userId = TopicsShow__Post.creatorId(post);\n  var tmp;\n\n  if (match[0]) {\n    tmp = React.createElement(\"div\", {\n      className: \"flex-1\"\n    }, React.createElement(TopicsShow__PostEditor.make, {\n      id: \"edit-post-\" + TopicsShow__Post.id(post),\n      topic: topic,\n      currentUserId: currentUserId,\n      handlePostCB: updatePostCB,\n      replies: posts,\n      users: users,\n      post: post,\n      handleCloseCB: function handleCloseCB(param) {\n        return Curry._1(toggleShowPostEdit, function (param) {\n          return false;\n        });\n      }\n    }));\n  } else {\n    var match$2 = TopicsShow__Post.editorId(post);\n    tmp = React.createElement(\"div\", {\n      className: \"flex items-start justify-between min-w-0\"\n    }, React.createElement(\"div\", {\n      className: \"text-sm min-w-0\"\n    }, React.createElement(MarkdownBlock.make, {\n      markdown: TopicsShow__Post.body(post),\n      className: \"leading-normal text-sm \",\n      profile:\n      /* QuestionAndAnswer */\n      1\n    }), match$2 !== undefined ? React.createElement(\"div\", undefined, React.createElement(\"div\", {\n      className: \"text-xs mt-1 inline-block px-2 py-1 rounded bg-gray-100 text-xs text-gray-800 \"\n    }, React.createElement(\"span\", undefined, \"Last edited by \"), React.createElement(\"span\", {\n      className: \"font-semibold\"\n    }, User.name(User.findById(match$2, $$Array.to_list(users)))), React.createElement(\"span\", undefined, \" on \" + DateFns.format(TopicsShow__Post.updatedAt(post), \"do MMMM, yyyy HH:mm\")))) : null), React.createElement(\"div\", {\n      className: \"hidden lg:block flex-shrink-0 ml-3\"\n    }, isPostCreator || isCoach || isTopicCreator ? optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, posts, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) : null));\n  }\n\n  var userId$1 = TopicsShow__Post.creatorId(post);\n  return React.createElement(\"div\", {\n    id: \"post-show-\" + TopicsShow__Post.id(post),\n    onAnimationEnd: onBorderAnimationEnd\n  }, React.createElement(\"div\", {\n    key: TopicsShow__Post.id(post),\n    className: \"flex pt-4\"\n  }, React.createElement(\"div\", {\n    className: \"hidden lg:flex flex-col\"\n  }, TopicsShow__Post.solution(post) ? solutionIcon : null, React.createElement(TopicsShow__LikeManager.make, {\n    post: post,\n    addPostLikeCB: addPostLikeCB,\n    removePostLikeCB: removePostLikeCB\n  })), React.createElement(\"div\", {\n    className: \"flex-1 pb-6 lg:pb-8 topics-post-show__post-body min-w-0\"\n  }, React.createElement(\"div\", {\n    className: \"pt-2\",\n    id: \"body\"\n  }, React.createElement(\"div\", {\n    className: \"flex justify-between lg:hidden\"\n  }, React.createElement(TopicsShow__UserShow.make, {\n    user: User.findById(userId, $$Array.to_list(users)),\n    createdAt: TopicsShow__Post.createdAt(post)\n  }), React.createElement(\"div\", {\n    className: \"flex-shrink-0 mt-1\"\n  }, isPostCreator || isCoach || isTopicCreator ? optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, posts, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) : null)), tmp), React.createElement(\"div\", {\n    className: \"flex justify-between lg:items-end pt-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex-1 lg:flex-initial mr-3\"\n  }, React.createElement(\"div\", {\n    className: \"hidden lg:block\"\n  }, React.createElement(TopicsShow__UserShow.make, {\n    user: User.findById(userId$1, $$Array.to_list(users)),\n    createdAt: TopicsShow__Post.createdAt(post)\n  })), React.createElement(\"div\", {\n    className: \"flex items-center lg:items-start justify-between lg:hidden\"\n  }, React.createElement(\"div\", {\n    className: \"flex\"\n  }, React.createElement(TopicsShow__LikeManager.make, {\n    post: post,\n    addPostLikeCB: addPostLikeCB,\n    removePostLikeCB: removePostLikeCB\n  }), React.createElement(\"div\", undefined, ArrayUtils.isNotEmpty(repliesToPost) ? React.createElement(\"button\", {\n    className: \"cursor-pointer flex flex-col items-center justify-center\",\n    onClick: function onClick(param) {\n      return Curry._1(toggleShowReplies, function (showReplies) {\n        return !showReplies;\n      });\n    }\n  }, React.createElement(\"span\", {\n    className: \"flex items-center justify-center rounded-lg lg:bg-gray-100 hover:bg-gray-300 text-gray-700 hover:text-gray-900 h-8 w-8 md:h-10 md:w-10 p-1 md:p-2 mx-auto\"\n  }, React.createElement(FaIcon.make, {\n    classes: \"far fa-comment-alt\"\n  })), React.createElement(\"span\", {\n    className: \"text-tiny lg:text-xs font-semibold\"\n  }, String(TopicsShow__Post.replies(post).length))) : null)), TopicsShow__Post.solution(post) ? solutionIcon : null)), React.createElement(\"div\", {\n    className: \"flex items-center text-sm font-semibold lg:mb-1\"\n  }, React.createElement(\"div\", {\n    className: \"hidden lg:block\"\n  }, ArrayUtils.isNotEmpty(repliesToPost) ? React.createElement(\"button\", {\n    \"aria-label\": \"Show replies of post \" + TopicsShow__Post.id(post),\n    className: \"border bg-white mr-3 p-2 rounded text-xs font-semibold\",\n    id: \"show-replies-\" + TopicsShow__Post.id(post),\n    onClick: function onClick(param) {\n      return Curry._1(toggleShowReplies, function (showReplies) {\n        return !showReplies;\n      });\n    }\n  }, Inflector.pluralize(\"Reply\", TopicsShow__Post.replies(post).length, true,\n  /* () */\n  0), React.createElement(FaIcon.make, {\n    classes: \"ml-2 fas fa-chevron-\" + (showReplies ? \"up\" : \"down\")\n  })) : null), React.createElement(\"button\", {\n    \"aria-label\": isFirstPost ? \"Add reply to topic\" : \"Add reply to post \" + TopicsShow__Post.id(post),\n    className: \"bg-gray-100 lg:border lg:bg-gray-200 p-2 rounded text-xs font-semibold\",\n    id: \"reply-button-\" + TopicsShow__Post.id(post),\n    onClick: function onClick(param) {\n      Curry._1(addNewReplyCB,\n      /* () */\n      0);\n\n      return navigateToEditor(\n      /* () */\n      0);\n    }\n  }, React.createElement(FaIcon.make, {\n    classes: \"fas fa-reply mr-2\"\n  }), \"Reply\"))), showReplies ? React.createElement(\"div\", {\n    \"aria-label\": \"Replies to post \" + TopicsShow__Post.id(post),\n    className: \"lg:pl-10 pt-2 topics-post-show__replies-container\"\n  }, $$Array.map(function (post) {\n    return React.createElement(TopicsShow__PostReply.make, {\n      post: post,\n      users: users,\n      key: TopicsShow__Post.id(post)\n    });\n  }, repliesToPost)) : null)));\n}\n\nvar make$2 = TopicsShow__PostShow;\nexports.str = str;\nexports.solutionIcon = solutionIcon;\nexports.findUser = findUser;\nexports.MarkPostAsSolutionQuery = MarkPostAsSolutionQuery;\nexports.ArchivePostQuery = ArchivePostQuery;\nexports.markPostAsSolution = markPostAsSolution;\nexports.archivePost = archivePost;\nexports.optionsDropdown = optionsDropdown;\nexports.onBorderAnimationEnd = onBorderAnimationEnd;\nexports.navigateToEditor = navigateToEditor;\nexports.make = make$2;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/topics/components/TopicsShow__PostShow.bs.js"],"names":["User","require","$$Array","Curry","React","FaIcon","Js_exn","PfIcon","DateFns","Js_dict","Js_json","Dropdown","Inflector","Js_option","ArrayUtils","Caml_option","GraphqlQuery","MarkdownBlock","TopicsShow__Post","TopicsShow__UserShow","TopicsShow__PostReply","TopicsShow__PostEditor","TopicsShow__LikeManager","str","prim","solutionIcon","createElement","className","make","findUser","users","userId","findById","to_list","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","markPostAsSolution","id","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","MarkPostAsSolutionQuery","ppx_printed_query$1","parse$1","archivePost","make$1","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","ArchivePostQuery","postId","markPostAsSolutionCB","eta","sendQuery","then","response","Promise","resolve","isFirstPost","archivePostCB","window","confirm","optionsDropdown","post","isPostCreator","isTopicCreator","isCoach","replies","toggleShowPostEdit","selected","postTypeString","editPostButton","onClick","classes","markAsSolutionButton","solution","showDelete","isEmpty","deletePostButton","editorId","historyButton","href","contents","right","onBorderAnimationEnd","$$event","element","target","navigateToEditor","document","getElementById","setTimeout","Rollbar","error","scrollIntoView","TopicsShow__PostShow","Props","topic","posts","currentUserId","updatePostCB","addNewReplyCB","addPostLikeCB","removePostLikeCB","creatorId","postNumber","repliesToPost","useState","toggleShowReplies","showReplies","handlePostCB","handleCloseCB","markdown","body","profile","name","format","updatedAt","userId$1","onAnimationEnd","key","user","createdAt","isNotEmpty","String","length","pluralize","map","make$2","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar User = require(\"../../shared/types/User.bs.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar PfIcon = require(\"../../packages/pf-icon/src/PfIcon.bs.js\");\nvar DateFns = require(\"../../shared/utils/DateFns.bs.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Dropdown = require(\"../../shared/components/Dropdown.bs.js\");\nvar Inflector = require(\"../../shared/utils/Inflector.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ArrayUtils = require(\"../../shared/utils/ArrayUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../shared/utils/GraphqlQuery.bs.js\");\nvar MarkdownBlock = require(\"../../shared/components/MarkdownBlock.bs.js\");\nvar TopicsShow__Post = require(\"../types/TopicsShow__Post.bs.js\");\nvar TopicsShow__UserShow = require(\"./TopicsShow__UserShow.bs.js\");\nvar TopicsShow__PostReply = require(\"./TopicsShow__PostReply.bs.js\");\nvar TopicsShow__PostEditor = require(\"./TopicsShow__PostEditor.bs.js\");\nvar TopicsShow__LikeManager = require(\"./TopicsShow__LikeManager.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\n((require(\"./TopicsShow__PostShow.css\")));\n\nvar solutionIcon = React.createElement(\"div\", {\n      \"aria-label\": \"Marked as solution icon\",\n      className: \"flex lg:flex-col items-center px-2 lg:pl-0 py-1 lg:pr-1 lg:pr-4 lg:pb-4 lg:pt-2 bg-green-200 lg:bg-transparent rounded\"\n    }, React.createElement(\"div\", {\n          className: \"flex items-center justify-center lg:w-8 lg:h-8 bg-green-200 text-green-800 rounded-full\"\n        }, React.createElement(PfIcon.make, {\n              className: \"if i-check-solid text-sm lg:text-base\"\n            })), React.createElement(\"div\", {\n          className: \"text-xs lg:text-tiny font-semibold text-green-800 pl-2 lg:pl-0 lg:pt-1\"\n        }, \"Solution\"));\n\nfunction findUser(users, userId) {\n  return User.findById(userId, $$Array.to_list(users));\n}\n\nvar ppx_printed_query = \"mutation MarkAsSolutionMutation($id: ID!)  {\\nmarkPostAsSolution(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"markPostAsSolution\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type MarkPostAsSolutionPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field markPostAsSolution on type Mutation is missing\");\n  }\n  return {\n          markPostAsSolution: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar MarkPostAsSolutionQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nvar ppx_printed_query$1 = \"mutation ArchivePostMutation($id: ID!)  {\\narchivePost(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"archivePost\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type ArchivePostPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field archivePost on type Mutation is missing\");\n  }\n  return {\n          archivePost: tmp\n        };\n}\n\nfunction make$1(id, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar ArchivePostQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction markPostAsSolution(postId, markPostAsSolutionCB) {\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make(postId, /* () */0)).then((function (response) {\n          if (response.markPostAsSolution.success) {\n            Curry._1(markPostAsSolutionCB, /* () */0);\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction archivePost(isFirstPost, postId, archivePostCB) {\n  if (window.confirm((\n          isFirstPost ? \"Are you sure you want to delete the topic? \" : \"Are you sure you want to delete the post? \"\n        ) + \"This cannot be undone.\")) {\n    (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make$1(postId, /* () */0)).then((function (response) {\n            if (response.archivePost.success) {\n              Curry._1(archivePostCB, /* () */0);\n            }\n            return Promise.resolve(/* () */0);\n          }));\n    return /* () */0;\n  } else {\n    return /* () */0;\n  }\n}\n\nfunction optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, replies, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) {\n  var selected = React.createElement(\"div\", {\n        \"aria-label\": \"Options for post \" + TopicsShow__Post.id(post),\n        className: \"flex items-center justify-center w-8 h-8 rounded leading-tight border bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200\"\n      }, React.createElement(PfIcon.make, {\n            className: \"if i-ellipsis-h-regular text-base\"\n          }));\n  var postTypeString = isFirstPost ? \"Post\" : \"Reply\";\n  var editPostButton = React.createElement(\"button\", {\n        className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n        onClick: (function (param) {\n            return Curry._1(toggleShowPostEdit, (function (param) {\n                          return true;\n                        }));\n          })\n      }, React.createElement(FaIcon.make, {\n            classes: \"fas fa-edit fa-fw text-base\"\n          }), React.createElement(\"span\", {\n            className: \"ml-2\"\n          }, \"Edit \" + postTypeString));\n  var markAsSolutionButton = isFirstPost || TopicsShow__Post.solution(post) ? null : React.createElement(\"button\", {\n          className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n          onClick: (function (param) {\n              return markPostAsSolution(TopicsShow__Post.id(post), markPostAsSolutionCB);\n            })\n        }, React.createElement(PfIcon.make, {\n              className: \"if i-check-circle-alt-regular if-fw text-base\"\n            }), React.createElement(\"span\", {\n              className: \"ml-2\"\n            }, \"Mark as solution\"));\n  var showDelete = isFirstPost ? isCoach || isPostCreator && ArrayUtils.isEmpty(replies) : isCoach || isPostCreator;\n  var deletePostButton = showDelete ? React.createElement(\"button\", {\n          className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n          onClick: (function (param) {\n              return archivePost(isFirstPost, TopicsShow__Post.id(post), archivePostCB);\n            })\n        }, React.createElement(FaIcon.make, {\n              classes: \"fas fa-trash-alt fa-fw text-base\"\n            }), React.createElement(\"span\", {\n              className: \"ml-2\"\n            }, \"Delete \" + postTypeString)) : null;\n  var match = TopicsShow__Post.editorId(post);\n  var historyButton = match !== undefined ? React.createElement(\"a\", {\n          className: \"flex w-full px-3 py-2 font-semibold items-center text-gray-700 whitespace-no-wrap\",\n          href: \"/posts/\" + (TopicsShow__Post.id(post) + \"/versions\")\n        }, React.createElement(FaIcon.make, {\n              classes: \"fas fa-history fa-fw text-base\"\n            }), React.createElement(\"span\", {\n              className: \"ml-2\"\n            }, \"History\")) : null;\n  var contents = isCoach ? [\n      editPostButton,\n      markAsSolutionButton,\n      historyButton,\n      deletePostButton\n    ] : (\n      isTopicCreator ? (\n          isPostCreator ? [\n              editPostButton,\n              markAsSolutionButton,\n              historyButton,\n              deletePostButton\n            ] : [\n              markAsSolutionButton,\n              historyButton\n            ]\n        ) : (\n          isPostCreator ? [\n              editPostButton,\n              historyButton,\n              deletePostButton\n            ] : []\n        )\n    );\n  return React.createElement(Dropdown.make, {\n              selected: selected,\n              contents: contents,\n              right: true\n            });\n}\n\nfunction onBorderAnimationEnd($$event) {\n  var element = $$event.target;\n  element.className = \"\";\n  return /* () */0;\n}\n\nfunction navigateToEditor(param) {\n  var element = document.getElementById(\"add-reply-to-topic\");\n  setTimeout((function (param) {\n          if (element == null) {\n            Rollbar.error(\"Could not find the post to scroll to.\");\n            return /* () */0;\n          } else {\n            element.scrollIntoView();\n            element.className = \"w-full flex flex-col topics-show__highlighted-item\";\n            return /* () */0;\n          }\n        }), 50);\n  return /* () */0;\n}\n\nfunction TopicsShow__PostShow(Props) {\n  var post = Props.post;\n  var topic = Props.topic;\n  var users = Props.users;\n  var posts = Props.posts;\n  var currentUserId = Props.currentUserId;\n  var isCoach = Props.isCoach;\n  var isTopicCreator = Props.isTopicCreator;\n  var updatePostCB = Props.updatePostCB;\n  var addNewReplyCB = Props.addNewReplyCB;\n  var addPostLikeCB = Props.addPostLikeCB;\n  var removePostLikeCB = Props.removePostLikeCB;\n  var markPostAsSolutionCB = Props.markPostAsSolutionCB;\n  var archivePostCB = Props.archivePostCB;\n  var isPostCreator = currentUserId === TopicsShow__Post.creatorId(post);\n  var isFirstPost = TopicsShow__Post.postNumber(post) === 1;\n  var repliesToPost = isFirstPost ? [] : TopicsShow__Post.repliesToPost(posts, post);\n  var match = React.useState((function () {\n          return false;\n        }));\n  var toggleShowPostEdit = match[1];\n  var match$1 = React.useState((function () {\n          return false;\n        }));\n  var toggleShowReplies = match$1[1];\n  var showReplies = match$1[0];\n  var userId = TopicsShow__Post.creatorId(post);\n  var tmp;\n  if (match[0]) {\n    tmp = React.createElement(\"div\", {\n          className: \"flex-1\"\n        }, React.createElement(TopicsShow__PostEditor.make, {\n              id: \"edit-post-\" + TopicsShow__Post.id(post),\n              topic: topic,\n              currentUserId: currentUserId,\n              handlePostCB: updatePostCB,\n              replies: posts,\n              users: users,\n              post: post,\n              handleCloseCB: (function (param) {\n                  return Curry._1(toggleShowPostEdit, (function (param) {\n                                return false;\n                              }));\n                })\n            }));\n  } else {\n    var match$2 = TopicsShow__Post.editorId(post);\n    tmp = React.createElement(\"div\", {\n          className: \"flex items-start justify-between min-w-0\"\n        }, React.createElement(\"div\", {\n              className: \"text-sm min-w-0\"\n            }, React.createElement(MarkdownBlock.make, {\n                  markdown: TopicsShow__Post.body(post),\n                  className: \"leading-normal text-sm \",\n                  profile: /* QuestionAndAnswer */1\n                }), match$2 !== undefined ? React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                        className: \"text-xs mt-1 inline-block px-2 py-1 rounded bg-gray-100 text-xs text-gray-800 \"\n                      }, React.createElement(\"span\", undefined, \"Last edited by \"), React.createElement(\"span\", {\n                            className: \"font-semibold\"\n                          }, User.name(User.findById(match$2, $$Array.to_list(users)))), React.createElement(\"span\", undefined, \" on \" + DateFns.format(TopicsShow__Post.updatedAt(post), \"do MMMM, yyyy HH:mm\")))) : null), React.createElement(\"div\", {\n              className: \"hidden lg:block flex-shrink-0 ml-3\"\n            }, isPostCreator || isCoach || isTopicCreator ? optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, posts, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) : null));\n  }\n  var userId$1 = TopicsShow__Post.creatorId(post);\n  return React.createElement(\"div\", {\n              id: \"post-show-\" + TopicsShow__Post.id(post),\n              onAnimationEnd: onBorderAnimationEnd\n            }, React.createElement(\"div\", {\n                  key: TopicsShow__Post.id(post),\n                  className: \"flex pt-4\"\n                }, React.createElement(\"div\", {\n                      className: \"hidden lg:flex flex-col\"\n                    }, TopicsShow__Post.solution(post) ? solutionIcon : null, React.createElement(TopicsShow__LikeManager.make, {\n                          post: post,\n                          addPostLikeCB: addPostLikeCB,\n                          removePostLikeCB: removePostLikeCB\n                        })), React.createElement(\"div\", {\n                      className: \"flex-1 pb-6 lg:pb-8 topics-post-show__post-body min-w-0\"\n                    }, React.createElement(\"div\", {\n                          className: \"pt-2\",\n                          id: \"body\"\n                        }, React.createElement(\"div\", {\n                              className: \"flex justify-between lg:hidden\"\n                            }, React.createElement(TopicsShow__UserShow.make, {\n                                  user: User.findById(userId, $$Array.to_list(users)),\n                                  createdAt: TopicsShow__Post.createdAt(post)\n                                }), React.createElement(\"div\", {\n                                  className: \"flex-shrink-0 mt-1\"\n                                }, isPostCreator || isCoach || isTopicCreator ? optionsDropdown(post, isPostCreator, isTopicCreator, isCoach, isFirstPost, posts, toggleShowPostEdit, markPostAsSolutionCB, archivePostCB) : null)), tmp), React.createElement(\"div\", {\n                          className: \"flex justify-between lg:items-end pt-4\"\n                        }, React.createElement(\"div\", {\n                              className: \"flex-1 lg:flex-initial mr-3\"\n                            }, React.createElement(\"div\", {\n                                  className: \"hidden lg:block\"\n                                }, React.createElement(TopicsShow__UserShow.make, {\n                                      user: User.findById(userId$1, $$Array.to_list(users)),\n                                      createdAt: TopicsShow__Post.createdAt(post)\n                                    })), React.createElement(\"div\", {\n                                  className: \"flex items-center lg:items-start justify-between lg:hidden\"\n                                }, React.createElement(\"div\", {\n                                      className: \"flex\"\n                                    }, React.createElement(TopicsShow__LikeManager.make, {\n                                          post: post,\n                                          addPostLikeCB: addPostLikeCB,\n                                          removePostLikeCB: removePostLikeCB\n                                        }), React.createElement(\"div\", undefined, ArrayUtils.isNotEmpty(repliesToPost) ? React.createElement(\"button\", {\n                                                className: \"cursor-pointer flex flex-col items-center justify-center\",\n                                                onClick: (function (param) {\n                                                    return Curry._1(toggleShowReplies, (function (showReplies) {\n                                                                  return !showReplies;\n                                                                }));\n                                                  })\n                                              }, React.createElement(\"span\", {\n                                                    className: \"flex items-center justify-center rounded-lg lg:bg-gray-100 hover:bg-gray-300 text-gray-700 hover:text-gray-900 h-8 w-8 md:h-10 md:w-10 p-1 md:p-2 mx-auto\"\n                                                  }, React.createElement(FaIcon.make, {\n                                                        classes: \"far fa-comment-alt\"\n                                                      })), React.createElement(\"span\", {\n                                                    className: \"text-tiny lg:text-xs font-semibold\"\n                                                  }, String(TopicsShow__Post.replies(post).length))) : null)), TopicsShow__Post.solution(post) ? solutionIcon : null)), React.createElement(\"div\", {\n                              className: \"flex items-center text-sm font-semibold lg:mb-1\"\n                            }, React.createElement(\"div\", {\n                                  className: \"hidden lg:block\"\n                                }, ArrayUtils.isNotEmpty(repliesToPost) ? React.createElement(\"button\", {\n                                        \"aria-label\": \"Show replies of post \" + TopicsShow__Post.id(post),\n                                        className: \"border bg-white mr-3 p-2 rounded text-xs font-semibold\",\n                                        id: \"show-replies-\" + TopicsShow__Post.id(post),\n                                        onClick: (function (param) {\n                                            return Curry._1(toggleShowReplies, (function (showReplies) {\n                                                          return !showReplies;\n                                                        }));\n                                          })\n                                      }, Inflector.pluralize(\"Reply\", TopicsShow__Post.replies(post).length, true, /* () */0), React.createElement(FaIcon.make, {\n                                            classes: \"ml-2 fas fa-chevron-\" + (\n                                              showReplies ? \"up\" : \"down\"\n                                            )\n                                          })) : null), React.createElement(\"button\", {\n                                  \"aria-label\": isFirstPost ? \"Add reply to topic\" : \"Add reply to post \" + TopicsShow__Post.id(post),\n                                  className: \"bg-gray-100 lg:border lg:bg-gray-200 p-2 rounded text-xs font-semibold\",\n                                  id: \"reply-button-\" + TopicsShow__Post.id(post),\n                                  onClick: (function (param) {\n                                      Curry._1(addNewReplyCB, /* () */0);\n                                      return navigateToEditor(/* () */0);\n                                    })\n                                }, React.createElement(FaIcon.make, {\n                                      classes: \"fas fa-reply mr-2\"\n                                    }), \"Reply\"))), showReplies ? React.createElement(\"div\", {\n                            \"aria-label\": \"Replies to post \" + TopicsShow__Post.id(post),\n                            className: \"lg:pl-10 pt-2 topics-post-show__replies-container\"\n                          }, $$Array.map((function (post) {\n                                  return React.createElement(TopicsShow__PostReply.make, {\n                                              post: post,\n                                              users: users,\n                                              key: TopicsShow__Post.id(post)\n                                            });\n                                }), repliesToPost)) : null)));\n}\n\nvar make$2 = TopicsShow__PostShow;\n\nexports.str = str;\nexports.solutionIcon = solutionIcon;\nexports.findUser = findUser;\nexports.MarkPostAsSolutionQuery = MarkPostAsSolutionQuery;\nexports.ArchivePostQuery = ArchivePostQuery;\nexports.markPostAsSolution = markPostAsSolution;\nexports.archivePost = archivePost;\nexports.optionsDropdown = optionsDropdown;\nexports.onBorderAnimationEnd = onBorderAnimationEnd;\nexports.navigateToEditor = navigateToEditor;\nexports.make = make$2;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}