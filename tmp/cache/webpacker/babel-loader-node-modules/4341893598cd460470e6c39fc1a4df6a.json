{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar CourseEditor__Form = require(\"./course_editor/CourseEditor__Form.bs.js\");\n\nvar CourseEditor__Course = require(\"../types/course_editor/CourseEditor__Course.bs.js\");\n\nvar CourseEditor__ImagesForm = require(\"./course_editor/CourseEditor__ImagesForm.bs.js\");\n\nrequire(\"courses/shared/background_patterns.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query CoursesQuery  {\\ncourses  {\\n...\" + CourseEditor__Course.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\" + CourseEditor__Course.Fragments.AllFields.query;\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"courses\");\n  return {\n    courses: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map(function (value) {\n      return Curry._1(CourseEditor__Course.Fragments.AllFields.parse, value);\n    }) : Js_exn.raiseError(\"graphql_ppx: Field courses on type Query is missing\")\n  };\n}\n\nfunction make(param) {\n  return {\n    query: ppx_printed_query,\n    variables: null,\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(param) {\n  return {\n    query: ppx_printed_query,\n    variables: null,\n    parse: parse\n  };\n}\n\nfunction makeVariables(param) {\n  return null;\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn) {\n  return 0;\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar CoursesQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case\n    /* UpdateEditorAction */\n    0:\n      return {\n        editorAction: action[0],\n        courses: state.courses\n      };\n\n    case\n    /* UpdateCourse */\n    1:\n      var newCourses = CourseEditor__Course.updateList(state.courses, action[0]);\n      return {\n        editorAction:\n        /* Hidden */\n        0,\n        courses: newCourses\n      };\n\n    case\n    /* UpdateCourses */\n    2:\n      return {\n        editorAction: state.editorAction,\n        courses: action[0]\n      };\n  }\n}\n\nfunction hideEditorAction(send, param) {\n  return Curry._1(send,\n  /* UpdateEditorAction */\n  Block.__(0, [\n  /* Hidden */\n  0]));\n}\n\nfunction updateCourse(send, course) {\n  return Curry._1(send,\n  /* UpdateCourse */\n  Block.__(1, [course]));\n}\n\nfunction courseLinks(course) {\n  return React.createElement(\"div\", {\n    className: \"flex\"\n  }, React.createElement(\"a\", {\n    className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n    href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/curriculum\")\n  }, \"Curriculum\"), React.createElement(\"a\", {\n    className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n    href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/students\")\n  }, \"Users\"), React.createElement(\"a\", {\n    className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n    href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/coaches\")\n  }, \"Coaches\"), React.createElement(\"a\", {\n    className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n    href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/exports\")\n  }, \"Exports\"));\n}\n\nfunction CourseEditor(Props) {\n  var match = React.useReducer(reducer, {\n    editorAction:\n    /* Hidden */\n    0,\n    courses:\n    /* [] */\n    0\n  });\n  var send = match[1];\n  var state = match[0];\n  React.useEffect(function () {\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(\n    /* () */\n    0)).then(function (result) {\n      var courses = $$Array.to_list(result.courses.map(CourseEditor__Course.makeFromJs));\n\n      Curry._1(send,\n      /* UpdateCourses */\n      Block.__(2, [courses]));\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return;\n  }, []);\n  var match$1 = state.editorAction;\n  var tmp;\n  tmp = typeof match$1 === \"number\" ? null : match$1.tag ? React.createElement(CourseEditor__ImagesForm.make, {\n    course: match$1[0],\n    updateCourseCB: function updateCourseCB(param) {\n      return Curry._1(send,\n      /* UpdateCourse */\n      Block.__(1, [param]));\n    },\n    closeDrawerCB: function closeDrawerCB(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(0, [\n      /* Hidden */\n      0]));\n    }\n  }) : React.createElement(CourseEditor__Form.make, {\n    course: match$1[0],\n    hideEditorActionCB: function hideEditorActionCB(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(0, [\n      /* Hidden */\n      0]));\n    },\n    updateCourseCB: function updateCourseCB(param) {\n      return Curry._1(send,\n      /* UpdateCourse */\n      Block.__(1, [param]));\n    }\n  });\n  return React.createElement(\"div\", {\n    className: \"flex flex-1 h-full bg-gray-200 overflow-y-scroll\"\n  }, tmp, React.createElement(\"div\", {\n    className: \"flex-1 flex flex-col\"\n  }, React.createElement(\"div\", {\n    className: \"items-center justify-between max-w-3xl mx-auto mt-8 w-full px-2\"\n  }, React.createElement(\"button\", {\n    className: \"w-full flex items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-md focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg cursor-pointer\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(0, [\n      /* ShowForm */\n      Block.__(0, [undefined])]));\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle text-lg\"\n  }), React.createElement(\"span\", {\n    className: \"font-semibold ml-2\"\n  }, \"Add New Course\"))), React.createElement(\"div\", {\n    className: \"px-6 pb-4 mt-5 flex flex-1\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-3xl flex flex-wrap mx-auto w-full\"\n  }, $$Array.of_list(List.map(function (course) {\n    var match = CourseEditor__Course.thumbnail(course);\n    return React.createElement(\"div\", {\n      key: CourseEditor__Course.id(course),\n      className: \"px-2 w-1/2\"\n    }, React.createElement(\"div\", {\n      key: CourseEditor__Course.id(course),\n      className: \"flex items-center overflow-hidden shadow bg-white rounded-lg mb-4\"\n    }, React.createElement(\"div\", {\n      className: \"w-full\"\n    }, React.createElement(\"div\", undefined, match !== undefined ? React.createElement(\"img\", {\n      className: \"object-cover h-48 w-full\",\n      src: CourseEditor__Course.imageUrl(match)\n    }) : React.createElement(\"div\", {\n      className: \"h-48 svg-bg-pattern-1\"\n    })), React.createElement(\"div\", {\n      key: CourseEditor__Course.id(course),\n      className: \"flex w-full\"\n    }, React.createElement(\"a\", {\n      className: \"cursor-pointer flex flex-1 items-center py-6 px-4 hover:bg-gray-100\",\n      title: \"Edit \" + CourseEditor__Course.name(course),\n      onClick: function onClick(param) {\n        return Curry._1(send,\n        /* UpdateEditorAction */\n        Block.__(0, [\n        /* ShowForm */\n        Block.__(0, [course])]));\n      }\n    }, React.createElement(\"div\", undefined, React.createElement(\"span\", {\n      className: \"text-black font-semibold\"\n    }, CourseEditor__Course.name(course)))), React.createElement(\"a\", {\n      className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n      title: \"Edit images for \" + CourseEditor__Course.name(course),\n      onClick: function onClick(param) {\n        return Curry._1(send,\n        /* UpdateEditorAction */\n        Block.__(0, [\n        /* ShowCoverImageForm */\n        Block.__(1, [course])]));\n      }\n    }, \"Edit Images\")), React.createElement(\"div\", {\n      className: \"text-gray-800 bg-gray-300 text-sm font-semibold p-4 w-full\"\n    }, React.createElement(\"span\", undefined, CourseEditor__Course.description(course)), React.createElement(\"div\", {\n      className: \"mt-2\"\n    }, React.createElement(\"i\", {\n      className: \"fas fa-external-link-square-alt\"\n    }), React.createElement(\"a\", {\n      className: \"text-sm font-semibold cursor-pointer ml-2 text-primary-500\",\n      href: \"/courses/\" + CourseEditor__Course.id(course),\n      target: \"_blank\"\n    }, \"View public page\"))), courseLinks(course))));\n  }, CourseEditor__Course.sort(state.courses)))))));\n}\n\nvar make$1 = CourseEditor;\nexports.str = str;\nexports.CoursesQuery = CoursesQuery;\nexports.reducer = reducer;\nexports.hideEditorAction = hideEditorAction;\nexports.updateCourse = updateCourse;\nexports.courseLinks = courseLinks;\nexports.make = make$1;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/CourseEditor.bs.js"],"names":["List","require","$$Array","Block","Curry","React","Js_exn","Js_dict","Js_json","Js_option","Caml_option","GraphqlQuery","CourseEditor__Form","CourseEditor__Course","CourseEditor__ImagesForm","str","prim","ppx_printed_query","Fragments","AllFields","name","query","parse","value","value$1","getExn","decodeObject","match","get","courses","undefined","decodeArray","valFromOption","map","_1","raiseError","make","param","variables","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","definition","ret_type","f","MT_Ret","CoursesQuery","reducer","state","action","tag","editorAction","newCourses","updateList","hideEditorAction","send","__","updateCourse","course","courseLinks","createElement","className","href","id","CourseEditor","Props","useReducer","useEffect","eta","sendQuery","then","result","to_list","makeFromJs","Promise","resolve","match$1","tmp","updateCourseCB","closeDrawerCB","hideEditorActionCB","onClick","of_list","thumbnail","key","src","imageUrl","title","description","target","sort","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar CourseEditor__Form = require(\"./course_editor/CourseEditor__Form.bs.js\");\nvar CourseEditor__Course = require(\"../types/course_editor/CourseEditor__Course.bs.js\");\nvar CourseEditor__ImagesForm = require(\"./course_editor/CourseEditor__ImagesForm.bs.js\");\n\n((require(\"courses/shared/background_patterns.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query CoursesQuery  {\\ncourses  {\\n...\" + CourseEditor__Course.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\" + CourseEditor__Course.Fragments.AllFields.query;\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"courses\");\n  return {\n          courses: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map((function (value) {\n                    return Curry._1(CourseEditor__Course.Fragments.AllFields.parse, value);\n                  })) : Js_exn.raiseError(\"graphql_ppx: Field courses on type Query is missing\")\n        };\n}\n\nfunction make(param) {\n  return {\n          query: ppx_printed_query,\n          variables: null,\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(param) {\n  return {\n          query: ppx_printed_query,\n          variables: null,\n          parse: parse\n        };\n}\n\nfunction makeVariables(param) {\n  return null;\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn) {\n  return 0;\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar CoursesQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case /* UpdateEditorAction */0 :\n        return {\n                editorAction: action[0],\n                courses: state.courses\n              };\n    case /* UpdateCourse */1 :\n        var newCourses = CourseEditor__Course.updateList(state.courses, action[0]);\n        return {\n                editorAction: /* Hidden */0,\n                courses: newCourses\n              };\n    case /* UpdateCourses */2 :\n        return {\n                editorAction: state.editorAction,\n                courses: action[0]\n              };\n    \n  }\n}\n\nfunction hideEditorAction(send, param) {\n  return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* Hidden */0]));\n}\n\nfunction updateCourse(send, course) {\n  return Curry._1(send, /* UpdateCourse */Block.__(1, [course]));\n}\n\nfunction courseLinks(course) {\n  return React.createElement(\"div\", {\n              className: \"flex\"\n            }, React.createElement(\"a\", {\n                  className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n                  href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/curriculum\")\n                }, \"Curriculum\"), React.createElement(\"a\", {\n                  className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n                  href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/students\")\n                }, \"Users\"), React.createElement(\"a\", {\n                  className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n                  href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/coaches\")\n                }, \"Coaches\"), React.createElement(\"a\", {\n                  className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n                  href: \"/school/courses/\" + (CourseEditor__Course.id(course) + \"/exports\")\n                }, \"Exports\"));\n}\n\nfunction CourseEditor(Props) {\n  var match = React.useReducer(reducer, {\n        editorAction: /* Hidden */0,\n        courses: /* [] */0\n      });\n  var send = match[1];\n  var state = match[0];\n  React.useEffect((function () {\n          (function (eta) {\n                  return GraphqlQuery.sendQuery(undefined, eta);\n                })(make(/* () */0)).then((function (result) {\n                  var courses = $$Array.to_list(result.courses.map(CourseEditor__Course.makeFromJs));\n                  Curry._1(send, /* UpdateCourses */Block.__(2, [courses]));\n                  return Promise.resolve(/* () */0);\n                }));\n          return ;\n        }), ([]));\n  var match$1 = state.editorAction;\n  var tmp;\n  tmp = typeof match$1 === \"number\" ? null : (\n      match$1.tag ? React.createElement(CourseEditor__ImagesForm.make, {\n              course: match$1[0],\n              updateCourseCB: (function (param) {\n                  return Curry._1(send, /* UpdateCourse */Block.__(1, [param]));\n                }),\n              closeDrawerCB: (function (param) {\n                  return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* Hidden */0]));\n                })\n            }) : React.createElement(CourseEditor__Form.make, {\n              course: match$1[0],\n              hideEditorActionCB: (function (param) {\n                  return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* Hidden */0]));\n                }),\n              updateCourseCB: (function (param) {\n                  return Curry._1(send, /* UpdateCourse */Block.__(1, [param]));\n                })\n            })\n    );\n  return React.createElement(\"div\", {\n              className: \"flex flex-1 h-full bg-gray-200 overflow-y-scroll\"\n            }, tmp, React.createElement(\"div\", {\n                  className: \"flex-1 flex flex-col\"\n                }, React.createElement(\"div\", {\n                      className: \"items-center justify-between max-w-3xl mx-auto mt-8 w-full px-2\"\n                    }, React.createElement(\"button\", {\n                          className: \"w-full flex items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-md focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg cursor-pointer\",\n                          onClick: (function (param) {\n                              return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* ShowForm */Block.__(0, [undefined])]));\n                            })\n                        }, React.createElement(\"i\", {\n                              className: \"fas fa-plus-circle text-lg\"\n                            }), React.createElement(\"span\", {\n                              className: \"font-semibold ml-2\"\n                            }, \"Add New Course\"))), React.createElement(\"div\", {\n                      className: \"px-6 pb-4 mt-5 flex flex-1\"\n                    }, React.createElement(\"div\", {\n                          className: \"max-w-3xl flex flex-wrap mx-auto w-full\"\n                        }, $$Array.of_list(List.map((function (course) {\n                                    var match = CourseEditor__Course.thumbnail(course);\n                                    return React.createElement(\"div\", {\n                                                key: CourseEditor__Course.id(course),\n                                                className: \"px-2 w-1/2\"\n                                              }, React.createElement(\"div\", {\n                                                    key: CourseEditor__Course.id(course),\n                                                    className: \"flex items-center overflow-hidden shadow bg-white rounded-lg mb-4\"\n                                                  }, React.createElement(\"div\", {\n                                                        className: \"w-full\"\n                                                      }, React.createElement(\"div\", undefined, match !== undefined ? React.createElement(\"img\", {\n                                                                  className: \"object-cover h-48 w-full\",\n                                                                  src: CourseEditor__Course.imageUrl(match)\n                                                                }) : React.createElement(\"div\", {\n                                                                  className: \"h-48 svg-bg-pattern-1\"\n                                                                })), React.createElement(\"div\", {\n                                                            key: CourseEditor__Course.id(course),\n                                                            className: \"flex w-full\"\n                                                          }, React.createElement(\"a\", {\n                                                                className: \"cursor-pointer flex flex-1 items-center py-6 px-4 hover:bg-gray-100\",\n                                                                title: \"Edit \" + CourseEditor__Course.name(course),\n                                                                onClick: (function (param) {\n                                                                    return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* ShowForm */Block.__(0, [course])]));\n                                                                  })\n                                                              }, React.createElement(\"div\", undefined, React.createElement(\"span\", {\n                                                                        className: \"text-black font-semibold\"\n                                                                      }, CourseEditor__Course.name(course)))), React.createElement(\"a\", {\n                                                                className: \"text-primary-500 bg-gray-100 hover:bg-gray-200 border-l text-sm font-semibold items-center p-4 flex cursor-pointer\",\n                                                                title: \"Edit images for \" + CourseEditor__Course.name(course),\n                                                                onClick: (function (param) {\n                                                                    return Curry._1(send, /* UpdateEditorAction */Block.__(0, [/* ShowCoverImageForm */Block.__(1, [course])]));\n                                                                  })\n                                                              }, \"Edit Images\")), React.createElement(\"div\", {\n                                                            className: \"text-gray-800 bg-gray-300 text-sm font-semibold p-4 w-full\"\n                                                          }, React.createElement(\"span\", undefined, CourseEditor__Course.description(course)), React.createElement(\"div\", {\n                                                                className: \"mt-2\"\n                                                              }, React.createElement(\"i\", {\n                                                                    className: \"fas fa-external-link-square-alt\"\n                                                                  }), React.createElement(\"a\", {\n                                                                    className: \"text-sm font-semibold cursor-pointer ml-2 text-primary-500\",\n                                                                    href: \"/courses/\" + CourseEditor__Course.id(course),\n                                                                    target: \"_blank\"\n                                                                  }, \"View public page\"))), courseLinks(course))));\n                                  }), CourseEditor__Course.sort(state.courses)))))));\n}\n\nvar make$1 = CourseEditor;\n\nexports.str = str;\nexports.CoursesQuery = CoursesQuery;\nexports.reducer = reducer;\nexports.hideEditorAction = hideEditorAction;\nexports.updateCourse = updateCourse;\nexports.courseLinks = courseLinks;\nexports.make = make$1;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}