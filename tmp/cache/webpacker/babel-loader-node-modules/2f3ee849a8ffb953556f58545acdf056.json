{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar PfIcon = require(\"../../../packages/pf-icon/src/PfIcon.bs.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Tooltip = require(\"../../../shared/components/Tooltip.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\n\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar CoursesStudents__DistributionInLevel = require(\"../types/CoursesStudents__DistributionInLevel.bs.js\");\n\nrequire(\"./CoursesStudents__StudentDistribution.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query StudentDistribution($courseId: ID!, $coachId: ID)  {\\nstudentDistribution(courseId: $courseId, coachId: $coachId)  {\\nid  \\nnumber  \\nstudentsInLevel  \\nteamsInLevel  \\nunlocked  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"studentDistribution\");\n  return {\n    studentDistribution: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map(function (value) {\n      var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n      var match = Js_dict.get(value$1, \"id\");\n      var tmp;\n\n      if (match !== undefined) {\n        var value$2 = Caml_option.valFromOption(match);\n        var match$1 = Js_json.decodeString(value$2);\n        tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n      } else {\n        tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type DistributionInLevel is missing\");\n      }\n\n      var match$2 = Js_dict.get(value$1, \"number\");\n      var tmp$1;\n\n      if (match$2 !== undefined) {\n        var value$3 = Caml_option.valFromOption(match$2);\n        var match$3 = Js_json.decodeNumber(value$3);\n        tmp$1 = match$3 !== undefined ? match$3 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$3));\n      } else {\n        tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field number on type DistributionInLevel is missing\");\n      }\n\n      var match$4 = Js_dict.get(value$1, \"studentsInLevel\");\n      var tmp$2;\n\n      if (match$4 !== undefined) {\n        var value$4 = Caml_option.valFromOption(match$4);\n        var match$5 = Js_json.decodeNumber(value$4);\n        tmp$2 = match$5 !== undefined ? match$5 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$4));\n      } else {\n        tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field studentsInLevel on type DistributionInLevel is missing\");\n      }\n\n      var match$6 = Js_dict.get(value$1, \"teamsInLevel\");\n      var tmp$3;\n\n      if (match$6 !== undefined) {\n        var value$5 = Caml_option.valFromOption(match$6);\n        var match$7 = Js_json.decodeNumber(value$5);\n        tmp$3 = match$7 !== undefined ? match$7 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$5));\n      } else {\n        tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field teamsInLevel on type DistributionInLevel is missing\");\n      }\n\n      var match$8 = Js_dict.get(value$1, \"unlocked\");\n      var tmp$4;\n\n      if (match$8 !== undefined) {\n        var value$6 = Caml_option.valFromOption(match$8);\n        var match$9 = Js_json.decodeBoolean(value$6);\n        tmp$4 = match$9 !== undefined ? match$9 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$6));\n      } else {\n        tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field unlocked on type DistributionInLevel is missing\");\n      }\n\n      return {\n        id: tmp,\n        number: tmp$1,\n        studentsInLevel: tmp$2,\n        teamsInLevel: tmp$3,\n        unlocked: tmp$4\n      };\n    }) : Js_exn.raiseError(\"graphql_ppx: Field studentDistribution on type Query is missing\")\n  };\n}\n\nfunction make(courseId, coachId, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"coachId\", coachId !== undefined ? coachId : null]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var coachId = variables.coachId;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"coachId\", coachId !== undefined ? coachId : null]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(courseId, coachId, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"coachId\", coachId !== undefined ? coachId : null]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, coachId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"coachId\", coachId !== undefined ? coachId : null]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar StudentDistributionQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction stylingForLevelPills(percentageStudents) {\n  var emptyStyle = {};\n  var styleWithWidth = {\n    width: percentageStudents.toString() + \"%\"\n  };\n\n  if (0.0 <= percentageStudents && percentageStudents < 5.0) {\n    return (\n      /* tuple */\n      [\"w-8 flex-shrink-0\", emptyStyle, \"bg-green-200 text-green-800\"]\n    );\n  } else if (5.0 <= percentageStudents && percentageStudents < 20.0) {\n    return (\n      /* tuple */\n      [\"\", styleWithWidth, \"bg-green-300 text-green-800\"]\n    );\n  } else if (20.0 <= percentageStudents && percentageStudents < 40.0) {\n    return (\n      /* tuple */\n      [\"\", styleWithWidth, \"bg-green-400 text-green-900\"]\n    );\n  } else if (40.0 <= percentageStudents && percentageStudents < 60.0) {\n    return (\n      /* tuple */\n      [\"\", styleWithWidth, \"bg-green-500 text-white\"]\n    );\n  } else if (60.0 <= percentageStudents && percentageStudents < 80.0) {\n    return (\n      /* tuple */\n      [\"\", styleWithWidth, \"bg-green-600 text-white\"]\n    );\n  } else {\n    return (\n      /* tuple */\n      [\"\", styleWithWidth, \"bg-green-700 text-white\"]\n    );\n  }\n}\n\nfunction refreshStudentDistribution(courseId, filterCoach, setStudentDistribution) {\n  var coachId = Belt_Option.map(filterCoach, UserProxy.id);\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(courseId, coachId,\n  /* () */\n  0)).then(function (response) {\n    var distribution = $$Array.map(CoursesStudents__DistributionInLevel.fromJsObject, response.studentDistribution);\n\n    Curry._1(setStudentDistribution, function (param) {\n      return distribution;\n    });\n\n    return Promise.resolve(\n    /* () */\n    0);\n  })[\"catch\"](function (error) {\n    console.log(error);\n\n    Curry._1(setStudentDistribution, function (param) {\n      return [];\n    });\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nvar studentDistributionSkeleton = React.createElement(\"div\", {\n  className: \"skeleton-body-container w-full mx-auto\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-body-wrapper px-3 lg:px-0\"\n}, React.createElement(\"div\", {\n  className: \"flex\"\n}, React.createElement(\"div\", {\n  className: \"w-1/6\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n}), React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n})), React.createElement(\"div\", {\n  className: \"w-5/12\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n}), React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n})), React.createElement(\"div\", {\n  className: \"w-1/4\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n}), React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n})), React.createElement(\"div\", {\n  className: \"w-1/12\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n}), React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n})), React.createElement(\"div\", {\n  className: \"w-1/12\"\n}, React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n}), React.createElement(\"div\", {\n  className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n})))));\n\nfunction CoursesStudents__StudentDistribution(Props) {\n  var selectLevelCB = Props.selectLevelCB;\n  var courseId = Props.courseId;\n  var filterCoach = Props.filterCoach;\n  var match = React.useState(function () {\n    return;\n  });\n  var setStudentDistribution = match[1];\n  var studentDistribution = match[0];\n  React.useEffect(function () {\n    refreshStudentDistribution(courseId, filterCoach, setStudentDistribution);\n    return;\n  }, [filterCoach]);\n  var tmp;\n\n  if (studentDistribution !== undefined) {\n    var distribution = studentDistribution;\n    var totalStudentsInCourse = $$Array.fold_left(function (x, y) {\n      return x + CoursesStudents__DistributionInLevel.studentsInLevel(y) | 0;\n    }, 0, distribution);\n    var completedLevels = CoursesStudents__DistributionInLevel.levelsCompletedByAllStudents(distribution);\n    tmp = totalStudentsInCourse > 0 ? React.createElement(\"div\", {\n      className: \"flex w-full border bg-gray-100 rounded font-semibold \"\n    }, $$Array.map(function (level) {\n      var percentageStudents = CoursesStudents__DistributionInLevel.percentageStudents(level, totalStudentsInCourse);\n      var match = stylingForLevelPills(percentageStudents);\n      var tip = React.createElement(\"div\", {\n        className: \"text-left\"\n      }, React.createElement(\"p\", undefined, \"Level: \" + String(CoursesStudents__DistributionInLevel.number(level))), React.createElement(\"p\", undefined, \"Students: \" + String(CoursesStudents__DistributionInLevel.studentsInLevel(level))), CoursesStudents__DistributionInLevel.studentsInLevel(level) !== CoursesStudents__DistributionInLevel.teamsInLevel(level) ? React.createElement(\"p\", undefined, \"Teams: \" + String(CoursesStudents__DistributionInLevel.teamsInLevel(level))) : null, React.createElement(\"p\", undefined, \"Percentage: \" + percentageStudents.toFixed(1)));\n      return React.createElement(\"div\", {\n        key: CoursesStudents__DistributionInLevel.id(level),\n        \"aria-label\": \"Students in level \" + String(CoursesStudents__DistributionInLevel.number(level)),\n        className: \"student-distribution__container text-center relative \" + match[0],\n        style: match[1]\n      }, React.createElement(\"label\", {\n        className: \"absolute -mt-5 left-0 right-0 inline-block text-xs text-gray-700 text-center\"\n      }, CoursesStudents__DistributionInLevel.shortName(level)), React.createElement(Tooltip.make, {\n        tip: tip,\n        className: \"w-full\",\n        position:\n        /* Bottom */\n        437082891,\n        children: React.createElement(\"div\", {\n          className: \"student-distribution__pill hover:shadow-inner focus:shadow-inner relative cursor-pointer border-white text-xs leading-none text-center \" + ($$Array.mem(level, completedLevels) ? \"bg-yellow-300 text-yellow-900\" : CoursesStudents__DistributionInLevel.unlocked(level) ? match[2] : \"student-distribution__pill--locked cursor-default bg-gray-300 text-gray-800\"),\n          onClick: function onClick(param) {\n            return Curry._1(selectLevelCB, CoursesStudents__DistributionInLevel.id(level));\n          }\n        }, $$Array.mem(level, completedLevels) ? React.createElement(PfIcon.make, {\n          className: \"if i-check-solid text-tiny\"\n        }) : React.createElement(\"div\", undefined, React.createElement(\"div\", {\n          className: CoursesStudents__DistributionInLevel.unlocked(level) ? \"\" : \"student-distribution__team-count-value\"\n        }, String(CoursesStudents__DistributionInLevel.teamsInLevel(level))), CoursesStudents__DistributionInLevel.unlocked(level) ? null : React.createElement(\"div\", {\n          className: \"student-distribution__locked-icon\"\n        }, React.createElement(\"i\", {\n          className: \"fas fa-lock text-tiny\"\n        }))))\n      }));\n    }, CoursesStudents__DistributionInLevel.sort(distribution.filter(function (level) {\n      return CoursesStudents__DistributionInLevel.number(level) !== 0;\n    })))) : null;\n  } else {\n    tmp = studentDistributionSkeleton;\n  }\n\n  return React.createElement(\"div\", {\n    \"aria-label\": \"Students level-wise distribution\",\n    className: \"w-full pt-8 max-w-3xl mx-auto hidden md:block\"\n  }, tmp);\n}\n\nvar make$1 = CoursesStudents__StudentDistribution;\nexports.str = str;\nexports.StudentDistributionQuery = StudentDistributionQuery;\nexports.stylingForLevelPills = stylingForLevelPills;\nexports.refreshStudentDistribution = refreshStudentDistribution;\nexports.studentDistributionSkeleton = studentDistributionSkeleton;\nexports.make = make$1;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/students/components/CoursesStudents__StudentDistribution.bs.js"],"names":["$$Array","require","Curry","React","Js_exn","PfIcon","Js_dict","Js_json","Tooltip","Js_option","UserProxy","Belt_Option","Caml_option","GraphqlQuery","CoursesStudents__DistributionInLevel","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","studentDistribution","undefined","decodeArray","valFromOption","map","tmp","value$2","match$1","decodeString","raiseError","JSON","stringify","match$2","tmp$1","value$3","match$3","decodeNumber","match$4","tmp$2","value$4","match$5","match$6","tmp$3","value$5","match$7","match$8","tmp$4","value$6","match$9","decodeBoolean","id","number","studentsInLevel","teamsInLevel","unlocked","make","courseId","coachId","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","StudentDistributionQuery","stylingForLevelPills","percentageStudents","emptyStyle","styleWithWidth","width","toString","refreshStudentDistribution","filterCoach","setStudentDistribution","eta","sendQuery","then","response","distribution","fromJsObject","Promise","resolve","error","console","log","studentDistributionSkeleton","createElement","className","CoursesStudents__StudentDistribution","Props","selectLevelCB","useState","useEffect","totalStudentsInCourse","fold_left","x","y","completedLevels","levelsCompletedByAllStudents","level","tip","String","toFixed","key","style","shortName","position","children","mem","onClick","sort","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar PfIcon = require(\"../../../packages/pf-icon/src/PfIcon.bs.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Tooltip = require(\"../../../shared/components/Tooltip.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar CoursesStudents__DistributionInLevel = require(\"../types/CoursesStudents__DistributionInLevel.bs.js\");\n\n((require(\"./CoursesStudents__StudentDistribution.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query StudentDistribution($courseId: ID!, $coachId: ID)  {\\nstudentDistribution(courseId: $courseId, coachId: $coachId)  {\\nid  \\nnumber  \\nstudentsInLevel  \\nteamsInLevel  \\nunlocked  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"studentDistribution\");\n  return {\n          studentDistribution: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map((function (value) {\n                    var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n                    var match = Js_dict.get(value$1, \"id\");\n                    var tmp;\n                    if (match !== undefined) {\n                      var value$2 = Caml_option.valFromOption(match);\n                      var match$1 = Js_json.decodeString(value$2);\n                      tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n                    } else {\n                      tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type DistributionInLevel is missing\");\n                    }\n                    var match$2 = Js_dict.get(value$1, \"number\");\n                    var tmp$1;\n                    if (match$2 !== undefined) {\n                      var value$3 = Caml_option.valFromOption(match$2);\n                      var match$3 = Js_json.decodeNumber(value$3);\n                      tmp$1 = match$3 !== undefined ? match$3 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$3));\n                    } else {\n                      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field number on type DistributionInLevel is missing\");\n                    }\n                    var match$4 = Js_dict.get(value$1, \"studentsInLevel\");\n                    var tmp$2;\n                    if (match$4 !== undefined) {\n                      var value$4 = Caml_option.valFromOption(match$4);\n                      var match$5 = Js_json.decodeNumber(value$4);\n                      tmp$2 = match$5 !== undefined ? match$5 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$4));\n                    } else {\n                      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field studentsInLevel on type DistributionInLevel is missing\");\n                    }\n                    var match$6 = Js_dict.get(value$1, \"teamsInLevel\");\n                    var tmp$3;\n                    if (match$6 !== undefined) {\n                      var value$5 = Caml_option.valFromOption(match$6);\n                      var match$7 = Js_json.decodeNumber(value$5);\n                      tmp$3 = match$7 !== undefined ? match$7 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$5));\n                    } else {\n                      tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field teamsInLevel on type DistributionInLevel is missing\");\n                    }\n                    var match$8 = Js_dict.get(value$1, \"unlocked\");\n                    var tmp$4;\n                    if (match$8 !== undefined) {\n                      var value$6 = Caml_option.valFromOption(match$8);\n                      var match$9 = Js_json.decodeBoolean(value$6);\n                      tmp$4 = match$9 !== undefined ? match$9 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$6));\n                    } else {\n                      tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field unlocked on type DistributionInLevel is missing\");\n                    }\n                    return {\n                            id: tmp,\n                            number: tmp$1,\n                            studentsInLevel: tmp$2,\n                            teamsInLevel: tmp$3,\n                            unlocked: tmp$4\n                          };\n                  })) : Js_exn.raiseError(\"graphql_ppx: Field studentDistribution on type Query is missing\")\n        };\n}\n\nfunction make(courseId, coachId, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"coachId\",\n                    coachId !== undefined ? coachId : null\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var coachId = variables.coachId;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"coachId\",\n                    coachId !== undefined ? coachId : null\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(courseId, coachId, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"courseId\",\n                  courseId\n                ],\n                /* tuple */[\n                  \"coachId\",\n                  coachId !== undefined ? coachId : null\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, coachId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"courseId\",\n                      courseId\n                    ],\n                    /* tuple */[\n                      \"coachId\",\n                      coachId !== undefined ? coachId : null\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar StudentDistributionQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction stylingForLevelPills(percentageStudents) {\n  var emptyStyle = { };\n  var styleWithWidth = {\n    width: percentageStudents.toString() + \"%\"\n  };\n  if (0.0 <= percentageStudents && percentageStudents < 5.0) {\n    return /* tuple */[\n            \"w-8 flex-shrink-0\",\n            emptyStyle,\n            \"bg-green-200 text-green-800\"\n          ];\n  } else if (5.0 <= percentageStudents && percentageStudents < 20.0) {\n    return /* tuple */[\n            \"\",\n            styleWithWidth,\n            \"bg-green-300 text-green-800\"\n          ];\n  } else if (20.0 <= percentageStudents && percentageStudents < 40.0) {\n    return /* tuple */[\n            \"\",\n            styleWithWidth,\n            \"bg-green-400 text-green-900\"\n          ];\n  } else if (40.0 <= percentageStudents && percentageStudents < 60.0) {\n    return /* tuple */[\n            \"\",\n            styleWithWidth,\n            \"bg-green-500 text-white\"\n          ];\n  } else if (60.0 <= percentageStudents && percentageStudents < 80.0) {\n    return /* tuple */[\n            \"\",\n            styleWithWidth,\n            \"bg-green-600 text-white\"\n          ];\n  } else {\n    return /* tuple */[\n            \"\",\n            styleWithWidth,\n            \"bg-green-700 text-white\"\n          ];\n  }\n}\n\nfunction refreshStudentDistribution(courseId, filterCoach, setStudentDistribution) {\n  var coachId = Belt_Option.map(filterCoach, UserProxy.id);\n  (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(courseId, coachId, /* () */0)).then((function (response) {\n            var distribution = $$Array.map(CoursesStudents__DistributionInLevel.fromJsObject, response.studentDistribution);\n            Curry._1(setStudentDistribution, (function (param) {\n                    return distribution;\n                  }));\n            return Promise.resolve(/* () */0);\n          })).catch((function (error) {\n          console.log(error);\n          Curry._1(setStudentDistribution, (function (param) {\n                  return [];\n                }));\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nvar studentDistributionSkeleton = React.createElement(\"div\", {\n      className: \"skeleton-body-container w-full mx-auto\"\n    }, React.createElement(\"div\", {\n          className: \"skeleton-body-wrapper px-3 lg:px-0\"\n        }, React.createElement(\"div\", {\n              className: \"flex\"\n            }, React.createElement(\"div\", {\n                  className: \"w-1/6\"\n                }, React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n                    }), React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n                    })), React.createElement(\"div\", {\n                  className: \"w-5/12\"\n                }, React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n                    }), React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n                    })), React.createElement(\"div\", {\n                  className: \"w-1/4\"\n                }, React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n                    }), React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n                    })), React.createElement(\"div\", {\n                  className: \"w-1/12\"\n                }, React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n                    }), React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n                    })), React.createElement(\"div\", {\n                  className: \"w-1/12\"\n                }, React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-sm skeleton-animate w-6 mx-auto\"\n                    }), React.createElement(\"div\", {\n                      className: \"skeleton-placeholder__line-md skeleton-animate mt-2\"\n                    })))));\n\nfunction CoursesStudents__StudentDistribution(Props) {\n  var selectLevelCB = Props.selectLevelCB;\n  var courseId = Props.courseId;\n  var filterCoach = Props.filterCoach;\n  var match = React.useState((function () {\n          return ;\n        }));\n  var setStudentDistribution = match[1];\n  var studentDistribution = match[0];\n  React.useEffect((function () {\n          refreshStudentDistribution(courseId, filterCoach, setStudentDistribution);\n          return ;\n        }), [filterCoach]);\n  var tmp;\n  if (studentDistribution !== undefined) {\n    var distribution = studentDistribution;\n    var totalStudentsInCourse = $$Array.fold_left((function (x, y) {\n            return x + CoursesStudents__DistributionInLevel.studentsInLevel(y) | 0;\n          }), 0, distribution);\n    var completedLevels = CoursesStudents__DistributionInLevel.levelsCompletedByAllStudents(distribution);\n    tmp = totalStudentsInCourse > 0 ? React.createElement(\"div\", {\n            className: \"flex w-full border bg-gray-100 rounded font-semibold \"\n          }, $$Array.map((function (level) {\n                  var percentageStudents = CoursesStudents__DistributionInLevel.percentageStudents(level, totalStudentsInCourse);\n                  var match = stylingForLevelPills(percentageStudents);\n                  var tip = React.createElement(\"div\", {\n                        className: \"text-left\"\n                      }, React.createElement(\"p\", undefined, \"Level: \" + String(CoursesStudents__DistributionInLevel.number(level))), React.createElement(\"p\", undefined, \"Students: \" + String(CoursesStudents__DistributionInLevel.studentsInLevel(level))), CoursesStudents__DistributionInLevel.studentsInLevel(level) !== CoursesStudents__DistributionInLevel.teamsInLevel(level) ? React.createElement(\"p\", undefined, \"Teams: \" + String(CoursesStudents__DistributionInLevel.teamsInLevel(level))) : null, React.createElement(\"p\", undefined, \"Percentage: \" + percentageStudents.toFixed(1)));\n                  return React.createElement(\"div\", {\n                              key: CoursesStudents__DistributionInLevel.id(level),\n                              \"aria-label\": \"Students in level \" + String(CoursesStudents__DistributionInLevel.number(level)),\n                              className: \"student-distribution__container text-center relative \" + match[0],\n                              style: match[1]\n                            }, React.createElement(\"label\", {\n                                  className: \"absolute -mt-5 left-0 right-0 inline-block text-xs text-gray-700 text-center\"\n                                }, CoursesStudents__DistributionInLevel.shortName(level)), React.createElement(Tooltip.make, {\n                                  tip: tip,\n                                  className: \"w-full\",\n                                  position: /* Bottom */437082891,\n                                  children: React.createElement(\"div\", {\n                                        className: \"student-distribution__pill hover:shadow-inner focus:shadow-inner relative cursor-pointer border-white text-xs leading-none text-center \" + (\n                                          $$Array.mem(level, completedLevels) ? \"bg-yellow-300 text-yellow-900\" : (\n                                              CoursesStudents__DistributionInLevel.unlocked(level) ? match[2] : \"student-distribution__pill--locked cursor-default bg-gray-300 text-gray-800\"\n                                            )\n                                        ),\n                                        onClick: (function (param) {\n                                            return Curry._1(selectLevelCB, CoursesStudents__DistributionInLevel.id(level));\n                                          })\n                                      }, $$Array.mem(level, completedLevels) ? React.createElement(PfIcon.make, {\n                                              className: \"if i-check-solid text-tiny\"\n                                            }) : React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                                                  className: CoursesStudents__DistributionInLevel.unlocked(level) ? \"\" : \"student-distribution__team-count-value\"\n                                                }, String(CoursesStudents__DistributionInLevel.teamsInLevel(level))), CoursesStudents__DistributionInLevel.unlocked(level) ? null : React.createElement(\"div\", {\n                                                    className: \"student-distribution__locked-icon\"\n                                                  }, React.createElement(\"i\", {\n                                                        className: \"fas fa-lock text-tiny\"\n                                                      }))))\n                                }));\n                }), CoursesStudents__DistributionInLevel.sort(distribution.filter((function (level) {\n                          return CoursesStudents__DistributionInLevel.number(level) !== 0;\n                        }))))) : null;\n  } else {\n    tmp = studentDistributionSkeleton;\n  }\n  return React.createElement(\"div\", {\n              \"aria-label\": \"Students level-wise distribution\",\n              className: \"w-full pt-8 max-w-3xl mx-auto hidden md:block\"\n            }, tmp);\n}\n\nvar make$1 = CoursesStudents__StudentDistribution;\n\nexports.str = str;\nexports.StudentDistributionQuery = StudentDistributionQuery;\nexports.stylingForLevelPills = stylingForLevelPills;\nexports.refreshStudentDistribution = refreshStudentDistribution;\nexports.studentDistributionSkeleton = studentDistributionSkeleton;\nexports.make = make$1;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}