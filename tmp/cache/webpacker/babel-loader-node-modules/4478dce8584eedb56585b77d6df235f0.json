{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar PfIcon = require(\"../../../pf-icon/src/PfIcon.bs.js\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar Js_math = require(\"bs-platform/lib/js/js_math.js\");\n\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\n\nvar Belt_SortArray = require(\"bs-platform/lib/js/belt_SortArray.js\");\n\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\n\nvar Webapi__Dom__Element = require(\"bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Element.js\");\n\nrequire(\"./MultiselectDropdown.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar RootElementMissing = Caml_exceptions.create(\"MultiselectDropdown.DomUtils.RootElementMissing\");\n\nfunction focus(id) {\n  var match = document.getElementById(id);\n  var tmp;\n\n  if (match == null) {\n    throw [RootElementMissing, id];\n  } else {\n    tmp = match;\n  }\n\n  Belt_Option.map(Webapi__Dom__Element.asHtmlElement(tmp), function (prim) {\n    prim.focus();\n    return (\n      /* () */\n      0\n    );\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nvar DomUtils = {\n  RootElementMissing: RootElementMissing,\n  focus: focus\n};\n\nfunction Make(Selectable) {\n  var search = function search(searchString, selections) {\n    return Belt_SortArray.stableSortBy(selections.filter(function (selection) {\n      return $$String.lowercase_ascii(Curry._1(Selectable.searchString, selection)).includes($$String.lowercase_ascii(searchString));\n    }), function (x, y) {\n      return $$String.compare(Curry._1(Selectable.value, x), Curry._1(Selectable.value, y));\n    });\n  };\n\n  var selectionTitle = function selectionTitle(selection) {\n    var value = Curry._1(Selectable.value, selection);\n\n    var match = Curry._1(Selectable.label, selection);\n\n    if (match !== undefined) {\n      return \"Pick \" + (match + (\": \" + value));\n    } else {\n      return \"Pick \" + value;\n    }\n  };\n\n  var tagPillClasses = function tagPillClasses(color, showHover) {\n    var bgColor200 = \"bg-\" + (color + \"-200 \");\n    var bgColor300 = \"bg-\" + (color + \"-300 \");\n    var textColor800 = \"text-\" + (color + \"-800 \");\n    var textColor900 = \"text-\" + (color + \"-900 \");\n    return \"rounded text-xs overflow-hidden \" + (bgColor200 + (textColor800 + (showHover ? \"px-2 py-px hover:\" + (bgColor300 + (\"hover:\" + textColor900)) : \"inline-flex\")));\n  };\n\n  var applyFilter = function applyFilter(selection, onSelect, id, $$event) {\n    $$event.preventDefault();\n\n    Curry._1(onSelect, selection);\n\n    return focus(id);\n  };\n\n  var searchResult = function searchResult(searchInput, unselected, labelSuffix, id, onSelect) {\n    var normalizedString = searchInput.trim().replace(new RegExp(\"\\\\s+\", \"g\"), \" \");\n\n    if (normalizedString === \"\") {\n      return [];\n    } else {\n      var matchingSelections = search(normalizedString, unselected);\n      return $$Array.mapi(function (index, selection) {\n        var match = Curry._1(Selectable.label, selection);\n\n        return React.createElement(\"button\", {\n          key: String(index),\n          className: \"flex text-xs py-1 items-center w-full hover:bg-gray-200 focus:outline-none focus:bg-gray-200\",\n          title: selectionTitle(selection),\n          onClick: function onClick(param) {\n            return applyFilter(selection, onSelect, id, param);\n          }\n        }, match !== undefined ? React.createElement(\"span\", {\n          className: \"mr-2 w-1/6 text-right\"\n        }, match + labelSuffix) : null, React.createElement(\"span\", {\n          className: tagPillClasses(Curry._1(Selectable.color, selection), true)\n        }, Curry._1(Selectable.value, selection)));\n      }, matchingSelections);\n    }\n  };\n\n  var removeSelection = function removeSelection(onDeselect, selection, $$event) {\n    $$event.preventDefault();\n    return Curry._1(onDeselect, selection);\n  };\n\n  var showSelected = function showSelected(onDeselect, labelSuffix, selected) {\n    return $$Array.mapi(function (index, selection) {\n      var value = Curry._1(Selectable.value, selection);\n\n      var match = Curry._1(Selectable.label, selection);\n\n      return React.createElement(\"div\", {\n        key: String(index),\n        className: \"inline-flex py-1 mr-2\"\n      }, React.createElement(\"div\", {\n        className: tagPillClasses(Curry._1(Selectable.color, selection), false)\n      }, React.createElement(\"span\", {\n        className: \"pl-2 py-px\"\n      }, match !== undefined ? match + (labelSuffix + value) : value), React.createElement(\"button\", {\n        className: \"ml-1 text-red-700 px-2 py-px focus:outline-none hover:bg-red-400 hover:text-white flex items-center\",\n        title: \"Remove selection: \" + value,\n        onClick: function onClick(param) {\n          return removeSelection(onDeselect, selection, param);\n        }\n      }, React.createElement(PfIcon.make, {\n        className: \"if i-times-light\"\n      }))));\n    }, selected);\n  };\n\n  var MultiselectDropdown$Make = function MultiselectDropdown$Make(Props) {\n    var id = Props.id;\n    var placeholderOpt = Props.placeholder;\n    var _onChange = Props.onChange;\n    var value = Props.value;\n    var unselected = Props.unselected;\n    var selected = Props.selected;\n    var onSelect = Props.onSelect;\n    var onDeselect = Props.onDeselect;\n    var labelSuffixOpt = Props.labelSuffix;\n    var emptyMessageOpt = Props.emptyMessage;\n    var placeholder = placeholderOpt !== undefined ? placeholderOpt : \"Search\";\n    var labelSuffix = labelSuffixOpt !== undefined ? labelSuffixOpt : \": \";\n    var emptyMessage = emptyMessageOpt !== undefined ? emptyMessageOpt : \"No results found\";\n    var match = React.useState(function () {\n      if (id !== undefined) {\n        return id;\n      } else {\n        return \"re-multiselect-\" + (Date.now().toString() + (\"-\" + String(Js_math.random_int(100000, 999999))));\n      }\n    });\n    var inputId = match[0];\n    var results = searchResult(value, unselected, labelSuffix, inputId, onSelect);\n    return React.createElement(\"div\", {\n      className: \"w-full relative\"\n    }, React.createElement(\"div\", undefined, React.createElement(\"div\", {\n      className: \"flex flex-wrap items-center text-sm bg-white border border-gray-400 rounded w-full py-1 px-3 mt-1 focus:outline-none focus:bg-white focus:border-primary-300\"\n    }, showSelected(onDeselect, labelSuffix, selected), React.createElement(\"input\", {\n      className: \"flex-grow appearance-none bg-transparent border-none text-gray-700 mr-3 py-1 leading-snug focus:outline-none\",\n      id: inputId,\n      autoComplete: \"off\",\n      placeholder: placeholder,\n      type: \"text\",\n      value: value,\n      onChange: function onChange(e) {\n        return Curry._1(_onChange, e.target.value);\n      }\n    }))), React.createElement(\"div\", undefined), $$String.trim(value) !== \"\" ? React.createElement(\"div\", {\n      className: \"multiselect-dropdown__search-dropdown w-full absolute border border-gray-400 bg-white mt-1 rounded-lg shadow-lg px-4 py-2 z-50\"\n    }, results.length !== 0 ? results : React.createElement(\"div\", undefined, emptyMessage)) : null);\n  };\n\n  return {\n    search: search,\n    selectionTitle: selectionTitle,\n    tagPillClasses: tagPillClasses,\n    applyFilter: applyFilter,\n    searchResult: searchResult,\n    removeSelection: removeSelection,\n    showSelected: showSelected,\n    make: MultiselectDropdown$Make\n  };\n}\n\nexports.str = str;\nexports.DomUtils = DomUtils;\nexports.Make = Make;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/packages/multiselect-dropdown/src/components/MultiselectDropdown.bs.js"],"names":["$$Array","require","Curry","React","PfIcon","$$String","Js_math","Belt_Option","Belt_SortArray","Caml_exceptions","Webapi__Dom__Element","str","prim","RootElementMissing","create","focus","id","match","document","getElementById","tmp","map","asHtmlElement","DomUtils","Make","Selectable","search","searchString","selections","stableSortBy","filter","selection","lowercase_ascii","_1","includes","x","y","compare","value","selectionTitle","label","undefined","tagPillClasses","color","showHover","bgColor200","bgColor300","textColor800","textColor900","applyFilter","onSelect","$$event","preventDefault","searchResult","searchInput","unselected","labelSuffix","normalizedString","trim","replace","RegExp","matchingSelections","mapi","index","createElement","key","String","className","title","onClick","param","removeSelection","onDeselect","showSelected","selected","make","MultiselectDropdown$Make","Props","placeholderOpt","placeholder","onChange","labelSuffixOpt","emptyMessageOpt","emptyMessage","useState","Date","now","toString","random_int","inputId","results","autoComplete","type","e","target","length","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar PfIcon = require(\"../../../pf-icon/src/PfIcon.bs.js\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar Js_math = require(\"bs-platform/lib/js/js_math.js\");\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\nvar Belt_SortArray = require(\"bs-platform/lib/js/belt_SortArray.js\");\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\nvar Webapi__Dom__Element = require(\"bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Element.js\");\n\n((require(\"./MultiselectDropdown.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nvar RootElementMissing = Caml_exceptions.create(\"MultiselectDropdown.DomUtils.RootElementMissing\");\n\nfunction focus(id) {\n  var match = document.getElementById(id);\n  var tmp;\n  if (match == null) {\n    throw [\n          RootElementMissing,\n          id\n        ];\n  } else {\n    tmp = match;\n  }\n  Belt_Option.map(Webapi__Dom__Element.asHtmlElement(tmp), (function (prim) {\n          prim.focus();\n          return /* () */0;\n        }));\n  return /* () */0;\n}\n\nvar DomUtils = {\n  RootElementMissing: RootElementMissing,\n  focus: focus\n};\n\nfunction Make(Selectable) {\n  var search = function (searchString, selections) {\n    return Belt_SortArray.stableSortBy(selections.filter((function (selection) {\n                      return $$String.lowercase_ascii(Curry._1(Selectable.searchString, selection)).includes($$String.lowercase_ascii(searchString));\n                    })), (function (x, y) {\n                  return $$String.compare(Curry._1(Selectable.value, x), Curry._1(Selectable.value, y));\n                }));\n  };\n  var selectionTitle = function (selection) {\n    var value = Curry._1(Selectable.value, selection);\n    var match = Curry._1(Selectable.label, selection);\n    if (match !== undefined) {\n      return \"Pick \" + (match + (\": \" + value));\n    } else {\n      return \"Pick \" + value;\n    }\n  };\n  var tagPillClasses = function (color, showHover) {\n    var bgColor200 = \"bg-\" + (color + \"-200 \");\n    var bgColor300 = \"bg-\" + (color + \"-300 \");\n    var textColor800 = \"text-\" + (color + \"-800 \");\n    var textColor900 = \"text-\" + (color + \"-900 \");\n    return \"rounded text-xs overflow-hidden \" + (bgColor200 + (textColor800 + (\n                showHover ? \"px-2 py-px hover:\" + (bgColor300 + (\"hover:\" + textColor900)) : \"inline-flex\"\n              )));\n  };\n  var applyFilter = function (selection, onSelect, id, $$event) {\n    $$event.preventDefault();\n    Curry._1(onSelect, selection);\n    return focus(id);\n  };\n  var searchResult = function (searchInput, unselected, labelSuffix, id, onSelect) {\n    var normalizedString = searchInput.trim().replace(new RegExp(\"\\\\s+\", \"g\"), \" \");\n    if (normalizedString === \"\") {\n      return [];\n    } else {\n      var matchingSelections = search(normalizedString, unselected);\n      return $$Array.mapi((function (index, selection) {\n                    var match = Curry._1(Selectable.label, selection);\n                    return React.createElement(\"button\", {\n                                key: String(index),\n                                className: \"flex text-xs py-1 items-center w-full hover:bg-gray-200 focus:outline-none focus:bg-gray-200\",\n                                title: selectionTitle(selection),\n                                onClick: (function (param) {\n                                    return applyFilter(selection, onSelect, id, param);\n                                  })\n                              }, match !== undefined ? React.createElement(\"span\", {\n                                      className: \"mr-2 w-1/6 text-right\"\n                                    }, match + labelSuffix) : null, React.createElement(\"span\", {\n                                    className: tagPillClasses(Curry._1(Selectable.color, selection), true)\n                                  }, Curry._1(Selectable.value, selection)));\n                  }), matchingSelections);\n    }\n  };\n  var removeSelection = function (onDeselect, selection, $$event) {\n    $$event.preventDefault();\n    return Curry._1(onDeselect, selection);\n  };\n  var showSelected = function (onDeselect, labelSuffix, selected) {\n    return $$Array.mapi((function (index, selection) {\n                  var value = Curry._1(Selectable.value, selection);\n                  var match = Curry._1(Selectable.label, selection);\n                  return React.createElement(\"div\", {\n                              key: String(index),\n                              className: \"inline-flex py-1 mr-2\"\n                            }, React.createElement(\"div\", {\n                                  className: tagPillClasses(Curry._1(Selectable.color, selection), false)\n                                }, React.createElement(\"span\", {\n                                      className: \"pl-2 py-px\"\n                                    }, match !== undefined ? match + (labelSuffix + value) : value), React.createElement(\"button\", {\n                                      className: \"ml-1 text-red-700 px-2 py-px focus:outline-none hover:bg-red-400 hover:text-white flex items-center\",\n                                      title: \"Remove selection: \" + value,\n                                      onClick: (function (param) {\n                                          return removeSelection(onDeselect, selection, param);\n                                        })\n                                    }, React.createElement(PfIcon.make, {\n                                          className: \"if i-times-light\"\n                                        }))));\n                }), selected);\n  };\n  var MultiselectDropdown$Make = function (Props) {\n    var id = Props.id;\n    var placeholderOpt = Props.placeholder;\n    var onChange = Props.onChange;\n    var value = Props.value;\n    var unselected = Props.unselected;\n    var selected = Props.selected;\n    var onSelect = Props.onSelect;\n    var onDeselect = Props.onDeselect;\n    var labelSuffixOpt = Props.labelSuffix;\n    var emptyMessageOpt = Props.emptyMessage;\n    var placeholder = placeholderOpt !== undefined ? placeholderOpt : \"Search\";\n    var labelSuffix = labelSuffixOpt !== undefined ? labelSuffixOpt : \": \";\n    var emptyMessage = emptyMessageOpt !== undefined ? emptyMessageOpt : \"No results found\";\n    var match = React.useState((function () {\n            if (id !== undefined) {\n              return id;\n            } else {\n              return \"re-multiselect-\" + (Date.now().toString() + (\"-\" + String(Js_math.random_int(100000, 999999))));\n            }\n          }));\n    var inputId = match[0];\n    var results = searchResult(value, unselected, labelSuffix, inputId, onSelect);\n    return React.createElement(\"div\", {\n                className: \"w-full relative\"\n              }, React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                        className: \"flex flex-wrap items-center text-sm bg-white border border-gray-400 rounded w-full py-1 px-3 mt-1 focus:outline-none focus:bg-white focus:border-primary-300\"\n                      }, showSelected(onDeselect, labelSuffix, selected), React.createElement(\"input\", {\n                            className: \"flex-grow appearance-none bg-transparent border-none text-gray-700 mr-3 py-1 leading-snug focus:outline-none\",\n                            id: inputId,\n                            autoComplete: \"off\",\n                            placeholder: placeholder,\n                            type: \"text\",\n                            value: value,\n                            onChange: (function (e) {\n                                return Curry._1(onChange, e.target.value);\n                              })\n                          }))), React.createElement(\"div\", undefined), $$String.trim(value) !== \"\" ? React.createElement(\"div\", {\n                      className: \"multiselect-dropdown__search-dropdown w-full absolute border border-gray-400 bg-white mt-1 rounded-lg shadow-lg px-4 py-2 z-50\"\n                    }, results.length !== 0 ? results : React.createElement(\"div\", undefined, emptyMessage)) : null);\n  };\n  return {\n          search: search,\n          selectionTitle: selectionTitle,\n          tagPillClasses: tagPillClasses,\n          applyFilter: applyFilter,\n          searchResult: searchResult,\n          removeSelection: removeSelection,\n          showSelected: showSelected,\n          make: MultiselectDropdown$Make\n        };\n}\n\nexports.str = str;\nexports.DomUtils = DomUtils;\nexports.Make = Make;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}