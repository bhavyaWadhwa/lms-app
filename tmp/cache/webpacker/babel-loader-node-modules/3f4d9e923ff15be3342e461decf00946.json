{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar DomUtils = require(\"../../../shared/utils/DomUtils.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar SchoolAdmin = require(\"../../types/SchoolAdmin.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar SchoolAdmins__Form = require(\"./SchoolAdmins__Form.bs.js\");\n\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation DeleteSchoolAdminMutation($id: ID!)  {\\ndeleteSchoolAdmin(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteSchoolAdmin\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteSchoolAdminPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteSchoolAdmin on type Mutation is missing\");\n  }\n\n  return {\n    deleteSchoolAdmin: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar DeleteSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeSchoolAdmin(setState, admin, currentSchoolAdminId, $$event) {\n  $$event.preventDefault();\n\n  if (window.confirm(\"Are you sure you want to remove \" + (SchoolAdmin.name(admin) + \" from the list of admins?\"))) {\n    Curry._1(setState, function (state) {\n      return {\n        editorAction: state.editorAction,\n        admins: state.admins,\n        deleting: true\n      };\n    });\n\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(SchoolAdmin.id(admin),\n    /* () */\n    0)).then(function (response) {\n      if (response.deleteSchoolAdmin.success) {\n        if (SchoolAdmin.id(admin) === currentSchoolAdminId) {\n          DomUtils.redirect(\"/home\");\n        } else {\n          Curry._1(setState, function (state) {\n            return {\n              editorAction: state.editorAction,\n              admins: state.admins.filter(function (a) {\n                return SchoolAdmin.id(a) !== SchoolAdmin.id(admin);\n              }),\n              deleting: false\n            };\n          });\n        }\n      } else {\n        Curry._1(setState, function (state) {\n          return {\n            editorAction: state.editorAction,\n            admins: state.admins,\n            deleting: false\n          };\n        });\n      }\n\n      return Promise.resolve(response);\n    });\n    return (\n      /* () */\n      0\n    );\n  } else {\n    return 0;\n  }\n}\n\nfunction renderAdmin(currentSchoolAdminId, admin, admins, setState) {\n  var match = SchoolAdmin.avatarUrl(admin);\n  return React.createElement(\"div\", {\n    key: SchoolAdmin.id(admin) + SchoolAdmin.name(admin),\n    className: \"flex w-1/2 flex-shrink-0 mb-5 px-3\"\n  }, React.createElement(\"div\", {\n    className: \"shadow bg-white rounded-lg flex w-full border border-transparent overflow-hidden hover:border-primary-400 hover:bg-gray-100\"\n  }, React.createElement(\"a\", {\n    className: \"w-full cursor-pointer p-4\",\n    onClick: function onClick(_event) {\n      _event.preventDefault();\n\n      return Curry._1(setState, function (state) {\n        return {\n          editorAction:\n          /* ShowEditor */\n          [admin],\n          admins: state.admins,\n          deleting: state.deleting\n        };\n      });\n    }\n  }, React.createElement(\"div\", {\n    className: \"flex\"\n  }, React.createElement(\"span\", {\n    className: \"mr-4 flex-shrink-0\"\n  }, match !== undefined ? React.createElement(\"img\", {\n    className: \"w-10 h-10 rounded-full object-cover\",\n    src: match\n  }) : React.createElement(Avatar.make, {\n    name: SchoolAdmin.name(admin),\n    className: \"w-10 h-10 rounded-full\"\n  })), React.createElement(\"div\", {\n    className: \"flex flex-col\"\n  }, React.createElement(\"span\", {\n    className: \"text-black font-semibold text-sm\"\n  }, SchoolAdmin.name(admin)), React.createElement(\"span\", {\n    className: \"text-black font-normal text-xs\"\n  }, SchoolAdmin.email(admin))))), admins.length > 1 ? React.createElement(\"div\", {\n    className: \"w-10 text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200 hover:text-red-600\",\n    title: \"Delete \" + SchoolAdmin.name(admin),\n    onClick: function onClick(param) {\n      return removeSchoolAdmin(setState, admin, currentSchoolAdminId, param);\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\"\n  })) : null));\n}\n\nfunction handleUpdate(setState, admin) {\n  return Curry._1(setState, function (state) {\n    return {\n      editorAction:\n      /* Hidden */\n      0,\n      admins: SchoolAdmin.update(admin, state.admins),\n      deleting: state.deleting\n    };\n  });\n}\n\nfunction SchoolAdmins__Editor(Props) {\n  var currentSchoolAdminId = Props.currentSchoolAdminId;\n  var admins = Props.admins;\n  var match = React.useState(function () {\n    return {\n      editorAction:\n      /* Hidden */\n      0,\n      admins: admins,\n      deleting: false\n    };\n  });\n  var setState = match[1];\n  var state = match[0];\n  var match$1 = state.editorAction;\n  return React.createElement(\"div\", {\n    className: \"flex flex-1 h-full overflow-y-scroll bg-gray-100\"\n  }, React.createElement(\"div\", {\n    className: \"flex-1 flex flex-col\"\n  }, match$1 ? React.createElement(SchoolAdmin__EditorDrawer.make, {\n    closeDrawerCB: function closeDrawerCB(param) {\n      return Curry._1(setState, function (state) {\n        return {\n          editorAction:\n          /* Hidden */\n          0,\n          admins: state.admins,\n          deleting: state.deleting\n        };\n      });\n    },\n    children: React.createElement(SchoolAdmins__Form.make, {\n      admin: match$1[0],\n      updateCB: function updateCB(param) {\n        return handleUpdate(setState, param);\n      }\n    })\n  }) : null, React.createElement(DisablingCover.make, {\n    disabled: state.deleting,\n    message: \"Deleting...\",\n    children: null\n  }, React.createElement(\"div\", {\n    className: \"flex px-6 py-2 items-center justify-between\"\n  }, React.createElement(\"button\", {\n    className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer\",\n    onClick: function onClick(param) {\n      return Curry._1(setState, function (state) {\n        return {\n          editorAction:\n          /* ShowEditor */\n          [undefined],\n          admins: state.admins,\n          deleting: state.deleting\n        };\n      });\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle\"\n  }), React.createElement(\"h5\", {\n    className: \"font-semibold ml-2\"\n  }, \"Add New Learnmax Admin\"))), React.createElement(\"div\", {\n    className: \"px-6 pb-4 mt-5 flex\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-2xl w-full mx-auto\"\n  }, React.createElement(\"div\", {\n    className: \"flex -mx-3 flex-wrap\"\n  }, $$Array.map(function (admin) {\n    return renderAdmin(currentSchoolAdminId, admin, state.admins, setState);\n  }, SchoolAdmin.sort(state.admins))))))));\n}\n\nvar make$1 = SchoolAdmins__Editor;\nexports.str = str;\nexports.DeleteSchoolAdminQuery = DeleteSchoolAdminQuery;\nexports.removeSchoolAdmin = removeSchoolAdmin;\nexports.renderAdmin = renderAdmin;\nexports.handleUpdate = handleUpdate;\nexports.make = make$1;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/settings/components/SchoolAdmins__Editor.bs.js"],"names":["$$Array","require","Curry","React","Avatar","Js_exn","Js_dict","Js_json","DomUtils","Js_option","Caml_option","SchoolAdmin","GraphqlQuery","DisablingCover","SchoolAdmins__Form","SchoolAdmin__EditorDrawer","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","deleteSchoolAdmin","make","id","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","DeleteSchoolAdminQuery","removeSchoolAdmin","setState","admin","currentSchoolAdminId","$$event","preventDefault","window","confirm","name","state","editorAction","admins","deleting","eta","sendQuery","then","response","redirect","a","Promise","resolve","renderAdmin","avatarUrl","createElement","key","className","onClick","_event","src","email","length","title","handleUpdate","update","SchoolAdmins__Editor","Props","useState","closeDrawerCB","children","updateCB","disabled","message","map","sort","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar DomUtils = require(\"../../../shared/utils/DomUtils.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar SchoolAdmin = require(\"../../types/SchoolAdmin.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar SchoolAdmins__Form = require(\"./SchoolAdmins__Form.bs.js\");\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation DeleteSchoolAdminMutation($id: ID!)  {\\ndeleteSchoolAdmin(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteSchoolAdmin\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteSchoolAdminPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteSchoolAdmin on type Mutation is missing\");\n  }\n  return {\n          deleteSchoolAdmin: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar DeleteSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeSchoolAdmin(setState, admin, currentSchoolAdminId, $$event) {\n  $$event.preventDefault();\n  if (window.confirm(\"Are you sure you want to remove \" + (SchoolAdmin.name(admin) + \" from the list of admins?\"))) {\n    Curry._1(setState, (function (state) {\n            return {\n                    editorAction: state.editorAction,\n                    admins: state.admins,\n                    deleting: true\n                  };\n          }));\n    (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(SchoolAdmin.id(admin), /* () */0)).then((function (response) {\n            if (response.deleteSchoolAdmin.success) {\n              if (SchoolAdmin.id(admin) === currentSchoolAdminId) {\n                DomUtils.redirect(\"/home\");\n              } else {\n                Curry._1(setState, (function (state) {\n                        return {\n                                editorAction: state.editorAction,\n                                admins: state.admins.filter((function (a) {\n                                        return SchoolAdmin.id(a) !== SchoolAdmin.id(admin);\n                                      })),\n                                deleting: false\n                              };\n                      }));\n              }\n            } else {\n              Curry._1(setState, (function (state) {\n                      return {\n                              editorAction: state.editorAction,\n                              admins: state.admins,\n                              deleting: false\n                            };\n                    }));\n            }\n            return Promise.resolve(response);\n          }));\n    return /* () */0;\n  } else {\n    return 0;\n  }\n}\n\nfunction renderAdmin(currentSchoolAdminId, admin, admins, setState) {\n  var match = SchoolAdmin.avatarUrl(admin);\n  return React.createElement(\"div\", {\n              key: SchoolAdmin.id(admin) + SchoolAdmin.name(admin),\n              className: \"flex w-1/2 flex-shrink-0 mb-5 px-3\"\n            }, React.createElement(\"div\", {\n                  className: \"shadow bg-white rounded-lg flex w-full border border-transparent overflow-hidden hover:border-primary-400 hover:bg-gray-100\"\n                }, React.createElement(\"a\", {\n                      className: \"w-full cursor-pointer p-4\",\n                      onClick: (function (_event) {\n                          _event.preventDefault();\n                          return Curry._1(setState, (function (state) {\n                                        return {\n                                                editorAction: /* ShowEditor */[admin],\n                                                admins: state.admins,\n                                                deleting: state.deleting\n                                              };\n                                      }));\n                        })\n                    }, React.createElement(\"div\", {\n                          className: \"flex\"\n                        }, React.createElement(\"span\", {\n                              className: \"mr-4 flex-shrink-0\"\n                            }, match !== undefined ? React.createElement(\"img\", {\n                                    className: \"w-10 h-10 rounded-full object-cover\",\n                                    src: match\n                                  }) : React.createElement(Avatar.make, {\n                                    name: SchoolAdmin.name(admin),\n                                    className: \"w-10 h-10 rounded-full\"\n                                  })), React.createElement(\"div\", {\n                              className: \"flex flex-col\"\n                            }, React.createElement(\"span\", {\n                                  className: \"text-black font-semibold text-sm\"\n                                }, SchoolAdmin.name(admin)), React.createElement(\"span\", {\n                                  className: \"text-black font-normal text-xs\"\n                                }, SchoolAdmin.email(admin))))), admins.length > 1 ? React.createElement(\"div\", {\n                        className: \"w-10 text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200 hover:text-red-600\",\n                        title: \"Delete \" + SchoolAdmin.name(admin),\n                        onClick: (function (param) {\n                            return removeSchoolAdmin(setState, admin, currentSchoolAdminId, param);\n                          })\n                      }, React.createElement(\"i\", {\n                            className: \"fas fa-trash-alt\"\n                          })) : null));\n}\n\nfunction handleUpdate(setState, admin) {\n  return Curry._1(setState, (function (state) {\n                return {\n                        editorAction: /* Hidden */0,\n                        admins: SchoolAdmin.update(admin, state.admins),\n                        deleting: state.deleting\n                      };\n              }));\n}\n\nfunction SchoolAdmins__Editor(Props) {\n  var currentSchoolAdminId = Props.currentSchoolAdminId;\n  var admins = Props.admins;\n  var match = React.useState((function () {\n          return {\n                  editorAction: /* Hidden */0,\n                  admins: admins,\n                  deleting: false\n                };\n        }));\n  var setState = match[1];\n  var state = match[0];\n  var match$1 = state.editorAction;\n  return React.createElement(\"div\", {\n              className: \"flex flex-1 h-full overflow-y-scroll bg-gray-100\"\n            }, React.createElement(\"div\", {\n                  className: \"flex-1 flex flex-col\"\n                }, match$1 ? React.createElement(SchoolAdmin__EditorDrawer.make, {\n                        closeDrawerCB: (function (param) {\n                            return Curry._1(setState, (function (state) {\n                                          return {\n                                                  editorAction: /* Hidden */0,\n                                                  admins: state.admins,\n                                                  deleting: state.deleting\n                                                };\n                                        }));\n                          }),\n                        children: React.createElement(SchoolAdmins__Form.make, {\n                              admin: match$1[0],\n                              updateCB: (function (param) {\n                                  return handleUpdate(setState, param);\n                                })\n                            })\n                      }) : null, React.createElement(DisablingCover.make, {\n                      disabled: state.deleting,\n                      message: \"Deleting...\",\n                      children: null\n                    }, React.createElement(\"div\", {\n                          className: \"flex px-6 py-2 items-center justify-between\"\n                        }, React.createElement(\"button\", {\n                              className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer\",\n                              onClick: (function (param) {\n                                  return Curry._1(setState, (function (state) {\n                                                return {\n                                                        editorAction: /* ShowEditor */[undefined],\n                                                        admins: state.admins,\n                                                        deleting: state.deleting\n                                                      };\n                                              }));\n                                })\n                            }, React.createElement(\"i\", {\n                                  className: \"fas fa-plus-circle\"\n                                }), React.createElement(\"h5\", {\n                                  className: \"font-semibold ml-2\"\n                                }, \"Add New Learnmax Admin\"))), React.createElement(\"div\", {\n                          className: \"px-6 pb-4 mt-5 flex\"\n                        }, React.createElement(\"div\", {\n                              className: \"max-w-2xl w-full mx-auto\"\n                            }, React.createElement(\"div\", {\n                                  className: \"flex -mx-3 flex-wrap\"\n                                }, $$Array.map((function (admin) {\n                                        return renderAdmin(currentSchoolAdminId, admin, state.admins, setState);\n                                      }), SchoolAdmin.sort(state.admins))))))));\n}\n\nvar make$1 = SchoolAdmins__Editor;\n\nexports.str = str;\nexports.DeleteSchoolAdminQuery = DeleteSchoolAdminQuery;\nexports.removeSchoolAdmin = removeSchoolAdmin;\nexports.renderAdmin = renderAdmin;\nexports.handleUpdate = handleUpdate;\nexports.make = make$1;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}