{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar MultiselectInline = require(\"../../../packages/multiselect-inline/src/components/MultiselectInline.bs.js\");\n\nvar CourseExports__Tag = require(\"../types/course_exports/CourseExports__Tag.bs.js\");\n\nvar CourseExports__Course = require(\"../types/course_exports/CourseExports__Course.bs.js\");\n\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nvar CourseExports__CourseExport = require(\"../types/course_exports/CourseExports__CourseExport.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction computeInitialState($$exports) {\n  return {\n    drawerOpen: false,\n    selectedTags: [],\n    saving: false,\n    reviewedOnly: false,\n    tagSearch: \"\",\n    courseExports: $$exports,\n    exportType:\n    /* Students */\n    1\n  };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* OpenDrawer */\n      0:\n        return {\n          drawerOpen: true,\n          selectedTags: state.selectedTags,\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* CloseDrawer */\n      1:\n        return {\n          drawerOpen: false,\n          selectedTags: state.selectedTags,\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* BeginSaving */\n      2:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags,\n          saving: true,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* FailSaving */\n      3:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags,\n          saving: false,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* FinishSaving */\n      0:\n        return {\n          drawerOpen: false,\n          selectedTags: state.selectedTags,\n          saving: false,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: $$Array.append([action[0]], state.courseExports),\n          exportType: state.exportType\n        };\n\n      case\n      /* SetReviewedOnly */\n      1:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags,\n          saving: state.saving,\n          reviewedOnly: action[0],\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* SelectTag */\n      2:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: $$Array.append([action[0]], state.selectedTags),\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* DeselectTag */\n      3:\n        var tag = action[0];\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags.filter(function (t) {\n            return CourseExports__Tag.id(t) !== CourseExports__Tag.id(tag);\n          }),\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n\n      case\n      /* SelectExportType */\n      4:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags,\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: state.tagSearch,\n          courseExports: state.courseExports,\n          exportType: action[0]\n        };\n\n      case\n      /* UpdateTagSearch */\n      5:\n        return {\n          drawerOpen: state.drawerOpen,\n          selectedTags: state.selectedTags,\n          saving: state.saving,\n          reviewedOnly: state.reviewedOnly,\n          tagSearch: action[0],\n          courseExports: state.courseExports,\n          exportType: state.exportType\n        };\n    }\n  }\n}\n\nfunction readinessString(courseExport) {\n  var match = CourseExports__CourseExport.file(courseExport);\n\n  if (match !== undefined) {\n    var timeDistance = DateFns.formatDistanceToNow(CourseExports__CourseExport.fileCreatedAt(match), undefined, true,\n    /* () */\n    0);\n    return \"Prepared \" + timeDistance;\n  } else {\n    var timeDistance$1 = DateFns.formatDistanceToNow(CourseExports__CourseExport.createdAt(courseExport), undefined, true,\n    /* () */\n    0);\n    return \"Requested \" + timeDistance$1;\n  }\n}\n\nvar value = CourseExports__Tag.name;\nvar searchString = CourseExports__Tag.name;\nvar Selectable = {\n  value: value,\n  searchString: searchString\n};\nvar TagsSelector = MultiselectInline.Make(Selectable);\n\nfunction unselected(allTags, selectedTags) {\n  var selectedTagIds = $$Array.map(CourseExports__Tag.id, selectedTags);\n  return allTags.filter(function (t) {\n    return !$$Array.mem(CourseExports__Tag.id(t), selectedTagIds);\n  });\n}\n\nvar ppx_printed_query = \"mutation CreateCourseExportMutation($courseId: ID!, $tagIds: [ID!]!, $reviewedOnly: Boolean!, $exportType: Export!)  {\\ncreateCourseExport(courseId: $courseId, tagIds: $tagIds, reviewedOnly: $reviewedOnly, exportType: $exportType)  {\\ncourseExport  {\\nid  \\ncreatedAt  \\ntags  \\nreviewedOnly  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createCourseExport\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"courseExport\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var value$4 = Js_option.getExn(Js_json.decodeObject(value$3));\n        var match$3 = Js_dict.get(value$4, \"id\");\n        var tmp$2;\n\n        if (match$3 !== undefined) {\n          var value$5 = Caml_option.valFromOption(match$3);\n          var match$4 = Js_json.decodeString(value$5);\n          tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n        } else {\n          tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field id on type CourseExport is missing\");\n        }\n\n        var match$5 = Js_dict.get(value$4, \"createdAt\");\n        var match$6 = Js_dict.get(value$4, \"tags\");\n        var match$7 = Js_dict.get(value$4, \"reviewedOnly\");\n        var tmp$3;\n\n        if (match$7 !== undefined) {\n          var value$6 = Caml_option.valFromOption(match$7);\n          var match$8 = Js_json.decodeBoolean(value$6);\n          tmp$3 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$6));\n        } else {\n          tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field reviewedOnly on type CourseExport is missing\");\n        }\n\n        tmp$1 = {\n          id: tmp$2,\n          createdAt: match$5 !== undefined ? Caml_option.valFromOption(match$5) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type CourseExport is missing\"),\n          tags: match$6 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$6))).map(function (value) {\n            var match = Js_json.decodeString(value);\n\n            if (match !== undefined) {\n              return match;\n            } else {\n              return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n            }\n          }) : Js_exn.raiseError(\"graphql_ppx: Field tags on type CourseExport is missing\"),\n          reviewedOnly: tmp$3\n        };\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      courseExport: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createCourseExport on type Mutation is missing\");\n  }\n\n  return {\n    createCourseExport: tmp\n  };\n}\n\nfunction json_of_Export(value) {\n  if (value >= 548749590) {\n    return \"Teams\";\n  } else {\n    return \"Students\";\n  }\n}\n\nfunction make(courseId, tagIds, reviewedOnly, exportType, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"tagIds\", tagIds.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"reviewedOnly\", reviewedOnly],\n    /* tuple */\n    [\"exportType\", json_of_Export(exportType)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var tagIds = variables.tagIds;\n  var reviewedOnly = variables.reviewedOnly;\n  var exportType = variables.exportType;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"tagIds\", tagIds.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"reviewedOnly\", reviewedOnly],\n    /* tuple */\n    [\"exportType\", json_of_Export(exportType)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(courseId, tagIds, reviewedOnly, exportType, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"tagIds\", tagIds.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"reviewedOnly\", reviewedOnly],\n  /* tuple */\n  [\"exportType\", json_of_Export(exportType)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, tagIds, reviewedOnly, exportType, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"tagIds\", tagIds.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"reviewedOnly\", reviewedOnly],\n  /* tuple */\n  [\"exportType\", json_of_Export(exportType)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar CreateCourseExportQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  json_of_Export: json_of_Export,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction createCourseExport(state, send, course, $$event) {\n  $$event.preventDefault();\n\n  Curry._1(send,\n  /* BeginSaving */\n  2);\n\n  var match = state.exportType;\n  var match$1 = match ?\n  /* tuple */\n  [$$Array.map(CourseExports__Tag.id, state.selectedTags),\n  /* Students */\n  33452920] :\n  /* tuple */\n  [[],\n  /* Teams */\n  548749590];\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(CourseExports__Course.id(course), match$1[0], state.reviewedOnly, match$1[1],\n  /* () */\n  0)).then(function (response) {\n    var match = response.createCourseExport.courseExport;\n\n    if (match !== undefined) {\n      var $$export = Caml_option.valFromOption(match);\n      var courseExport = CourseExports__CourseExport.make($$export.id, state.exportType, DateFns.decodeISO($$export.createdAt), $$export.tags, $$export.reviewedOnly);\n\n      Curry._1(send,\n      /* FinishSaving */\n      Block.__(0, [courseExport]));\n    } else {\n      Curry._1(send,\n      /* FailSaving */\n      3);\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  })[\"catch\"](function (e) {\n    console.log(e);\n\n    Curry._1(send,\n    /* FailSaving */\n    3);\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction toggleChoiceClasses(value) {\n  if (value) {\n    return \"relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 w-full bg-gray-200 text-primary-500 border-primary-500\";\n  } else {\n    return \"relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 w-full opacity-75 text-gray-900\";\n  }\n}\n\nfunction CourseExports__Root(Props) {\n  var course = Props.course;\n  var $$exports = Props.exports;\n  var tags = Props.tags;\n  var match = React.useReducer(reducer, $$exports, computeInitialState);\n  var send = match[1];\n  var state = match[0];\n  var tmp;\n\n  if (state.drawerOpen) {\n    var match$1 = state.exportType;\n    tmp = React.createElement(SchoolAdmin__EditorDrawer.make, {\n      closeDrawerCB: function closeDrawerCB(param) {\n        return Curry._1(send,\n        /* CloseDrawer */\n        1);\n      },\n      closeButtonTitle: \"Close Export Form\",\n      children: React.createElement(\"div\", {\n        className: \"mx-auto bg-white\"\n      }, React.createElement(\"div\", {\n        className: \"max-w-2xl pt-6 px-6 mx-auto\"\n      }, React.createElement(\"h5\", {\n        className: \"uppercase text-center border-b border-gray-400 pb-2\"\n      }, \"Export course data\"), React.createElement(\"div\", {\n        className: \"mt-4\"\n      }, React.createElement(\"label\", {\n        className: \"block tracking-wide text-xs font-semibold mr-6 mb-2\"\n      }, \"Please select the kind of export you need:\"), React.createElement(\"div\", {\n        className: \"flex -mx-2\"\n      }, React.createElement(\"div\", {\n        className: \"w-1/2 px-2\"\n      }, React.createElement(\"button\", {\n        className: toggleChoiceClasses(state.exportType ===\n        /* Students */\n        1),\n        onClick: function onClick(param) {\n          return Curry._1(send,\n          /* SelectExportType */\n          Block.__(4, [\n          /* Students */\n          1]));\n        }\n      }, React.createElement(\"i\", {\n        className: \"fas fa-user\"\n      }), React.createElement(\"div\", {\n        className: \"mt-1\"\n      }, \"Students\"))), React.createElement(\"div\", {\n        className: \"w-1/2 px-2\"\n      }, React.createElement(\"button\", {\n        className: toggleChoiceClasses(state.exportType ===\n        /* Teams */\n        0),\n        onClick: function onClick(param) {\n          return Curry._1(send,\n          /* SelectExportType */\n          Block.__(4, [\n          /* Teams */\n          0]));\n        }\n      }, React.createElement(\"i\", {\n        className: \"fas fa-user-friends\"\n      }), React.createElement(\"div\", {\n        className: \"mt-1\"\n      }, \"Teams\"))))), match$1 ? React.createElement(\"div\", {\n        className: \"mt-4\"\n      }, React.createElement(\"label\", {\n        className: \"block tracking-wide text-xs font-semibold mb-2\"\n      }, \"Export only students with the following tags:\"), React.createElement(TagsSelector.make, {\n        placeholder: \"Search for a tag\",\n        onChange: function onChange(tagSearch) {\n          return Curry._1(send,\n          /* UpdateTagSearch */\n          Block.__(5, [tagSearch]));\n        },\n        value: state.tagSearch,\n        unselected: unselected(tags, state.selectedTags),\n        selected: state.selectedTags,\n        onSelect: function onSelect(tag) {\n          return Curry._1(send,\n          /* SelectTag */\n          Block.__(2, [tag]));\n        },\n        onDeselect: function onDeselect(tag) {\n          return Curry._1(send,\n          /* DeselectTag */\n          Block.__(3, [tag]));\n        },\n        emptySelectionMessage: \"No tags selected\"\n      })) : null, React.createElement(\"div\", {\n        className: \"mt-5\"\n      }, React.createElement(\"label\", {\n        className: \"block tracking-wide text-xs font-semibold mr-6 mb-2\",\n        htmlFor: \"targets_filter\"\n      }, \"Which targets should the export include?\"), React.createElement(\"div\", {\n        className: \"flex -mx-2\",\n        id: \"targets_filter\"\n      }, React.createElement(\"div\", {\n        className: \"w-1/2 px-2\"\n      }, React.createElement(\"button\", {\n        className: toggleChoiceClasses(!state.reviewedOnly),\n        onClick: function onClick(param) {\n          return Curry._1(send,\n          /* SetReviewedOnly */\n          Block.__(1, [false]));\n        }\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list\"\n      }), React.createElement(\"div\", {\n        className: \"mt-1\"\n      }, \"All targets\"))), React.createElement(\"div\", {\n        className: \"w-1/2 px-2\"\n      }, React.createElement(\"button\", {\n        className: toggleChoiceClasses(state.reviewedOnly),\n        onClick: function onClick(_event) {\n          return Curry._1(send,\n          /* SetReviewedOnly */\n          Block.__(1, [true]));\n        }\n      }, React.createElement(\"i\", {\n        className: \"fas fa-tasks\"\n      }), React.createElement(\"div\", {\n        className: \"mt-1\"\n      }, \"Only targets with reviewed submissions\"))))), React.createElement(\"div\", {\n        className: \"flex max-w-2xl w-full mt-5 pb-5 mx-auto\"\n      }, React.createElement(\"button\", {\n        className: \"w-full btn btn-primary btn-large\",\n        disabled: state.saving,\n        onClick: function onClick(param) {\n          return createCourseExport(state, send, course, param);\n        }\n      }, state.saving ? React.createElement(\"span\", undefined, React.createElement(FaIcon.make, {\n        classes: \"fas fa-spinner fa-pulse\"\n      }), React.createElement(\"span\", {\n        className: \"ml-2\"\n      }, \"Setting up an export...\")) : \"Create Export\"))))\n    });\n  } else {\n    tmp = null;\n  }\n\n  return React.createElement(\"div\", {\n    key: \"School admin coaches course index\",\n    className: \"flex flex-1 h-screen overflow-y-scroll\"\n  }, tmp, React.createElement(\"div\", {\n    className: \"flex-1 flex flex-col bg-gray-100\"\n  }, React.createElement(\"div\", {\n    className: \"flex px-6 py-2 items-center justify-between\"\n  }, React.createElement(\"button\", {\n    className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-20 cursor-pointer\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* OpenDrawer */\n      0);\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-file-export text-lg\"\n  }), React.createElement(\"h5\", {\n    className: \"font-semibold ml-2\"\n  }, \"Create a new export\"))), ArrayUtils.isEmpty(state.courseExports) ? React.createElement(\"div\", {\n    className: \"flex justify-center bg-gray-100 border rounded p-3 italic mx-auto max-w-2xl w-full\"\n  }, \"You haven't exported anything yet!\") : React.createElement(\"div\", {\n    className: \"px-6 pb-4 mt-5 flex flex-1 bg-gray-100\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-2xl w-full mx-auto relative\"\n  }, React.createElement(\"h4\", {\n    className: \"mt-5 w-full\"\n  }, \"Exports\"), React.createElement(\"div\", {\n    className: \"flex mt-4 -mx-3 items-start flex-wrap\"\n  }, $$Array.map(function (courseExport) {\n    var match = CourseExports__CourseExport.exportType(courseExport);\n    var match$1 = CourseExports__CourseExport.file(courseExport);\n    return React.createElement(\"div\", {\n      key: CourseExports__CourseExport.id(courseExport),\n      \"aria-label\": \"Export \" + CourseExports__CourseExport.id(courseExport),\n      className: \"flex w-1/2 items-center mb-4 px-3\"\n    }, React.createElement(\"div\", {\n      className: \"course-faculty__list-item shadow bg-white overflow-hidden rounded-lg flex flex-col w-full\"\n    }, React.createElement(\"div\", {\n      className: \"flex flex-1 justify-between\"\n    }, React.createElement(\"div\", {\n      className: \"pt-4 pb-3 px-4\"\n    }, React.createElement(\"div\", {\n      className: \"text-sm\"\n    }, React.createElement(\"p\", {\n      className: \"text-black font-semibold\"\n    }, CourseExports__CourseExport.exportTypeToString(courseExport)), React.createElement(\"p\", {\n      className: \"text-gray-600 font-semibold text-xs mt-px\"\n    }, readinessString(courseExport))), React.createElement(\"div\", {\n      className: \"flex flex-wrap text-gray-600 font-semibold text-xs mt-1\"\n    }, CourseExports__CourseExport.reviewedOnly(courseExport) ? React.createElement(\"span\", {\n      className: \"px-2 py-1 border rounded bg-secondary-100 text-primary-600 mt-1 mr-1\"\n    }, \"Reviewed Submissions Only\") : null, match ? $$Array.map(function (tag) {\n      return React.createElement(\"span\", {\n        key: tag,\n        className: \"px-2 py-1 border rounded bg-primary-100 text-primary-600 mt-1 mr-1\"\n      }, tag);\n    }, CourseExports__CourseExport.tags(courseExport)) : null)), match$1 !== undefined ? React.createElement(\"a\", {\n      \"aria-label\": \"Download Course Export \" + CourseExports__CourseExport.id(courseExport),\n      className: \"w-10 text-xs text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200\",\n      href: CourseExports__CourseExport.filePath(match$1)\n    }, React.createElement(FaIcon.make, {\n      classes: \"fas fa-file-download\"\n    })) : null)));\n  }, ArrayUtils.copyAndSort(function (x, y) {\n    return DateFns.differenceInSeconds(CourseExports__CourseExport.createdAt(y), CourseExports__CourseExport.createdAt(x));\n  }, state.courseExports)))))));\n}\n\nvar make$1 = CourseExports__Root;\nexports.str = str;\nexports.computeInitialState = computeInitialState;\nexports.reducer = reducer;\nexports.readinessString = readinessString;\nexports.Selectable = Selectable;\nexports.TagsSelector = TagsSelector;\nexports.unselected = unselected;\nexports.CreateCourseExportQuery = CreateCourseExportQuery;\nexports.createCourseExport = createCourseExport;\nexports.toggleChoiceClasses = toggleChoiceClasses;\nexports.make = make$1;\n/* TagsSelector Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/CourseExports__Root.bs.js"],"names":["$$Array","require","Block","Curry","React","FaIcon","Js_exn","DateFns","Js_dict","Js_json","Js_option","ArrayUtils","Caml_option","GraphqlQuery","MultiselectInline","CourseExports__Tag","CourseExports__Course","SchoolAdmin__EditorDrawer","CourseExports__CourseExport","str","prim","computeInitialState","$$exports","drawerOpen","selectedTags","saving","reviewedOnly","tagSearch","courseExports","exportType","reducer","state","action","tag","append","filter","t","id","readinessString","courseExport","match","file","undefined","timeDistance","formatDistanceToNow","fileCreatedAt","timeDistance$1","createdAt","value","name","searchString","Selectable","TagsSelector","Make","unselected","allTags","selectedTagIds","map","mem","ppx_printed_query","parse","value$1","getExn","decodeObject","get","tmp","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeNull","value$4","match$3","tmp$2","value$5","match$4","decodeString","raiseError","JSON","stringify","match$5","match$6","match$7","tmp$3","value$6","match$8","decodeBoolean","tags","decodeArray","createCourseExport","json_of_Export","make","courseId","tagIds","param","query","variables","fromArray","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","CreateCourseExportQuery","send","course","$$event","preventDefault","eta","sendQuery","then","response","$$export","decodeISO","__","Promise","resolve","e","console","log","toggleChoiceClasses","CourseExports__Root","Props","exports","useReducer","createElement","closeDrawerCB","closeButtonTitle","children","className","onClick","placeholder","onChange","selected","onSelect","onDeselect","emptySelectionMessage","htmlFor","_event","disabled","classes","key","isEmpty","exportTypeToString","href","filePath","copyAndSort","x","y","differenceInSeconds","make$1"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar MultiselectInline = require(\"../../../packages/multiselect-inline/src/components/MultiselectInline.bs.js\");\nvar CourseExports__Tag = require(\"../types/course_exports/CourseExports__Tag.bs.js\");\nvar CourseExports__Course = require(\"../types/course_exports/CourseExports__Course.bs.js\");\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\nvar CourseExports__CourseExport = require(\"../types/course_exports/CourseExports__CourseExport.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction computeInitialState($$exports) {\n  return {\n          drawerOpen: false,\n          selectedTags: [],\n          saving: false,\n          reviewedOnly: false,\n          tagSearch: \"\",\n          courseExports: $$exports,\n          exportType: /* Students */1\n        };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* OpenDrawer */0 :\n          return {\n                  drawerOpen: true,\n                  selectedTags: state.selectedTags,\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* CloseDrawer */1 :\n          return {\n                  drawerOpen: false,\n                  selectedTags: state.selectedTags,\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* BeginSaving */2 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags,\n                  saving: true,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* FailSaving */3 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags,\n                  saving: false,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      \n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* FinishSaving */0 :\n          return {\n                  drawerOpen: false,\n                  selectedTags: state.selectedTags,\n                  saving: false,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: $$Array.append([action[0]], state.courseExports),\n                  exportType: state.exportType\n                };\n      case /* SetReviewedOnly */1 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags,\n                  saving: state.saving,\n                  reviewedOnly: action[0],\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* SelectTag */2 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: $$Array.append([action[0]], state.selectedTags),\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* DeselectTag */3 :\n          var tag = action[0];\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags.filter((function (t) {\n                          return CourseExports__Tag.id(t) !== CourseExports__Tag.id(tag);\n                        })),\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      case /* SelectExportType */4 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags,\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: state.tagSearch,\n                  courseExports: state.courseExports,\n                  exportType: action[0]\n                };\n      case /* UpdateTagSearch */5 :\n          return {\n                  drawerOpen: state.drawerOpen,\n                  selectedTags: state.selectedTags,\n                  saving: state.saving,\n                  reviewedOnly: state.reviewedOnly,\n                  tagSearch: action[0],\n                  courseExports: state.courseExports,\n                  exportType: state.exportType\n                };\n      \n    }\n  }\n}\n\nfunction readinessString(courseExport) {\n  var match = CourseExports__CourseExport.file(courseExport);\n  if (match !== undefined) {\n    var timeDistance = DateFns.formatDistanceToNow(CourseExports__CourseExport.fileCreatedAt(match), undefined, true, /* () */0);\n    return \"Prepared \" + timeDistance;\n  } else {\n    var timeDistance$1 = DateFns.formatDistanceToNow(CourseExports__CourseExport.createdAt(courseExport), undefined, true, /* () */0);\n    return \"Requested \" + timeDistance$1;\n  }\n}\n\nvar value = CourseExports__Tag.name;\n\nvar searchString = CourseExports__Tag.name;\n\nvar Selectable = {\n  value: value,\n  searchString: searchString\n};\n\nvar TagsSelector = MultiselectInline.Make(Selectable);\n\nfunction unselected(allTags, selectedTags) {\n  var selectedTagIds = $$Array.map(CourseExports__Tag.id, selectedTags);\n  return allTags.filter((function (t) {\n                return !$$Array.mem(CourseExports__Tag.id(t), selectedTagIds);\n              }));\n}\n\nvar ppx_printed_query = \"mutation CreateCourseExportMutation($courseId: ID!, $tagIds: [ID!]!, $reviewedOnly: Boolean!, $exportType: Export!)  {\\ncreateCourseExport(courseId: $courseId, tagIds: $tagIds, reviewedOnly: $reviewedOnly, exportType: $exportType)  {\\ncourseExport  {\\nid  \\ncreatedAt  \\ntags  \\nreviewedOnly  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createCourseExport\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"courseExport\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var value$4 = Js_option.getExn(Js_json.decodeObject(value$3));\n        var match$3 = Js_dict.get(value$4, \"id\");\n        var tmp$2;\n        if (match$3 !== undefined) {\n          var value$5 = Caml_option.valFromOption(match$3);\n          var match$4 = Js_json.decodeString(value$5);\n          tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n        } else {\n          tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field id on type CourseExport is missing\");\n        }\n        var match$5 = Js_dict.get(value$4, \"createdAt\");\n        var match$6 = Js_dict.get(value$4, \"tags\");\n        var match$7 = Js_dict.get(value$4, \"reviewedOnly\");\n        var tmp$3;\n        if (match$7 !== undefined) {\n          var value$6 = Caml_option.valFromOption(match$7);\n          var match$8 = Js_json.decodeBoolean(value$6);\n          tmp$3 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$6));\n        } else {\n          tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field reviewedOnly on type CourseExport is missing\");\n        }\n        tmp$1 = {\n          id: tmp$2,\n          createdAt: match$5 !== undefined ? Caml_option.valFromOption(match$5) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type CourseExport is missing\"),\n          tags: match$6 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$6))).map((function (value) {\n                    var match = Js_json.decodeString(value);\n                    if (match !== undefined) {\n                      return match;\n                    } else {\n                      return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n                    }\n                  })) : Js_exn.raiseError(\"graphql_ppx: Field tags on type CourseExport is missing\"),\n          reviewedOnly: tmp$3\n        };\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      courseExport: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createCourseExport on type Mutation is missing\");\n  }\n  return {\n          createCourseExport: tmp\n        };\n}\n\nfunction json_of_Export(value) {\n  if (value >= 548749590) {\n    return \"Teams\";\n  } else {\n    return \"Students\";\n  }\n}\n\nfunction make(courseId, tagIds, reviewedOnly, exportType, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"tagIds\",\n                    tagIds.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"reviewedOnly\",\n                    reviewedOnly\n                  ],\n                  /* tuple */[\n                    \"exportType\",\n                    json_of_Export(exportType)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var tagIds = variables.tagIds;\n  var reviewedOnly = variables.reviewedOnly;\n  var exportType = variables.exportType;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"tagIds\",\n                    tagIds.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"reviewedOnly\",\n                    reviewedOnly\n                  ],\n                  /* tuple */[\n                    \"exportType\",\n                    json_of_Export(exportType)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(courseId, tagIds, reviewedOnly, exportType, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"courseId\",\n                  courseId\n                ],\n                /* tuple */[\n                  \"tagIds\",\n                  tagIds.map((function (prim) {\n                          return prim;\n                        }))\n                ],\n                /* tuple */[\n                  \"reviewedOnly\",\n                  reviewedOnly\n                ],\n                /* tuple */[\n                  \"exportType\",\n                  json_of_Export(exportType)\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, tagIds, reviewedOnly, exportType, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"courseId\",\n                      courseId\n                    ],\n                    /* tuple */[\n                      \"tagIds\",\n                      tagIds.map((function (prim) {\n                              return prim;\n                            }))\n                    ],\n                    /* tuple */[\n                      \"reviewedOnly\",\n                      reviewedOnly\n                    ],\n                    /* tuple */[\n                      \"exportType\",\n                      json_of_Export(exportType)\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar CreateCourseExportQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  json_of_Export: json_of_Export,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction createCourseExport(state, send, course, $$event) {\n  $$event.preventDefault();\n  Curry._1(send, /* BeginSaving */2);\n  var match = state.exportType;\n  var match$1 = match ? /* tuple */[\n      $$Array.map(CourseExports__Tag.id, state.selectedTags),\n      /* Students */33452920\n    ] : /* tuple */[\n      [],\n      /* Teams */548749590\n    ];\n  (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(CourseExports__Course.id(course), match$1[0], state.reviewedOnly, match$1[1], /* () */0)).then((function (response) {\n            var match = response.createCourseExport.courseExport;\n            if (match !== undefined) {\n              var $$export = Caml_option.valFromOption(match);\n              var courseExport = CourseExports__CourseExport.make($$export.id, state.exportType, DateFns.decodeISO($$export.createdAt), $$export.tags, $$export.reviewedOnly);\n              Curry._1(send, /* FinishSaving */Block.__(0, [courseExport]));\n            } else {\n              Curry._1(send, /* FailSaving */3);\n            }\n            return Promise.resolve(/* () */0);\n          })).catch((function (e) {\n          console.log(e);\n          Curry._1(send, /* FailSaving */3);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction toggleChoiceClasses(value) {\n  if (value) {\n    return \"relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 w-full bg-gray-200 text-primary-500 border-primary-500\";\n  } else {\n    return \"relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 w-full opacity-75 text-gray-900\";\n  }\n}\n\nfunction CourseExports__Root(Props) {\n  var course = Props.course;\n  var $$exports = Props.exports;\n  var tags = Props.tags;\n  var match = React.useReducer(reducer, $$exports, computeInitialState);\n  var send = match[1];\n  var state = match[0];\n  var tmp;\n  if (state.drawerOpen) {\n    var match$1 = state.exportType;\n    tmp = React.createElement(SchoolAdmin__EditorDrawer.make, {\n          closeDrawerCB: (function (param) {\n              return Curry._1(send, /* CloseDrawer */1);\n            }),\n          closeButtonTitle: \"Close Export Form\",\n          children: React.createElement(\"div\", {\n                className: \"mx-auto bg-white\"\n              }, React.createElement(\"div\", {\n                    className: \"max-w-2xl pt-6 px-6 mx-auto\"\n                  }, React.createElement(\"h5\", {\n                        className: \"uppercase text-center border-b border-gray-400 pb-2\"\n                      }, \"Export course data\"), React.createElement(\"div\", {\n                        className: \"mt-4\"\n                      }, React.createElement(\"label\", {\n                            className: \"block tracking-wide text-xs font-semibold mr-6 mb-2\"\n                          }, \"Please select the kind of export you need:\"), React.createElement(\"div\", {\n                            className: \"flex -mx-2\"\n                          }, React.createElement(\"div\", {\n                                className: \"w-1/2 px-2\"\n                              }, React.createElement(\"button\", {\n                                    className: toggleChoiceClasses(state.exportType === /* Students */1),\n                                    onClick: (function (param) {\n                                        return Curry._1(send, /* SelectExportType */Block.__(4, [/* Students */1]));\n                                      })\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-user\"\n                                      }), React.createElement(\"div\", {\n                                        className: \"mt-1\"\n                                      }, \"Students\"))), React.createElement(\"div\", {\n                                className: \"w-1/2 px-2\"\n                              }, React.createElement(\"button\", {\n                                    className: toggleChoiceClasses(state.exportType === /* Teams */0),\n                                    onClick: (function (param) {\n                                        return Curry._1(send, /* SelectExportType */Block.__(4, [/* Teams */0]));\n                                      })\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-user-friends\"\n                                      }), React.createElement(\"div\", {\n                                        className: \"mt-1\"\n                                      }, \"Teams\"))))), match$1 ? React.createElement(\"div\", {\n                          className: \"mt-4\"\n                        }, React.createElement(\"label\", {\n                              className: \"block tracking-wide text-xs font-semibold mb-2\"\n                            }, \"Export only students with the following tags:\"), React.createElement(TagsSelector.make, {\n                              placeholder: \"Search for a tag\",\n                              onChange: (function (tagSearch) {\n                                  return Curry._1(send, /* UpdateTagSearch */Block.__(5, [tagSearch]));\n                                }),\n                              value: state.tagSearch,\n                              unselected: unselected(tags, state.selectedTags),\n                              selected: state.selectedTags,\n                              onSelect: (function (tag) {\n                                  return Curry._1(send, /* SelectTag */Block.__(2, [tag]));\n                                }),\n                              onDeselect: (function (tag) {\n                                  return Curry._1(send, /* DeselectTag */Block.__(3, [tag]));\n                                }),\n                              emptySelectionMessage: \"No tags selected\"\n                            })) : null, React.createElement(\"div\", {\n                        className: \"mt-5\"\n                      }, React.createElement(\"label\", {\n                            className: \"block tracking-wide text-xs font-semibold mr-6 mb-2\",\n                            htmlFor: \"targets_filter\"\n                          }, \"Which targets should the export include?\"), React.createElement(\"div\", {\n                            className: \"flex -mx-2\",\n                            id: \"targets_filter\"\n                          }, React.createElement(\"div\", {\n                                className: \"w-1/2 px-2\"\n                              }, React.createElement(\"button\", {\n                                    className: toggleChoiceClasses(!state.reviewedOnly),\n                                    onClick: (function (param) {\n                                        return Curry._1(send, /* SetReviewedOnly */Block.__(1, [false]));\n                                      })\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-list\"\n                                      }), React.createElement(\"div\", {\n                                        className: \"mt-1\"\n                                      }, \"All targets\"))), React.createElement(\"div\", {\n                                className: \"w-1/2 px-2\"\n                              }, React.createElement(\"button\", {\n                                    className: toggleChoiceClasses(state.reviewedOnly),\n                                    onClick: (function (_event) {\n                                        return Curry._1(send, /* SetReviewedOnly */Block.__(1, [true]));\n                                      })\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-tasks\"\n                                      }), React.createElement(\"div\", {\n                                        className: \"mt-1\"\n                                      }, \"Only targets with reviewed submissions\"))))), React.createElement(\"div\", {\n                        className: \"flex max-w-2xl w-full mt-5 pb-5 mx-auto\"\n                      }, React.createElement(\"button\", {\n                            className: \"w-full btn btn-primary btn-large\",\n                            disabled: state.saving,\n                            onClick: (function (param) {\n                                return createCourseExport(state, send, course, param);\n                              })\n                          }, state.saving ? React.createElement(\"span\", undefined, React.createElement(FaIcon.make, {\n                                      classes: \"fas fa-spinner fa-pulse\"\n                                    }), React.createElement(\"span\", {\n                                      className: \"ml-2\"\n                                    }, \"Setting up an export...\")) : \"Create Export\"))))\n        });\n  } else {\n    tmp = null;\n  }\n  return React.createElement(\"div\", {\n              key: \"School admin coaches course index\",\n              className: \"flex flex-1 h-screen overflow-y-scroll\"\n            }, tmp, React.createElement(\"div\", {\n                  className: \"flex-1 flex flex-col bg-gray-100\"\n                }, React.createElement(\"div\", {\n                      className: \"flex px-6 py-2 items-center justify-between\"\n                    }, React.createElement(\"button\", {\n                          className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-20 cursor-pointer\",\n                          onClick: (function (param) {\n                              return Curry._1(send, /* OpenDrawer */0);\n                            })\n                        }, React.createElement(\"i\", {\n                              className: \"fas fa-file-export text-lg\"\n                            }), React.createElement(\"h5\", {\n                              className: \"font-semibold ml-2\"\n                            }, \"Create a new export\"))), ArrayUtils.isEmpty(state.courseExports) ? React.createElement(\"div\", {\n                        className: \"flex justify-center bg-gray-100 border rounded p-3 italic mx-auto max-w-2xl w-full\"\n                      }, \"You haven't exported anything yet!\") : React.createElement(\"div\", {\n                        className: \"px-6 pb-4 mt-5 flex flex-1 bg-gray-100\"\n                      }, React.createElement(\"div\", {\n                            className: \"max-w-2xl w-full mx-auto relative\"\n                          }, React.createElement(\"h4\", {\n                                className: \"mt-5 w-full\"\n                              }, \"Exports\"), React.createElement(\"div\", {\n                                className: \"flex mt-4 -mx-3 items-start flex-wrap\"\n                              }, $$Array.map((function (courseExport) {\n                                      var match = CourseExports__CourseExport.exportType(courseExport);\n                                      var match$1 = CourseExports__CourseExport.file(courseExport);\n                                      return React.createElement(\"div\", {\n                                                  key: CourseExports__CourseExport.id(courseExport),\n                                                  \"aria-label\": \"Export \" + CourseExports__CourseExport.id(courseExport),\n                                                  className: \"flex w-1/2 items-center mb-4 px-3\"\n                                                }, React.createElement(\"div\", {\n                                                      className: \"course-faculty__list-item shadow bg-white overflow-hidden rounded-lg flex flex-col w-full\"\n                                                    }, React.createElement(\"div\", {\n                                                          className: \"flex flex-1 justify-between\"\n                                                        }, React.createElement(\"div\", {\n                                                              className: \"pt-4 pb-3 px-4\"\n                                                            }, React.createElement(\"div\", {\n                                                                  className: \"text-sm\"\n                                                                }, React.createElement(\"p\", {\n                                                                      className: \"text-black font-semibold\"\n                                                                    }, CourseExports__CourseExport.exportTypeToString(courseExport)), React.createElement(\"p\", {\n                                                                      className: \"text-gray-600 font-semibold text-xs mt-px\"\n                                                                    }, readinessString(courseExport))), React.createElement(\"div\", {\n                                                                  className: \"flex flex-wrap text-gray-600 font-semibold text-xs mt-1\"\n                                                                }, CourseExports__CourseExport.reviewedOnly(courseExport) ? React.createElement(\"span\", {\n                                                                        className: \"px-2 py-1 border rounded bg-secondary-100 text-primary-600 mt-1 mr-1\"\n                                                                      }, \"Reviewed Submissions Only\") : null, match ? $$Array.map((function (tag) {\n                                                                          return React.createElement(\"span\", {\n                                                                                      key: tag,\n                                                                                      className: \"px-2 py-1 border rounded bg-primary-100 text-primary-600 mt-1 mr-1\"\n                                                                                    }, tag);\n                                                                        }), CourseExports__CourseExport.tags(courseExport)) : null)), match$1 !== undefined ? React.createElement(\"a\", {\n                                                                \"aria-label\": \"Download Course Export \" + CourseExports__CourseExport.id(courseExport),\n                                                                className: \"w-10 text-xs text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200\",\n                                                                href: CourseExports__CourseExport.filePath(match$1)\n                                                              }, React.createElement(FaIcon.make, {\n                                                                    classes: \"fas fa-file-download\"\n                                                                  })) : null)));\n                                    }), ArrayUtils.copyAndSort((function (x, y) {\n                                          return DateFns.differenceInSeconds(CourseExports__CourseExport.createdAt(y), CourseExports__CourseExport.createdAt(x));\n                                        }), state.courseExports)))))));\n}\n\nvar make$1 = CourseExports__Root;\n\nexports.str = str;\nexports.computeInitialState = computeInitialState;\nexports.reducer = reducer;\nexports.readinessString = readinessString;\nexports.Selectable = Selectable;\nexports.TagsSelector = TagsSelector;\nexports.unselected = unselected;\nexports.CreateCourseExportQuery = CreateCourseExportQuery;\nexports.createCourseExport = createCourseExport;\nexports.toggleChoiceClasses = toggleChoiceClasses;\nexports.make = make$1;\n/* TagsSelector Not a pure module */\n"]},"metadata":{},"sourceType":"module"}