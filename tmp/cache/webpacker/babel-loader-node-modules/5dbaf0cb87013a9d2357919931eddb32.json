{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\n\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\n\nvar CurriculumEditor__Level = require(\"../types/curriculum_editor/CurriculumEditor__Level.bs.js\");\n\nvar CurriculumEditor__Target = require(\"../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\n\nvar CurriculumEditor__LevelEditor = require(\"./curriculum_editor/CurriculumEditor__LevelEditor.bs.js\");\n\nvar CurriculumEditor__TargetGroup = require(\"../types/curriculum_editor/CurriculumEditor__TargetGroup.bs.js\");\n\nvar CurriculumEditor__TargetDrawer = require(\"./curriculum_editor/CurriculumEditor__TargetDrawer.bs.js\");\n\nvar CurriculumEditor__TargetGroupShow = require(\"./curriculum_editor/CurriculumEditor__TargetGroupShow.bs.js\");\n\nvar CurriculumEditor__TargetGroupEditor = require(\"./curriculum_editor/CurriculumEditor__TargetGroupEditor.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    return {\n      selectedLevel: state.selectedLevel,\n      editorAction: state.editorAction,\n      levels: state.levels,\n      targetGroups: state.targetGroups,\n      targets: state.targets,\n      showArchived: !state.showArchived\n    };\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* SelectLevel */\n      0:\n        return {\n          selectedLevel: action[0],\n          editorAction: state.editorAction,\n          levels: state.levels,\n          targetGroups: state.targetGroups,\n          targets: state.targets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateEditorAction */\n      1:\n        return {\n          selectedLevel: state.selectedLevel,\n          editorAction: action[0],\n          levels: state.levels,\n          targetGroups: state.targetGroups,\n          targets: state.targets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateLevels */\n      2:\n        var level = action[0];\n        var newLevels = CurriculumEditor__Level.updateList(state.levels, level);\n        return {\n          selectedLevel: level,\n          editorAction:\n          /* Hidden */\n          0,\n          levels: newLevels,\n          targetGroups: state.targetGroups,\n          targets: state.targets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateTargetGroup */\n      3:\n        var newtargetGroups = CurriculumEditor__TargetGroup.updateList(state.targetGroups, action[0]);\n        return {\n          selectedLevel: state.selectedLevel,\n          editorAction: state.editorAction,\n          levels: state.levels,\n          targetGroups: newtargetGroups,\n          targets: state.targets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateTargetGroups */\n      4:\n        return {\n          selectedLevel: state.selectedLevel,\n          editorAction: state.editorAction,\n          levels: state.levels,\n          targetGroups: action[0],\n          targets: state.targets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateTarget */\n      5:\n        var newtargets = CurriculumEditor__Target.updateList(state.targets, action[0]);\n        return {\n          selectedLevel: state.selectedLevel,\n          editorAction: state.editorAction,\n          levels: state.levels,\n          targetGroups: state.targetGroups,\n          targets: newtargets,\n          showArchived: state.showArchived\n        };\n\n      case\n      /* UpdateTargets */\n      6:\n        return {\n          selectedLevel: state.selectedLevel,\n          editorAction: state.editorAction,\n          levels: state.levels,\n          targetGroups: state.targetGroups,\n          targets: action[0],\n          showArchived: state.showArchived\n        };\n    }\n  }\n}\n\nfunction showArchivedButton(targetGroupsInLevel, targets) {\n  var tgIds = List.map(CurriculumEditor__TargetGroup.id, targetGroupsInLevel);\n  var numberOfArchivedTargetGroupsInLevel = List.length(List.filter(CurriculumEditor__TargetGroup.archived)(targetGroupsInLevel));\n  var numberOfArchivedTargetsInLevel = List.length(List.filter(function (target) {\n    return CurriculumEditor__Target.visibility(target) ===\n    /* Archived */\n    2;\n  })(List.filter(function (target) {\n    return List.mem(CurriculumEditor__Target.targetGroupId(target), tgIds);\n  })(targets)));\n\n  if (numberOfArchivedTargetGroupsInLevel > 0) {\n    return true;\n  } else {\n    return numberOfArchivedTargetsInLevel > 0;\n  }\n}\n\nfunction updateTargetSortIndex(state, send, sortedTargets) {\n  var oldTargets = List.filter(function (t) {\n    return !List.mem(t, sortedTargets);\n  })(state.targets);\n  return Curry._1(send,\n  /* UpdateTargets */\n  Block.__(6, [List.append(CurriculumEditor__Target.updateSortIndex(sortedTargets), oldTargets)]));\n}\n\nfunction updateTargetGroupSortIndex(state, send, sortedTargetGroups) {\n  var oldTargetGroups = List.filter(function (t) {\n    return !List.mem(t, sortedTargetGroups);\n  })(state.targetGroups);\n  return Curry._1(send,\n  /* UpdateTargetGroups */\n  Block.__(4, [List.append(CurriculumEditor__TargetGroup.updateSortIndex(sortedTargetGroups), oldTargetGroups)]));\n}\n\nfunction levelOfTarget(targetId, targets, levels, targetGroups) {\n  var target = ListUtils.unsafeFind(function (target) {\n    return CurriculumEditor__Target.id(target) === targetId;\n  }, \"Unable to find target with ID:\" + (targetId + \" in CurriculumEditor\"), targets);\n  var targetGroup = ListUtils.unsafeFind(function (tg) {\n    return CurriculumEditor__TargetGroup.id(tg) === CurriculumEditor__Target.targetGroupId(target);\n  }, \"Unable to find target group with ID:\" + (CurriculumEditor__Target.targetGroupId(target) + \" in CurriculumEditor\"), targetGroups);\n  return ListUtils.unsafeFind(function (level) {\n    return CurriculumEditor__Level.id(level) === CurriculumEditor__TargetGroup.levelId(targetGroup);\n  }, \"Unable to find level with ID:\" + (CurriculumEditor__TargetGroup.levelId(targetGroup) + \" in CurriculumEditor\"), levels);\n}\n\nfunction computeIntialState(param) {\n  var path = param[3];\n  var targets = param[2];\n  var targetGroups = param[1];\n  var levels = param[0];\n  var maxLevel = List.hd(List.sort(function (l1, l2) {\n    return CurriculumEditor__Level.number(l2) - CurriculumEditor__Level.number(l1) | 0;\n  }, levels));\n  var selectedLevel;\n\n  if (path && path[0] === \"school\") {\n    var match = path[1];\n\n    if (match && match[0] === \"courses\") {\n      var match$1 = match[1];\n\n      if (match$1) {\n        var match$2 = match$1[1];\n\n        if (match$2) {\n          switch (match$2[0]) {\n            case \"curriculum\":\n              selectedLevel = maxLevel;\n              break;\n\n            case \"targets\":\n              var match$3 = match$2[1];\n              selectedLevel = match$3 ? levelOfTarget(match$3[0], targets, levels, targetGroups) : maxLevel;\n              break;\n\n            default:\n              selectedLevel = maxLevel;\n          }\n        } else {\n          selectedLevel = maxLevel;\n        }\n      } else {\n        selectedLevel = maxLevel;\n      }\n    } else {\n      selectedLevel = maxLevel;\n    }\n  } else {\n    selectedLevel = maxLevel;\n  }\n\n  return {\n    selectedLevel: selectedLevel,\n    editorAction:\n    /* Hidden */\n    0,\n    levels: levels,\n    targetGroups: targetGroups,\n    targets: targets,\n    showArchived: false\n  };\n}\n\nfunction CurriculumEditor(Props) {\n  var course = Props.course;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var levels = Props.levels;\n  var targetGroups = Props.targetGroups;\n  var targets = Props.targets;\n  var authenticityToken = Props.authenticityToken;\n  var path = ReasonReactRouter.useUrl(undefined,\n  /* () */\n  0).path;\n  var match = React.useReducer(reducer,\n  /* tuple */\n  [levels, targetGroups, targets, path], computeIntialState);\n  var send = match[1];\n  var state = match[0];\n\n  var hideEditorActionCB = function hideEditorActionCB(param) {\n    return Curry._1(send,\n    /* UpdateEditorAction */\n    Block.__(1, [\n    /* Hidden */\n    0]));\n  };\n\n  var currentLevel = state.selectedLevel;\n  var currentLevelId = CurriculumEditor__Level.id(currentLevel);\n\n  var updateLevelsCB = function updateLevelsCB(level) {\n    return Curry._1(send,\n    /* UpdateLevels */\n    Block.__(2, [level]));\n  };\n\n  var targetGroupsInLevel = CurriculumEditor__TargetGroup.sort(List.filter(function (targetGroup) {\n    return CurriculumEditor__TargetGroup.levelId(targetGroup) === currentLevelId;\n  })(state.targetGroups));\n  var targetGroupsToDisplay = state.showArchived ? targetGroupsInLevel : List.filter(function (tg) {\n    return !CurriculumEditor__TargetGroup.archived(tg);\n  })(targetGroupsInLevel);\n\n  var showTargetGroupEditorCB = function showTargetGroupEditorCB(targetGroup) {\n    return Curry._1(send,\n    /* UpdateEditorAction */\n    Block.__(1, [\n    /* ShowTargetGroupEditor */\n    Block.__(0, [targetGroup])]));\n  };\n\n  var updateTargetCB = function updateTargetCB(target) {\n    var targetGroup = ListUtils.unsafeFind(function (tg) {\n      return CurriculumEditor__TargetGroup.id(tg) === CurriculumEditor__Target.targetGroupId(target);\n    }, \"Unabltge to find target group with ID: \" + CurriculumEditor__Target.targetGroupId(target), state.targetGroups);\n    var match = CurriculumEditor__Target.visibility(target);\n    var updatedTargetGroup = match >= 2 ? targetGroup : CurriculumEditor__TargetGroup.unarchive(targetGroup);\n\n    Curry._1(send,\n    /* UpdateTarget */\n    Block.__(5, [target]));\n\n    return Curry._1(send,\n    /* UpdateTargetGroup */\n    Block.__(3, [updatedTargetGroup]));\n  };\n\n  var updateTargetGroupsCB = function updateTargetGroupsCB(targetGroup) {\n    if (CurriculumEditor__TargetGroup.archived(targetGroup)) {\n      var targetIdsInTargerGroup = CurriculumEditor__Target.targetIdsInTargetGroup(CurriculumEditor__TargetGroup.id(targetGroup), state.targets);\n      var newTargets = List.map(function (target) {\n        if (List.mem(CurriculumEditor__Target.id(target), targetIdsInTargerGroup)) {\n          return CurriculumEditor__Target.archive(target);\n        } else {\n          return target;\n        }\n      }, state.targets);\n\n      Curry._1(send,\n      /* UpdateTargets */\n      Block.__(6, [newTargets]));\n    }\n\n    Curry._1(send,\n    /* UpdateTargetGroup */\n    Block.__(3, [targetGroup]));\n\n    return Curry._1(send,\n    /* UpdateEditorAction */\n    Block.__(1, [\n    /* Hidden */\n    0]));\n  };\n\n  var match$1 = state.editorAction;\n  var tmp;\n  tmp = typeof match$1 === \"number\" ? null : match$1.tag ? React.createElement(CurriculumEditor__LevelEditor.make, {\n    level: match$1[0],\n    levels: $$Array.of_list(state.levels),\n    course: course,\n    hideEditorActionCB: hideEditorActionCB,\n    updateLevelsCB: updateLevelsCB\n  }) : React.createElement(CurriculumEditor__TargetGroupEditor.make, {\n    targetGroup: match$1[0],\n    currentLevelId: currentLevelId,\n    authenticityToken: authenticityToken,\n    updateTargetGroupsCB: updateTargetGroupsCB,\n    hideEditorActionCB: hideEditorActionCB\n  });\n  return React.createElement(\"div\", {\n    className: \"flex-1 flex flex-col\"\n  }, React.createElement(\"div\", {\n    className: \"bg-white p-4 md:hidden shadow border-b\"\n  }, React.createElement(\"button\", {\n    className: \"sa-toggle__menu-btn sa-toggle__menu-btn--arrow hover:bg-gray-200 focus:outline-none\"\n  }, React.createElement(\"span\", {\n    className: \"sa-toggle__menu-btn-box\"\n  }, React.createElement(\"span\", {\n    className: \"sa-toggle__menu-btn-inner\"\n  })))), React.createElement(CurriculumEditor__TargetDrawer.make, {\n    targets: state.targets,\n    targetGroups: targetGroups,\n    evaluationCriteria: evaluationCriteria,\n    course: course,\n    updateTargetCB: updateTargetCB\n  }), tmp, React.createElement(\"div\", {\n    className: \"px-6 pb-4 flex-1 bg-gray-100 relative overflow-y-scroll\"\n  }, React.createElement(\"div\", {\n    className: \"w-full py-4 relative md:sticky top-0 z-20 bg-gray-100 border-b\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-3xl flex items-center justify-between mx-auto\"\n  }, React.createElement(\"div\", {\n    className: \"flex\"\n  }, React.createElement(\"div\", {\n    className: \"inline-block relative w-auto md:w-64\"\n  }, React.createElement(\"select\", {\n    className: \"block appearance-none w-full bg-white border text-sm border-gray-400 hover:border-gray-500 px-4 py-3 pr-8 rounded-r-none leading-tight focus:outline-none\",\n    value: CurriculumEditor__Level.name(currentLevel),\n    onChange: function onChange($$event) {\n      var level_name = $$event.target.value;\n      return Curry._1(send,\n      /* SelectLevel */\n      Block.__(0, [CurriculumEditor__Level.selectLevel(state.levels, level_name)]));\n    }\n  }, $$Array.of_list(List.map(function (level) {\n    return React.createElement(\"option\", {\n      key: CurriculumEditor__Level.id(level),\n      value: CurriculumEditor__Level.name(level)\n    }, \"Level \" + (String(CurriculumEditor__Level.number(level)) + (\": \" + CurriculumEditor__Level.name(level))));\n  }, CurriculumEditor__Level.sort(state.levels)))), React.createElement(\"div\", {\n    className: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-800\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-chevron-down text-xs\"\n  }))), React.createElement(\"button\", {\n    className: \"flex text-gray-600 hover:text-gray-900 text-sm font-bold border border-gray-400 border-l-0 py-1 px-2 rounded-r focus:outline-none\",\n    title: \"Edit selected level\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(1, [\n      /* ShowLevelEditor */\n      Block.__(1, [state.selectedLevel])]));\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-pencil-alt\"\n  })), React.createElement(\"button\", {\n    className: \"btn btn-primary ml-4\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(1, [\n      /* ShowLevelEditor */\n      Block.__(1, [undefined])]));\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-square mr-2 text-lg\"\n  }), React.createElement(\"span\", undefined, \"Create Level\"))), showArchivedButton(targetGroupsInLevel, state.targets) ? React.createElement(\"button\", {\n    className: \"btn btn-default\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* ToggleShowArchived */\n      0);\n    }\n  }, state.showArchived ? \"Hide Archived\" : \"Show Archived\") : null)), React.createElement(\"div\", {\n    className: \"target-group__container max-w-3xl mt-5 mx-auto relative\"\n  }, $$Array.of_list(List.mapi(function (index, targetGroup) {\n    return React.createElement(CurriculumEditor__TargetGroupShow.make, {\n      targetGroup: targetGroup,\n      targetGroups: targetGroupsToDisplay,\n      targets: state.targets,\n      showTargetGroupEditorCB: showTargetGroupEditorCB,\n      updateTargetCB: updateTargetCB,\n      showArchived: state.showArchived,\n      updateTargetSortIndexCB: function updateTargetSortIndexCB(param) {\n        return updateTargetSortIndex(state, send, param);\n      },\n      updateTargetGroupSortIndexCB: function updateTargetGroupSortIndexCB(param) {\n        return updateTargetGroupSortIndex(state, send, param);\n      },\n      index: index,\n      course: course,\n      key: CurriculumEditor__TargetGroup.id(targetGroup)\n    });\n  }, targetGroupsToDisplay)), React.createElement(\"div\", {\n    className: \"target-group__create flex flex-col items-center justify-center relative bg-white border-2 border-dashed border-gray-400 p-6 z-10 hover:text-primary-500 hover:shadow-lg hover:border-primary-400 hover:border-primary-400 rounded-lg mt-12 cursor-pointer\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* UpdateEditorAction */\n      Block.__(1, [\n      /* ShowTargetGroupEditor */\n      Block.__(0, [undefined])]));\n    }\n  }, React.createElement(\"span\", {\n    className: \"flex bg-gray-200 p-2 rounded-full\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle text-2xl\"\n  })), React.createElement(\"h4\", {\n    className: \"font-semibold ml-2\"\n  }, \"Create a target group\")))));\n}\n\nvar make = CurriculumEditor;\nexports.str = str;\nexports.reducer = reducer;\nexports.showArchivedButton = showArchivedButton;\nexports.updateTargetSortIndex = updateTargetSortIndex;\nexports.updateTargetGroupSortIndex = updateTargetGroupSortIndex;\nexports.levelOfTarget = levelOfTarget;\nexports.computeIntialState = computeIntialState;\nexports.make = make;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/CurriculumEditor.bs.js"],"names":["List","require","$$Array","Block","Curry","React","ListUtils","ReasonReactRouter","CurriculumEditor__Level","CurriculumEditor__Target","CurriculumEditor__LevelEditor","CurriculumEditor__TargetGroup","CurriculumEditor__TargetDrawer","CurriculumEditor__TargetGroupShow","CurriculumEditor__TargetGroupEditor","str","prim","reducer","state","action","selectedLevel","editorAction","levels","targetGroups","targets","showArchived","tag","level","newLevels","updateList","newtargetGroups","newtargets","showArchivedButton","targetGroupsInLevel","tgIds","map","id","numberOfArchivedTargetGroupsInLevel","length","filter","archived","numberOfArchivedTargetsInLevel","target","visibility","mem","targetGroupId","updateTargetSortIndex","send","sortedTargets","oldTargets","t","_1","__","append","updateSortIndex","updateTargetGroupSortIndex","sortedTargetGroups","oldTargetGroups","levelOfTarget","targetId","unsafeFind","targetGroup","tg","levelId","computeIntialState","param","path","maxLevel","hd","sort","l1","l2","number","match","match$1","match$2","match$3","CurriculumEditor","Props","course","evaluationCriteria","authenticityToken","useUrl","undefined","useReducer","hideEditorActionCB","currentLevel","currentLevelId","updateLevelsCB","targetGroupsToDisplay","showTargetGroupEditorCB","updateTargetCB","updatedTargetGroup","unarchive","updateTargetGroupsCB","targetIdsInTargerGroup","targetIdsInTargetGroup","newTargets","archive","tmp","createElement","make","of_list","className","value","name","onChange","$$event","level_name","selectLevel","key","String","title","onClick","mapi","index","updateTargetSortIndexCB","updateTargetGroupSortIndexCB","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\nvar CurriculumEditor__Level = require(\"../types/curriculum_editor/CurriculumEditor__Level.bs.js\");\nvar CurriculumEditor__Target = require(\"../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\nvar CurriculumEditor__LevelEditor = require(\"./curriculum_editor/CurriculumEditor__LevelEditor.bs.js\");\nvar CurriculumEditor__TargetGroup = require(\"../types/curriculum_editor/CurriculumEditor__TargetGroup.bs.js\");\nvar CurriculumEditor__TargetDrawer = require(\"./curriculum_editor/CurriculumEditor__TargetDrawer.bs.js\");\nvar CurriculumEditor__TargetGroupShow = require(\"./curriculum_editor/CurriculumEditor__TargetGroupShow.bs.js\");\nvar CurriculumEditor__TargetGroupEditor = require(\"./curriculum_editor/CurriculumEditor__TargetGroupEditor.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    return {\n            selectedLevel: state.selectedLevel,\n            editorAction: state.editorAction,\n            levels: state.levels,\n            targetGroups: state.targetGroups,\n            targets: state.targets,\n            showArchived: !state.showArchived\n          };\n  } else {\n    switch (action.tag | 0) {\n      case /* SelectLevel */0 :\n          return {\n                  selectedLevel: action[0],\n                  editorAction: state.editorAction,\n                  levels: state.levels,\n                  targetGroups: state.targetGroups,\n                  targets: state.targets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateEditorAction */1 :\n          return {\n                  selectedLevel: state.selectedLevel,\n                  editorAction: action[0],\n                  levels: state.levels,\n                  targetGroups: state.targetGroups,\n                  targets: state.targets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateLevels */2 :\n          var level = action[0];\n          var newLevels = CurriculumEditor__Level.updateList(state.levels, level);\n          return {\n                  selectedLevel: level,\n                  editorAction: /* Hidden */0,\n                  levels: newLevels,\n                  targetGroups: state.targetGroups,\n                  targets: state.targets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateTargetGroup */3 :\n          var newtargetGroups = CurriculumEditor__TargetGroup.updateList(state.targetGroups, action[0]);\n          return {\n                  selectedLevel: state.selectedLevel,\n                  editorAction: state.editorAction,\n                  levels: state.levels,\n                  targetGroups: newtargetGroups,\n                  targets: state.targets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateTargetGroups */4 :\n          return {\n                  selectedLevel: state.selectedLevel,\n                  editorAction: state.editorAction,\n                  levels: state.levels,\n                  targetGroups: action[0],\n                  targets: state.targets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateTarget */5 :\n          var newtargets = CurriculumEditor__Target.updateList(state.targets, action[0]);\n          return {\n                  selectedLevel: state.selectedLevel,\n                  editorAction: state.editorAction,\n                  levels: state.levels,\n                  targetGroups: state.targetGroups,\n                  targets: newtargets,\n                  showArchived: state.showArchived\n                };\n      case /* UpdateTargets */6 :\n          return {\n                  selectedLevel: state.selectedLevel,\n                  editorAction: state.editorAction,\n                  levels: state.levels,\n                  targetGroups: state.targetGroups,\n                  targets: action[0],\n                  showArchived: state.showArchived\n                };\n      \n    }\n  }\n}\n\nfunction showArchivedButton(targetGroupsInLevel, targets) {\n  var tgIds = List.map(CurriculumEditor__TargetGroup.id, targetGroupsInLevel);\n  var numberOfArchivedTargetGroupsInLevel = List.length(List.filter(CurriculumEditor__TargetGroup.archived)(targetGroupsInLevel));\n  var numberOfArchivedTargetsInLevel = List.length(List.filter((function (target) {\n                return CurriculumEditor__Target.visibility(target) === /* Archived */2;\n              }))(List.filter((function (target) {\n                    return List.mem(CurriculumEditor__Target.targetGroupId(target), tgIds);\n                  }))(targets)));\n  if (numberOfArchivedTargetGroupsInLevel > 0) {\n    return true;\n  } else {\n    return numberOfArchivedTargetsInLevel > 0;\n  }\n}\n\nfunction updateTargetSortIndex(state, send, sortedTargets) {\n  var oldTargets = List.filter((function (t) {\n            return !List.mem(t, sortedTargets);\n          }))(state.targets);\n  return Curry._1(send, /* UpdateTargets */Block.__(6, [List.append(CurriculumEditor__Target.updateSortIndex(sortedTargets), oldTargets)]));\n}\n\nfunction updateTargetGroupSortIndex(state, send, sortedTargetGroups) {\n  var oldTargetGroups = List.filter((function (t) {\n            return !List.mem(t, sortedTargetGroups);\n          }))(state.targetGroups);\n  return Curry._1(send, /* UpdateTargetGroups */Block.__(4, [List.append(CurriculumEditor__TargetGroup.updateSortIndex(sortedTargetGroups), oldTargetGroups)]));\n}\n\nfunction levelOfTarget(targetId, targets, levels, targetGroups) {\n  var target = ListUtils.unsafeFind((function (target) {\n          return CurriculumEditor__Target.id(target) === targetId;\n        }), \"Unable to find target with ID:\" + (targetId + \" in CurriculumEditor\"), targets);\n  var targetGroup = ListUtils.unsafeFind((function (tg) {\n          return CurriculumEditor__TargetGroup.id(tg) === CurriculumEditor__Target.targetGroupId(target);\n        }), \"Unable to find target group with ID:\" + (CurriculumEditor__Target.targetGroupId(target) + \" in CurriculumEditor\"), targetGroups);\n  return ListUtils.unsafeFind((function (level) {\n                return CurriculumEditor__Level.id(level) === CurriculumEditor__TargetGroup.levelId(targetGroup);\n              }), \"Unable to find level with ID:\" + (CurriculumEditor__TargetGroup.levelId(targetGroup) + \" in CurriculumEditor\"), levels);\n}\n\nfunction computeIntialState(param) {\n  var path = param[3];\n  var targets = param[2];\n  var targetGroups = param[1];\n  var levels = param[0];\n  var maxLevel = List.hd(List.sort((function (l1, l2) {\n              return CurriculumEditor__Level.number(l2) - CurriculumEditor__Level.number(l1) | 0;\n            }), levels));\n  var selectedLevel;\n  if (path && path[0] === \"school\") {\n    var match = path[1];\n    if (match && match[0] === \"courses\") {\n      var match$1 = match[1];\n      if (match$1) {\n        var match$2 = match$1[1];\n        if (match$2) {\n          switch (match$2[0]) {\n            case \"curriculum\" :\n                selectedLevel = maxLevel;\n                break;\n            case \"targets\" :\n                var match$3 = match$2[1];\n                selectedLevel = match$3 ? levelOfTarget(match$3[0], targets, levels, targetGroups) : maxLevel;\n                break;\n            default:\n              selectedLevel = maxLevel;\n          }\n        } else {\n          selectedLevel = maxLevel;\n        }\n      } else {\n        selectedLevel = maxLevel;\n      }\n    } else {\n      selectedLevel = maxLevel;\n    }\n  } else {\n    selectedLevel = maxLevel;\n  }\n  return {\n          selectedLevel: selectedLevel,\n          editorAction: /* Hidden */0,\n          levels: levels,\n          targetGroups: targetGroups,\n          targets: targets,\n          showArchived: false\n        };\n}\n\nfunction CurriculumEditor(Props) {\n  var course = Props.course;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var levels = Props.levels;\n  var targetGroups = Props.targetGroups;\n  var targets = Props.targets;\n  var authenticityToken = Props.authenticityToken;\n  var path = ReasonReactRouter.useUrl(undefined, /* () */0).path;\n  var match = React.useReducer(reducer, /* tuple */[\n        levels,\n        targetGroups,\n        targets,\n        path\n      ], computeIntialState);\n  var send = match[1];\n  var state = match[0];\n  var hideEditorActionCB = function (param) {\n    return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* Hidden */0]));\n  };\n  var currentLevel = state.selectedLevel;\n  var currentLevelId = CurriculumEditor__Level.id(currentLevel);\n  var updateLevelsCB = function (level) {\n    return Curry._1(send, /* UpdateLevels */Block.__(2, [level]));\n  };\n  var targetGroupsInLevel = CurriculumEditor__TargetGroup.sort(List.filter((function (targetGroup) {\n                return CurriculumEditor__TargetGroup.levelId(targetGroup) === currentLevelId;\n              }))(state.targetGroups));\n  var targetGroupsToDisplay = state.showArchived ? targetGroupsInLevel : List.filter((function (tg) {\n              return !CurriculumEditor__TargetGroup.archived(tg);\n            }))(targetGroupsInLevel);\n  var showTargetGroupEditorCB = function (targetGroup) {\n    return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* ShowTargetGroupEditor */Block.__(0, [targetGroup])]));\n  };\n  var updateTargetCB = function (target) {\n    var targetGroup = ListUtils.unsafeFind((function (tg) {\n            return CurriculumEditor__TargetGroup.id(tg) === CurriculumEditor__Target.targetGroupId(target);\n          }), \"Unabltge to find target group with ID: \" + CurriculumEditor__Target.targetGroupId(target), state.targetGroups);\n    var match = CurriculumEditor__Target.visibility(target);\n    var updatedTargetGroup = match >= 2 ? targetGroup : CurriculumEditor__TargetGroup.unarchive(targetGroup);\n    Curry._1(send, /* UpdateTarget */Block.__(5, [target]));\n    return Curry._1(send, /* UpdateTargetGroup */Block.__(3, [updatedTargetGroup]));\n  };\n  var updateTargetGroupsCB = function (targetGroup) {\n    if (CurriculumEditor__TargetGroup.archived(targetGroup)) {\n      var targetIdsInTargerGroup = CurriculumEditor__Target.targetIdsInTargetGroup(CurriculumEditor__TargetGroup.id(targetGroup), state.targets);\n      var newTargets = List.map((function (target) {\n              if (List.mem(CurriculumEditor__Target.id(target), targetIdsInTargerGroup)) {\n                return CurriculumEditor__Target.archive(target);\n              } else {\n                return target;\n              }\n            }), state.targets);\n      Curry._1(send, /* UpdateTargets */Block.__(6, [newTargets]));\n    }\n    Curry._1(send, /* UpdateTargetGroup */Block.__(3, [targetGroup]));\n    return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* Hidden */0]));\n  };\n  var match$1 = state.editorAction;\n  var tmp;\n  tmp = typeof match$1 === \"number\" ? null : (\n      match$1.tag ? React.createElement(CurriculumEditor__LevelEditor.make, {\n              level: match$1[0],\n              levels: $$Array.of_list(state.levels),\n              course: course,\n              hideEditorActionCB: hideEditorActionCB,\n              updateLevelsCB: updateLevelsCB\n            }) : React.createElement(CurriculumEditor__TargetGroupEditor.make, {\n              targetGroup: match$1[0],\n              currentLevelId: currentLevelId,\n              authenticityToken: authenticityToken,\n              updateTargetGroupsCB: updateTargetGroupsCB,\n              hideEditorActionCB: hideEditorActionCB\n            })\n    );\n  return React.createElement(\"div\", {\n              className: \"flex-1 flex flex-col\"\n            }, React.createElement(\"div\", {\n                  className: \"bg-white p-4 md:hidden shadow border-b\"\n                }, React.createElement(\"button\", {\n                      className: \"sa-toggle__menu-btn sa-toggle__menu-btn--arrow hover:bg-gray-200 focus:outline-none\"\n                    }, React.createElement(\"span\", {\n                          className: \"sa-toggle__menu-btn-box\"\n                        }, React.createElement(\"span\", {\n                              className: \"sa-toggle__menu-btn-inner\"\n                            })))), React.createElement(CurriculumEditor__TargetDrawer.make, {\n                  targets: state.targets,\n                  targetGroups: targetGroups,\n                  evaluationCriteria: evaluationCriteria,\n                  course: course,\n                  updateTargetCB: updateTargetCB\n                }), tmp, React.createElement(\"div\", {\n                  className: \"px-6 pb-4 flex-1 bg-gray-100 relative overflow-y-scroll\"\n                }, React.createElement(\"div\", {\n                      className: \"w-full py-4 relative md:sticky top-0 z-20 bg-gray-100 border-b\"\n                    }, React.createElement(\"div\", {\n                          className: \"max-w-3xl flex items-center justify-between mx-auto\"\n                        }, React.createElement(\"div\", {\n                              className: \"flex\"\n                            }, React.createElement(\"div\", {\n                                  className: \"inline-block relative w-auto md:w-64\"\n                                }, React.createElement(\"select\", {\n                                      className: \"block appearance-none w-full bg-white border text-sm border-gray-400 hover:border-gray-500 px-4 py-3 pr-8 rounded-r-none leading-tight focus:outline-none\",\n                                      value: CurriculumEditor__Level.name(currentLevel),\n                                      onChange: (function ($$event) {\n                                          var level_name = $$event.target.value;\n                                          return Curry._1(send, /* SelectLevel */Block.__(0, [CurriculumEditor__Level.selectLevel(state.levels, level_name)]));\n                                        })\n                                    }, $$Array.of_list(List.map((function (level) {\n                                                return React.createElement(\"option\", {\n                                                            key: CurriculumEditor__Level.id(level),\n                                                            value: CurriculumEditor__Level.name(level)\n                                                          }, \"Level \" + (String(CurriculumEditor__Level.number(level)) + (\": \" + CurriculumEditor__Level.name(level))));\n                                              }), CurriculumEditor__Level.sort(state.levels)))), React.createElement(\"div\", {\n                                      className: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-800\"\n                                    }, React.createElement(\"i\", {\n                                          className: \"fas fa-chevron-down text-xs\"\n                                        }))), React.createElement(\"button\", {\n                                  className: \"flex text-gray-600 hover:text-gray-900 text-sm font-bold border border-gray-400 border-l-0 py-1 px-2 rounded-r focus:outline-none\",\n                                  title: \"Edit selected level\",\n                                  onClick: (function (param) {\n                                      return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* ShowLevelEditor */Block.__(1, [state.selectedLevel])]));\n                                    })\n                                }, React.createElement(\"i\", {\n                                      className: \"fas fa-pencil-alt\"\n                                    })), React.createElement(\"button\", {\n                                  className: \"btn btn-primary ml-4\",\n                                  onClick: (function (param) {\n                                      return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* ShowLevelEditor */Block.__(1, [undefined])]));\n                                    })\n                                }, React.createElement(\"i\", {\n                                      className: \"fas fa-plus-square mr-2 text-lg\"\n                                    }), React.createElement(\"span\", undefined, \"Create Level\"))), showArchivedButton(targetGroupsInLevel, state.targets) ? React.createElement(\"button\", {\n                                className: \"btn btn-default\",\n                                onClick: (function (param) {\n                                    return Curry._1(send, /* ToggleShowArchived */0);\n                                  })\n                              }, state.showArchived ? \"Hide Archived\" : \"Show Archived\") : null)), React.createElement(\"div\", {\n                      className: \"target-group__container max-w-3xl mt-5 mx-auto relative\"\n                    }, $$Array.of_list(List.mapi((function (index, targetGroup) {\n                                return React.createElement(CurriculumEditor__TargetGroupShow.make, {\n                                            targetGroup: targetGroup,\n                                            targetGroups: targetGroupsToDisplay,\n                                            targets: state.targets,\n                                            showTargetGroupEditorCB: showTargetGroupEditorCB,\n                                            updateTargetCB: updateTargetCB,\n                                            showArchived: state.showArchived,\n                                            updateTargetSortIndexCB: (function (param) {\n                                                return updateTargetSortIndex(state, send, param);\n                                              }),\n                                            updateTargetGroupSortIndexCB: (function (param) {\n                                                return updateTargetGroupSortIndex(state, send, param);\n                                              }),\n                                            index: index,\n                                            course: course,\n                                            key: CurriculumEditor__TargetGroup.id(targetGroup)\n                                          });\n                              }), targetGroupsToDisplay)), React.createElement(\"div\", {\n                          className: \"target-group__create flex flex-col items-center justify-center relative bg-white border-2 border-dashed border-gray-400 p-6 z-10 hover:text-primary-500 hover:shadow-lg hover:border-primary-400 hover:border-primary-400 rounded-lg mt-12 cursor-pointer\",\n                          onClick: (function (param) {\n                              return Curry._1(send, /* UpdateEditorAction */Block.__(1, [/* ShowTargetGroupEditor */Block.__(0, [undefined])]));\n                            })\n                        }, React.createElement(\"span\", {\n                              className: \"flex bg-gray-200 p-2 rounded-full\"\n                            }, React.createElement(\"i\", {\n                                  className: \"fas fa-plus-circle text-2xl\"\n                                })), React.createElement(\"h4\", {\n                              className: \"font-semibold ml-2\"\n                            }, \"Create a target group\")))));\n}\n\nvar make = CurriculumEditor;\n\nexports.str = str;\nexports.reducer = reducer;\nexports.showArchivedButton = showArchivedButton;\nexports.updateTargetSortIndex = updateTargetSortIndex;\nexports.updateTargetGroupSortIndex = updateTargetGroupSortIndex;\nexports.levelOfTarget = levelOfTarget;\nexports.computeIntialState = computeIntialState;\nexports.make = make;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}