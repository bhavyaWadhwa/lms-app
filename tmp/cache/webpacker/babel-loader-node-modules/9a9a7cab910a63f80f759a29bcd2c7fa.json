{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar EmailUtils = require(\"../../../shared/utils/EmailUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar SchoolAdmin = require(\"../../types/SchoolAdmin.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation CreateSchoolAdminMutation($name: String!, $email: String!)  {\\ncreateSchoolAdmin(name: $name, email: $email)  {\\nschoolAdmin  {\\nid  \\navatarUrl  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createSchoolAdmin\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"schoolAdmin\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var value$4 = Js_option.getExn(Js_json.decodeObject(value$3));\n        var match$3 = Js_dict.get(value$4, \"id\");\n        var tmp$2;\n\n        if (match$3 !== undefined) {\n          var value$5 = Caml_option.valFromOption(match$3);\n          var match$4 = Js_json.decodeString(value$5);\n          tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n        } else {\n          tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field id on type UserProxy is missing\");\n        }\n\n        var match$5 = Js_dict.get(value$4, \"avatarUrl\");\n        var tmp$3;\n\n        if (match$5 !== undefined) {\n          var value$6 = Caml_option.valFromOption(match$5);\n          var match$6 = Js_json.decodeNull(value$6);\n\n          if (match$6 !== undefined) {\n            tmp$3 = undefined;\n          } else {\n            var match$7 = Js_json.decodeString(value$6);\n            tmp$3 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n          }\n        } else {\n          tmp$3 = undefined;\n        }\n\n        tmp$1 = {\n          id: tmp$2,\n          avatarUrl: tmp$3\n        };\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      schoolAdmin: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createSchoolAdmin on type Mutation is missing\");\n  }\n\n  return {\n    createSchoolAdmin: tmp\n  };\n}\n\nfunction make(name, email, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"name\", name],\n    /* tuple */\n    [\"email\", email]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var name = variables.name;\n  var email = variables.email;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"name\", name],\n    /* tuple */\n    [\"email\", email]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(name, email, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"name\", name],\n  /* tuple */\n  [\"email\", email]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, name, email, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"name\", name],\n  /* tuple */\n  [\"email\", email]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar CreateSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\nvar ppx_printed_query$1 = \"mutation UpdateSchoolAdminMutation($id: ID!, $name: String!)  {\\nupdateSchoolAdmin(id: $id, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchoolAdmin\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateSchoolAdminPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchoolAdmin on type Mutation is missing\");\n  }\n\n  return {\n    updateSchoolAdmin: tmp\n  };\n}\n\nfunction make$1(id, name, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"name\", name]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var name = variables.name;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"name\", name]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(id, name, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"name\", name]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, name, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"name\", name]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar UpdateSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction createSchoolAdminQuery(email, name, setSaving, updateCB) {\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(name, email,\n  /* () */\n  0)).then(function (response) {\n    var match = response.createSchoolAdmin.schoolAdmin;\n\n    if (match !== undefined) {\n      var schoolAdmin = Caml_option.valFromOption(match);\n\n      Curry._1(updateCB, SchoolAdmin.create(schoolAdmin.id, name, email, schoolAdmin.avatarUrl));\n\n      $$Notification.success(\"Success\", \"School Admin created successfully.\");\n    } else {\n      Curry._1(setSaving, function (param) {\n        return false;\n      });\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction updateSchoolAdminQuery(admin, name, setSaving, updateCB) {\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  var id = SchoolAdmin.id(admin);\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make$1(id, name,\n  /* () */\n  0)).then(function (response) {\n    if (response.updateSchoolAdmin.success) {\n      Curry._1(updateCB, SchoolAdmin.updateName(name, admin));\n\n      $$Notification.success(\"Success\", \"School Admin updated successfully.\");\n    } else {\n      Curry._1(setSaving, function (param) {\n        return false;\n      });\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction handleButtonClick(admin, setSaving, name, email, updateCB, $$event) {\n  $$event.preventDefault();\n\n  if (admin !== undefined) {\n    return updateSchoolAdminQuery(admin, name, setSaving, updateCB);\n  } else {\n    return createSchoolAdminQuery(email, name, setSaving, updateCB);\n  }\n}\n\nfunction isInvalidEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction showInvalidEmailError(email, admin) {\n  if (admin !== undefined || email !== \"\") {\n    return EmailUtils.isInvalid(false, email);\n  } else {\n    return false;\n  }\n}\n\nfunction showInvalidNameError(name, admin) {\n  if (admin !== undefined) {\n    return name === \"\";\n  } else {\n    return false;\n  }\n}\n\nfunction saveDisabled(email, name, saving, admin) {\n  if (EmailUtils.isInvalid(false, email) || saving || name === \"\") {\n    return true;\n  } else if (admin !== undefined) {\n    var admin$1 = admin;\n\n    if (SchoolAdmin.name(admin$1) === name) {\n      return SchoolAdmin.email(admin$1) === email;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\n\nfunction buttonText(saving, admin) {\n  if (saving) {\n    return \"Saving\";\n  } else if (admin !== undefined) {\n    return \"Update School Admin\";\n  } else {\n    return \"Create School Admin\";\n  }\n}\n\nfunction emailInputDisabled(admin) {\n  return admin !== undefined;\n}\n\nfunction SchoolAdmins__Form(Props) {\n  var admin = Props.admin;\n  var updateCB = Props.updateCB;\n  var match = React.useState(function () {\n    return false;\n  });\n  var setSaving = match[1];\n  var saving = match[0];\n  var match$1 = React.useState(function () {\n    if (admin !== undefined) {\n      return SchoolAdmin.name(admin);\n    } else {\n      return \"\";\n    }\n  });\n  var setName = match$1[1];\n  var name = match$1[0];\n  var match$2 = React.useState(function () {\n    if (admin !== undefined) {\n      return SchoolAdmin.email(admin);\n    } else {\n      return \"\";\n    }\n  });\n  var setEmail = match$2[1];\n  var email = match$2[0];\n  return React.createElement(\"div\", {\n    className: \"w-full\"\n  }, React.createElement(DisablingCover.make, {\n    disabled: saving,\n    children: React.createElement(\"div\", {\n      className: \"mx-auto bg-white\"\n    }, React.createElement(\"div\", {\n      className: \"max-w-2xl p-6 mx-auto\"\n    }, React.createElement(\"h5\", {\n      className: \"uppercase text-center border-b border-gray-400 pb-2 mb-4\"\n    }, admin !== undefined ? SchoolAdmin.name(admin) : \"Add new school admin\"), React.createElement(\"div\", undefined, React.createElement(\"label\", {\n      className: \"inline-block tracking-wide text-xs font-semibold mb-2 leading-tight\",\n      htmlFor: \"email\"\n    }, \"Email\"), React.createElement(\"input\", {\n      className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 leading-snug focus:outline-none focus:bg-white focus:border-gray-500\",\n      id: \"email\",\n      disabled: emailInputDisabled(admin),\n      placeholder: \"Add email here\",\n      type: \"email\",\n      value: email,\n      onChange: function onChange($$event) {\n        return Curry._1(setEmail, $$event.target.value);\n      }\n    }), React.createElement(School__InputGroupError.make, {\n      message: \"Enter a valid Email\",\n      active: showInvalidEmailError(email, admin)\n    })), React.createElement(\"div\", {\n      className: \"mt-5\"\n    }, React.createElement(\"label\", {\n      className: \"inline-block tracking-wide text-xs font-semibold mb-2 leading-tight\",\n      htmlFor: \"name\"\n    }, \"Name\"), React.createElement(\"input\", {\n      className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 leading-snug focus:outline-none focus:bg-white focus:border-gray-500\",\n      id: \"name\",\n      placeholder: \"Add name here\",\n      type: \"text\",\n      value: name,\n      onChange: function onChange($$event) {\n        return Curry._1(setName, $$event.target.value);\n      }\n    }), React.createElement(School__InputGroupError.make, {\n      message: \"Enter a valid name\",\n      active: showInvalidNameError(name, admin)\n    })), React.createElement(\"div\", {\n      className: \"w-auto mt-8\"\n    }, React.createElement(\"button\", {\n      className: \"w-full btn btn-large btn-primary\",\n      disabled: saveDisabled(email, name, saving, admin),\n      onClick: function onClick(param) {\n        return handleButtonClick(admin, setSaving, name, email, updateCB, param);\n      }\n    }, buttonText(saving, admin)))))\n  }));\n}\n\nvar make$2 = SchoolAdmins__Form;\nexports.str = str;\nexports.CreateSchoolAdminQuery = CreateSchoolAdminQuery;\nexports.UpdateSchoolAdminQuery = UpdateSchoolAdminQuery;\nexports.createSchoolAdminQuery = createSchoolAdminQuery;\nexports.updateSchoolAdminQuery = updateSchoolAdminQuery;\nexports.handleButtonClick = handleButtonClick;\nexports.isInvalidEmail = isInvalidEmail;\nexports.showInvalidEmailError = showInvalidEmailError;\nexports.showInvalidNameError = showInvalidNameError;\nexports.saveDisabled = saveDisabled;\nexports.buttonText = buttonText;\nexports.emailInputDisabled = emailInputDisabled;\nexports.make = make$2;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/settings/components/SchoolAdmins__Form.bs.js"],"names":["Curry","require","React","Js_exn","Js_dict","Js_json","Js_option","EmailUtils","Caml_option","SchoolAdmin","GraphqlQuery","$$Notification","DisablingCover","School__InputGroupError","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeNull","value$4","match$3","tmp$2","value$5","match$4","decodeString","raiseError","JSON","stringify","match$5","tmp$3","value$6","match$6","match$7","id","avatarUrl","schoolAdmin","createSchoolAdmin","make","name","email","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","CreateSchoolAdminQuery","ppx_printed_query$1","parse$1","decodeBoolean","success","updateSchoolAdmin","make$1","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","UpdateSchoolAdminQuery","createSchoolAdminQuery","setSaving","updateCB","eta","sendQuery","then","response","create","Promise","resolve","updateSchoolAdminQuery","admin","updateName","handleButtonClick","$$event","preventDefault","isInvalidEmail","isInvalid","showInvalidEmailError","showInvalidNameError","saveDisabled","saving","admin$1","buttonText","emailInputDisabled","SchoolAdmins__Form","Props","useState","setName","setEmail","createElement","className","disabled","children","htmlFor","placeholder","type","onChange","target","message","active","onClick","make$2","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar EmailUtils = require(\"../../../shared/utils/EmailUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar SchoolAdmin = require(\"../../types/SchoolAdmin.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation CreateSchoolAdminMutation($name: String!, $email: String!)  {\\ncreateSchoolAdmin(name: $name, email: $email)  {\\nschoolAdmin  {\\nid  \\navatarUrl  \\n}\\n\\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createSchoolAdmin\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"schoolAdmin\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var value$4 = Js_option.getExn(Js_json.decodeObject(value$3));\n        var match$3 = Js_dict.get(value$4, \"id\");\n        var tmp$2;\n        if (match$3 !== undefined) {\n          var value$5 = Caml_option.valFromOption(match$3);\n          var match$4 = Js_json.decodeString(value$5);\n          tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n        } else {\n          tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field id on type UserProxy is missing\");\n        }\n        var match$5 = Js_dict.get(value$4, \"avatarUrl\");\n        var tmp$3;\n        if (match$5 !== undefined) {\n          var value$6 = Caml_option.valFromOption(match$5);\n          var match$6 = Js_json.decodeNull(value$6);\n          if (match$6 !== undefined) {\n            tmp$3 = undefined;\n          } else {\n            var match$7 = Js_json.decodeString(value$6);\n            tmp$3 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n          }\n        } else {\n          tmp$3 = undefined;\n        }\n        tmp$1 = {\n          id: tmp$2,\n          avatarUrl: tmp$3\n        };\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      schoolAdmin: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createSchoolAdmin on type Mutation is missing\");\n  }\n  return {\n          createSchoolAdmin: tmp\n        };\n}\n\nfunction make(name, email, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ],\n                  /* tuple */[\n                    \"email\",\n                    email\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var name = variables.name;\n  var email = variables.email;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ],\n                  /* tuple */[\n                    \"email\",\n                    email\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(name, email, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"name\",\n                  name\n                ],\n                /* tuple */[\n                  \"email\",\n                  email\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, name, email, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"name\",\n                      name\n                    ],\n                    /* tuple */[\n                      \"email\",\n                      email\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar CreateSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nvar ppx_printed_query$1 = \"mutation UpdateSchoolAdminMutation($id: ID!, $name: String!)  {\\nupdateSchoolAdmin(id: $id, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchoolAdmin\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateSchoolAdminPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchoolAdmin on type Mutation is missing\");\n  }\n  return {\n          updateSchoolAdmin: tmp\n        };\n}\n\nfunction make$1(id, name, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var name = variables.name;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(id, name, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"name\",\n                  name\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, name, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"name\",\n                      name\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar UpdateSchoolAdminQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction createSchoolAdminQuery(email, name, setSaving, updateCB) {\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make(name, email, /* () */0)).then((function (response) {\n          var match = response.createSchoolAdmin.schoolAdmin;\n          if (match !== undefined) {\n            var schoolAdmin = Caml_option.valFromOption(match);\n            Curry._1(updateCB, SchoolAdmin.create(schoolAdmin.id, name, email, schoolAdmin.avatarUrl));\n            $$Notification.success(\"Success\", \"School Admin created successfully.\");\n          } else {\n            Curry._1(setSaving, (function (param) {\n                    return false;\n                  }));\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction updateSchoolAdminQuery(admin, name, setSaving, updateCB) {\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  var id = SchoolAdmin.id(admin);\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make$1(id, name, /* () */0)).then((function (response) {\n          if (response.updateSchoolAdmin.success) {\n            Curry._1(updateCB, SchoolAdmin.updateName(name, admin));\n            $$Notification.success(\"Success\", \"School Admin updated successfully.\");\n          } else {\n            Curry._1(setSaving, (function (param) {\n                    return false;\n                  }));\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction handleButtonClick(admin, setSaving, name, email, updateCB, $$event) {\n  $$event.preventDefault();\n  if (admin !== undefined) {\n    return updateSchoolAdminQuery(admin, name, setSaving, updateCB);\n  } else {\n    return createSchoolAdminQuery(email, name, setSaving, updateCB);\n  }\n}\n\nfunction isInvalidEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction showInvalidEmailError(email, admin) {\n  if (admin !== undefined || email !== \"\") {\n    return EmailUtils.isInvalid(false, email);\n  } else {\n    return false;\n  }\n}\n\nfunction showInvalidNameError(name, admin) {\n  if (admin !== undefined) {\n    return name === \"\";\n  } else {\n    return false;\n  }\n}\n\nfunction saveDisabled(email, name, saving, admin) {\n  if (EmailUtils.isInvalid(false, email) || saving || name === \"\") {\n    return true;\n  } else if (admin !== undefined) {\n    var admin$1 = admin;\n    if (SchoolAdmin.name(admin$1) === name) {\n      return SchoolAdmin.email(admin$1) === email;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\n\nfunction buttonText(saving, admin) {\n  if (saving) {\n    return \"Saving\";\n  } else if (admin !== undefined) {\n    return \"Update School Admin\";\n  } else {\n    return \"Create School Admin\";\n  }\n}\n\nfunction emailInputDisabled(admin) {\n  return admin !== undefined;\n}\n\nfunction SchoolAdmins__Form(Props) {\n  var admin = Props.admin;\n  var updateCB = Props.updateCB;\n  var match = React.useState((function () {\n          return false;\n        }));\n  var setSaving = match[1];\n  var saving = match[0];\n  var match$1 = React.useState((function () {\n          if (admin !== undefined) {\n            return SchoolAdmin.name(admin);\n          } else {\n            return \"\";\n          }\n        }));\n  var setName = match$1[1];\n  var name = match$1[0];\n  var match$2 = React.useState((function () {\n          if (admin !== undefined) {\n            return SchoolAdmin.email(admin);\n          } else {\n            return \"\";\n          }\n        }));\n  var setEmail = match$2[1];\n  var email = match$2[0];\n  return React.createElement(\"div\", {\n              className: \"w-full\"\n            }, React.createElement(DisablingCover.make, {\n                  disabled: saving,\n                  children: React.createElement(\"div\", {\n                        className: \"mx-auto bg-white\"\n                      }, React.createElement(\"div\", {\n                            className: \"max-w-2xl p-6 mx-auto\"\n                          }, React.createElement(\"h5\", {\n                                className: \"uppercase text-center border-b border-gray-400 pb-2 mb-4\"\n                              }, admin !== undefined ? SchoolAdmin.name(admin) : \"Add new school admin\"), React.createElement(\"div\", undefined, React.createElement(\"label\", {\n                                    className: \"inline-block tracking-wide text-xs font-semibold mb-2 leading-tight\",\n                                    htmlFor: \"email\"\n                                  }, \"Email\"), React.createElement(\"input\", {\n                                    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 leading-snug focus:outline-none focus:bg-white focus:border-gray-500\",\n                                    id: \"email\",\n                                    disabled: emailInputDisabled(admin),\n                                    placeholder: \"Add email here\",\n                                    type: \"email\",\n                                    value: email,\n                                    onChange: (function ($$event) {\n                                        return Curry._1(setEmail, $$event.target.value);\n                                      })\n                                  }), React.createElement(School__InputGroupError.make, {\n                                    message: \"Enter a valid Email\",\n                                    active: showInvalidEmailError(email, admin)\n                                  })), React.createElement(\"div\", {\n                                className: \"mt-5\"\n                              }, React.createElement(\"label\", {\n                                    className: \"inline-block tracking-wide text-xs font-semibold mb-2 leading-tight\",\n                                    htmlFor: \"name\"\n                                  }, \"Name\"), React.createElement(\"input\", {\n                                    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 leading-snug focus:outline-none focus:bg-white focus:border-gray-500\",\n                                    id: \"name\",\n                                    placeholder: \"Add name here\",\n                                    type: \"text\",\n                                    value: name,\n                                    onChange: (function ($$event) {\n                                        return Curry._1(setName, $$event.target.value);\n                                      })\n                                  }), React.createElement(School__InputGroupError.make, {\n                                    message: \"Enter a valid name\",\n                                    active: showInvalidNameError(name, admin)\n                                  })), React.createElement(\"div\", {\n                                className: \"w-auto mt-8\"\n                              }, React.createElement(\"button\", {\n                                    className: \"w-full btn btn-large btn-primary\",\n                                    disabled: saveDisabled(email, name, saving, admin),\n                                    onClick: (function (param) {\n                                        return handleButtonClick(admin, setSaving, name, email, updateCB, param);\n                                      })\n                                  }, buttonText(saving, admin)))))\n                }));\n}\n\nvar make$2 = SchoolAdmins__Form;\n\nexports.str = str;\nexports.CreateSchoolAdminQuery = CreateSchoolAdminQuery;\nexports.UpdateSchoolAdminQuery = UpdateSchoolAdminQuery;\nexports.createSchoolAdminQuery = createSchoolAdminQuery;\nexports.updateSchoolAdminQuery = updateSchoolAdminQuery;\nexports.handleButtonClick = handleButtonClick;\nexports.isInvalidEmail = isInvalidEmail;\nexports.showInvalidEmailError = showInvalidEmailError;\nexports.showInvalidNameError = showInvalidNameError;\nexports.saveDisabled = saveDisabled;\nexports.buttonText = buttonText;\nexports.emailInputDisabled = emailInputDisabled;\nexports.make = make$2;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}