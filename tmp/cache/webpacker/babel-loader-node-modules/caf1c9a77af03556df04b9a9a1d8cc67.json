{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar UrlUtils = require(\"../../../shared/utils/UrlUtils.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar GraphqlErrorHandler = require(\"../../../shared/utils/GraphqlErrorHandler.bs.js\");\n\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\n\nvar SchoolCustomize__Customizations = require(\"../types/SchoolCustomize__Customizations.bs.js\");\n\nrequire(\"./SchoolCustomize__LinksEditor.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleKindChange(send, kind, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send,\n  /* UpdateKind */\n  Block.__(0, [kind]));\n}\n\nfunction isTitleInvalid(title) {\n  return $$String.trim(title).length === 0;\n}\n\nfunction handleTitleChange(send, $$event) {\n  var title = $$event.target.value;\n  return Curry._1(send,\n  /* UpdateTitle */\n  Block.__(1, [title, isTitleInvalid(title)]));\n}\n\nfunction handleUrlChange(send, $$event) {\n  var url = $$event.target.value;\n  return Curry._1(send,\n  /* UpdateUrl */\n  Block.__(2, [url, UrlUtils.isInvalid(false, url)]));\n}\n\nvar ppx_printed_query = \"mutation DestroySchoolLinkMutation($id: ID!)  {\\ndestroySchoolLink(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"destroySchoolLink\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DestroySchoolLinkPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field destroySchoolLink on type Mutation is missing\");\n  }\n\n  return {\n    destroySchoolLink: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar DestroySchoolLinkQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction handleDelete(state, send, removeLinkCB, id, $$event) {\n  $$event.preventDefault();\n\n  if (List.mem(id, state.deleting)) {\n    return (\n      /* () */\n      0\n    );\n  } else {\n    Curry._1(send,\n    /* DisableDelete */\n    Block.__(3, [id]));\n\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(id,\n    /* () */\n    0)).then(function (_response) {\n      Curry._1(removeLinkCB, id);\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction deleteIconClasses(deleting) {\n  if (deleting) {\n    return \"fas fa-spinner fa-pulse\";\n  } else {\n    return \"far fa-trash-alt\";\n  }\n}\n\nfunction showLinks(state, send, removeLinkCB, kind, links) {\n  if (links) {\n    return $$Array.of_list(List.map(function (param) {\n      var url = param[2];\n      var id = param[0];\n      var deleting = List.mem(id, state.deleting);\n      return React.createElement(\"div\", {\n        key: id,\n        className: \"flex items-center justify-between bg-gray-100 text-xs text-gray-900 border rounded pl-3 mt-2\"\n      }, React.createElement(\"div\", {\n        className: \"flex items-center\"\n      }, kind >= 2 ? React.createElement(\"code\", undefined, url) : [React.createElement(\"span\", {\n        key: \"link-editor-entry__title\"\n      }, param[1]), React.createElement(\"i\", {\n        key: \"link-editor-entry__icon\",\n        className: \"fas fa-link mx-2\"\n      }), React.createElement(\"code\", {\n        key: \"link-editor-entry__url\"\n      }, url)]), React.createElement(\"button\", {\n        className: \"p-3\",\n        title: \"Delete \" + url,\n        onClick: function onClick(param) {\n          return handleDelete(state, send, removeLinkCB, id, param);\n        }\n      }, React.createElement(FaIcon.make, {\n        classes: deleting ? \"fas fa-spinner fa-pulse\" : \"far fa-trash-alt\"\n      })));\n    }, links));\n  } else {\n    return React.createElement(\"div\", {\n      className: \"border border-gray-400 rounded italic text-gray-600 text-xs cursor-default mt-2 p-3\"\n    }, \"There are no custom links here. Add some?\");\n  }\n}\n\nfunction titleInputVisible(state) {\n  var match = state.kind;\n  return match < 2;\n}\n\nfunction kindClasses(selected) {\n  return \"nav-tab-item border-t cursor-pointer w-1/3 appearance-none flex justify-center items-center w-full text-sm text-center text-gray-800 bg-white hover:bg-gray-200 hover:text-gray-900 py-3 px-4 font-semibold leading-tight focus:outline-none\" + (selected ? \" nav-tab-item--selected text-primary-500 bg-white hover:bg-white hover:text-primary-500\" : \" text-gray-600\");\n}\n\nfunction addLinkText(adding) {\n  if (adding) {\n    return \"Adding new link...\";\n  } else {\n    return \"Add a New Link\";\n  }\n}\n\nfunction addLinkDisabled(state) {\n  if (state.adding || !state.formDirty) {\n    return true;\n  } else {\n    var match = state.kind;\n\n    if (match >= 2 || !isTitleInvalid(state.title)) {\n      return UrlUtils.isInvalid(false, state.url);\n    } else {\n      return true;\n    }\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation CreateSchoolLinkMutation($kind: String!, $title: String, $url: String!)  {\\ncreateSchoolLink(kind: $kind, title: $title, url: $url)  {\\nschoolLink  {\\nid  \\n}\\n\\nerrors  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createSchoolLink\");\n  var tmp;\n\n  if (match !== undefined) {\n    var match$1 = Js_json.decodeObject(Caml_option.valFromOption(match));\n\n    if (match$1 !== undefined) {\n      var value$2 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_dict.get(value$2, \"schoolLink\");\n\n      if (match$2 !== undefined) {\n        var temp = Caml_option.valFromOption(match$2);\n        var match$3 = Js_json.decodeNull(temp);\n\n        if (match$3 !== undefined) {\n          var match$4 = Js_dict.get(value$2, \"errors\");\n\n          if (match$4 !== undefined) {\n            var temp$1 = Caml_option.valFromOption(match$4);\n            var match$5 = Js_json.decodeNull(temp$1);\n            tmp = match$5 !== undefined ? Js_exn.raiseError(\"graphql_ppx: All fields on variant selection set on type CreateSchoolLinkPayload were null\") :\n            /* `Errors */\n            [100464587, Js_option.getExn(Js_json.decodeArray(temp$1)).map(function (value) {\n              var match = Js_json.decodeString(value);\n\n              if (match !== undefined) {\n                var value$1 = match;\n\n                switch (value$1) {\n                  case \"BlankTitle\":\n                    return (\n                      /* BlankTitle */\n                      117021124\n                    );\n\n                  case \"InvalidKind\":\n                    return (\n                      /* InvalidKind */\n                      323733451\n                    );\n\n                  case \"InvalidLengthTitle\":\n                    return (\n                      /* InvalidLengthTitle */\n                      156718395\n                    );\n\n                  case \"InvalidUrl\":\n                    return (\n                      /* InvalidUrl */\n                      -36568872\n                    );\n\n                  default:\n                    return Js_exn.raiseError(\"graphql_ppx: Unknown enum variant for CreateSchoolLinkError: \" + value$1);\n                }\n              } else {\n                return Js_exn.raiseError(\"graphql_ppx: Expected enum value for CreateSchoolLinkError, got \" + JSON.stringify(value));\n              }\n            })];\n          } else {\n            tmp = Js_exn.raiseError(\"graphql_ppx: Field errors on type CreateSchoolLinkPayload is missing\");\n          }\n        } else {\n          var value$3 = Js_option.getExn(Js_json.decodeObject(temp));\n          var match$6 = Js_dict.get(value$3, \"id\");\n          var tmp$1;\n\n          if (match$6 !== undefined) {\n            var value$4 = Caml_option.valFromOption(match$6);\n            var match$7 = Js_json.decodeString(value$4);\n            tmp$1 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n          } else {\n            tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field id on type SchoolLink is missing\");\n          }\n\n          tmp =\n          /* `SchoolLink */\n          [-214086994, {\n            id: tmp$1\n          }];\n        }\n      } else {\n        tmp = Js_exn.raiseError(\"graphql_ppx: Field schoolLink on type CreateSchoolLinkPayload is missing\");\n      }\n    } else {\n      tmp = Js_exn.raiseError(\"graphql_ppx: Expected type CreateSchoolLinkPayload to be an object\");\n    }\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createSchoolLink on type Mutation is missing\");\n  }\n\n  return {\n    createSchoolLink: tmp\n  };\n}\n\nfunction make$1(kind, title, url, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"kind\", kind],\n    /* tuple */\n    [\"title\", title !== undefined ? title : null],\n    /* tuple */\n    [\"url\", url]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var kind = variables.kind;\n  var title = variables.title;\n  var url = variables.url;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"kind\", kind],\n    /* tuple */\n    [\"title\", title !== undefined ? title : null],\n    /* tuple */\n    [\"url\", url]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(kind, title, url, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"kind\", kind],\n  /* tuple */\n  [\"title\", title !== undefined ? title : null],\n  /* tuple */\n  [\"url\", url]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, kind, title, url, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"kind\", kind],\n  /* tuple */\n  [\"title\", title !== undefined ? title : null],\n  /* tuple */\n  [\"url\", url]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar CreateSchoolLinkQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction displayNewLink(state, addLinkCB, id) {\n  var match = state.kind;\n  var tmp;\n\n  switch (match) {\n    case\n    /* HeaderLink */\n    0:\n      tmp =\n      /* HeaderLink */\n      Block.__(0, [id, state.title, state.url]);\n      break;\n\n    case\n    /* FooterLink */\n    1:\n      tmp =\n      /* FooterLink */\n      Block.__(1, [id, state.title, state.url]);\n      break;\n\n    case\n    /* SocialLink */\n    2:\n      tmp =\n      /* SocialLink */\n      Block.__(2, [id, state.url]);\n      break;\n  }\n\n  return Curry._1(addLinkCB, tmp);\n}\n\nfunction notification(error) {\n  if (error >= 156718395) {\n    if (error >= 323733451) {\n      return (\n        /* tuple */\n        [\"InvalidKind\", \"\"]\n      );\n    } else {\n      return (\n        /* tuple */\n        [\"InvalidLengthTitle\", \"\"]\n      );\n    }\n  } else if (error >= 117021124) {\n    return (\n      /* tuple */\n      [\"BlankTitle\", \"\"]\n    );\n  } else {\n    return (\n      /* tuple */\n      [\"Invalid URL\", \"It looks like the URL you've entered isn't valid. Please check, and try again.\"]\n    );\n  }\n}\n\nvar CreateLinkError = {\n  notification: notification\n};\nvar CreateLinkErrorHandler = GraphqlErrorHandler.Make(CreateLinkError);\n\nfunction handleAddLink(state, send, addLinkCB, $$event) {\n  $$event.preventDefault();\n\n  if (addLinkDisabled(state)) {\n    return (\n      /* () */\n      0\n    );\n  } else {\n    Curry._1(send,\n    /* DisableForm */\n    0);\n\n    var match = state.kind;\n    var tmp;\n\n    switch (match) {\n      case\n      /* HeaderLink */\n      0:\n        tmp = make$1(\"header\", state.title, state.url,\n        /* () */\n        0);\n        break;\n\n      case\n      /* FooterLink */\n      1:\n        tmp = make$1(\"footer\", state.title, state.url,\n        /* () */\n        0);\n        break;\n\n      case\n      /* SocialLink */\n      2:\n        tmp = make$1(\"social\", undefined, state.url,\n        /* () */\n        0);\n        break;\n    }\n\n    Curry._2(CreateLinkErrorHandler.$$catch, function (param) {\n      return Curry._1(send,\n      /* EnableForm */\n      1);\n    }, function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    }(tmp).then(function (response) {\n      var match = response.createSchoolLink;\n\n      if (match[0] >= 100464587) {\n        return Promise.reject([CreateLinkErrorHandler.Errors, match[1]]);\n      } else {\n        displayNewLink(state, addLinkCB, match[1].id);\n\n        Curry._1(send,\n        /* ClearForm */\n        2);\n\n        $$Notification.success(\"Done!\", \"A custom link has been added.\");\n        return Promise.resolve(\n        /* () */\n        0);\n      }\n    }));\n\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction linksTitle(kind) {\n  switch (kind) {\n    case\n    /* HeaderLink */\n    0:\n      return \"Current Header Links\";\n\n    case\n    /* FooterLink */\n    1:\n      return \"Current Sitemap Links\";\n\n    case\n    /* SocialLink */\n    2:\n      return \"Current Social Media Links\";\n  }\n}\n\nfunction unpackLinks(kind, customizations) {\n  var tmp;\n\n  switch (kind) {\n    case\n    /* HeaderLink */\n    0:\n      tmp = SchoolCustomize__Customizations.headerLinks;\n      break;\n\n    case\n    /* FooterLink */\n    1:\n      tmp = SchoolCustomize__Customizations.footerLinks;\n      break;\n\n    case\n    /* SocialLink */\n    2:\n      tmp = SchoolCustomize__Customizations.socialLinks;\n      break;\n  }\n\n  return SchoolCustomize__Customizations.unpackLinks(tmp(customizations));\n}\n\nfunction initialState(kind) {\n  return {\n    kind: kind,\n    title: \"\",\n    url: \"\",\n    titleInvalid: false,\n    urlInvalid: false,\n    formDirty: false,\n    adding: false,\n    deleting:\n    /* [] */\n    0\n  };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* DisableForm */\n      0:\n        return {\n          kind: state.kind,\n          title: state.title,\n          url: state.url,\n          titleInvalid: state.titleInvalid,\n          urlInvalid: state.urlInvalid,\n          formDirty: state.formDirty,\n          adding: true,\n          deleting: state.deleting\n        };\n\n      case\n      /* EnableForm */\n      1:\n        return {\n          kind: state.kind,\n          title: state.title,\n          url: state.url,\n          titleInvalid: state.titleInvalid,\n          urlInvalid: state.urlInvalid,\n          formDirty: state.formDirty,\n          adding: false,\n          deleting: state.deleting\n        };\n\n      case\n      /* ClearForm */\n      2:\n        return {\n          kind: state.kind,\n          title: \"\",\n          url: \"\",\n          titleInvalid: state.titleInvalid,\n          urlInvalid: state.urlInvalid,\n          formDirty: state.formDirty,\n          adding: false,\n          deleting: state.deleting\n        };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* UpdateKind */\n      0:\n        return {\n          kind: action[0],\n          title: state.title,\n          url: state.url,\n          titleInvalid: state.titleInvalid,\n          urlInvalid: state.urlInvalid,\n          formDirty: true,\n          adding: state.adding,\n          deleting: state.deleting\n        };\n\n      case\n      /* UpdateTitle */\n      1:\n        return {\n          kind: state.kind,\n          title: action[0],\n          url: state.url,\n          titleInvalid: action[1],\n          urlInvalid: state.urlInvalid,\n          formDirty: true,\n          adding: state.adding,\n          deleting: state.deleting\n        };\n\n      case\n      /* UpdateUrl */\n      2:\n        return {\n          kind: state.kind,\n          title: state.title,\n          url: action[0],\n          titleInvalid: state.titleInvalid,\n          urlInvalid: action[1],\n          formDirty: true,\n          adding: state.adding,\n          deleting: state.deleting\n        };\n\n      case\n      /* DisableDelete */\n      3:\n        return {\n          kind: state.kind,\n          title: state.title,\n          url: state.url,\n          titleInvalid: state.titleInvalid,\n          urlInvalid: state.urlInvalid,\n          formDirty: state.formDirty,\n          adding: state.adding,\n          deleting:\n          /* :: */\n          [action[0], state.deleting]\n        };\n    }\n  }\n}\n\nfunction SchoolCustomize__LinksEditor(Props) {\n  var kind = Props.kind;\n  var customizations = Props.customizations;\n  var addLinkCB = Props.addLinkCB;\n  var removeLinkCB = Props.removeLinkCB;\n  var match = React.useReducer(reducer, initialState(kind));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n    className: \"mt-8 mx-8 pb-6\"\n  }, React.createElement(\"h5\", {\n    className: \"uppercase text-center border-b border-gray-400 pb-2\"\n  }, \"Manage custom links\"), React.createElement(\"div\", {\n    className: \"mt-3\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\"\n  }, \"Location of Link\"), React.createElement(\"div\", {\n    className: \"flex bg-white border border-t-0 rounded-t mt-2\"\n  }, React.createElement(\"div\", {\n    className: kindClasses(state.kind ===\n    /* HeaderLink */\n    0),\n    title: \"Show header links\",\n    onClick: function onClick(param) {\n      return handleKindChange(send,\n      /* HeaderLink */\n      0, param);\n    }\n  }, \"Header\"), React.createElement(\"div\", {\n    className: kindClasses(state.kind ===\n    /* FooterLink */\n    1) + \" border-l\",\n    title: \"Show footer links\",\n    onClick: function onClick(param) {\n      return handleKindChange(send,\n      /* FooterLink */\n      1, param);\n    }\n  }, \"Footer Sitemap\"), React.createElement(\"div\", {\n    className: kindClasses(state.kind ===\n    /* SocialLink */\n    2) + \" border-l\",\n    title: \"Show social media links\",\n    onClick: function onClick(param) {\n      return handleKindChange(send,\n      /* SocialLink */\n      2, param);\n    }\n  }, \"Social\"))), React.createElement(\"div\", {\n    className: \"p-5 border border-t-0 rounded-b\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold mt-4\"\n  }, linksTitle(state.kind)), showLinks(state, send, removeLinkCB, state.kind, unpackLinks(state.kind, customizations)), React.createElement(DisablingCover.make, {\n    disabled: state.adding,\n    children: null\n  }, React.createElement(\"div\", {\n    key: \"sc-links-editor__form-body\",\n    className: \"flex mt-3\"\n  }, titleInputVisible(state) ? React.createElement(\"div\", {\n    className: \"flex-grow mr-4\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"link-title\"\n  }, \"Title\"), React.createElement(\"input\", {\n    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"link-title\",\n    maxLength: 24,\n    placeholder: \"A short title for a new link\",\n    type: \"text\",\n    value: state.title,\n    onChange: function onChange(param) {\n      return handleTitleChange(send, param);\n    }\n  }), React.createElement(School__InputGroupError.make, {\n    message: \"can't be empty\",\n    active: state.titleInvalid\n  })) : null, React.createElement(\"div\", {\n    className: \"flex-grow\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"link-full-url\"\n  }, \"Full URL\"), React.createElement(\"input\", {\n    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"link-full-url\",\n    placeholder: \"Full URL, staring with https://\",\n    type: \"text\",\n    value: state.url,\n    onChange: function onChange(param) {\n      return handleUrlChange(send, param);\n    }\n  }), React.createElement(School__InputGroupError.make, {\n    message: \"is not a valid URL\",\n    active: state.urlInvalid\n  }))), React.createElement(\"div\", {\n    className: \"flex justify-end\"\n  }, React.createElement(\"button\", {\n    key: \"sc-links-editor__form-button\",\n    className: \"btn btn-primary btn-large mt-6\",\n    disabled: addLinkDisabled(state),\n    onClick: function onClick(param) {\n      return handleAddLink(state, send, addLinkCB, param);\n    }\n  }, state.adding ? \"Adding new link...\" : \"Add a New Link\")))));\n}\n\nvar make$2 = SchoolCustomize__LinksEditor;\nexports.str = str;\nexports.handleKindChange = handleKindChange;\nexports.isTitleInvalid = isTitleInvalid;\nexports.handleTitleChange = handleTitleChange;\nexports.handleUrlChange = handleUrlChange;\nexports.DestroySchoolLinkQuery = DestroySchoolLinkQuery;\nexports.handleDelete = handleDelete;\nexports.deleteIconClasses = deleteIconClasses;\nexports.showLinks = showLinks;\nexports.titleInputVisible = titleInputVisible;\nexports.kindClasses = kindClasses;\nexports.addLinkText = addLinkText;\nexports.addLinkDisabled = addLinkDisabled;\nexports.CreateSchoolLinkQuery = CreateSchoolLinkQuery;\nexports.displayNewLink = displayNewLink;\nexports.CreateLinkError = CreateLinkError;\nexports.CreateLinkErrorHandler = CreateLinkErrorHandler;\nexports.handleAddLink = handleAddLink;\nexports.linksTitle = linksTitle;\nexports.unpackLinks = unpackLinks;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.make = make$2;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/settings/components/SchoolCustomize__LinksEditor.bs.js"],"names":["List","require","$$Array","Block","Curry","React","FaIcon","Js_exn","$$String","Js_dict","Js_json","UrlUtils","Js_option","Caml_option","GraphqlQuery","$$Notification","DisablingCover","GraphqlErrorHandler","School__InputGroupError","SchoolCustomize__Customizations","str","prim","handleKindChange","send","kind","$$event","preventDefault","_1","__","isTitleInvalid","title","trim","length","handleTitleChange","target","value","handleUrlChange","url","isInvalid","ppx_printed_query","parse","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","destroySchoolLink","make","id","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","definition","ret_type","f","MT_Ret","DestroySchoolLinkQuery","handleDelete","state","removeLinkCB","mem","deleting","eta","sendQuery","then","_response","Promise","resolve","deleteIconClasses","showLinks","links","of_list","map","createElement","key","className","onClick","classes","titleInputVisible","kindClasses","selected","addLinkText","adding","addLinkDisabled","formDirty","ppx_printed_query$1","parse$1","temp","match$3","decodeNull","match$4","temp$1","match$5","decodeArray","decodeString","match$6","value$4","match$7","createSchoolLink","make$1","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","CreateSchoolLinkQuery","displayNewLink","addLinkCB","notification","error","CreateLinkError","CreateLinkErrorHandler","Make","handleAddLink","_2","$$catch","response","reject","Errors","linksTitle","unpackLinks","customizations","headerLinks","footerLinks","socialLinks","initialState","titleInvalid","urlInvalid","reducer","action","tag","SchoolCustomize__LinksEditor","Props","useReducer","disabled","children","htmlFor","maxLength","placeholder","type","onChange","message","active","make$2","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar UrlUtils = require(\"../../../shared/utils/UrlUtils.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar GraphqlErrorHandler = require(\"../../../shared/utils/GraphqlErrorHandler.bs.js\");\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\nvar SchoolCustomize__Customizations = require(\"../types/SchoolCustomize__Customizations.bs.js\");\n\n((require(\"./SchoolCustomize__LinksEditor.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleKindChange(send, kind, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send, /* UpdateKind */Block.__(0, [kind]));\n}\n\nfunction isTitleInvalid(title) {\n  return $$String.trim(title).length === 0;\n}\n\nfunction handleTitleChange(send, $$event) {\n  var title = $$event.target.value;\n  return Curry._1(send, /* UpdateTitle */Block.__(1, [\n                title,\n                isTitleInvalid(title)\n              ]));\n}\n\nfunction handleUrlChange(send, $$event) {\n  var url = $$event.target.value;\n  return Curry._1(send, /* UpdateUrl */Block.__(2, [\n                url,\n                UrlUtils.isInvalid(false, url)\n              ]));\n}\n\nvar ppx_printed_query = \"mutation DestroySchoolLinkMutation($id: ID!)  {\\ndestroySchoolLink(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"destroySchoolLink\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DestroySchoolLinkPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field destroySchoolLink on type Mutation is missing\");\n  }\n  return {\n          destroySchoolLink: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar DestroySchoolLinkQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction handleDelete(state, send, removeLinkCB, id, $$event) {\n  $$event.preventDefault();\n  if (List.mem(id, state.deleting)) {\n    return /* () */0;\n  } else {\n    Curry._1(send, /* DisableDelete */Block.__(3, [id]));\n    (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(id, /* () */0)).then((function (_response) {\n            Curry._1(removeLinkCB, id);\n            return Promise.resolve(/* () */0);\n          }));\n    return /* () */0;\n  }\n}\n\nfunction deleteIconClasses(deleting) {\n  if (deleting) {\n    return \"fas fa-spinner fa-pulse\";\n  } else {\n    return \"far fa-trash-alt\";\n  }\n}\n\nfunction showLinks(state, send, removeLinkCB, kind, links) {\n  if (links) {\n    return $$Array.of_list(List.map((function (param) {\n                      var url = param[2];\n                      var id = param[0];\n                      var deleting = List.mem(id, state.deleting);\n                      return React.createElement(\"div\", {\n                                  key: id,\n                                  className: \"flex items-center justify-between bg-gray-100 text-xs text-gray-900 border rounded pl-3 mt-2\"\n                                }, React.createElement(\"div\", {\n                                      className: \"flex items-center\"\n                                    }, kind >= 2 ? React.createElement(\"code\", undefined, url) : [\n                                        React.createElement(\"span\", {\n                                              key: \"link-editor-entry__title\"\n                                            }, param[1]),\n                                        React.createElement(\"i\", {\n                                              key: \"link-editor-entry__icon\",\n                                              className: \"fas fa-link mx-2\"\n                                            }),\n                                        React.createElement(\"code\", {\n                                              key: \"link-editor-entry__url\"\n                                            }, url)\n                                      ]), React.createElement(\"button\", {\n                                      className: \"p-3\",\n                                      title: \"Delete \" + url,\n                                      onClick: (function (param) {\n                                          return handleDelete(state, send, removeLinkCB, id, param);\n                                        })\n                                    }, React.createElement(FaIcon.make, {\n                                          classes: deleting ? \"fas fa-spinner fa-pulse\" : \"far fa-trash-alt\"\n                                        })));\n                    }), links));\n  } else {\n    return React.createElement(\"div\", {\n                className: \"border border-gray-400 rounded italic text-gray-600 text-xs cursor-default mt-2 p-3\"\n              }, \"There are no custom links here. Add some?\");\n  }\n}\n\nfunction titleInputVisible(state) {\n  var match = state.kind;\n  return match < 2;\n}\n\nfunction kindClasses(selected) {\n  return \"nav-tab-item border-t cursor-pointer w-1/3 appearance-none flex justify-center items-center w-full text-sm text-center text-gray-800 bg-white hover:bg-gray-200 hover:text-gray-900 py-3 px-4 font-semibold leading-tight focus:outline-none\" + (\n          selected ? \" nav-tab-item--selected text-primary-500 bg-white hover:bg-white hover:text-primary-500\" : \" text-gray-600\"\n        );\n}\n\nfunction addLinkText(adding) {\n  if (adding) {\n    return \"Adding new link...\";\n  } else {\n    return \"Add a New Link\";\n  }\n}\n\nfunction addLinkDisabled(state) {\n  if (state.adding || !state.formDirty) {\n    return true;\n  } else {\n    var match = state.kind;\n    if (match >= 2 || !isTitleInvalid(state.title)) {\n      return UrlUtils.isInvalid(false, state.url);\n    } else {\n      return true;\n    }\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation CreateSchoolLinkMutation($kind: String!, $title: String, $url: String!)  {\\ncreateSchoolLink(kind: $kind, title: $title, url: $url)  {\\nschoolLink  {\\nid  \\n}\\n\\nerrors  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createSchoolLink\");\n  var tmp;\n  if (match !== undefined) {\n    var match$1 = Js_json.decodeObject(Caml_option.valFromOption(match));\n    if (match$1 !== undefined) {\n      var value$2 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_dict.get(value$2, \"schoolLink\");\n      if (match$2 !== undefined) {\n        var temp = Caml_option.valFromOption(match$2);\n        var match$3 = Js_json.decodeNull(temp);\n        if (match$3 !== undefined) {\n          var match$4 = Js_dict.get(value$2, \"errors\");\n          if (match$4 !== undefined) {\n            var temp$1 = Caml_option.valFromOption(match$4);\n            var match$5 = Js_json.decodeNull(temp$1);\n            tmp = match$5 !== undefined ? Js_exn.raiseError(\"graphql_ppx: All fields on variant selection set on type CreateSchoolLinkPayload were null\") : /* `Errors */[\n                100464587,\n                Js_option.getExn(Js_json.decodeArray(temp$1)).map((function (value) {\n                        var match = Js_json.decodeString(value);\n                        if (match !== undefined) {\n                          var value$1 = match;\n                          switch (value$1) {\n                            case \"BlankTitle\" :\n                                return /* BlankTitle */117021124;\n                            case \"InvalidKind\" :\n                                return /* InvalidKind */323733451;\n                            case \"InvalidLengthTitle\" :\n                                return /* InvalidLengthTitle */156718395;\n                            case \"InvalidUrl\" :\n                                return /* InvalidUrl */-36568872;\n                            default:\n                              return Js_exn.raiseError(\"graphql_ppx: Unknown enum variant for CreateSchoolLinkError: \" + value$1);\n                          }\n                        } else {\n                          return Js_exn.raiseError(\"graphql_ppx: Expected enum value for CreateSchoolLinkError, got \" + JSON.stringify(value));\n                        }\n                      }))\n              ];\n          } else {\n            tmp = Js_exn.raiseError(\"graphql_ppx: Field errors on type CreateSchoolLinkPayload is missing\");\n          }\n        } else {\n          var value$3 = Js_option.getExn(Js_json.decodeObject(temp));\n          var match$6 = Js_dict.get(value$3, \"id\");\n          var tmp$1;\n          if (match$6 !== undefined) {\n            var value$4 = Caml_option.valFromOption(match$6);\n            var match$7 = Js_json.decodeString(value$4);\n            tmp$1 = match$7 !== undefined ? match$7 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n          } else {\n            tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field id on type SchoolLink is missing\");\n          }\n          tmp = /* `SchoolLink */[\n            -214086994,\n            {\n              id: tmp$1\n            }\n          ];\n        }\n      } else {\n        tmp = Js_exn.raiseError(\"graphql_ppx: Field schoolLink on type CreateSchoolLinkPayload is missing\");\n      }\n    } else {\n      tmp = Js_exn.raiseError(\"graphql_ppx: Expected type CreateSchoolLinkPayload to be an object\");\n    }\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createSchoolLink on type Mutation is missing\");\n  }\n  return {\n          createSchoolLink: tmp\n        };\n}\n\nfunction make$1(kind, title, url, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"kind\",\n                    kind\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title !== undefined ? title : null\n                  ],\n                  /* tuple */[\n                    \"url\",\n                    url\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var kind = variables.kind;\n  var title = variables.title;\n  var url = variables.url;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"kind\",\n                    kind\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title !== undefined ? title : null\n                  ],\n                  /* tuple */[\n                    \"url\",\n                    url\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(kind, title, url, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"kind\",\n                  kind\n                ],\n                /* tuple */[\n                  \"title\",\n                  title !== undefined ? title : null\n                ],\n                /* tuple */[\n                  \"url\",\n                  url\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, kind, title, url, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"kind\",\n                      kind\n                    ],\n                    /* tuple */[\n                      \"title\",\n                      title !== undefined ? title : null\n                    ],\n                    /* tuple */[\n                      \"url\",\n                      url\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar CreateSchoolLinkQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction displayNewLink(state, addLinkCB, id) {\n  var match = state.kind;\n  var tmp;\n  switch (match) {\n    case /* HeaderLink */0 :\n        tmp = /* HeaderLink */Block.__(0, [\n            id,\n            state.title,\n            state.url\n          ]);\n        break;\n    case /* FooterLink */1 :\n        tmp = /* FooterLink */Block.__(1, [\n            id,\n            state.title,\n            state.url\n          ]);\n        break;\n    case /* SocialLink */2 :\n        tmp = /* SocialLink */Block.__(2, [\n            id,\n            state.url\n          ]);\n        break;\n    \n  }\n  return Curry._1(addLinkCB, tmp);\n}\n\nfunction notification(error) {\n  if (error >= 156718395) {\n    if (error >= 323733451) {\n      return /* tuple */[\n              \"InvalidKind\",\n              \"\"\n            ];\n    } else {\n      return /* tuple */[\n              \"InvalidLengthTitle\",\n              \"\"\n            ];\n    }\n  } else if (error >= 117021124) {\n    return /* tuple */[\n            \"BlankTitle\",\n            \"\"\n          ];\n  } else {\n    return /* tuple */[\n            \"Invalid URL\",\n            \"It looks like the URL you've entered isn't valid. Please check, and try again.\"\n          ];\n  }\n}\n\nvar CreateLinkError = {\n  notification: notification\n};\n\nvar CreateLinkErrorHandler = GraphqlErrorHandler.Make(CreateLinkError);\n\nfunction handleAddLink(state, send, addLinkCB, $$event) {\n  $$event.preventDefault();\n  if (addLinkDisabled(state)) {\n    return /* () */0;\n  } else {\n    Curry._1(send, /* DisableForm */0);\n    var match = state.kind;\n    var tmp;\n    switch (match) {\n      case /* HeaderLink */0 :\n          tmp = make$1(\"header\", state.title, state.url, /* () */0);\n          break;\n      case /* FooterLink */1 :\n          tmp = make$1(\"footer\", state.title, state.url, /* () */0);\n          break;\n      case /* SocialLink */2 :\n          tmp = make$1(\"social\", undefined, state.url, /* () */0);\n          break;\n      \n    }\n    Curry._2(CreateLinkErrorHandler.$$catch, (function (param) {\n            return Curry._1(send, /* EnableForm */1);\n          }), (function (eta) {\n                return GraphqlQuery.sendQuery(undefined, eta);\n              })(tmp).then((function (response) {\n                var match = response.createSchoolLink;\n                if (match[0] >= 100464587) {\n                  return Promise.reject([\n                              CreateLinkErrorHandler.Errors,\n                              match[1]\n                            ]);\n                } else {\n                  displayNewLink(state, addLinkCB, match[1].id);\n                  Curry._1(send, /* ClearForm */2);\n                  $$Notification.success(\"Done!\", \"A custom link has been added.\");\n                  return Promise.resolve(/* () */0);\n                }\n              })));\n    return /* () */0;\n  }\n}\n\nfunction linksTitle(kind) {\n  switch (kind) {\n    case /* HeaderLink */0 :\n        return \"Current Header Links\";\n    case /* FooterLink */1 :\n        return \"Current Sitemap Links\";\n    case /* SocialLink */2 :\n        return \"Current Social Media Links\";\n    \n  }\n}\n\nfunction unpackLinks(kind, customizations) {\n  var tmp;\n  switch (kind) {\n    case /* HeaderLink */0 :\n        tmp = SchoolCustomize__Customizations.headerLinks;\n        break;\n    case /* FooterLink */1 :\n        tmp = SchoolCustomize__Customizations.footerLinks;\n        break;\n    case /* SocialLink */2 :\n        tmp = SchoolCustomize__Customizations.socialLinks;\n        break;\n    \n  }\n  return SchoolCustomize__Customizations.unpackLinks(tmp(customizations));\n}\n\nfunction initialState(kind) {\n  return {\n          kind: kind,\n          title: \"\",\n          url: \"\",\n          titleInvalid: false,\n          urlInvalid: false,\n          formDirty: false,\n          adding: false,\n          deleting: /* [] */0\n        };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* DisableForm */0 :\n          return {\n                  kind: state.kind,\n                  title: state.title,\n                  url: state.url,\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: state.urlInvalid,\n                  formDirty: state.formDirty,\n                  adding: true,\n                  deleting: state.deleting\n                };\n      case /* EnableForm */1 :\n          return {\n                  kind: state.kind,\n                  title: state.title,\n                  url: state.url,\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: state.urlInvalid,\n                  formDirty: state.formDirty,\n                  adding: false,\n                  deleting: state.deleting\n                };\n      case /* ClearForm */2 :\n          return {\n                  kind: state.kind,\n                  title: \"\",\n                  url: \"\",\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: state.urlInvalid,\n                  formDirty: state.formDirty,\n                  adding: false,\n                  deleting: state.deleting\n                };\n      \n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* UpdateKind */0 :\n          return {\n                  kind: action[0],\n                  title: state.title,\n                  url: state.url,\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: state.urlInvalid,\n                  formDirty: true,\n                  adding: state.adding,\n                  deleting: state.deleting\n                };\n      case /* UpdateTitle */1 :\n          return {\n                  kind: state.kind,\n                  title: action[0],\n                  url: state.url,\n                  titleInvalid: action[1],\n                  urlInvalid: state.urlInvalid,\n                  formDirty: true,\n                  adding: state.adding,\n                  deleting: state.deleting\n                };\n      case /* UpdateUrl */2 :\n          return {\n                  kind: state.kind,\n                  title: state.title,\n                  url: action[0],\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: action[1],\n                  formDirty: true,\n                  adding: state.adding,\n                  deleting: state.deleting\n                };\n      case /* DisableDelete */3 :\n          return {\n                  kind: state.kind,\n                  title: state.title,\n                  url: state.url,\n                  titleInvalid: state.titleInvalid,\n                  urlInvalid: state.urlInvalid,\n                  formDirty: state.formDirty,\n                  adding: state.adding,\n                  deleting: /* :: */[\n                    action[0],\n                    state.deleting\n                  ]\n                };\n      \n    }\n  }\n}\n\nfunction SchoolCustomize__LinksEditor(Props) {\n  var kind = Props.kind;\n  var customizations = Props.customizations;\n  var addLinkCB = Props.addLinkCB;\n  var removeLinkCB = Props.removeLinkCB;\n  var match = React.useReducer(reducer, initialState(kind));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n              className: \"mt-8 mx-8 pb-6\"\n            }, React.createElement(\"h5\", {\n                  className: \"uppercase text-center border-b border-gray-400 pb-2\"\n                }, \"Manage custom links\"), React.createElement(\"div\", {\n                  className: \"mt-3\"\n                }, React.createElement(\"label\", {\n                      className: \"inline-block tracking-wide text-xs font-semibold\"\n                    }, \"Location of Link\"), React.createElement(\"div\", {\n                      className: \"flex bg-white border border-t-0 rounded-t mt-2\"\n                    }, React.createElement(\"div\", {\n                          className: kindClasses(state.kind === /* HeaderLink */0),\n                          title: \"Show header links\",\n                          onClick: (function (param) {\n                              return handleKindChange(send, /* HeaderLink */0, param);\n                            })\n                        }, \"Header\"), React.createElement(\"div\", {\n                          className: kindClasses(state.kind === /* FooterLink */1) + \" border-l\",\n                          title: \"Show footer links\",\n                          onClick: (function (param) {\n                              return handleKindChange(send, /* FooterLink */1, param);\n                            })\n                        }, \"Footer Sitemap\"), React.createElement(\"div\", {\n                          className: kindClasses(state.kind === /* SocialLink */2) + \" border-l\",\n                          title: \"Show social media links\",\n                          onClick: (function (param) {\n                              return handleKindChange(send, /* SocialLink */2, param);\n                            })\n                        }, \"Social\"))), React.createElement(\"div\", {\n                  className: \"p-5 border border-t-0 rounded-b\"\n                }, React.createElement(\"label\", {\n                      className: \"inline-block tracking-wide text-xs font-semibold mt-4\"\n                    }, linksTitle(state.kind)), showLinks(state, send, removeLinkCB, state.kind, unpackLinks(state.kind, customizations)), React.createElement(DisablingCover.make, {\n                      disabled: state.adding,\n                      children: null\n                    }, React.createElement(\"div\", {\n                          key: \"sc-links-editor__form-body\",\n                          className: \"flex mt-3\"\n                        }, titleInputVisible(state) ? React.createElement(\"div\", {\n                                className: \"flex-grow mr-4\"\n                              }, React.createElement(\"label\", {\n                                    className: \"inline-block tracking-wide text-xs font-semibold\",\n                                    htmlFor: \"link-title\"\n                                  }, \"Title\"), React.createElement(\"input\", {\n                                    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n                                    id: \"link-title\",\n                                    maxLength: 24,\n                                    placeholder: \"A short title for a new link\",\n                                    type: \"text\",\n                                    value: state.title,\n                                    onChange: (function (param) {\n                                        return handleTitleChange(send, param);\n                                      })\n                                  }), React.createElement(School__InputGroupError.make, {\n                                    message: \"can't be empty\",\n                                    active: state.titleInvalid\n                                  })) : null, React.createElement(\"div\", {\n                              className: \"flex-grow\"\n                            }, React.createElement(\"label\", {\n                                  className: \"inline-block tracking-wide text-xs font-semibold\",\n                                  htmlFor: \"link-full-url\"\n                                }, \"Full URL\"), React.createElement(\"input\", {\n                                  className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n                                  id: \"link-full-url\",\n                                  placeholder: \"Full URL, staring with https://\",\n                                  type: \"text\",\n                                  value: state.url,\n                                  onChange: (function (param) {\n                                      return handleUrlChange(send, param);\n                                    })\n                                }), React.createElement(School__InputGroupError.make, {\n                                  message: \"is not a valid URL\",\n                                  active: state.urlInvalid\n                                }))), React.createElement(\"div\", {\n                          className: \"flex justify-end\"\n                        }, React.createElement(\"button\", {\n                              key: \"sc-links-editor__form-button\",\n                              className: \"btn btn-primary btn-large mt-6\",\n                              disabled: addLinkDisabled(state),\n                              onClick: (function (param) {\n                                  return handleAddLink(state, send, addLinkCB, param);\n                                })\n                            }, state.adding ? \"Adding new link...\" : \"Add a New Link\")))));\n}\n\nvar make$2 = SchoolCustomize__LinksEditor;\n\nexports.str = str;\nexports.handleKindChange = handleKindChange;\nexports.isTitleInvalid = isTitleInvalid;\nexports.handleTitleChange = handleTitleChange;\nexports.handleUrlChange = handleUrlChange;\nexports.DestroySchoolLinkQuery = DestroySchoolLinkQuery;\nexports.handleDelete = handleDelete;\nexports.deleteIconClasses = deleteIconClasses;\nexports.showLinks = showLinks;\nexports.titleInputVisible = titleInputVisible;\nexports.kindClasses = kindClasses;\nexports.addLinkText = addLinkText;\nexports.addLinkDisabled = addLinkDisabled;\nexports.CreateSchoolLinkQuery = CreateSchoolLinkQuery;\nexports.displayNewLink = displayNewLink;\nexports.CreateLinkError = CreateLinkError;\nexports.CreateLinkErrorHandler = CreateLinkErrorHandler;\nexports.handleAddLink = handleAddLink;\nexports.linksTitle = linksTitle;\nexports.unpackLinks = unpackLinks;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.make = make$2;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}