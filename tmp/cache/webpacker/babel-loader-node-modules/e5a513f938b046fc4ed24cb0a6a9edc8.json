{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Checkbox = require(\"../../../shared/components/Checkbox.bs.js\");\n\nvar DateTime = require(\"../../../shared/utils/DateTime.bs.js\");\n\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\n\nvar CoursesReview__ReviewChecklistItem = require(\"../types/CoursesReview__ReviewChecklistItem.bs.js\");\n\nvar CoursesReview__ChecklistShowFeedback = require(\"./CoursesReview__ChecklistShowFeedback.bs.js\");\n\nvar CoursesReview__ReviewChecklistResult = require(\"../types/CoursesReview__ReviewChecklistResult.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction selectChecklist(itemIndex, resultIndex, setSelecton) {\n  return Curry._1(setSelecton, function (selection) {\n    return List.append(\n    /* :: */\n    [{\n      itemIndex: itemIndex,\n      resultIndex: resultIndex\n    },\n    /* [] */\n    0], selection);\n  });\n}\n\nfunction unSelectChecklist(itemIndex, resultIndex, setSelecton) {\n  return Curry._1(setSelecton, function (selection) {\n    return List.filter(function (item) {\n      return !(item.itemIndex === itemIndex && item.resultIndex === resultIndex);\n    })(selection);\n  });\n}\n\nfunction checkboxOnChange(itemIndex, resultIndex, setSelecton, $$event) {\n  if ($$event.target.checked) {\n    return selectChecklist(itemIndex, resultIndex, setSelecton);\n  } else {\n    return unSelectChecklist(itemIndex, resultIndex, setSelecton);\n  }\n}\n\nfunction generateFeedback(reviewChecklist, selection, feedback, updateFeedbackCB) {\n  return Curry._1(updateFeedbackCB, feedback + (\"\\n\\n\" + $$Array.of_list(List.flatten($$Array.to_list($$Array.mapi(function (i, reviewChecklistItem) {\n    var resultIndexList = List.map(function (item) {\n      return item.resultIndex;\n    }, List.filter(function (selectionItem) {\n      return selectionItem.itemIndex === i;\n    })(selection));\n    return List.flatten($$Array.to_list($$Array.mapi(function (index, resultItem) {\n      if (List.mem(index, resultIndexList)) {\n        var match = CoursesReview__ReviewChecklistResult.feedback(resultItem);\n\n        if (match !== undefined) {\n          return (\n            /* :: */\n            [match,\n            /* [] */\n            0]\n          );\n        } else {\n          return (\n            /* [] */\n            0\n          );\n        }\n      } else {\n        return (\n          /* [] */\n          0\n        );\n      }\n    }, CoursesReview__ReviewChecklistItem.result(reviewChecklistItem))));\n  }, reviewChecklist)))).join(\"\\n\\n\")));\n}\n\nfunction checklistItemCheckedClasses(itemIndex, selection) {\n  return \"mb-4 px-2 pb-2 md:px-4 border-l-2 border-transparent \" + (ListUtils.isNotEmpty(List.filter(function (s) {\n    return s.itemIndex === itemIndex;\n  })(selection)) ? \"border-green-400\" : \"\");\n}\n\nfunction checklistItemChecked(itemIndex, resultIndex, selection) {\n  return ListUtils.isNotEmpty(List.filter(function (s) {\n    if (s.itemIndex === itemIndex) {\n      return s.resultIndex === resultIndex;\n    } else {\n      return false;\n    }\n  })(selection));\n}\n\nfunction CoursesReview__ChecklistShow(Props) {\n  var reviewChecklist = Props.reviewChecklist;\n  var feedback = Props.feedback;\n  var updateFeedbackCB = Props.updateFeedbackCB;\n  var showEditorCB = Props.showEditorCB;\n  var match = React.useState(function () {\n    return (\n      /* [] */\n      0\n    );\n  });\n  var setSelecton = match[1];\n  var selection = match[0];\n  var match$1 = React.useState(function () {\n    return DateTime.randomId(\n    /* () */\n    0) + \"-review-checkbox-\";\n  });\n  var id = match$1[0];\n  return React.createElement(\"div\", {\n    className: \"relative border bg-gray-100 rounded-lg py-2 md:py-4\"\n  }, React.createElement(\"div\", {\n    className: \"absolute right-0 top-0 -mt-9\"\n  }, React.createElement(\"button\", {\n    className: \"flex items-center btn btn-small btn-primary-ghost\",\n    onClick: function onClick(param) {\n      return Curry._1(showEditorCB,\n      /* () */\n      0);\n    }\n  }, React.createElement(\"i\", {\n    className: \"far fa-edit\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2 leading-tight\"\n  }, \"Edit Checklist\"))), $$Array.mapi(function (itemIndex, reviewChecklistItem) {\n    return React.createElement(\"div\", {\n      key: String(itemIndex),\n      \"aria-label\": \"checklist-item-\" + String(itemIndex),\n      className: checklistItemCheckedClasses(itemIndex, selection)\n    }, React.createElement(\"h4\", {\n      className: \"text-base font-semibold mt-2 md:mt-0 w-full md:w-4/5\"\n    }, CoursesReview__ReviewChecklistItem.title(reviewChecklistItem)), React.createElement(\"div\", undefined, $$Array.mapi(function (resultIndex, checklistItem) {\n      return React.createElement(\"div\", {\n        key: String(itemIndex) + String(resultIndex),\n        \"aria-label\": \"result-item-\" + String(resultIndex),\n        className: \"px-2 md:px-4 mt-2\"\n      }, React.createElement(Checkbox.make, {\n        id: id + (String(itemIndex) + String(resultIndex)),\n        label: CoursesReview__ReviewChecklistResult.title(checklistItem),\n        onChange: function onChange(param) {\n          return checkboxOnChange(itemIndex, resultIndex, setSelecton, param);\n        },\n        checked: checklistItemChecked(itemIndex, resultIndex, selection)\n      }), React.createElement(\"div\", {\n        className: \"pl-7\"\n      }, React.createElement(CoursesReview__ChecklistShowFeedback.make, {\n        feedback: CoursesReview__ReviewChecklistResult.feedback(checklistItem)\n      })));\n    }, CoursesReview__ReviewChecklistItem.result(reviewChecklistItem))));\n  }, reviewChecklist), React.createElement(\"div\", {\n    className: \"text-center max-w-xs mx-2 md:mx-auto\"\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary btn-large w-full \",\n    disabled: ListUtils.isEmpty(selection),\n    onClick: function onClick(param) {\n      return generateFeedback(reviewChecklist, selection, feedback, updateFeedbackCB);\n    }\n  }, \"Generate Feedback\")));\n}\n\nvar make = CoursesReview__ChecklistShow;\nexports.str = str;\nexports.selectChecklist = selectChecklist;\nexports.unSelectChecklist = unSelectChecklist;\nexports.checkboxOnChange = checkboxOnChange;\nexports.generateFeedback = generateFeedback;\nexports.checklistItemCheckedClasses = checklistItemCheckedClasses;\nexports.checklistItemChecked = checklistItemChecked;\nexports.make = make;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/review/components/CoursesReview__ChecklistShow.bs.js"],"names":["List","require","$$Array","Curry","React","Checkbox","DateTime","ListUtils","CoursesReview__ReviewChecklistItem","CoursesReview__ChecklistShowFeedback","CoursesReview__ReviewChecklistResult","str","prim","selectChecklist","itemIndex","resultIndex","setSelecton","_1","selection","append","unSelectChecklist","filter","item","checkboxOnChange","$$event","target","checked","generateFeedback","reviewChecklist","feedback","updateFeedbackCB","of_list","flatten","to_list","mapi","i","reviewChecklistItem","resultIndexList","map","selectionItem","index","resultItem","mem","match","undefined","result","join","checklistItemCheckedClasses","isNotEmpty","s","checklistItemChecked","CoursesReview__ChecklistShow","Props","showEditorCB","useState","match$1","randomId","id","createElement","className","onClick","param","key","String","title","checklistItem","make","label","onChange","disabled","isEmpty","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Checkbox = require(\"../../../shared/components/Checkbox.bs.js\");\nvar DateTime = require(\"../../../shared/utils/DateTime.bs.js\");\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\nvar CoursesReview__ReviewChecklistItem = require(\"../types/CoursesReview__ReviewChecklistItem.bs.js\");\nvar CoursesReview__ChecklistShowFeedback = require(\"./CoursesReview__ChecklistShowFeedback.bs.js\");\nvar CoursesReview__ReviewChecklistResult = require(\"../types/CoursesReview__ReviewChecklistResult.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction selectChecklist(itemIndex, resultIndex, setSelecton) {\n  return Curry._1(setSelecton, (function (selection) {\n                return List.append(/* :: */[\n                            {\n                              itemIndex: itemIndex,\n                              resultIndex: resultIndex\n                            },\n                            /* [] */0\n                          ], selection);\n              }));\n}\n\nfunction unSelectChecklist(itemIndex, resultIndex, setSelecton) {\n  return Curry._1(setSelecton, (function (selection) {\n                return List.filter((function (item) {\n                                return !(item.itemIndex === itemIndex && item.resultIndex === resultIndex);\n                              }))(selection);\n              }));\n}\n\nfunction checkboxOnChange(itemIndex, resultIndex, setSelecton, $$event) {\n  if ($$event.target.checked) {\n    return selectChecklist(itemIndex, resultIndex, setSelecton);\n  } else {\n    return unSelectChecklist(itemIndex, resultIndex, setSelecton);\n  }\n}\n\nfunction generateFeedback(reviewChecklist, selection, feedback, updateFeedbackCB) {\n  return Curry._1(updateFeedbackCB, feedback + (\"\\n\\n\" + $$Array.of_list(List.flatten($$Array.to_list($$Array.mapi((function (i, reviewChecklistItem) {\n                                    var resultIndexList = List.map((function (item) {\n                                            return item.resultIndex;\n                                          }), List.filter((function (selectionItem) {\n                                                  return selectionItem.itemIndex === i;\n                                                }))(selection));\n                                    return List.flatten($$Array.to_list($$Array.mapi((function (index, resultItem) {\n                                                          if (List.mem(index, resultIndexList)) {\n                                                            var match = CoursesReview__ReviewChecklistResult.feedback(resultItem);\n                                                            if (match !== undefined) {\n                                                              return /* :: */[\n                                                                      match,\n                                                                      /* [] */0\n                                                                    ];\n                                                            } else {\n                                                              return /* [] */0;\n                                                            }\n                                                          } else {\n                                                            return /* [] */0;\n                                                          }\n                                                        }), CoursesReview__ReviewChecklistItem.result(reviewChecklistItem))));\n                                  }), reviewChecklist)))).join(\"\\n\\n\")));\n}\n\nfunction checklistItemCheckedClasses(itemIndex, selection) {\n  return \"mb-4 px-2 pb-2 md:px-4 border-l-2 border-transparent \" + (\n          ListUtils.isNotEmpty(List.filter((function (s) {\n                        return s.itemIndex === itemIndex;\n                      }))(selection)) ? \"border-green-400\" : \"\"\n        );\n}\n\nfunction checklistItemChecked(itemIndex, resultIndex, selection) {\n  return ListUtils.isNotEmpty(List.filter((function (s) {\n                      if (s.itemIndex === itemIndex) {\n                        return s.resultIndex === resultIndex;\n                      } else {\n                        return false;\n                      }\n                    }))(selection));\n}\n\nfunction CoursesReview__ChecklistShow(Props) {\n  var reviewChecklist = Props.reviewChecklist;\n  var feedback = Props.feedback;\n  var updateFeedbackCB = Props.updateFeedbackCB;\n  var showEditorCB = Props.showEditorCB;\n  var match = React.useState((function () {\n          return /* [] */0;\n        }));\n  var setSelecton = match[1];\n  var selection = match[0];\n  var match$1 = React.useState((function () {\n          return DateTime.randomId(/* () */0) + \"-review-checkbox-\";\n        }));\n  var id = match$1[0];\n  return React.createElement(\"div\", {\n              className: \"relative border bg-gray-100 rounded-lg py-2 md:py-4\"\n            }, React.createElement(\"div\", {\n                  className: \"absolute right-0 top-0 -mt-9\"\n                }, React.createElement(\"button\", {\n                      className: \"flex items-center btn btn-small btn-primary-ghost\",\n                      onClick: (function (param) {\n                          return Curry._1(showEditorCB, /* () */0);\n                        })\n                    }, React.createElement(\"i\", {\n                          className: \"far fa-edit\"\n                        }), React.createElement(\"span\", {\n                          className: \"ml-2 leading-tight\"\n                        }, \"Edit Checklist\"))), $$Array.mapi((function (itemIndex, reviewChecklistItem) {\n                    return React.createElement(\"div\", {\n                                key: String(itemIndex),\n                                \"aria-label\": \"checklist-item-\" + String(itemIndex),\n                                className: checklistItemCheckedClasses(itemIndex, selection)\n                              }, React.createElement(\"h4\", {\n                                    className: \"text-base font-semibold mt-2 md:mt-0 w-full md:w-4/5\"\n                                  }, CoursesReview__ReviewChecklistItem.title(reviewChecklistItem)), React.createElement(\"div\", undefined, $$Array.mapi((function (resultIndex, checklistItem) {\n                                          return React.createElement(\"div\", {\n                                                      key: String(itemIndex) + String(resultIndex),\n                                                      \"aria-label\": \"result-item-\" + String(resultIndex),\n                                                      className: \"px-2 md:px-4 mt-2\"\n                                                    }, React.createElement(Checkbox.make, {\n                                                          id: id + (String(itemIndex) + String(resultIndex)),\n                                                          label: CoursesReview__ReviewChecklistResult.title(checklistItem),\n                                                          onChange: (function (param) {\n                                                              return checkboxOnChange(itemIndex, resultIndex, setSelecton, param);\n                                                            }),\n                                                          checked: checklistItemChecked(itemIndex, resultIndex, selection)\n                                                        }), React.createElement(\"div\", {\n                                                          className: \"pl-7\"\n                                                        }, React.createElement(CoursesReview__ChecklistShowFeedback.make, {\n                                                              feedback: CoursesReview__ReviewChecklistResult.feedback(checklistItem)\n                                                            })));\n                                        }), CoursesReview__ReviewChecklistItem.result(reviewChecklistItem))));\n                  }), reviewChecklist), React.createElement(\"div\", {\n                  className: \"text-center max-w-xs mx-2 md:mx-auto\"\n                }, React.createElement(\"button\", {\n                      className: \"btn btn-primary btn-large w-full \",\n                      disabled: ListUtils.isEmpty(selection),\n                      onClick: (function (param) {\n                          return generateFeedback(reviewChecklist, selection, feedback, updateFeedbackCB);\n                        })\n                    }, \"Generate Feedback\")));\n}\n\nvar make = CoursesReview__ChecklistShow;\n\nexports.str = str;\nexports.selectChecklist = selectChecklist;\nexports.unSelectChecklist = unSelectChecklist;\nexports.checkboxOnChange = checkboxOnChange;\nexports.generateFeedback = generateFeedback;\nexports.checklistItemCheckedClasses = checklistItemCheckedClasses;\nexports.checklistItemChecked = checklistItemChecked;\nexports.make = make;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}