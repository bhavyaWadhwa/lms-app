{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Icon = require(\"../../../../shared/Icon.bs.js\");\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar PfIcon = require(\"../../../../packages/pf-icon/src/PfIcon.bs.js\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar HelpIcon = require(\"../../../../shared/components/HelpIcon.bs.js\");\n\nvar UrlUtils = require(\"../../../../shared/utils/UrlUtils.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ListUtils = require(\"../../../../shared/utils/ListUtils.bs.js\");\n\nvar ArrayUtils = require(\"../../../../shared/utils/ArrayUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar DisablingCover = require(\"../../../../shared/components/DisablingCover.bs.js\");\n\nvar SkeletonLoading = require(\"../../../../shared/components/SkeletonLoading.bs.js\");\n\nvar MultiselectInline = require(\"../../../../packages/multiselect-inline/src/components/MultiselectInline.bs.js\");\n\nvar TargetChecklistItem = require(\"../../types/curriculum_editor/TargetChecklistItem.bs.js\");\n\nvar School__InputGroupError = require(\"../../../shared/components/School__InputGroupError.bs.js\");\n\nvar CurriculumEditor__Target = require(\"../../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\n\nvar CurriculumEditor__TargetGroup = require(\"../../types/curriculum_editor/CurriculumEditor__TargetGroup.bs.js\");\n\nvar CurriculumEditor__QuizQuestion = require(\"../../types/curriculum_editor/CurriculumEditor__QuizQuestion.bs.js\");\n\nvar CurriculumEditor__TargetDetails = require(\"../../types/curriculum_editor/CurriculumEditor__TargetDetails.bs.js\");\n\nvar CurriculumEditor__EvaluationCriteria = require(\"../../types/curriculum_editor/CurriculumEditor__EvaluationCriteria.bs.js\");\n\nvar CurriculumEditor__TargetQuizQuestion = require(\"./CurriculumEditor__TargetQuizQuestion.bs.js\");\n\nvar TargetCompleteLinkIconSvg = require(\"./images/target-complete-link-icon.svg\");\n\nvar TargetCompleteMarkIconSvg = require(\"./images/target-complete-mark-icon.svg\");\n\nvar TargetCompleteQuizIconSvg = require(\"./images/target-complete-quiz-icon.svg\");\n\nvar CurriculumEditor__TargetChecklistItemEditor = require(\"./CurriculumEditor__TargetChecklistItemEditor.bs.js\");\n\nvar markIcon = TargetCompleteMarkIconSvg[\"default\"];\nvar linkIcon = TargetCompleteLinkIconSvg[\"default\"];\nvar quizIcon = TargetCompleteQuizIconSvg[\"default\"];\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query TargetDetailsQuery($targetId: ID!)  {\\ntargetDetails(targetId: $targetId)  {\\ntitle  \\ntargetGroupId  \\nevaluationCriteria  \\nprerequisiteTargets  \\nquiz  {\\nid  \\nquestion  \\nanswerOptions  {\\nid  \\nanswer  \\nhint  \\ncorrectAnswer  \\n}\\n\\n}\\n\\ncompletionInstructions  \\nvisibility  \\nlinkToComplete  \\nrole  \\nchecklist  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"targetDetails\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"title\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeString(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field title on type TargetDetails is missing\");\n    }\n\n    var match$3 = Js_dict.get(value$2, \"targetGroupId\");\n    var tmp$2;\n\n    if (match$3 !== undefined) {\n      var value$4 = Caml_option.valFromOption(match$3);\n      var match$4 = Js_json.decodeString(value$4);\n      tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n    } else {\n      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field targetGroupId on type TargetDetails is missing\");\n    }\n\n    var match$5 = Js_dict.get(value$2, \"evaluationCriteria\");\n    var match$6 = Js_dict.get(value$2, \"prerequisiteTargets\");\n    var match$7 = Js_dict.get(value$2, \"quiz\");\n    var match$8 = Js_dict.get(value$2, \"completionInstructions\");\n    var tmp$3;\n\n    if (match$8 !== undefined) {\n      var value$5 = Caml_option.valFromOption(match$8);\n      var match$9 = Js_json.decodeNull(value$5);\n\n      if (match$9 !== undefined) {\n        tmp$3 = undefined;\n      } else {\n        var match$10 = Js_json.decodeString(value$5);\n        tmp$3 = match$10 !== undefined ? match$10 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n      }\n    } else {\n      tmp$3 = undefined;\n    }\n\n    var match$11 = Js_dict.get(value$2, \"visibility\");\n    var tmp$4;\n\n    if (match$11 !== undefined) {\n      var value$6 = Caml_option.valFromOption(match$11);\n      var match$12 = Js_json.decodeString(value$6);\n      tmp$4 = match$12 !== undefined ? match$12 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n    } else {\n      tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field visibility on type TargetDetails is missing\");\n    }\n\n    var match$13 = Js_dict.get(value$2, \"linkToComplete\");\n    var tmp$5;\n\n    if (match$13 !== undefined) {\n      var value$7 = Caml_option.valFromOption(match$13);\n      var match$14 = Js_json.decodeNull(value$7);\n\n      if (match$14 !== undefined) {\n        tmp$5 = undefined;\n      } else {\n        var match$15 = Js_json.decodeString(value$7);\n        tmp$5 = match$15 !== undefined ? match$15 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$7));\n      }\n    } else {\n      tmp$5 = undefined;\n    }\n\n    var match$16 = Js_dict.get(value$2, \"role\");\n    var tmp$6;\n\n    if (match$16 !== undefined) {\n      var value$8 = Caml_option.valFromOption(match$16);\n      var match$17 = Js_json.decodeString(value$8);\n      tmp$6 = match$17 !== undefined ? match$17 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$8));\n    } else {\n      tmp$6 = Js_exn.raiseError(\"graphql_ppx: Field role on type TargetDetails is missing\");\n    }\n\n    var match$18 = Js_dict.get(value$2, \"checklist\");\n    tmp = {\n      title: tmp$1,\n      targetGroupId: tmp$2,\n      evaluationCriteria: match$5 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$5))).map(function (value) {\n        var match = Js_json.decodeString(value);\n\n        if (match !== undefined) {\n          return match;\n        } else {\n          return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n        }\n      }) : Js_exn.raiseError(\"graphql_ppx: Field evaluationCriteria on type TargetDetails is missing\"),\n      prerequisiteTargets: match$6 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$6))).map(function (value) {\n        var match = Js_json.decodeString(value);\n\n        if (match !== undefined) {\n          return match;\n        } else {\n          return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n        }\n      }) : Js_exn.raiseError(\"graphql_ppx: Field prerequisiteTargets on type TargetDetails is missing\"),\n      quiz: match$7 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$7))).map(function (value) {\n        var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n        var match = Js_dict.get(value$1, \"id\");\n        var tmp;\n\n        if (match !== undefined) {\n          var value$2 = Caml_option.valFromOption(match);\n          var match$1 = Js_json.decodeString(value$2);\n          tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n        } else {\n          tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type TargetQuiz is missing\");\n        }\n\n        var match$2 = Js_dict.get(value$1, \"question\");\n        var tmp$1;\n\n        if (match$2 !== undefined) {\n          var value$3 = Caml_option.valFromOption(match$2);\n          var match$3 = Js_json.decodeString(value$3);\n          tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n        } else {\n          tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field question on type TargetQuiz is missing\");\n        }\n\n        var match$4 = Js_dict.get(value$1, \"answerOptions\");\n        return {\n          id: tmp,\n          question: tmp$1,\n          answerOptions: match$4 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$4))).map(function (value) {\n            var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n            var match = Js_dict.get(value$1, \"id\");\n            var tmp;\n\n            if (match !== undefined) {\n              var value$2 = Caml_option.valFromOption(match);\n              var match$1 = Js_json.decodeString(value$2);\n              tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n            } else {\n              tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type TargetQuizAnswer is missing\");\n            }\n\n            var match$2 = Js_dict.get(value$1, \"answer\");\n            var tmp$1;\n\n            if (match$2 !== undefined) {\n              var value$3 = Caml_option.valFromOption(match$2);\n              var match$3 = Js_json.decodeString(value$3);\n              tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n            } else {\n              tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field answer on type TargetQuizAnswer is missing\");\n            }\n\n            var match$4 = Js_dict.get(value$1, \"hint\");\n            var tmp$2;\n\n            if (match$4 !== undefined) {\n              var value$4 = Caml_option.valFromOption(match$4);\n              var match$5 = Js_json.decodeNull(value$4);\n\n              if (match$5 !== undefined) {\n                tmp$2 = undefined;\n              } else {\n                var match$6 = Js_json.decodeString(value$4);\n                tmp$2 = match$6 !== undefined ? match$6 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n              }\n            } else {\n              tmp$2 = undefined;\n            }\n\n            var match$7 = Js_dict.get(value$1, \"correctAnswer\");\n            var tmp$3;\n\n            if (match$7 !== undefined) {\n              var value$5 = Caml_option.valFromOption(match$7);\n              var match$8 = Js_json.decodeBoolean(value$5);\n              tmp$3 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$5));\n            } else {\n              tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field correctAnswer on type TargetQuizAnswer is missing\");\n            }\n\n            return {\n              id: tmp,\n              answer: tmp$1,\n              hint: tmp$2,\n              correctAnswer: tmp$3\n            };\n          }) : Js_exn.raiseError(\"graphql_ppx: Field answerOptions on type TargetQuiz is missing\")\n        };\n      }) : Js_exn.raiseError(\"graphql_ppx: Field quiz on type TargetDetails is missing\"),\n      completionInstructions: tmp$3,\n      visibility: tmp$4,\n      linkToComplete: tmp$5,\n      role: tmp$6,\n      checklist: match$18 !== undefined ? Caml_option.valFromOption(match$18) : Js_exn.raiseError(\"graphql_ppx: Field checklist on type TargetDetails is missing\")\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field targetDetails on type Query is missing\");\n  }\n\n  return {\n    targetDetails: tmp\n  };\n}\n\nfunction make(targetId, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"targetId\", targetId]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var targetId = variables.targetId;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"targetId\", targetId]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(targetId, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"targetId\", targetId]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, targetId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"targetId\", targetId]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar TargetDetailsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction loadTargetDetails(targetId, send) {\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(targetId,\n  /* () */\n  0)).then(function (result) {\n    var targetDetails = CurriculumEditor__TargetDetails.makeFromJs(result.targetDetails);\n\n    Curry._1(send,\n    /* SaveTargetDetails */\n    Block.__(0, [targetDetails]));\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nvar defaultChecklist = [TargetChecklistItem.make(\"Describe your submission\",\n/* LongText */\n3, false)];\n\nfunction computeMethodOfCompletion(targetDetails) {\n  var hasQuiz = ArrayUtils.isNotEmpty(CurriculumEditor__TargetDetails.quiz(targetDetails));\n  var hasEvaluationCriteria = ArrayUtils.isNotEmpty(targetDetails.evaluationCriteria);\n  var match = targetDetails.linkToComplete;\n  var hasLinkToComplete = match !== undefined;\n\n  if (hasEvaluationCriteria) {\n    return (\n      /* Evaluated */\n      0\n    );\n  } else if (hasQuiz) {\n    return (\n      /* TakeQuiz */\n      2\n    );\n  } else if (hasLinkToComplete) {\n    return (\n      /* VisitLink */\n      1\n    );\n  } else {\n    return (\n      /* MarkAsComplete */\n      3\n    );\n  }\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* AddQuizQuestion */\n      0:\n        var quiz = $$Array.append(state.quiz, [CurriculumEditor__QuizQuestion.empty(Date.now().toString())]);\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* AddNewChecklistItem */\n      1:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: $$Array.append(state.checklist, [TargetChecklistItem.longText]),\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateSaving */\n      2:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: state.dirty,\n          saving: !state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* ResetEditor */\n      3:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: false,\n          saving: false,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* SaveTargetDetails */\n      0:\n        var targetDetails = action[0];\n        var methodOfCompletion = computeMethodOfCompletion(targetDetails);\n        var checklist = ArrayUtils.isNotEmpty(targetDetails.checklist) ? targetDetails.checklist : defaultChecklist;\n        var quiz$1 = ArrayUtils.isNotEmpty(targetDetails.quiz) ? targetDetails.quiz : [CurriculumEditor__QuizQuestion.empty(\"0\")];\n        var match = targetDetails.linkToComplete;\n        var match$1 = targetDetails.completionInstructions;\n        return {\n          title: targetDetails.title,\n          targetGroupId: targetDetails.targetGroupId,\n          role: targetDetails.role,\n          evaluationCriteria: targetDetails.evaluationCriteria,\n          prerequisiteTargets: targetDetails.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: methodOfCompletion,\n          quiz: quiz$1,\n          linkToComplete: match !== undefined ? match : \"\",\n          dirty: state.dirty,\n          saving: state.saving,\n          loading: false,\n          visibility: targetDetails.visibility,\n          checklist: checklist,\n          completionInstructions: match$1 !== undefined ? match$1 : \"\"\n        };\n\n      case\n      /* UpdateTitle */\n      1:\n        return {\n          title: action[0],\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdatePrerequisiteTargets */\n      2:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: action[0],\n          prerequisiteSearchInput: \"\",\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateMethodOfCompletion */\n      3:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: action[0],\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateEvaluationCriteria */\n      4:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: action[0],\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: \"\",\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdatePrerequisiteSearchInput */\n      5:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: action[0],\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: state.dirty,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateEvaluationCriteriaSearchInput */\n      6:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: action[0],\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: state.dirty,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateLinkToComplete */\n      7:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: action[0],\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateCompletionInstructions */\n      8:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: action[0]\n        };\n\n      case\n      /* UpdateTargetRole */\n      9:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: action[0],\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateQuizQuestion */\n      10:\n        var quizQuestion = action[1];\n        var id = action[0];\n        var quiz$2 = $$Array.map(function (q) {\n          if (CurriculumEditor__QuizQuestion.id(q) === id) {\n            return quizQuestion;\n          } else {\n            return q;\n          }\n        }, state.quiz);\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: quiz$2,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* RemoveQuizQuestion */\n      11:\n        var id$1 = action[0];\n        var quiz$3 = state.quiz.filter(function (q) {\n          return CurriculumEditor__QuizQuestion.id(q) !== id$1;\n        });\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: quiz$3,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateVisibility */\n      12:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: action[0],\n          checklist: state.checklist,\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* UpdateChecklistItem */\n      13:\n        var newItem = action[1];\n        var indexToChange = action[0];\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: $$Array.mapi(function (index, checklistItem) {\n            if (index === indexToChange) {\n              return newItem;\n            } else {\n              return checklistItem;\n            }\n          }, state.checklist),\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* RemoveChecklistItem */\n      14:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: TargetChecklistItem.removeItem(action[0], state.checklist),\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* MoveChecklistItemUp */\n      15:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: TargetChecklistItem.moveUp(action[0], state.checklist),\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* MoveChecklistItemDown */\n      16:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: TargetChecklistItem.moveDown(action[0], state.checklist),\n          completionInstructions: state.completionInstructions\n        };\n\n      case\n      /* CopyChecklistItem */\n      17:\n        return {\n          title: state.title,\n          targetGroupId: state.targetGroupId,\n          role: state.role,\n          evaluationCriteria: state.evaluationCriteria,\n          prerequisiteTargets: state.prerequisiteTargets,\n          prerequisiteSearchInput: state.prerequisiteSearchInput,\n          evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n          methodOfCompletion: state.methodOfCompletion,\n          quiz: state.quiz,\n          linkToComplete: state.linkToComplete,\n          dirty: true,\n          saving: state.saving,\n          loading: state.loading,\n          visibility: state.visibility,\n          checklist: TargetChecklistItem.copy(action[0], state.checklist),\n          completionInstructions: state.completionInstructions\n        };\n    }\n  }\n}\n\nfunction updateTitle(send, $$event) {\n  var title = $$event.target.value;\n  return Curry._1(send,\n  /* UpdateTitle */\n  Block.__(1, [title]));\n}\n\nfunction eligiblePrerequisiteTargets(targetId, targets, targetGroups) {\n  var targetGroupId = CurriculumEditor__Target.targetGroupId(ListUtils.unsafeFind(function (target) {\n    return targetId === CurriculumEditor__Target.id(target);\n  }, \"Unable to find target with ID: \" + targetId, targets));\n  var targetGroup = ArrayUtils.unsafeFind(function (tg) {\n    return CurriculumEditor__TargetGroup.id(tg) === targetGroupId;\n  }, \"Cannot find target group with ID: \" + targetGroupId, $$Array.of_list(targetGroups));\n  var levelId = CurriculumEditor__TargetGroup.levelId(targetGroup);\n  var targetGroupsInSameLevel = List.map(CurriculumEditor__TargetGroup.id, List.filter(function (tg) {\n    return CurriculumEditor__TargetGroup.levelId(tg) === levelId;\n  })(targetGroups));\n  return $$Array.of_list(List.filter(function (target) {\n    return CurriculumEditor__Target.id(target) !== targetId;\n  })(List.filter(function (target) {\n    return List.mem(CurriculumEditor__Target.targetGroupId(target), targetGroupsInSameLevel);\n  })(List.filter(function (target) {\n    return !CurriculumEditor__Target.archived(target);\n  })(targets))));\n}\n\nfunction setPrerequisiteSearch(send, value) {\n  return Curry._1(send,\n  /* UpdatePrerequisiteSearchInput */\n  Block.__(5, [value]));\n}\n\nfunction selectPrerequisiteTarget(send, state, target) {\n  var updatedPrerequisites = state.prerequisiteTargets.concat([CurriculumEditor__Target.id(target)]);\n  return Curry._1(send,\n  /* UpdatePrerequisiteTargets */\n  Block.__(2, [updatedPrerequisites]));\n}\n\nfunction deSelectPrerequisiteTarget(send, state, target) {\n  var updatedPrerequisites = state.prerequisiteTargets.filter(function (targetId) {\n    return targetId !== CurriculumEditor__Target.id(target);\n  });\n  return Curry._1(send,\n  /* UpdatePrerequisiteTargets */\n  Block.__(2, [updatedPrerequisites]));\n}\n\nvar value = CurriculumEditor__Target.title;\nvar SelectablePrerequisiteTargets = {\n  value: value,\n  searchString: value\n};\nvar MultiSelectForPrerequisiteTargets = MultiselectInline.Make(SelectablePrerequisiteTargets);\n\nfunction prerequisiteTargetEditor(send, eligiblePrerequisiteTargets, state) {\n  var selected = eligiblePrerequisiteTargets.filter(function (target) {\n    return $$Array.mem(CurriculumEditor__Target.id(target), state.prerequisiteTargets);\n  });\n  var unselected = eligiblePrerequisiteTargets.filter(function (target) {\n    return !$$Array.mem(CurriculumEditor__Target.id(target), state.prerequisiteTargets);\n  });\n\n  if (ArrayUtils.isNotEmpty(eligiblePrerequisiteTargets)) {\n    return React.createElement(\"div\", {\n      className: \"mb-6\"\n    }, React.createElement(\"label\", {\n      className: \"block tracking-wide text-sm font-semibold mb-2\",\n      htmlFor: \"prerequisite_targets\"\n    }, React.createElement(\"span\", {\n      className: \"mr-2\"\n    }, React.createElement(\"i\", {\n      className: \"fas fa-list text-base\"\n    })), \"Are there any prerequisite targets?\"), React.createElement(\"div\", {\n      className: \"mb-6 ml-6\",\n      id: \"prerequisite_targets\"\n    }, React.createElement(MultiSelectForPrerequisiteTargets.make, {\n      placeholder: \"Search targets\",\n      onChange: function onChange(param) {\n        return Curry._1(send,\n        /* UpdatePrerequisiteSearchInput */\n        Block.__(5, [param]));\n      },\n      value: state.prerequisiteSearchInput,\n      unselected: unselected,\n      selected: selected,\n      onSelect: function onSelect(param) {\n        return selectPrerequisiteTarget(send, state, param);\n      },\n      onDeselect: function onDeselect(param) {\n        return deSelectPrerequisiteTarget(send, state, param);\n      },\n      emptySelectionMessage: \"No targets selected\",\n      allItemsSelectedMessage: \"You have selected all targets!\"\n    })));\n  } else {\n    return null;\n  }\n}\n\nfunction booleanButtonClasses(bool) {\n  return \"toggle-button__button\" + (bool ? \" toggle-button__button--active\" : \"\");\n}\n\nfunction targetRoleClasses(selected) {\n  return \"w-1/2 target-editor__completion-button relative flex border text-sm font-semibold focus:outline-none rounded px-5 py-4 md:px-8 md:py-5 items-center cursor-pointer text-left \" + (selected ? \"target-editor__completion-button--selected bg-gray-200 text-primary-500 border-primary-500\" : \"border-gray-400 hover:bg-gray-200 bg-white\");\n}\n\nfunction targetEvaluated(methodOfCompletion) {\n  return methodOfCompletion === 0;\n}\n\nfunction validNumberOfEvaluationCriteria(state) {\n  return ArrayUtils.isNotEmpty(state.evaluationCriteria);\n}\n\nfunction setEvaluationCriteriaSearch(send, value) {\n  return Curry._1(send,\n  /* UpdateEvaluationCriteriaSearchInput */\n  Block.__(6, [value]));\n}\n\nfunction selectEvaluationCriterion(send, state, evaluationCriterion) {\n  var updatedEvaluationCriteria = state.evaluationCriteria.concat([CurriculumEditor__EvaluationCriteria.id(evaluationCriterion)]);\n  return Curry._1(send,\n  /* UpdateEvaluationCriteria */\n  Block.__(4, [updatedEvaluationCriteria]));\n}\n\nfunction deSelectEvaluationCriterion(send, state, evaluationCriterion) {\n  var updatedEvaluationCriteria = state.evaluationCriteria.filter(function (ecId) {\n    return ecId !== CurriculumEditor__EvaluationCriteria.id(evaluationCriterion);\n  });\n  return Curry._1(send,\n  /* UpdateEvaluationCriteria */\n  Block.__(4, [updatedEvaluationCriteria]));\n}\n\nvar value$1 = CurriculumEditor__EvaluationCriteria.name;\n\nfunction make$1(evaluationCriterion) {\n  return evaluationCriterion;\n}\n\nvar SelectableEvaluationCriteria = {\n  value: value$1,\n  searchString: value$1,\n  make: make$1\n};\nvar MultiSelectForEvaluationCriteria = MultiselectInline.Make(SelectableEvaluationCriteria);\n\nfunction evaluationCriteriaEditor(state, evaluationCriteria, send) {\n  var selected = $$Array.map(function (ec) {\n    return ec;\n  }, evaluationCriteria.filter(function (ec) {\n    return $$Array.mem(CurriculumEditor__EvaluationCriteria.id(ec), state.evaluationCriteria);\n  }));\n  var unselected = $$Array.map(function (ec) {\n    return ec;\n  }, evaluationCriteria.filter(function (ec) {\n    return !$$Array.mem(CurriculumEditor__EvaluationCriteria.id(ec), state.evaluationCriteria);\n  }));\n  return React.createElement(\"div\", {\n    className: \"mb-6\",\n    id: \"evaluation_criteria\"\n  }, React.createElement(\"label\", {\n    className: \"block tracking-wide text-sm font-semibold mr-6 mb-2\",\n    htmlFor: \"evaluation_criteria\"\n  }, React.createElement(\"span\", {\n    className: \"mr-2\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-list text-base\"\n  })), \"Choose evaluation criteria from your list\"), React.createElement(\"div\", {\n    className: \"ml-6\"\n  }, ArrayUtils.isNotEmpty(state.evaluationCriteria) ? null : React.createElement(\"div\", {\n    className: \"drawer-right-form__error-msg mb-2\"\n  }, \"Atleast one has to be selected\"), React.createElement(MultiSelectForEvaluationCriteria.make, {\n    placeholder: \"Search evaluation criteria\",\n    onChange: function onChange(param) {\n      return Curry._1(send,\n      /* UpdateEvaluationCriteriaSearchInput */\n      Block.__(6, [param]));\n    },\n    value: state.evaluationCriteriaSearchInput,\n    unselected: unselected,\n    selected: selected,\n    onSelect: function onSelect(param) {\n      return selectEvaluationCriterion(send, state, param);\n    },\n    onDeselect: function onDeselect(param) {\n      return deSelectEvaluationCriterion(send, state, param);\n    },\n    emptySelectionMessage: \"No criteria selected\",\n    allItemsSelectedMessage: \"You have selected all evaluation criteria!\"\n  })));\n}\n\nfunction updateLinkToComplete(send, $$event) {\n  return Curry._1(send,\n  /* UpdateLinkToComplete */\n  Block.__(7, [$$event.target.value]));\n}\n\nfunction updateCompletionInstructions(send, $$event) {\n  return Curry._1(send,\n  /* UpdateCompletionInstructions */\n  Block.__(8, [$$event.target.value]));\n}\n\nfunction updateMethodOfCompletion(methodOfCompletion, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send,\n  /* UpdateMethodOfCompletion */\n  Block.__(3, [methodOfCompletion]));\n}\n\nfunction updateTargetRole(role, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send,\n  /* UpdateTargetRole */\n  Block.__(9, [role]));\n}\n\nfunction updateVisibility(visibility, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send,\n  /* UpdateVisibility */\n  Block.__(12, [visibility]));\n}\n\nfunction linkEditor(state, send) {\n  return React.createElement(\"div\", {\n    className: \"mb-6\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-sm font-semibold\",\n    htmlFor: \"link_to_complete\"\n  }, React.createElement(\"span\", {\n    className: \"mr-2\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-list text-base\"\n  })), \"Link to complete\"), React.createElement(\"div\", {\n    className: \"ml-6\"\n  }, React.createElement(\"input\", {\n    className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"link_to_complete\",\n    placeholder: \"Paste link to complete\",\n    type: \"text\",\n    value: state.linkToComplete,\n    onChange: function onChange(param) {\n      return updateLinkToComplete(send, param);\n    }\n  }), UrlUtils.isInvalid(false, state.linkToComplete) ? React.createElement(School__InputGroupError.make, {\n    message: \"Enter a valid link\",\n    active: true\n  }) : null));\n}\n\nfunction methodOfCompletionButtonClasses(value) {\n  if (value) {\n    return \"target-editor__completion-button relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 target-editor__completion-button--selected bg-gray-200 text-primary-500 border-primary-500\";\n  } else {\n    return \"target-editor__completion-button relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 opacity-75 text-gray-900\";\n  }\n}\n\nfunction methodOfCompletionSelection(polyMethodOfCompletion) {\n  if (polyMethodOfCompletion !== 253468248) {\n    if (polyMethodOfCompletion >= 733679580) {\n      return (\n        /* TakeQuiz */\n        2\n      );\n    } else {\n      return (\n        /* VisitLink */\n        1\n      );\n    }\n  } else {\n    return (\n      /* MarkAsComplete */\n      3\n    );\n  }\n}\n\nfunction methodOfCompletionButton(methodOfCompletion, state, send, index) {\n  var buttonString = methodOfCompletion !== 253468248 ? methodOfCompletion >= 733679580 ? \"Take a quiz to complete the target.\" : \"Visit a link to complete the target.\" : \"Simply mark the target as completed.\";\n  var match = state.methodOfCompletion;\n  var selected;\n\n  switch (match) {\n    case\n    /* Evaluated */\n    0:\n      selected = false;\n      break;\n\n    case\n    /* VisitLink */\n    1:\n      selected = methodOfCompletion === -110174395;\n      break;\n\n    case\n    /* TakeQuiz */\n    2:\n      selected = methodOfCompletion === 733679580;\n      break;\n\n    case\n    /* MarkAsComplete */\n    3:\n      selected = methodOfCompletion === 253468248;\n      break;\n  }\n\n  var icon = methodOfCompletion !== 253468248 ? methodOfCompletion >= 733679580 ? quizIcon : linkIcon : markIcon;\n  var partial_arg = methodOfCompletionSelection(methodOfCompletion);\n  return React.createElement(\"div\", {\n    key: String(index),\n    className: \"w-1/3 px-2\"\n  }, React.createElement(\"button\", {\n    className: methodOfCompletionButtonClasses(selected),\n    onClick: function onClick(param) {\n      return updateMethodOfCompletion(partial_arg, send, param);\n    }\n  }, React.createElement(\"div\", {\n    className: \"mb-1\"\n  }, React.createElement(\"img\", {\n    className: \"w-12 h-12\",\n    src: icon\n  })), buttonString));\n}\n\nfunction methodOfCompletionSelector(state, send) {\n  return React.createElement(\"div\", undefined, React.createElement(\"div\", {\n    className: \"mb-6\"\n  }, React.createElement(\"label\", {\n    className: \"block tracking-wide text-sm font-semibold mr-6 mb-3\",\n    htmlFor: \"method_of_completion\"\n  }, React.createElement(\"span\", {\n    className: \"mr-2\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-list text-base\"\n  })), \"How do you want the user to complete the target?\"), React.createElement(\"div\", {\n    className: \"flex -mx-2 pl-6\",\n    id: \"method_of_completion\"\n  }, $$Array.mapi(function (index, methodOfCompletion) {\n    return methodOfCompletionButton(methodOfCompletion, state, send, index);\n  }, [\n  /* MarkAsComplete */\n  253468248,\n  /* VisitLink */\n  -110174395,\n  /* TakeQuiz */\n  733679580]))));\n}\n\nfunction isValidQuiz(quiz) {\n  return ArrayUtils.isEmpty(quiz.filter(function (quizQuestion) {\n    return CurriculumEditor__QuizQuestion.isValidQuizQuestion(quizQuestion) !== true;\n  }));\n}\n\nfunction isValidChecklist(checklist) {\n  return ArrayUtils.isEmpty(checklist.filter(function (checklistItem) {\n    return TargetChecklistItem.isValidChecklistItem(checklistItem) !== true;\n  }));\n}\n\nfunction addQuizQuestion(send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send,\n  /* AddQuizQuestion */\n  0);\n}\n\nfunction updateQuizQuestionCB(send, id, quizQuestion) {\n  return Curry._1(send,\n  /* UpdateQuizQuestion */\n  Block.__(10, [id, quizQuestion]));\n}\n\nfunction removeQuizQuestionCB(send, id) {\n  return Curry._1(send,\n  /* RemoveQuizQuestion */\n  Block.__(11, [id]));\n}\n\nfunction questionCanBeRemoved(state) {\n  return state.quiz.length > 1;\n}\n\nfunction quizEditor(state, send) {\n  return React.createElement(\"div\", undefined, React.createElement(\"label\", {\n    className: \"block tracking-wide text-sm font-semibold mr-6 mb-3\",\n    htmlFor: \"Quiz question 1\"\n  }, React.createElement(\"span\", {\n    className: \"mr-2\"\n  }, React.createElement(\"i\", {\n    className: \"fas fa-list text-base\"\n  })), \"Prepare the quiz now.\"), React.createElement(\"div\", {\n    className: \"ml-6\"\n  }, isValidQuiz(state.quiz) ? null : React.createElement(School__InputGroupError.make, {\n    message: \"All questions must be filled in, and all questions should have at least two answers.\",\n    active: true\n  }), $$Array.mapi(function (index, quizQuestion) {\n    return React.createElement(CurriculumEditor__TargetQuizQuestion.make, {\n      questionNumber: String(index + 1 | 0),\n      quizQuestion: quizQuestion,\n      updateQuizQuestionCB: function updateQuizQuestionCB(param, param$1) {\n        return Curry._1(send,\n        /* UpdateQuizQuestion */\n        Block.__(10, [param, param$1]));\n      },\n      removeQuizQuestionCB: function removeQuizQuestionCB(param) {\n        return Curry._1(send,\n        /* RemoveQuizQuestion */\n        Block.__(11, [param]));\n      },\n      questionCanBeRemoved: questionCanBeRemoved(state),\n      key: CurriculumEditor__QuizQuestion.id(quizQuestion)\n    });\n  }, state.quiz), React.createElement(\"a\", {\n    className: \"flex items-center bg-gray-200 border border-dashed border-primary-400 hover:bg-white hover:text-primary-500 hover:shadow-md rounded-lg p-3 cursor-pointer my-5\",\n    onClick: function onClick(param) {\n      return addQuizQuestion(send, param);\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle text-lg\"\n  }), React.createElement(\"h5\", {\n    className: \"font-semibold ml-2\"\n  }, \"Add another Question\"))));\n}\n\nfunction doRequiredStepsHaveUniqueTitles(checklist) {\n  var requiredSteps = checklist.filter(function (item) {\n    return !TargetChecklistItem.optional(item);\n  });\n  return ArrayUtils.distinct($$Array.map($$String.trim, $$Array.map(TargetChecklistItem.title, requiredSteps))).length === requiredSteps.length;\n}\n\nfunction isValidTitle(title) {\n  return $$String.trim(title).length !== 0;\n}\n\nfunction isValidMethodOfCompletion(state) {\n  var match = state.methodOfCompletion;\n\n  switch (match) {\n    case\n    /* Evaluated */\n    0:\n      if (ArrayUtils.isNotEmpty(state.evaluationCriteria)) {\n        return isValidChecklist(state.checklist);\n      } else {\n        return false;\n      }\n\n    case\n    /* VisitLink */\n    1:\n      return !UrlUtils.isInvalid(false, state.linkToComplete);\n\n    case\n    /* TakeQuiz */\n    2:\n      return isValidQuiz(state.quiz);\n\n    case\n    /* MarkAsComplete */\n    3:\n      return true;\n  }\n}\n\nfunction saveDisabled(hasValidTitle, hasValidMethodOfCompletion, requiredStepsHaveUniqueTitles, dirty, saving) {\n  if (!requiredStepsHaveUniqueTitles || !hasValidTitle || !hasValidMethodOfCompletion || !dirty) {\n    return true;\n  } else {\n    return saving;\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation UpdateTargetMutation($id: ID!, $targetGroupId: ID!, $title: String!, $role: String!, $evaluationCriteria: [ID!]!, $prerequisiteTargets: [ID!]!, $quiz: [TargetQuizInput!]!, $completionInstructions: String, $linkToComplete: String, $visibility: String!, $checklist: JSON!)  {\\nupdateTarget(id: $id, targetGroupId: $targetGroupId, title: $title, role: $role, evaluationCriteria: $evaluationCriteria, prerequisiteTargets: $prerequisiteTargets, quiz: $quiz, completionInstructions: $completionInstructions, linkToComplete: $linkToComplete, visibility: $visibility, checklist: $checklist)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateTarget\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateTargetPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateTarget on type Mutation is missing\");\n  }\n\n  return {\n    updateTarget: tmp\n  };\n}\n\nfunction json_of_TargetQuizAnswerInput(value) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"answer\", value.answer],\n  /* tuple */\n  [\"correctAnswer\", value.correctAnswer]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction json_of_TargetQuizInput(value) {\n  var v = value.answerOptions;\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"question\", value.question],\n  /* tuple */\n  [\"answerOptions\", v.map(json_of_TargetQuizAnswerInput)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction make$2(id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"targetGroupId\", targetGroupId],\n    /* tuple */\n    [\"title\", title],\n    /* tuple */\n    [\"role\", role],\n    /* tuple */\n    [\"evaluationCriteria\", evaluationCriteria.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"prerequisiteTargets\", prerequisiteTargets.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"quiz\", quiz.map(json_of_TargetQuizInput)],\n    /* tuple */\n    [\"completionInstructions\", completionInstructions !== undefined ? completionInstructions : null],\n    /* tuple */\n    [\"linkToComplete\", linkToComplete !== undefined ? linkToComplete : null],\n    /* tuple */\n    [\"visibility\", visibility],\n    /* tuple */\n    [\"checklist\", checklist]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var targetGroupId = variables.targetGroupId;\n  var title = variables.title;\n  var role = variables.role;\n  var evaluationCriteria = variables.evaluationCriteria;\n  var prerequisiteTargets = variables.prerequisiteTargets;\n  var quiz = variables.quiz;\n  var completionInstructions = variables.completionInstructions;\n  var linkToComplete = variables.linkToComplete;\n  var visibility = variables.visibility;\n  var checklist = variables.checklist;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"targetGroupId\", targetGroupId],\n    /* tuple */\n    [\"title\", title],\n    /* tuple */\n    [\"role\", role],\n    /* tuple */\n    [\"evaluationCriteria\", evaluationCriteria.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"prerequisiteTargets\", prerequisiteTargets.map(function (prim) {\n      return prim;\n    })],\n    /* tuple */\n    [\"quiz\", quiz.map(json_of_TargetQuizInput)],\n    /* tuple */\n    [\"completionInstructions\", completionInstructions !== undefined ? completionInstructions : null],\n    /* tuple */\n    [\"linkToComplete\", linkToComplete !== undefined ? linkToComplete : null],\n    /* tuple */\n    [\"visibility\", visibility],\n    /* tuple */\n    [\"checklist\", checklist]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"targetGroupId\", targetGroupId],\n  /* tuple */\n  [\"title\", title],\n  /* tuple */\n  [\"role\", role],\n  /* tuple */\n  [\"evaluationCriteria\", evaluationCriteria.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"prerequisiteTargets\", prerequisiteTargets.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"quiz\", quiz.map(json_of_TargetQuizInput)],\n  /* tuple */\n  [\"completionInstructions\", completionInstructions !== undefined ? completionInstructions : null],\n  /* tuple */\n  [\"linkToComplete\", linkToComplete !== undefined ? linkToComplete : null],\n  /* tuple */\n  [\"visibility\", visibility],\n  /* tuple */\n  [\"checklist\", checklist]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"targetGroupId\", targetGroupId],\n  /* tuple */\n  [\"title\", title],\n  /* tuple */\n  [\"role\", role],\n  /* tuple */\n  [\"evaluationCriteria\", evaluationCriteria.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"prerequisiteTargets\", prerequisiteTargets.map(function (prim) {\n    return prim;\n  })],\n  /* tuple */\n  [\"quiz\", quiz.map(json_of_TargetQuizInput)],\n  /* tuple */\n  [\"completionInstructions\", completionInstructions !== undefined ? completionInstructions : null],\n  /* tuple */\n  [\"linkToComplete\", linkToComplete !== undefined ? linkToComplete : null],\n  /* tuple */\n  [\"visibility\", visibility],\n  /* tuple */\n  [\"checklist\", checklist]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar UpdateTargetQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  json_of_TargetQuizAnswerInput: json_of_TargetQuizAnswerInput,\n  json_of_TargetQuizInput: json_of_TargetQuizInput,\n  make: make$2,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction updateTarget(target, state, send, updateTargetCB, $$event) {\n  $$event.preventDefault();\n\n  Curry._1(send,\n  /* UpdateSaving */\n  2);\n\n  var id = CurriculumEditor__Target.id(target);\n  var sortIndex = CurriculumEditor__Target.sortIndex(target);\n  var role = CurriculumEditor__TargetDetails.roleAsString(state.role);\n  var visibilityAsString = CurriculumEditor__TargetDetails.visibilityAsString(state.visibility);\n  var quizAsJs = CurriculumEditor__QuizQuestion.quizAsJsObject(state.quiz.filter(CurriculumEditor__QuizQuestion.isValidQuizQuestion));\n  var match = state.methodOfCompletion;\n  var match$1;\n\n  switch (match) {\n    case\n    /* Evaluated */\n    0:\n      match$1 =\n      /* tuple */\n      [[], state.evaluationCriteria, \"\", state.checklist];\n      break;\n\n    case\n    /* VisitLink */\n    1:\n      match$1 =\n      /* tuple */\n      [[], [], state.linkToComplete, []];\n      break;\n\n    case\n    /* TakeQuiz */\n    2:\n      match$1 =\n      /* tuple */\n      [quizAsJs, [], \"\", []];\n      break;\n\n    case\n    /* MarkAsComplete */\n    3:\n      match$1 =\n      /* tuple */\n      [[], [], \"\", []];\n      break;\n  }\n\n  var match$2 = state.visibility;\n  var newTarget = CurriculumEditor__Target.create(id, state.targetGroupId, state.title, sortIndex, match$2);\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make$2(id, state.targetGroupId, state.title, role, match$1[1], state.prerequisiteTargets, match$1[0], state.completionInstructions, match$1[2], visibilityAsString, TargetChecklistItem.encodeChecklist(match$1[3]),\n  /* () */\n  0)).then(function (result) {\n    if (result.updateTarget.success) {\n      Curry._1(send,\n      /* ResetEditor */\n      3);\n\n      Curry._1(updateTargetCB, newTarget);\n    } else {\n      Curry._1(send,\n      /* UpdateSaving */\n      2);\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction CurriculumEditor__TargetDetailsEditor(Props) {\n  var target = Props.target;\n  var targets = Props.targets;\n  var targetGroups = Props.targetGroups;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var updateTargetCB = Props.updateTargetCB;\n  var setDirtyCB = Props.setDirtyCB;\n  var match = React.useReducer(reducer, {\n    title: \"\",\n    targetGroupId: \"\",\n    role:\n    /* Student */\n    0,\n    evaluationCriteria: [],\n    prerequisiteTargets: [],\n    prerequisiteSearchInput: \"\",\n    evaluationCriteriaSearchInput: \"\",\n    methodOfCompletion:\n    /* Evaluated */\n    0,\n    quiz: [],\n    linkToComplete: \"\",\n    dirty: false,\n    saving: false,\n    loading: true,\n    visibility:\n    /* Draft */\n    0,\n    checklist: [],\n    completionInstructions: \"\"\n  });\n  var send = match[1];\n  var state = match[0];\n  var targetId = CurriculumEditor__Target.id(target);\n  React.useEffect(function () {\n    loadTargetDetails(targetId, send);\n    return;\n  }, [targetId]);\n  React.useEffect(function () {\n    Curry._1(setDirtyCB, state.dirty);\n\n    return;\n  }, [state.dirty]);\n  var requiredStepsHaveUniqueTitles = doRequiredStepsHaveUniqueTitles(state.checklist);\n  var hasValidTitle = isValidTitle(state.title);\n  var hasValidMethodOfCompletion = isValidMethodOfCompletion(state);\n  var tmp;\n\n  if (state.loading) {\n    tmp = React.createElement(\"div\", {\n      className: \"max-w-3xl mx-auto px-3\"\n    }, SkeletonLoading.multiple(2, SkeletonLoading.contents(\n    /* () */\n    0)));\n  } else {\n    var match$1 = state.methodOfCompletion;\n    var tmp$1;\n\n    if (match$1 !== 0) {\n      tmp$1 = null;\n    } else {\n      var allowFileKind = ArrayUtils.isEmpty(state.checklist.filter(TargetChecklistItem.isFilesKind));\n      tmp$1 = React.createElement(\"div\", {\n        className: \"mb-6\"\n      }, React.createElement(\"label\", {\n        className: \"tracking-wide text-sm font-semibold\",\n        htmlFor: \"target_checklist\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"What steps should the student take to complete this target?\"), React.createElement(HelpIcon.make, {\n        className: \"ml-1\",\n        link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=defining-steps-to-complete-a-target\",\n        children: \"These are the steps that a student must complete to submit work on a target. This information will be shown to the coach for review.\"\n      }), React.createElement(\"div\", {\n        className: \"ml-6 mb-6\"\n      }, $$Array.mapi(function (index, checklistItem) {\n        var moveChecklistItemUpCB = index > 0 ? function (param) {\n          return Curry._1(send,\n          /* MoveChecklistItemUp */\n          Block.__(15, [index]));\n        } : undefined;\n        var moveChecklistItemDownCB = index !== (state.checklist.length - 1 | 0) ? function (param) {\n          return Curry._1(send,\n          /* MoveChecklistItemDown */\n          Block.__(16, [index]));\n        } : undefined;\n        var tmp = {\n          checklist: state.checklist,\n          checklistItem: checklistItem,\n          index: index,\n          updateChecklistItemCB: function updateChecklistItemCB(newChecklistItem) {\n            return Curry._1(send,\n            /* UpdateChecklistItem */\n            Block.__(13, [index, newChecklistItem]));\n          },\n          removeChecklistItemCB: function removeChecklistItemCB(param) {\n            return Curry._1(send,\n            /* RemoveChecklistItem */\n            Block.__(14, [index]));\n          },\n          copyChecklistItemCB: function copyChecklistItemCB(param) {\n            return Curry._1(send,\n            /* CopyChecklistItem */\n            Block.__(17, [index]));\n          },\n          allowFileKind: allowFileKind,\n          key: String(index)\n        };\n\n        if (moveChecklistItemUpCB !== undefined) {\n          tmp.moveChecklistItemUpCB = Caml_option.valFromOption(moveChecklistItemUpCB);\n        }\n\n        if (moveChecklistItemDownCB !== undefined) {\n          tmp.moveChecklistItemDownCB = Caml_option.valFromOption(moveChecklistItemDownCB);\n        }\n\n        return React.createElement(CurriculumEditor__TargetChecklistItemEditor.make, tmp);\n      }, state.checklist), ArrayUtils.isEmpty(state.checklist) ? React.createElement(\"div\", {\n        className: \"border border-orange-500 bg-orange-100 text-orange-800 px-2 py-1 rounded my-2 text-sm text-center\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-info-circle mr-2\"\n      }), \"This target has no steps. Students will be able to submit target without any action!\") : null, state.checklist.length >= 15 ? React.createElement(\"div\", {\n        className: \"border border-orange-500 bg-orange-100 text-orange-800 px-2 py-1 rounded my-2 text-sm text-center\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-info-circle mr-2\"\n      }), \"Maximum allowed checklist items is 15!\") : null, React.createElement(\"button\", {\n        className: \"flex justify-center items-center w-full rounded-lg border border-dashed border-primary-500 mt-2 p-2 text-sm text-primary-500 focus:outline-none hover:shadow-lg\",\n        disabled: state.checklist.length >= 15,\n        onClick: function onClick(param) {\n          return Curry._1(send,\n          /* AddNewChecklistItem */\n          1);\n        }\n      }, React.createElement(PfIcon.make, {\n        className: \"fas fa-plus-circle text-lg\"\n      }), React.createElement(\"span\", {\n        className: \"font-semibold ml-2\"\n      }, \"Add a Step\"))));\n    }\n\n    var match$2 = state.methodOfCompletion;\n    var tmp$2;\n\n    switch (match$2) {\n      case\n      /* Evaluated */\n      0:\n        tmp$2 = evaluationCriteriaEditor(state, $$Array.of_list(evaluationCriteria), send);\n        break;\n\n      case\n      /* VisitLink */\n      1:\n        tmp$2 = linkEditor(state, send);\n        break;\n\n      case\n      /* TakeQuiz */\n      2:\n        tmp$2 = quizEditor(state, send);\n        break;\n\n      case\n      /* MarkAsComplete */\n      3:\n        tmp$2 = null;\n        break;\n    }\n\n    var match$3 = state.role;\n    var match$4 = state.role;\n    tmp = React.createElement(DisablingCover.make, {\n      disabled: state.saving,\n      message: \"Saving...\",\n      children: React.createElement(\"div\", {\n        className: \"mt-2\"\n      }, React.createElement(\"div\", {\n        className: \"max-w-3xl mx-auto px-3\"\n      }, React.createElement(\"div\", {\n        className: \"mb-6\"\n      }, React.createElement(\"label\", {\n        className: \"flex items-center inline-block tracking-wide text-sm font-semibold mb-2\",\n        htmlFor: \"title\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"Title\"), React.createElement(\"div\", {\n        className: \"ml-6\"\n      }, React.createElement(\"input\", {\n        className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n        id: \"title\",\n        placeholder: \"Type target title here\",\n        type: \"text\",\n        value: state.title,\n        onChange: function onChange(param) {\n          return updateTitle(send, param);\n        }\n      }), React.createElement(School__InputGroupError.make, {\n        message: \"Enter a valid title\",\n        active: !hasValidTitle\n      }))), prerequisiteTargetEditor(send, eligiblePrerequisiteTargets(targetId, targets, targetGroups), state), React.createElement(\"div\", {\n        className: \"flex items-center mb-6\"\n      }, React.createElement(\"label\", {\n        className: \"block tracking-wide text-sm font-semibold mr-6\",\n        htmlFor: \"evaluated\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"Will a coach review submissions on this target?\"), React.createElement(\"div\", {\n        className: \"flex toggle-button__group flex-shrink-0 rounded-lg overflow-hidden\",\n        id: \"evaluated\"\n      }, React.createElement(\"button\", {\n        className: booleanButtonClasses(state.methodOfCompletion === 0),\n        onClick: function onClick(param) {\n          return updateMethodOfCompletion(\n          /* Evaluated */\n          0, send, param);\n        }\n      }, \"Yes\"), React.createElement(\"button\", {\n        className: booleanButtonClasses(state.methodOfCompletion !== 0),\n        onClick: function onClick(param) {\n          return updateMethodOfCompletion(\n          /* MarkAsComplete */\n          3, send, param);\n        }\n      }, \"No\"))), tmp$1, state.methodOfCompletion === 0 ? null : methodOfCompletionSelector(state, send), tmp$2, React.createElement(\"div\", {\n        className: \"mb-6\"\n      }, React.createElement(\"label\", {\n        className: \"inline-block tracking-wide text-sm font-semibold\",\n        htmlFor: \"role\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"How should teams tackle this target?\"), React.createElement(HelpIcon.make, {\n        className: \"ml-1\",\n        link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=setting-the-method-of-completion\",\n        children: \"Should students in a team submit work on a target individually, or together?\"\n      }), React.createElement(\"div\", {\n        className: \"flex mt-4 ml-6\",\n        id: \"role\"\n      }, React.createElement(\"button\", {\n        className: \"mr-4 \" + targetRoleClasses(match$3 ? false : true),\n        onClick: function onClick(param) {\n          return updateTargetRole(\n          /* Student */\n          0, send, param);\n        }\n      }, React.createElement(\"span\", {\n        className: \"mr-4\"\n      }, React.createElement(Icon.make, {\n        className: \"if i-users-check-light text-3xl\"\n      })), React.createElement(\"span\", {\n        className: \"text-sm\"\n      }, \"All users must submit individually.\")), React.createElement(\"button\", {\n        className: targetRoleClasses(match$4 ? true : false),\n        onClick: function onClick(param) {\n          return updateTargetRole(\n          /* Team */\n          1, send, param);\n        }\n      }, React.createElement(\"span\", {\n        className: \"mr-4\"\n      }, React.createElement(Icon.make, {\n        className: \"if i-user-check-light text-2xl\"\n      })), React.createElement(\"span\", {\n        className: \"text-sm\"\n      }, \"Only one user in a team\", React.createElement(\"br\", undefined), \" needs to submit.\")))), React.createElement(\"div\", {\n        className: \"mb-6\"\n      }, React.createElement(\"label\", {\n        className: \"tracking-wide text-sm font-semibold\",\n        htmlFor: \"completion-instructions\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"Do you have any completion instructions for the user?\", React.createElement(\"span\", {\n        className: \"ml-1 text-xs font-normal\"\n      }, \"(optional)\")), React.createElement(HelpIcon.make, {\n        className: \"ml-1\",\n        link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=setting-the-method-of-completion\",\n        children: \"Use this to remind the student about something important. These instructions will be displayed close to where students complete the target.\"\n      }), React.createElement(\"div\", {\n        className: \"ml-6\"\n      }, React.createElement(\"input\", {\n        className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n        id: \"completion-instructions\",\n        maxLength: 255,\n        type: \"text\",\n        value: state.completionInstructions,\n        onChange: function onChange(param) {\n          return updateCompletionInstructions(send, param);\n        }\n      })))), React.createElement(\"div\", {\n        className: \"bg-white border-t sticky bottom-0 py-5\"\n      }, React.createElement(\"div\", {\n        className: \"flex max-w-3xl mx-auto px-3 justify-between items-center\"\n      }, React.createElement(\"div\", {\n        className: \"flex items-center flex-shrink-0\"\n      }, React.createElement(\"label\", {\n        className: \"block tracking-wide text-sm font-semibold mr-3\",\n        htmlFor: \"archived\"\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list text-base\"\n      })), \"Target Visibility\"), React.createElement(\"div\", {\n        className: \"flex toggle-button__group flex-shrink-0 rounded-lg overflow-hidden\",\n        id: \"visibility\"\n      }, $$Array.mapi(function (index, visibility) {\n        var match = state.visibility;\n        var tmp;\n\n        switch (match) {\n          case\n          /* Draft */\n          0:\n            tmp = visibility === 0;\n            break;\n\n          case\n          /* Live */\n          1:\n            tmp = visibility === 1;\n            break;\n\n          case\n          /* Archived */\n          2:\n            tmp = visibility >= 2;\n            break;\n        }\n\n        var tmp$1;\n\n        switch (visibility) {\n          case\n          /* Draft */\n          0:\n            tmp$1 = \"Draft\";\n            break;\n\n          case\n          /* Live */\n          1:\n            tmp$1 = \"Live\";\n            break;\n\n          case\n          /* Archived */\n          2:\n            tmp$1 = \"Archived\";\n            break;\n        }\n\n        return React.createElement(\"button\", {\n          key: String(index),\n          className: booleanButtonClasses(tmp),\n          onClick: function onClick(param) {\n            return updateVisibility(visibility, send, param);\n          }\n        }, tmp$1);\n      }, [\n      /* Live */\n      1,\n      /* Archived */\n      2,\n      /* Draft */\n      0]))), React.createElement(\"div\", {\n        className: \"w-auto\"\n      }, React.createElement(\"button\", {\n        key: \"target-actions-step\",\n        className: \"btn btn-primary w-full text-white font-bold py-3 px-6 shadow rounded focus:outline-none\",\n        disabled: saveDisabled(hasValidTitle, hasValidMethodOfCompletion, requiredStepsHaveUniqueTitles, state.dirty, state.saving),\n        onClick: function onClick(param) {\n          return updateTarget(target, state, send, updateTargetCB, param);\n        }\n      }, \"Update Target\")))))\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"pt-6\",\n    id: \"target-properties\"\n  }, tmp);\n}\n\nvar make$3 = CurriculumEditor__TargetDetailsEditor;\nexports.markIcon = markIcon;\nexports.linkIcon = linkIcon;\nexports.quizIcon = quizIcon;\nexports.str = str;\nexports.TargetDetailsQuery = TargetDetailsQuery;\nexports.loadTargetDetails = loadTargetDetails;\nexports.defaultChecklist = defaultChecklist;\nexports.computeMethodOfCompletion = computeMethodOfCompletion;\nexports.reducer = reducer;\nexports.updateTitle = updateTitle;\nexports.eligiblePrerequisiteTargets = eligiblePrerequisiteTargets;\nexports.setPrerequisiteSearch = setPrerequisiteSearch;\nexports.selectPrerequisiteTarget = selectPrerequisiteTarget;\nexports.deSelectPrerequisiteTarget = deSelectPrerequisiteTarget;\nexports.SelectablePrerequisiteTargets = SelectablePrerequisiteTargets;\nexports.MultiSelectForPrerequisiteTargets = MultiSelectForPrerequisiteTargets;\nexports.prerequisiteTargetEditor = prerequisiteTargetEditor;\nexports.booleanButtonClasses = booleanButtonClasses;\nexports.targetRoleClasses = targetRoleClasses;\nexports.targetEvaluated = targetEvaluated;\nexports.validNumberOfEvaluationCriteria = validNumberOfEvaluationCriteria;\nexports.setEvaluationCriteriaSearch = setEvaluationCriteriaSearch;\nexports.selectEvaluationCriterion = selectEvaluationCriterion;\nexports.deSelectEvaluationCriterion = deSelectEvaluationCriterion;\nexports.SelectableEvaluationCriteria = SelectableEvaluationCriteria;\nexports.MultiSelectForEvaluationCriteria = MultiSelectForEvaluationCriteria;\nexports.evaluationCriteriaEditor = evaluationCriteriaEditor;\nexports.updateLinkToComplete = updateLinkToComplete;\nexports.updateCompletionInstructions = updateCompletionInstructions;\nexports.updateMethodOfCompletion = updateMethodOfCompletion;\nexports.updateTargetRole = updateTargetRole;\nexports.updateVisibility = updateVisibility;\nexports.linkEditor = linkEditor;\nexports.methodOfCompletionButtonClasses = methodOfCompletionButtonClasses;\nexports.methodOfCompletionSelection = methodOfCompletionSelection;\nexports.methodOfCompletionButton = methodOfCompletionButton;\nexports.methodOfCompletionSelector = methodOfCompletionSelector;\nexports.isValidQuiz = isValidQuiz;\nexports.isValidChecklist = isValidChecklist;\nexports.addQuizQuestion = addQuizQuestion;\nexports.updateQuizQuestionCB = updateQuizQuestionCB;\nexports.removeQuizQuestionCB = removeQuizQuestionCB;\nexports.questionCanBeRemoved = questionCanBeRemoved;\nexports.quizEditor = quizEditor;\nexports.doRequiredStepsHaveUniqueTitles = doRequiredStepsHaveUniqueTitles;\nexports.isValidTitle = isValidTitle;\nexports.isValidMethodOfCompletion = isValidMethodOfCompletion;\nexports.saveDisabled = saveDisabled;\nexports.UpdateTargetQuery = UpdateTargetQuery;\nexports.updateTarget = updateTarget;\nexports.make = make$3;\n/* markIcon Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/curriculum_editor/CurriculumEditor__TargetDetailsEditor.bs.js"],"names":["Icon","require","List","$$Array","Block","Curry","React","Js_exn","PfIcon","$$String","Js_dict","Js_json","HelpIcon","UrlUtils","Js_option","ListUtils","ArrayUtils","Caml_option","GraphqlQuery","DisablingCover","SkeletonLoading","MultiselectInline","TargetChecklistItem","School__InputGroupError","CurriculumEditor__Target","CurriculumEditor__TargetGroup","CurriculumEditor__QuizQuestion","CurriculumEditor__TargetDetails","CurriculumEditor__EvaluationCriteria","CurriculumEditor__TargetQuizQuestion","TargetCompleteLinkIconSvg","TargetCompleteMarkIconSvg","TargetCompleteQuizIconSvg","CurriculumEditor__TargetChecklistItemEditor","markIcon","linkIcon","quizIcon","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeString","raiseError","JSON","stringify","match$3","tmp$2","value$4","match$4","match$5","match$6","match$7","match$8","tmp$3","value$5","match$9","decodeNull","match$10","match$11","tmp$4","value$6","match$12","match$13","tmp$5","value$7","match$14","match$15","match$16","tmp$6","value$8","match$17","match$18","title","targetGroupId","evaluationCriteria","decodeArray","map","prerequisiteTargets","quiz","id","question","answerOptions","decodeBoolean","answer","hint","correctAnswer","completionInstructions","visibility","linkToComplete","role","checklist","targetDetails","make","targetId","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","TargetDetailsQuery","loadTargetDetails","send","eta","sendQuery","then","result","makeFromJs","__","Promise","resolve","defaultChecklist","computeMethodOfCompletion","hasQuiz","isNotEmpty","hasEvaluationCriteria","hasLinkToComplete","reducer","state","action","append","empty","Date","now","toString","prerequisiteSearchInput","evaluationCriteriaSearchInput","methodOfCompletion","dirty","saving","loading","longText","tag","quiz$1","quizQuestion","quiz$2","q","id$1","quiz$3","newItem","indexToChange","mapi","index","checklistItem","removeItem","moveUp","moveDown","copy","updateTitle","$$event","target","eligiblePrerequisiteTargets","targets","targetGroups","unsafeFind","targetGroup","tg","of_list","levelId","targetGroupsInSameLevel","mem","archived","setPrerequisiteSearch","selectPrerequisiteTarget","updatedPrerequisites","concat","deSelectPrerequisiteTarget","SelectablePrerequisiteTargets","searchString","MultiSelectForPrerequisiteTargets","Make","prerequisiteTargetEditor","selected","unselected","createElement","className","htmlFor","placeholder","onChange","onSelect","onDeselect","emptySelectionMessage","allItemsSelectedMessage","booleanButtonClasses","bool","targetRoleClasses","targetEvaluated","validNumberOfEvaluationCriteria","setEvaluationCriteriaSearch","selectEvaluationCriterion","evaluationCriterion","updatedEvaluationCriteria","deSelectEvaluationCriterion","ecId","name","make$1","SelectableEvaluationCriteria","MultiSelectForEvaluationCriteria","evaluationCriteriaEditor","ec","updateLinkToComplete","updateCompletionInstructions","updateMethodOfCompletion","preventDefault","updateTargetRole","updateVisibility","linkEditor","type","isInvalid","message","active","methodOfCompletionButtonClasses","methodOfCompletionSelection","polyMethodOfCompletion","methodOfCompletionButton","buttonString","icon","partial_arg","key","String","onClick","src","methodOfCompletionSelector","isValidQuiz","isEmpty","isValidQuizQuestion","isValidChecklist","isValidChecklistItem","addQuizQuestion","updateQuizQuestionCB","removeQuizQuestionCB","questionCanBeRemoved","length","quizEditor","questionNumber","param$1","doRequiredStepsHaveUniqueTitles","requiredSteps","item","optional","distinct","trim","isValidTitle","isValidMethodOfCompletion","saveDisabled","hasValidTitle","hasValidMethodOfCompletion","requiredStepsHaveUniqueTitles","ppx_printed_query$1","parse$1","success","updateTarget","json_of_TargetQuizAnswerInput","json_of_TargetQuizInput","v","make$2","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","UpdateTargetQuery","updateTargetCB","sortIndex","roleAsString","visibilityAsString","quizAsJs","quizAsJsObject","newTarget","create","encodeChecklist","CurriculumEditor__TargetDetailsEditor","Props","setDirtyCB","useReducer","useEffect","multiple","contents","allowFileKind","isFilesKind","link","children","moveChecklistItemUpCB","moveChecklistItemDownCB","updateChecklistItemCB","newChecklistItem","removeChecklistItemCB","copyChecklistItemCB","disabled","maxLength","make$3","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Icon = require(\"../../../../shared/Icon.bs.js\");\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar PfIcon = require(\"../../../../packages/pf-icon/src/PfIcon.bs.js\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar HelpIcon = require(\"../../../../shared/components/HelpIcon.bs.js\");\nvar UrlUtils = require(\"../../../../shared/utils/UrlUtils.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ListUtils = require(\"../../../../shared/utils/ListUtils.bs.js\");\nvar ArrayUtils = require(\"../../../../shared/utils/ArrayUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../../shared/utils/GraphqlQuery.bs.js\");\nvar DisablingCover = require(\"../../../../shared/components/DisablingCover.bs.js\");\nvar SkeletonLoading = require(\"../../../../shared/components/SkeletonLoading.bs.js\");\nvar MultiselectInline = require(\"../../../../packages/multiselect-inline/src/components/MultiselectInline.bs.js\");\nvar TargetChecklistItem = require(\"../../types/curriculum_editor/TargetChecklistItem.bs.js\");\nvar School__InputGroupError = require(\"../../../shared/components/School__InputGroupError.bs.js\");\nvar CurriculumEditor__Target = require(\"../../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\nvar CurriculumEditor__TargetGroup = require(\"../../types/curriculum_editor/CurriculumEditor__TargetGroup.bs.js\");\nvar CurriculumEditor__QuizQuestion = require(\"../../types/curriculum_editor/CurriculumEditor__QuizQuestion.bs.js\");\nvar CurriculumEditor__TargetDetails = require(\"../../types/curriculum_editor/CurriculumEditor__TargetDetails.bs.js\");\nvar CurriculumEditor__EvaluationCriteria = require(\"../../types/curriculum_editor/CurriculumEditor__EvaluationCriteria.bs.js\");\nvar CurriculumEditor__TargetQuizQuestion = require(\"./CurriculumEditor__TargetQuizQuestion.bs.js\");\nvar TargetCompleteLinkIconSvg = require(\"./images/target-complete-link-icon.svg\");\nvar TargetCompleteMarkIconSvg = require(\"./images/target-complete-mark-icon.svg\");\nvar TargetCompleteQuizIconSvg = require(\"./images/target-complete-quiz-icon.svg\");\nvar CurriculumEditor__TargetChecklistItemEditor = require(\"./CurriculumEditor__TargetChecklistItemEditor.bs.js\");\n\nvar markIcon = TargetCompleteMarkIconSvg.default;\n\nvar linkIcon = TargetCompleteLinkIconSvg.default;\n\nvar quizIcon = TargetCompleteQuizIconSvg.default;\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"query TargetDetailsQuery($targetId: ID!)  {\\ntargetDetails(targetId: $targetId)  {\\ntitle  \\ntargetGroupId  \\nevaluationCriteria  \\nprerequisiteTargets  \\nquiz  {\\nid  \\nquestion  \\nanswerOptions  {\\nid  \\nanswer  \\nhint  \\ncorrectAnswer  \\n}\\n\\n}\\n\\ncompletionInstructions  \\nvisibility  \\nlinkToComplete  \\nrole  \\nchecklist  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"targetDetails\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"title\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeString(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field title on type TargetDetails is missing\");\n    }\n    var match$3 = Js_dict.get(value$2, \"targetGroupId\");\n    var tmp$2;\n    if (match$3 !== undefined) {\n      var value$4 = Caml_option.valFromOption(match$3);\n      var match$4 = Js_json.decodeString(value$4);\n      tmp$2 = match$4 !== undefined ? match$4 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n    } else {\n      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field targetGroupId on type TargetDetails is missing\");\n    }\n    var match$5 = Js_dict.get(value$2, \"evaluationCriteria\");\n    var match$6 = Js_dict.get(value$2, \"prerequisiteTargets\");\n    var match$7 = Js_dict.get(value$2, \"quiz\");\n    var match$8 = Js_dict.get(value$2, \"completionInstructions\");\n    var tmp$3;\n    if (match$8 !== undefined) {\n      var value$5 = Caml_option.valFromOption(match$8);\n      var match$9 = Js_json.decodeNull(value$5);\n      if (match$9 !== undefined) {\n        tmp$3 = undefined;\n      } else {\n        var match$10 = Js_json.decodeString(value$5);\n        tmp$3 = match$10 !== undefined ? match$10 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$5));\n      }\n    } else {\n      tmp$3 = undefined;\n    }\n    var match$11 = Js_dict.get(value$2, \"visibility\");\n    var tmp$4;\n    if (match$11 !== undefined) {\n      var value$6 = Caml_option.valFromOption(match$11);\n      var match$12 = Js_json.decodeString(value$6);\n      tmp$4 = match$12 !== undefined ? match$12 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$6));\n    } else {\n      tmp$4 = Js_exn.raiseError(\"graphql_ppx: Field visibility on type TargetDetails is missing\");\n    }\n    var match$13 = Js_dict.get(value$2, \"linkToComplete\");\n    var tmp$5;\n    if (match$13 !== undefined) {\n      var value$7 = Caml_option.valFromOption(match$13);\n      var match$14 = Js_json.decodeNull(value$7);\n      if (match$14 !== undefined) {\n        tmp$5 = undefined;\n      } else {\n        var match$15 = Js_json.decodeString(value$7);\n        tmp$5 = match$15 !== undefined ? match$15 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$7));\n      }\n    } else {\n      tmp$5 = undefined;\n    }\n    var match$16 = Js_dict.get(value$2, \"role\");\n    var tmp$6;\n    if (match$16 !== undefined) {\n      var value$8 = Caml_option.valFromOption(match$16);\n      var match$17 = Js_json.decodeString(value$8);\n      tmp$6 = match$17 !== undefined ? match$17 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$8));\n    } else {\n      tmp$6 = Js_exn.raiseError(\"graphql_ppx: Field role on type TargetDetails is missing\");\n    }\n    var match$18 = Js_dict.get(value$2, \"checklist\");\n    tmp = {\n      title: tmp$1,\n      targetGroupId: tmp$2,\n      evaluationCriteria: match$5 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$5))).map((function (value) {\n                var match = Js_json.decodeString(value);\n                if (match !== undefined) {\n                  return match;\n                } else {\n                  return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n                }\n              })) : Js_exn.raiseError(\"graphql_ppx: Field evaluationCriteria on type TargetDetails is missing\"),\n      prerequisiteTargets: match$6 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$6))).map((function (value) {\n                var match = Js_json.decodeString(value);\n                if (match !== undefined) {\n                  return match;\n                } else {\n                  return Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value));\n                }\n              })) : Js_exn.raiseError(\"graphql_ppx: Field prerequisiteTargets on type TargetDetails is missing\"),\n      quiz: match$7 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$7))).map((function (value) {\n                var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n                var match = Js_dict.get(value$1, \"id\");\n                var tmp;\n                if (match !== undefined) {\n                  var value$2 = Caml_option.valFromOption(match);\n                  var match$1 = Js_json.decodeString(value$2);\n                  tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n                } else {\n                  tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type TargetQuiz is missing\");\n                }\n                var match$2 = Js_dict.get(value$1, \"question\");\n                var tmp$1;\n                if (match$2 !== undefined) {\n                  var value$3 = Caml_option.valFromOption(match$2);\n                  var match$3 = Js_json.decodeString(value$3);\n                  tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n                } else {\n                  tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field question on type TargetQuiz is missing\");\n                }\n                var match$4 = Js_dict.get(value$1, \"answerOptions\");\n                return {\n                        id: tmp,\n                        question: tmp$1,\n                        answerOptions: match$4 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$4))).map((function (value) {\n                                  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n                                  var match = Js_dict.get(value$1, \"id\");\n                                  var tmp;\n                                  if (match !== undefined) {\n                                    var value$2 = Caml_option.valFromOption(match);\n                                    var match$1 = Js_json.decodeString(value$2);\n                                    tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n                                  } else {\n                                    tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type TargetQuizAnswer is missing\");\n                                  }\n                                  var match$2 = Js_dict.get(value$1, \"answer\");\n                                  var tmp$1;\n                                  if (match$2 !== undefined) {\n                                    var value$3 = Caml_option.valFromOption(match$2);\n                                    var match$3 = Js_json.decodeString(value$3);\n                                    tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n                                  } else {\n                                    tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field answer on type TargetQuizAnswer is missing\");\n                                  }\n                                  var match$4 = Js_dict.get(value$1, \"hint\");\n                                  var tmp$2;\n                                  if (match$4 !== undefined) {\n                                    var value$4 = Caml_option.valFromOption(match$4);\n                                    var match$5 = Js_json.decodeNull(value$4);\n                                    if (match$5 !== undefined) {\n                                      tmp$2 = undefined;\n                                    } else {\n                                      var match$6 = Js_json.decodeString(value$4);\n                                      tmp$2 = match$6 !== undefined ? match$6 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$4));\n                                    }\n                                  } else {\n                                    tmp$2 = undefined;\n                                  }\n                                  var match$7 = Js_dict.get(value$1, \"correctAnswer\");\n                                  var tmp$3;\n                                  if (match$7 !== undefined) {\n                                    var value$5 = Caml_option.valFromOption(match$7);\n                                    var match$8 = Js_json.decodeBoolean(value$5);\n                                    tmp$3 = match$8 !== undefined ? match$8 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$5));\n                                  } else {\n                                    tmp$3 = Js_exn.raiseError(\"graphql_ppx: Field correctAnswer on type TargetQuizAnswer is missing\");\n                                  }\n                                  return {\n                                          id: tmp,\n                                          answer: tmp$1,\n                                          hint: tmp$2,\n                                          correctAnswer: tmp$3\n                                        };\n                                })) : Js_exn.raiseError(\"graphql_ppx: Field answerOptions on type TargetQuiz is missing\")\n                      };\n              })) : Js_exn.raiseError(\"graphql_ppx: Field quiz on type TargetDetails is missing\"),\n      completionInstructions: tmp$3,\n      visibility: tmp$4,\n      linkToComplete: tmp$5,\n      role: tmp$6,\n      checklist: match$18 !== undefined ? Caml_option.valFromOption(match$18) : Js_exn.raiseError(\"graphql_ppx: Field checklist on type TargetDetails is missing\")\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field targetDetails on type Query is missing\");\n  }\n  return {\n          targetDetails: tmp\n        };\n}\n\nfunction make(targetId, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"targetId\",\n                    targetId\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var targetId = variables.targetId;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"targetId\",\n                    targetId\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(targetId, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"targetId\",\n                  targetId\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, targetId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"targetId\",\n                      targetId\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar TargetDetailsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction loadTargetDetails(targetId, send) {\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make(targetId, /* () */0)).then((function (result) {\n          var targetDetails = CurriculumEditor__TargetDetails.makeFromJs(result.targetDetails);\n          Curry._1(send, /* SaveTargetDetails */Block.__(0, [targetDetails]));\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nvar defaultChecklist = [TargetChecklistItem.make(\"Describe your submission\", /* LongText */3, false)];\n\nfunction computeMethodOfCompletion(targetDetails) {\n  var hasQuiz = ArrayUtils.isNotEmpty(CurriculumEditor__TargetDetails.quiz(targetDetails));\n  var hasEvaluationCriteria = ArrayUtils.isNotEmpty(targetDetails.evaluationCriteria);\n  var match = targetDetails.linkToComplete;\n  var hasLinkToComplete = match !== undefined;\n  if (hasEvaluationCriteria) {\n    return /* Evaluated */0;\n  } else if (hasQuiz) {\n    return /* TakeQuiz */2;\n  } else if (hasLinkToComplete) {\n    return /* VisitLink */1;\n  } else {\n    return /* MarkAsComplete */3;\n  }\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* AddQuizQuestion */0 :\n          var quiz = $$Array.append(state.quiz, [CurriculumEditor__QuizQuestion.empty(Date.now().toString())]);\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* AddNewChecklistItem */1 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: $$Array.append(state.checklist, [TargetChecklistItem.longText]),\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateSaving */2 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: state.dirty,\n                  saving: !state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* ResetEditor */3 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: false,\n                  saving: false,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      \n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* SaveTargetDetails */0 :\n          var targetDetails = action[0];\n          var methodOfCompletion = computeMethodOfCompletion(targetDetails);\n          var checklist = ArrayUtils.isNotEmpty(targetDetails.checklist) ? targetDetails.checklist : defaultChecklist;\n          var quiz$1 = ArrayUtils.isNotEmpty(targetDetails.quiz) ? targetDetails.quiz : [CurriculumEditor__QuizQuestion.empty(\"0\")];\n          var match = targetDetails.linkToComplete;\n          var match$1 = targetDetails.completionInstructions;\n          return {\n                  title: targetDetails.title,\n                  targetGroupId: targetDetails.targetGroupId,\n                  role: targetDetails.role,\n                  evaluationCriteria: targetDetails.evaluationCriteria,\n                  prerequisiteTargets: targetDetails.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: methodOfCompletion,\n                  quiz: quiz$1,\n                  linkToComplete: match !== undefined ? match : \"\",\n                  dirty: state.dirty,\n                  saving: state.saving,\n                  loading: false,\n                  visibility: targetDetails.visibility,\n                  checklist: checklist,\n                  completionInstructions: match$1 !== undefined ? match$1 : \"\"\n                };\n      case /* UpdateTitle */1 :\n          return {\n                  title: action[0],\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdatePrerequisiteTargets */2 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: action[0],\n                  prerequisiteSearchInput: \"\",\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateMethodOfCompletion */3 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: action[0],\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateEvaluationCriteria */4 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: action[0],\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: \"\",\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdatePrerequisiteSearchInput */5 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: action[0],\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: state.dirty,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateEvaluationCriteriaSearchInput */6 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: action[0],\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: state.dirty,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateLinkToComplete */7 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: action[0],\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateCompletionInstructions */8 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: action[0]\n                };\n      case /* UpdateTargetRole */9 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: action[0],\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateQuizQuestion */10 :\n          var quizQuestion = action[1];\n          var id = action[0];\n          var quiz$2 = $$Array.map((function (q) {\n                  if (CurriculumEditor__QuizQuestion.id(q) === id) {\n                    return quizQuestion;\n                  } else {\n                    return q;\n                  }\n                }), state.quiz);\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: quiz$2,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* RemoveQuizQuestion */11 :\n          var id$1 = action[0];\n          var quiz$3 = state.quiz.filter((function (q) {\n                  return CurriculumEditor__QuizQuestion.id(q) !== id$1;\n                }));\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: quiz$3,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateVisibility */12 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: action[0],\n                  checklist: state.checklist,\n                  completionInstructions: state.completionInstructions\n                };\n      case /* UpdateChecklistItem */13 :\n          var newItem = action[1];\n          var indexToChange = action[0];\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: $$Array.mapi((function (index, checklistItem) {\n                          if (index === indexToChange) {\n                            return newItem;\n                          } else {\n                            return checklistItem;\n                          }\n                        }), state.checklist),\n                  completionInstructions: state.completionInstructions\n                };\n      case /* RemoveChecklistItem */14 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: TargetChecklistItem.removeItem(action[0], state.checklist),\n                  completionInstructions: state.completionInstructions\n                };\n      case /* MoveChecklistItemUp */15 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: TargetChecklistItem.moveUp(action[0], state.checklist),\n                  completionInstructions: state.completionInstructions\n                };\n      case /* MoveChecklistItemDown */16 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: TargetChecklistItem.moveDown(action[0], state.checklist),\n                  completionInstructions: state.completionInstructions\n                };\n      case /* CopyChecklistItem */17 :\n          return {\n                  title: state.title,\n                  targetGroupId: state.targetGroupId,\n                  role: state.role,\n                  evaluationCriteria: state.evaluationCriteria,\n                  prerequisiteTargets: state.prerequisiteTargets,\n                  prerequisiteSearchInput: state.prerequisiteSearchInput,\n                  evaluationCriteriaSearchInput: state.evaluationCriteriaSearchInput,\n                  methodOfCompletion: state.methodOfCompletion,\n                  quiz: state.quiz,\n                  linkToComplete: state.linkToComplete,\n                  dirty: true,\n                  saving: state.saving,\n                  loading: state.loading,\n                  visibility: state.visibility,\n                  checklist: TargetChecklistItem.copy(action[0], state.checklist),\n                  completionInstructions: state.completionInstructions\n                };\n      \n    }\n  }\n}\n\nfunction updateTitle(send, $$event) {\n  var title = $$event.target.value;\n  return Curry._1(send, /* UpdateTitle */Block.__(1, [title]));\n}\n\nfunction eligiblePrerequisiteTargets(targetId, targets, targetGroups) {\n  var targetGroupId = CurriculumEditor__Target.targetGroupId(ListUtils.unsafeFind((function (target) {\n              return targetId === CurriculumEditor__Target.id(target);\n            }), \"Unable to find target with ID: \" + targetId, targets));\n  var targetGroup = ArrayUtils.unsafeFind((function (tg) {\n          return CurriculumEditor__TargetGroup.id(tg) === targetGroupId;\n        }), \"Cannot find target group with ID: \" + targetGroupId, $$Array.of_list(targetGroups));\n  var levelId = CurriculumEditor__TargetGroup.levelId(targetGroup);\n  var targetGroupsInSameLevel = List.map(CurriculumEditor__TargetGroup.id, List.filter((function (tg) {\n                return CurriculumEditor__TargetGroup.levelId(tg) === levelId;\n              }))(targetGroups));\n  return $$Array.of_list(List.filter((function (target) {\n                      return CurriculumEditor__Target.id(target) !== targetId;\n                    }))(List.filter((function (target) {\n                          return List.mem(CurriculumEditor__Target.targetGroupId(target), targetGroupsInSameLevel);\n                        }))(List.filter((function (target) {\n                              return !CurriculumEditor__Target.archived(target);\n                            }))(targets))));\n}\n\nfunction setPrerequisiteSearch(send, value) {\n  return Curry._1(send, /* UpdatePrerequisiteSearchInput */Block.__(5, [value]));\n}\n\nfunction selectPrerequisiteTarget(send, state, target) {\n  var updatedPrerequisites = state.prerequisiteTargets.concat([CurriculumEditor__Target.id(target)]);\n  return Curry._1(send, /* UpdatePrerequisiteTargets */Block.__(2, [updatedPrerequisites]));\n}\n\nfunction deSelectPrerequisiteTarget(send, state, target) {\n  var updatedPrerequisites = state.prerequisiteTargets.filter((function (targetId) {\n          return targetId !== CurriculumEditor__Target.id(target);\n        }));\n  return Curry._1(send, /* UpdatePrerequisiteTargets */Block.__(2, [updatedPrerequisites]));\n}\n\nvar value = CurriculumEditor__Target.title;\n\nvar SelectablePrerequisiteTargets = {\n  value: value,\n  searchString: value\n};\n\nvar MultiSelectForPrerequisiteTargets = MultiselectInline.Make(SelectablePrerequisiteTargets);\n\nfunction prerequisiteTargetEditor(send, eligiblePrerequisiteTargets, state) {\n  var selected = eligiblePrerequisiteTargets.filter((function (target) {\n          return $$Array.mem(CurriculumEditor__Target.id(target), state.prerequisiteTargets);\n        }));\n  var unselected = eligiblePrerequisiteTargets.filter((function (target) {\n          return !$$Array.mem(CurriculumEditor__Target.id(target), state.prerequisiteTargets);\n        }));\n  if (ArrayUtils.isNotEmpty(eligiblePrerequisiteTargets)) {\n    return React.createElement(\"div\", {\n                className: \"mb-6\"\n              }, React.createElement(\"label\", {\n                    className: \"block tracking-wide text-sm font-semibold mb-2\",\n                    htmlFor: \"prerequisite_targets\"\n                  }, React.createElement(\"span\", {\n                        className: \"mr-2\"\n                      }, React.createElement(\"i\", {\n                            className: \"fas fa-list text-base\"\n                          })), \"Are there any prerequisite targets?\"), React.createElement(\"div\", {\n                    className: \"mb-6 ml-6\",\n                    id: \"prerequisite_targets\"\n                  }, React.createElement(MultiSelectForPrerequisiteTargets.make, {\n                        placeholder: \"Search targets\",\n                        onChange: (function (param) {\n                            return Curry._1(send, /* UpdatePrerequisiteSearchInput */Block.__(5, [param]));\n                          }),\n                        value: state.prerequisiteSearchInput,\n                        unselected: unselected,\n                        selected: selected,\n                        onSelect: (function (param) {\n                            return selectPrerequisiteTarget(send, state, param);\n                          }),\n                        onDeselect: (function (param) {\n                            return deSelectPrerequisiteTarget(send, state, param);\n                          }),\n                        emptySelectionMessage: \"No targets selected\",\n                        allItemsSelectedMessage: \"You have selected all targets!\"\n                      })));\n  } else {\n    return null;\n  }\n}\n\nfunction booleanButtonClasses(bool) {\n  return \"toggle-button__button\" + (\n          bool ? \" toggle-button__button--active\" : \"\"\n        );\n}\n\nfunction targetRoleClasses(selected) {\n  return \"w-1/2 target-editor__completion-button relative flex border text-sm font-semibold focus:outline-none rounded px-5 py-4 md:px-8 md:py-5 items-center cursor-pointer text-left \" + (\n          selected ? \"target-editor__completion-button--selected bg-gray-200 text-primary-500 border-primary-500\" : \"border-gray-400 hover:bg-gray-200 bg-white\"\n        );\n}\n\nfunction targetEvaluated(methodOfCompletion) {\n  return methodOfCompletion === 0;\n}\n\nfunction validNumberOfEvaluationCriteria(state) {\n  return ArrayUtils.isNotEmpty(state.evaluationCriteria);\n}\n\nfunction setEvaluationCriteriaSearch(send, value) {\n  return Curry._1(send, /* UpdateEvaluationCriteriaSearchInput */Block.__(6, [value]));\n}\n\nfunction selectEvaluationCriterion(send, state, evaluationCriterion) {\n  var updatedEvaluationCriteria = state.evaluationCriteria.concat([CurriculumEditor__EvaluationCriteria.id(evaluationCriterion)]);\n  return Curry._1(send, /* UpdateEvaluationCriteria */Block.__(4, [updatedEvaluationCriteria]));\n}\n\nfunction deSelectEvaluationCriterion(send, state, evaluationCriterion) {\n  var updatedEvaluationCriteria = state.evaluationCriteria.filter((function (ecId) {\n          return ecId !== CurriculumEditor__EvaluationCriteria.id(evaluationCriterion);\n        }));\n  return Curry._1(send, /* UpdateEvaluationCriteria */Block.__(4, [updatedEvaluationCriteria]));\n}\n\nvar value$1 = CurriculumEditor__EvaluationCriteria.name;\n\nfunction make$1(evaluationCriterion) {\n  return evaluationCriterion;\n}\n\nvar SelectableEvaluationCriteria = {\n  value: value$1,\n  searchString: value$1,\n  make: make$1\n};\n\nvar MultiSelectForEvaluationCriteria = MultiselectInline.Make(SelectableEvaluationCriteria);\n\nfunction evaluationCriteriaEditor(state, evaluationCriteria, send) {\n  var selected = $$Array.map((function (ec) {\n          return ec;\n        }), evaluationCriteria.filter((function (ec) {\n              return $$Array.mem(CurriculumEditor__EvaluationCriteria.id(ec), state.evaluationCriteria);\n            })));\n  var unselected = $$Array.map((function (ec) {\n          return ec;\n        }), evaluationCriteria.filter((function (ec) {\n              return !$$Array.mem(CurriculumEditor__EvaluationCriteria.id(ec), state.evaluationCriteria);\n            })));\n  return React.createElement(\"div\", {\n              className: \"mb-6\",\n              id: \"evaluation_criteria\"\n            }, React.createElement(\"label\", {\n                  className: \"block tracking-wide text-sm font-semibold mr-6 mb-2\",\n                  htmlFor: \"evaluation_criteria\"\n                }, React.createElement(\"span\", {\n                      className: \"mr-2\"\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-list text-base\"\n                        })), \"Choose evaluation criteria from your list\"), React.createElement(\"div\", {\n                  className: \"ml-6\"\n                }, ArrayUtils.isNotEmpty(state.evaluationCriteria) ? null : React.createElement(\"div\", {\n                        className: \"drawer-right-form__error-msg mb-2\"\n                      }, \"Atleast one has to be selected\"), React.createElement(MultiSelectForEvaluationCriteria.make, {\n                      placeholder: \"Search evaluation criteria\",\n                      onChange: (function (param) {\n                          return Curry._1(send, /* UpdateEvaluationCriteriaSearchInput */Block.__(6, [param]));\n                        }),\n                      value: state.evaluationCriteriaSearchInput,\n                      unselected: unselected,\n                      selected: selected,\n                      onSelect: (function (param) {\n                          return selectEvaluationCriterion(send, state, param);\n                        }),\n                      onDeselect: (function (param) {\n                          return deSelectEvaluationCriterion(send, state, param);\n                        }),\n                      emptySelectionMessage: \"No criteria selected\",\n                      allItemsSelectedMessage: \"You have selected all evaluation criteria!\"\n                    })));\n}\n\nfunction updateLinkToComplete(send, $$event) {\n  return Curry._1(send, /* UpdateLinkToComplete */Block.__(7, [$$event.target.value]));\n}\n\nfunction updateCompletionInstructions(send, $$event) {\n  return Curry._1(send, /* UpdateCompletionInstructions */Block.__(8, [$$event.target.value]));\n}\n\nfunction updateMethodOfCompletion(methodOfCompletion, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send, /* UpdateMethodOfCompletion */Block.__(3, [methodOfCompletion]));\n}\n\nfunction updateTargetRole(role, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send, /* UpdateTargetRole */Block.__(9, [role]));\n}\n\nfunction updateVisibility(visibility, send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send, /* UpdateVisibility */Block.__(12, [visibility]));\n}\n\nfunction linkEditor(state, send) {\n  return React.createElement(\"div\", {\n              className: \"mb-6\"\n            }, React.createElement(\"label\", {\n                  className: \"inline-block tracking-wide text-sm font-semibold\",\n                  htmlFor: \"link_to_complete\"\n                }, React.createElement(\"span\", {\n                      className: \"mr-2\"\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-list text-base\"\n                        })), \"Link to complete\"), React.createElement(\"div\", {\n                  className: \"ml-6\"\n                }, React.createElement(\"input\", {\n                      className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n                      id: \"link_to_complete\",\n                      placeholder: \"Paste link to complete\",\n                      type: \"text\",\n                      value: state.linkToComplete,\n                      onChange: (function (param) {\n                          return updateLinkToComplete(send, param);\n                        })\n                    }), UrlUtils.isInvalid(false, state.linkToComplete) ? React.createElement(School__InputGroupError.make, {\n                        message: \"Enter a valid link\",\n                        active: true\n                      }) : null));\n}\n\nfunction methodOfCompletionButtonClasses(value) {\n  if (value) {\n    return \"target-editor__completion-button relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 target-editor__completion-button--selected bg-gray-200 text-primary-500 border-primary-500\";\n  } else {\n    return \"target-editor__completion-button relative flex flex-col items-center bg-white border border-gray-400 hover:bg-gray-200 text-sm font-semibold focus:outline-none rounded p-4 opacity-75 text-gray-900\";\n  }\n}\n\nfunction methodOfCompletionSelection(polyMethodOfCompletion) {\n  if (polyMethodOfCompletion !== 253468248) {\n    if (polyMethodOfCompletion >= 733679580) {\n      return /* TakeQuiz */2;\n    } else {\n      return /* VisitLink */1;\n    }\n  } else {\n    return /* MarkAsComplete */3;\n  }\n}\n\nfunction methodOfCompletionButton(methodOfCompletion, state, send, index) {\n  var buttonString = methodOfCompletion !== 253468248 ? (\n      methodOfCompletion >= 733679580 ? \"Take a quiz to complete the target.\" : \"Visit a link to complete the target.\"\n    ) : \"Simply mark the target as completed.\";\n  var match = state.methodOfCompletion;\n  var selected;\n  switch (match) {\n    case /* Evaluated */0 :\n        selected = false;\n        break;\n    case /* VisitLink */1 :\n        selected = methodOfCompletion === -110174395;\n        break;\n    case /* TakeQuiz */2 :\n        selected = methodOfCompletion === 733679580;\n        break;\n    case /* MarkAsComplete */3 :\n        selected = methodOfCompletion === 253468248;\n        break;\n    \n  }\n  var icon = methodOfCompletion !== 253468248 ? (\n      methodOfCompletion >= 733679580 ? quizIcon : linkIcon\n    ) : markIcon;\n  var partial_arg = methodOfCompletionSelection(methodOfCompletion);\n  return React.createElement(\"div\", {\n              key: String(index),\n              className: \"w-1/3 px-2\"\n            }, React.createElement(\"button\", {\n                  className: methodOfCompletionButtonClasses(selected),\n                  onClick: (function (param) {\n                      return updateMethodOfCompletion(partial_arg, send, param);\n                    })\n                }, React.createElement(\"div\", {\n                      className: \"mb-1\"\n                    }, React.createElement(\"img\", {\n                          className: \"w-12 h-12\",\n                          src: icon\n                        })), buttonString));\n}\n\nfunction methodOfCompletionSelector(state, send) {\n  return React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                  className: \"mb-6\"\n                }, React.createElement(\"label\", {\n                      className: \"block tracking-wide text-sm font-semibold mr-6 mb-3\",\n                      htmlFor: \"method_of_completion\"\n                    }, React.createElement(\"span\", {\n                          className: \"mr-2\"\n                        }, React.createElement(\"i\", {\n                              className: \"fas fa-list text-base\"\n                            })), \"How do you want the user to complete the target?\"), React.createElement(\"div\", {\n                      className: \"flex -mx-2 pl-6\",\n                      id: \"method_of_completion\"\n                    }, $$Array.mapi((function (index, methodOfCompletion) {\n                            return methodOfCompletionButton(methodOfCompletion, state, send, index);\n                          }), [\n                          /* MarkAsComplete */253468248,\n                          /* VisitLink */-110174395,\n                          /* TakeQuiz */733679580\n                        ]))));\n}\n\nfunction isValidQuiz(quiz) {\n  return ArrayUtils.isEmpty(quiz.filter((function (quizQuestion) {\n                    return CurriculumEditor__QuizQuestion.isValidQuizQuestion(quizQuestion) !== true;\n                  })));\n}\n\nfunction isValidChecklist(checklist) {\n  return ArrayUtils.isEmpty(checklist.filter((function (checklistItem) {\n                    return TargetChecklistItem.isValidChecklistItem(checklistItem) !== true;\n                  })));\n}\n\nfunction addQuizQuestion(send, $$event) {\n  $$event.preventDefault();\n  return Curry._1(send, /* AddQuizQuestion */0);\n}\n\nfunction updateQuizQuestionCB(send, id, quizQuestion) {\n  return Curry._1(send, /* UpdateQuizQuestion */Block.__(10, [\n                id,\n                quizQuestion\n              ]));\n}\n\nfunction removeQuizQuestionCB(send, id) {\n  return Curry._1(send, /* RemoveQuizQuestion */Block.__(11, [id]));\n}\n\nfunction questionCanBeRemoved(state) {\n  return state.quiz.length > 1;\n}\n\nfunction quizEditor(state, send) {\n  return React.createElement(\"div\", undefined, React.createElement(\"label\", {\n                  className: \"block tracking-wide text-sm font-semibold mr-6 mb-3\",\n                  htmlFor: \"Quiz question 1\"\n                }, React.createElement(\"span\", {\n                      className: \"mr-2\"\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-list text-base\"\n                        })), \"Prepare the quiz now.\"), React.createElement(\"div\", {\n                  className: \"ml-6\"\n                }, isValidQuiz(state.quiz) ? null : React.createElement(School__InputGroupError.make, {\n                        message: \"All questions must be filled in, and all questions should have at least two answers.\",\n                        active: true\n                      }), $$Array.mapi((function (index, quizQuestion) {\n                        return React.createElement(CurriculumEditor__TargetQuizQuestion.make, {\n                                    questionNumber: String(index + 1 | 0),\n                                    quizQuestion: quizQuestion,\n                                    updateQuizQuestionCB: (function (param, param$1) {\n                                        return Curry._1(send, /* UpdateQuizQuestion */Block.__(10, [\n                                                      param,\n                                                      param$1\n                                                    ]));\n                                      }),\n                                    removeQuizQuestionCB: (function (param) {\n                                        return Curry._1(send, /* RemoveQuizQuestion */Block.__(11, [param]));\n                                      }),\n                                    questionCanBeRemoved: questionCanBeRemoved(state),\n                                    key: CurriculumEditor__QuizQuestion.id(quizQuestion)\n                                  });\n                      }), state.quiz), React.createElement(\"a\", {\n                      className: \"flex items-center bg-gray-200 border border-dashed border-primary-400 hover:bg-white hover:text-primary-500 hover:shadow-md rounded-lg p-3 cursor-pointer my-5\",\n                      onClick: (function (param) {\n                          return addQuizQuestion(send, param);\n                        })\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-plus-circle text-lg\"\n                        }), React.createElement(\"h5\", {\n                          className: \"font-semibold ml-2\"\n                        }, \"Add another Question\"))));\n}\n\nfunction doRequiredStepsHaveUniqueTitles(checklist) {\n  var requiredSteps = checklist.filter((function (item) {\n          return !TargetChecklistItem.optional(item);\n        }));\n  return ArrayUtils.distinct($$Array.map($$String.trim, $$Array.map(TargetChecklistItem.title, requiredSteps))).length === requiredSteps.length;\n}\n\nfunction isValidTitle(title) {\n  return $$String.trim(title).length !== 0;\n}\n\nfunction isValidMethodOfCompletion(state) {\n  var match = state.methodOfCompletion;\n  switch (match) {\n    case /* Evaluated */0 :\n        if (ArrayUtils.isNotEmpty(state.evaluationCriteria)) {\n          return isValidChecklist(state.checklist);\n        } else {\n          return false;\n        }\n    case /* VisitLink */1 :\n        return !UrlUtils.isInvalid(false, state.linkToComplete);\n    case /* TakeQuiz */2 :\n        return isValidQuiz(state.quiz);\n    case /* MarkAsComplete */3 :\n        return true;\n    \n  }\n}\n\nfunction saveDisabled(hasValidTitle, hasValidMethodOfCompletion, requiredStepsHaveUniqueTitles, dirty, saving) {\n  if (!requiredStepsHaveUniqueTitles || !hasValidTitle || !hasValidMethodOfCompletion || !dirty) {\n    return true;\n  } else {\n    return saving;\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation UpdateTargetMutation($id: ID!, $targetGroupId: ID!, $title: String!, $role: String!, $evaluationCriteria: [ID!]!, $prerequisiteTargets: [ID!]!, $quiz: [TargetQuizInput!]!, $completionInstructions: String, $linkToComplete: String, $visibility: String!, $checklist: JSON!)  {\\nupdateTarget(id: $id, targetGroupId: $targetGroupId, title: $title, role: $role, evaluationCriteria: $evaluationCriteria, prerequisiteTargets: $prerequisiteTargets, quiz: $quiz, completionInstructions: $completionInstructions, linkToComplete: $linkToComplete, visibility: $visibility, checklist: $checklist)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateTarget\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateTargetPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateTarget on type Mutation is missing\");\n  }\n  return {\n          updateTarget: tmp\n        };\n}\n\nfunction json_of_TargetQuizAnswerInput(value) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"answer\",\n                  value.answer\n                ],\n                /* tuple */[\n                  \"correctAnswer\",\n                  value.correctAnswer\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction json_of_TargetQuizInput(value) {\n  var v = value.answerOptions;\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"question\",\n                  value.question\n                ],\n                /* tuple */[\n                  \"answerOptions\",\n                  v.map(json_of_TargetQuizAnswerInput)\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction make$2(id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"targetGroupId\",\n                    targetGroupId\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ],\n                  /* tuple */[\n                    \"role\",\n                    role\n                  ],\n                  /* tuple */[\n                    \"evaluationCriteria\",\n                    evaluationCriteria.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"prerequisiteTargets\",\n                    prerequisiteTargets.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"quiz\",\n                    quiz.map(json_of_TargetQuizInput)\n                  ],\n                  /* tuple */[\n                    \"completionInstructions\",\n                    completionInstructions !== undefined ? completionInstructions : null\n                  ],\n                  /* tuple */[\n                    \"linkToComplete\",\n                    linkToComplete !== undefined ? linkToComplete : null\n                  ],\n                  /* tuple */[\n                    \"visibility\",\n                    visibility\n                  ],\n                  /* tuple */[\n                    \"checklist\",\n                    checklist\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var targetGroupId = variables.targetGroupId;\n  var title = variables.title;\n  var role = variables.role;\n  var evaluationCriteria = variables.evaluationCriteria;\n  var prerequisiteTargets = variables.prerequisiteTargets;\n  var quiz = variables.quiz;\n  var completionInstructions = variables.completionInstructions;\n  var linkToComplete = variables.linkToComplete;\n  var visibility = variables.visibility;\n  var checklist = variables.checklist;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"targetGroupId\",\n                    targetGroupId\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ],\n                  /* tuple */[\n                    \"role\",\n                    role\n                  ],\n                  /* tuple */[\n                    \"evaluationCriteria\",\n                    evaluationCriteria.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"prerequisiteTargets\",\n                    prerequisiteTargets.map((function (prim) {\n                            return prim;\n                          }))\n                  ],\n                  /* tuple */[\n                    \"quiz\",\n                    quiz.map(json_of_TargetQuizInput)\n                  ],\n                  /* tuple */[\n                    \"completionInstructions\",\n                    completionInstructions !== undefined ? completionInstructions : null\n                  ],\n                  /* tuple */[\n                    \"linkToComplete\",\n                    linkToComplete !== undefined ? linkToComplete : null\n                  ],\n                  /* tuple */[\n                    \"visibility\",\n                    visibility\n                  ],\n                  /* tuple */[\n                    \"checklist\",\n                    checklist\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"targetGroupId\",\n                  targetGroupId\n                ],\n                /* tuple */[\n                  \"title\",\n                  title\n                ],\n                /* tuple */[\n                  \"role\",\n                  role\n                ],\n                /* tuple */[\n                  \"evaluationCriteria\",\n                  evaluationCriteria.map((function (prim) {\n                          return prim;\n                        }))\n                ],\n                /* tuple */[\n                  \"prerequisiteTargets\",\n                  prerequisiteTargets.map((function (prim) {\n                          return prim;\n                        }))\n                ],\n                /* tuple */[\n                  \"quiz\",\n                  quiz.map(json_of_TargetQuizInput)\n                ],\n                /* tuple */[\n                  \"completionInstructions\",\n                  completionInstructions !== undefined ? completionInstructions : null\n                ],\n                /* tuple */[\n                  \"linkToComplete\",\n                  linkToComplete !== undefined ? linkToComplete : null\n                ],\n                /* tuple */[\n                  \"visibility\",\n                  visibility\n                ],\n                /* tuple */[\n                  \"checklist\",\n                  checklist\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, targetGroupId, title, role, evaluationCriteria, prerequisiteTargets, quiz, completionInstructions, linkToComplete, visibility, checklist, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"targetGroupId\",\n                      targetGroupId\n                    ],\n                    /* tuple */[\n                      \"title\",\n                      title\n                    ],\n                    /* tuple */[\n                      \"role\",\n                      role\n                    ],\n                    /* tuple */[\n                      \"evaluationCriteria\",\n                      evaluationCriteria.map((function (prim) {\n                              return prim;\n                            }))\n                    ],\n                    /* tuple */[\n                      \"prerequisiteTargets\",\n                      prerequisiteTargets.map((function (prim) {\n                              return prim;\n                            }))\n                    ],\n                    /* tuple */[\n                      \"quiz\",\n                      quiz.map(json_of_TargetQuizInput)\n                    ],\n                    /* tuple */[\n                      \"completionInstructions\",\n                      completionInstructions !== undefined ? completionInstructions : null\n                    ],\n                    /* tuple */[\n                      \"linkToComplete\",\n                      linkToComplete !== undefined ? linkToComplete : null\n                    ],\n                    /* tuple */[\n                      \"visibility\",\n                      visibility\n                    ],\n                    /* tuple */[\n                      \"checklist\",\n                      checklist\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar UpdateTargetQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  json_of_TargetQuizAnswerInput: json_of_TargetQuizAnswerInput,\n  json_of_TargetQuizInput: json_of_TargetQuizInput,\n  make: make$2,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction updateTarget(target, state, send, updateTargetCB, $$event) {\n  $$event.preventDefault();\n  Curry._1(send, /* UpdateSaving */2);\n  var id = CurriculumEditor__Target.id(target);\n  var sortIndex = CurriculumEditor__Target.sortIndex(target);\n  var role = CurriculumEditor__TargetDetails.roleAsString(state.role);\n  var visibilityAsString = CurriculumEditor__TargetDetails.visibilityAsString(state.visibility);\n  var quizAsJs = CurriculumEditor__QuizQuestion.quizAsJsObject(state.quiz.filter(CurriculumEditor__QuizQuestion.isValidQuizQuestion));\n  var match = state.methodOfCompletion;\n  var match$1;\n  switch (match) {\n    case /* Evaluated */0 :\n        match$1 = /* tuple */[\n          [],\n          state.evaluationCriteria,\n          \"\",\n          state.checklist\n        ];\n        break;\n    case /* VisitLink */1 :\n        match$1 = /* tuple */[\n          [],\n          [],\n          state.linkToComplete,\n          []\n        ];\n        break;\n    case /* TakeQuiz */2 :\n        match$1 = /* tuple */[\n          quizAsJs,\n          [],\n          \"\",\n          []\n        ];\n        break;\n    case /* MarkAsComplete */3 :\n        match$1 = /* tuple */[\n          [],\n          [],\n          \"\",\n          []\n        ];\n        break;\n    \n  }\n  var match$2 = state.visibility;\n  var newTarget = CurriculumEditor__Target.create(id, state.targetGroupId, state.title, sortIndex, match$2);\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make$2(id, state.targetGroupId, state.title, role, match$1[1], state.prerequisiteTargets, match$1[0], state.completionInstructions, match$1[2], visibilityAsString, TargetChecklistItem.encodeChecklist(match$1[3]), /* () */0)).then((function (result) {\n          if (result.updateTarget.success) {\n            Curry._1(send, /* ResetEditor */3);\n            Curry._1(updateTargetCB, newTarget);\n          } else {\n            Curry._1(send, /* UpdateSaving */2);\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction CurriculumEditor__TargetDetailsEditor(Props) {\n  var target = Props.target;\n  var targets = Props.targets;\n  var targetGroups = Props.targetGroups;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var updateTargetCB = Props.updateTargetCB;\n  var setDirtyCB = Props.setDirtyCB;\n  var match = React.useReducer(reducer, {\n        title: \"\",\n        targetGroupId: \"\",\n        role: /* Student */0,\n        evaluationCriteria: [],\n        prerequisiteTargets: [],\n        prerequisiteSearchInput: \"\",\n        evaluationCriteriaSearchInput: \"\",\n        methodOfCompletion: /* Evaluated */0,\n        quiz: [],\n        linkToComplete: \"\",\n        dirty: false,\n        saving: false,\n        loading: true,\n        visibility: /* Draft */0,\n        checklist: [],\n        completionInstructions: \"\"\n      });\n  var send = match[1];\n  var state = match[0];\n  var targetId = CurriculumEditor__Target.id(target);\n  React.useEffect((function () {\n          loadTargetDetails(targetId, send);\n          return ;\n        }), [targetId]);\n  React.useEffect((function () {\n          Curry._1(setDirtyCB, state.dirty);\n          return ;\n        }), [state.dirty]);\n  var requiredStepsHaveUniqueTitles = doRequiredStepsHaveUniqueTitles(state.checklist);\n  var hasValidTitle = isValidTitle(state.title);\n  var hasValidMethodOfCompletion = isValidMethodOfCompletion(state);\n  var tmp;\n  if (state.loading) {\n    tmp = React.createElement(\"div\", {\n          className: \"max-w-3xl mx-auto px-3\"\n        }, SkeletonLoading.multiple(2, SkeletonLoading.contents(/* () */0)));\n  } else {\n    var match$1 = state.methodOfCompletion;\n    var tmp$1;\n    if (match$1 !== 0) {\n      tmp$1 = null;\n    } else {\n      var allowFileKind = ArrayUtils.isEmpty(state.checklist.filter(TargetChecklistItem.isFilesKind));\n      tmp$1 = React.createElement(\"div\", {\n            className: \"mb-6\"\n          }, React.createElement(\"label\", {\n                className: \"tracking-wide text-sm font-semibold\",\n                htmlFor: \"target_checklist\"\n              }, React.createElement(\"span\", {\n                    className: \"mr-2\"\n                  }, React.createElement(\"i\", {\n                        className: \"fas fa-list text-base\"\n                      })), \"What steps should the student take to complete this target?\"), React.createElement(HelpIcon.make, {\n                className: \"ml-1\",\n                link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=defining-steps-to-complete-a-target\",\n                children: \"These are the steps that a student must complete to submit work on a target. This information will be shown to the coach for review.\"\n              }), React.createElement(\"div\", {\n                className: \"ml-6 mb-6\"\n              }, $$Array.mapi((function (index, checklistItem) {\n                      var moveChecklistItemUpCB = index > 0 ? (function (param) {\n                            return Curry._1(send, /* MoveChecklistItemUp */Block.__(15, [index]));\n                          }) : undefined;\n                      var moveChecklistItemDownCB = index !== (state.checklist.length - 1 | 0) ? (function (param) {\n                            return Curry._1(send, /* MoveChecklistItemDown */Block.__(16, [index]));\n                          }) : undefined;\n                      var tmp = {\n                        checklist: state.checklist,\n                        checklistItem: checklistItem,\n                        index: index,\n                        updateChecklistItemCB: (function (newChecklistItem) {\n                            return Curry._1(send, /* UpdateChecklistItem */Block.__(13, [\n                                          index,\n                                          newChecklistItem\n                                        ]));\n                          }),\n                        removeChecklistItemCB: (function (param) {\n                            return Curry._1(send, /* RemoveChecklistItem */Block.__(14, [index]));\n                          }),\n                        copyChecklistItemCB: (function (param) {\n                            return Curry._1(send, /* CopyChecklistItem */Block.__(17, [index]));\n                          }),\n                        allowFileKind: allowFileKind,\n                        key: String(index)\n                      };\n                      if (moveChecklistItemUpCB !== undefined) {\n                        tmp.moveChecklistItemUpCB = Caml_option.valFromOption(moveChecklistItemUpCB);\n                      }\n                      if (moveChecklistItemDownCB !== undefined) {\n                        tmp.moveChecklistItemDownCB = Caml_option.valFromOption(moveChecklistItemDownCB);\n                      }\n                      return React.createElement(CurriculumEditor__TargetChecklistItemEditor.make, tmp);\n                    }), state.checklist), ArrayUtils.isEmpty(state.checklist) ? React.createElement(\"div\", {\n                      className: \"border border-orange-500 bg-orange-100 text-orange-800 px-2 py-1 rounded my-2 text-sm text-center\"\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-info-circle mr-2\"\n                        }), \"This target has no steps. Students will be able to submit target without any action!\") : null, state.checklist.length >= 15 ? React.createElement(\"div\", {\n                      className: \"border border-orange-500 bg-orange-100 text-orange-800 px-2 py-1 rounded my-2 text-sm text-center\"\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-info-circle mr-2\"\n                        }), \"Maximum allowed checklist items is 15!\") : null, React.createElement(\"button\", {\n                    className: \"flex justify-center items-center w-full rounded-lg border border-dashed border-primary-500 mt-2 p-2 text-sm text-primary-500 focus:outline-none hover:shadow-lg\",\n                    disabled: state.checklist.length >= 15,\n                    onClick: (function (param) {\n                        return Curry._1(send, /* AddNewChecklistItem */1);\n                      })\n                  }, React.createElement(PfIcon.make, {\n                        className: \"fas fa-plus-circle text-lg\"\n                      }), React.createElement(\"span\", {\n                        className: \"font-semibold ml-2\"\n                      }, \"Add a Step\"))));\n    }\n    var match$2 = state.methodOfCompletion;\n    var tmp$2;\n    switch (match$2) {\n      case /* Evaluated */0 :\n          tmp$2 = evaluationCriteriaEditor(state, $$Array.of_list(evaluationCriteria), send);\n          break;\n      case /* VisitLink */1 :\n          tmp$2 = linkEditor(state, send);\n          break;\n      case /* TakeQuiz */2 :\n          tmp$2 = quizEditor(state, send);\n          break;\n      case /* MarkAsComplete */3 :\n          tmp$2 = null;\n          break;\n      \n    }\n    var match$3 = state.role;\n    var match$4 = state.role;\n    tmp = React.createElement(DisablingCover.make, {\n          disabled: state.saving,\n          message: \"Saving...\",\n          children: React.createElement(\"div\", {\n                className: \"mt-2\"\n              }, React.createElement(\"div\", {\n                    className: \"max-w-3xl mx-auto px-3\"\n                  }, React.createElement(\"div\", {\n                        className: \"mb-6\"\n                      }, React.createElement(\"label\", {\n                            className: \"flex items-center inline-block tracking-wide text-sm font-semibold mb-2\",\n                            htmlFor: \"title\"\n                          }, React.createElement(\"span\", {\n                                className: \"mr-2\"\n                              }, React.createElement(\"i\", {\n                                    className: \"fas fa-list text-base\"\n                                  })), \"Title\"), React.createElement(\"div\", {\n                            className: \"ml-6\"\n                          }, React.createElement(\"input\", {\n                                className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n                                id: \"title\",\n                                placeholder: \"Type target title here\",\n                                type: \"text\",\n                                value: state.title,\n                                onChange: (function (param) {\n                                    return updateTitle(send, param);\n                                  })\n                              }), React.createElement(School__InputGroupError.make, {\n                                message: \"Enter a valid title\",\n                                active: !hasValidTitle\n                              }))), prerequisiteTargetEditor(send, eligiblePrerequisiteTargets(targetId, targets, targetGroups), state), React.createElement(\"div\", {\n                        className: \"flex items-center mb-6\"\n                      }, React.createElement(\"label\", {\n                            className: \"block tracking-wide text-sm font-semibold mr-6\",\n                            htmlFor: \"evaluated\"\n                          }, React.createElement(\"span\", {\n                                className: \"mr-2\"\n                              }, React.createElement(\"i\", {\n                                    className: \"fas fa-list text-base\"\n                                  })), \"Will a coach review submissions on this target?\"), React.createElement(\"div\", {\n                            className: \"flex toggle-button__group flex-shrink-0 rounded-lg overflow-hidden\",\n                            id: \"evaluated\"\n                          }, React.createElement(\"button\", {\n                                className: booleanButtonClasses(state.methodOfCompletion === 0),\n                                onClick: (function (param) {\n                                    return updateMethodOfCompletion(/* Evaluated */0, send, param);\n                                  })\n                              }, \"Yes\"), React.createElement(\"button\", {\n                                className: booleanButtonClasses(state.methodOfCompletion !== 0),\n                                onClick: (function (param) {\n                                    return updateMethodOfCompletion(/* MarkAsComplete */3, send, param);\n                                  })\n                              }, \"No\"))), tmp$1, state.methodOfCompletion === 0 ? null : methodOfCompletionSelector(state, send), tmp$2, React.createElement(\"div\", {\n                        className: \"mb-6\"\n                      }, React.createElement(\"label\", {\n                            className: \"inline-block tracking-wide text-sm font-semibold\",\n                            htmlFor: \"role\"\n                          }, React.createElement(\"span\", {\n                                className: \"mr-2\"\n                              }, React.createElement(\"i\", {\n                                    className: \"fas fa-list text-base\"\n                                  })), \"How should teams tackle this target?\"), React.createElement(HelpIcon.make, {\n                            className: \"ml-1\",\n                            link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=setting-the-method-of-completion\",\n                            children: \"Should students in a team submit work on a target individually, or together?\"\n                          }), React.createElement(\"div\", {\n                            className: \"flex mt-4 ml-6\",\n                            id: \"role\"\n                          }, React.createElement(\"button\", {\n                                className: \"mr-4 \" + targetRoleClasses(match$3 ? false : true),\n                                onClick: (function (param) {\n                                    return updateTargetRole(/* Student */0, send, param);\n                                  })\n                              }, React.createElement(\"span\", {\n                                    className: \"mr-4\"\n                                  }, React.createElement(Icon.make, {\n                                        className: \"if i-users-check-light text-3xl\"\n                                      })), React.createElement(\"span\", {\n                                    className: \"text-sm\"\n                                  }, \"All users must submit individually.\")), React.createElement(\"button\", {\n                                className: targetRoleClasses(match$4 ? true : false),\n                                onClick: (function (param) {\n                                    return updateTargetRole(/* Team */1, send, param);\n                                  })\n                              }, React.createElement(\"span\", {\n                                    className: \"mr-4\"\n                                  }, React.createElement(Icon.make, {\n                                        className: \"if i-user-check-light text-2xl\"\n                                      })), React.createElement(\"span\", {\n                                    className: \"text-sm\"\n                                  }, \"Only one user in a team\", React.createElement(\"br\", undefined), \" needs to submit.\")))), React.createElement(\"div\", {\n                        className: \"mb-6\"\n                      }, React.createElement(\"label\", {\n                            className: \"tracking-wide text-sm font-semibold\",\n                            htmlFor: \"completion-instructions\"\n                          }, React.createElement(\"span\", {\n                                className: \"mr-2\"\n                              }, React.createElement(\"i\", {\n                                    className: \"fas fa-list text-base\"\n                                  })), \"Do you have any completion instructions for the user?\", React.createElement(\"span\", {\n                                className: \"ml-1 text-xs font-normal\"\n                              }, \"(optional)\")), React.createElement(HelpIcon.make, {\n                            className: \"ml-1\",\n                            link: \"https://docs.pupilfirst.com/#/curriculum_editor?id=setting-the-method-of-completion\",\n                            children: \"Use this to remind the student about something important. These instructions will be displayed close to where students complete the target.\"\n                          }), React.createElement(\"div\", {\n                            className: \"ml-6\"\n                          }, React.createElement(\"input\", {\n                                className: \"appearance-none block text-sm w-full bg-white border border-gray-400 rounded px-4 py-2 my-2 leading-relaxed focus:outline-none focus:bg-white focus:border-gray-500\",\n                                id: \"completion-instructions\",\n                                maxLength: 255,\n                                type: \"text\",\n                                value: state.completionInstructions,\n                                onChange: (function (param) {\n                                    return updateCompletionInstructions(send, param);\n                                  })\n                              })))), React.createElement(\"div\", {\n                    className: \"bg-white border-t sticky bottom-0 py-5\"\n                  }, React.createElement(\"div\", {\n                        className: \"flex max-w-3xl mx-auto px-3 justify-between items-center\"\n                      }, React.createElement(\"div\", {\n                            className: \"flex items-center flex-shrink-0\"\n                          }, React.createElement(\"label\", {\n                                className: \"block tracking-wide text-sm font-semibold mr-3\",\n                                htmlFor: \"archived\"\n                              }, React.createElement(\"span\", {\n                                    className: \"mr-2\"\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-list text-base\"\n                                      })), \"Target Visibility\"), React.createElement(\"div\", {\n                                className: \"flex toggle-button__group flex-shrink-0 rounded-lg overflow-hidden\",\n                                id: \"visibility\"\n                              }, $$Array.mapi((function (index, visibility) {\n                                      var match = state.visibility;\n                                      var tmp;\n                                      switch (match) {\n                                        case /* Draft */0 :\n                                            tmp = visibility === 0;\n                                            break;\n                                        case /* Live */1 :\n                                            tmp = visibility === 1;\n                                            break;\n                                        case /* Archived */2 :\n                                            tmp = visibility >= 2;\n                                            break;\n                                        \n                                      }\n                                      var tmp$1;\n                                      switch (visibility) {\n                                        case /* Draft */0 :\n                                            tmp$1 = \"Draft\";\n                                            break;\n                                        case /* Live */1 :\n                                            tmp$1 = \"Live\";\n                                            break;\n                                        case /* Archived */2 :\n                                            tmp$1 = \"Archived\";\n                                            break;\n                                        \n                                      }\n                                      return React.createElement(\"button\", {\n                                                  key: String(index),\n                                                  className: booleanButtonClasses(tmp),\n                                                  onClick: (function (param) {\n                                                      return updateVisibility(visibility, send, param);\n                                                    })\n                                                }, tmp$1);\n                                    }), [\n                                    /* Live */1,\n                                    /* Archived */2,\n                                    /* Draft */0\n                                  ]))), React.createElement(\"div\", {\n                            className: \"w-auto\"\n                          }, React.createElement(\"button\", {\n                                key: \"target-actions-step\",\n                                className: \"btn btn-primary w-full text-white font-bold py-3 px-6 shadow rounded focus:outline-none\",\n                                disabled: saveDisabled(hasValidTitle, hasValidMethodOfCompletion, requiredStepsHaveUniqueTitles, state.dirty, state.saving),\n                                onClick: (function (param) {\n                                    return updateTarget(target, state, send, updateTargetCB, param);\n                                  })\n                              }, \"Update Target\")))))\n        });\n  }\n  return React.createElement(\"div\", {\n              className: \"pt-6\",\n              id: \"target-properties\"\n            }, tmp);\n}\n\nvar make$3 = CurriculumEditor__TargetDetailsEditor;\n\nexports.markIcon = markIcon;\nexports.linkIcon = linkIcon;\nexports.quizIcon = quizIcon;\nexports.str = str;\nexports.TargetDetailsQuery = TargetDetailsQuery;\nexports.loadTargetDetails = loadTargetDetails;\nexports.defaultChecklist = defaultChecklist;\nexports.computeMethodOfCompletion = computeMethodOfCompletion;\nexports.reducer = reducer;\nexports.updateTitle = updateTitle;\nexports.eligiblePrerequisiteTargets = eligiblePrerequisiteTargets;\nexports.setPrerequisiteSearch = setPrerequisiteSearch;\nexports.selectPrerequisiteTarget = selectPrerequisiteTarget;\nexports.deSelectPrerequisiteTarget = deSelectPrerequisiteTarget;\nexports.SelectablePrerequisiteTargets = SelectablePrerequisiteTargets;\nexports.MultiSelectForPrerequisiteTargets = MultiSelectForPrerequisiteTargets;\nexports.prerequisiteTargetEditor = prerequisiteTargetEditor;\nexports.booleanButtonClasses = booleanButtonClasses;\nexports.targetRoleClasses = targetRoleClasses;\nexports.targetEvaluated = targetEvaluated;\nexports.validNumberOfEvaluationCriteria = validNumberOfEvaluationCriteria;\nexports.setEvaluationCriteriaSearch = setEvaluationCriteriaSearch;\nexports.selectEvaluationCriterion = selectEvaluationCriterion;\nexports.deSelectEvaluationCriterion = deSelectEvaluationCriterion;\nexports.SelectableEvaluationCriteria = SelectableEvaluationCriteria;\nexports.MultiSelectForEvaluationCriteria = MultiSelectForEvaluationCriteria;\nexports.evaluationCriteriaEditor = evaluationCriteriaEditor;\nexports.updateLinkToComplete = updateLinkToComplete;\nexports.updateCompletionInstructions = updateCompletionInstructions;\nexports.updateMethodOfCompletion = updateMethodOfCompletion;\nexports.updateTargetRole = updateTargetRole;\nexports.updateVisibility = updateVisibility;\nexports.linkEditor = linkEditor;\nexports.methodOfCompletionButtonClasses = methodOfCompletionButtonClasses;\nexports.methodOfCompletionSelection = methodOfCompletionSelection;\nexports.methodOfCompletionButton = methodOfCompletionButton;\nexports.methodOfCompletionSelector = methodOfCompletionSelector;\nexports.isValidQuiz = isValidQuiz;\nexports.isValidChecklist = isValidChecklist;\nexports.addQuizQuestion = addQuizQuestion;\nexports.updateQuizQuestionCB = updateQuizQuestionCB;\nexports.removeQuizQuestionCB = removeQuizQuestionCB;\nexports.questionCanBeRemoved = questionCanBeRemoved;\nexports.quizEditor = quizEditor;\nexports.doRequiredStepsHaveUniqueTitles = doRequiredStepsHaveUniqueTitles;\nexports.isValidTitle = isValidTitle;\nexports.isValidMethodOfCompletion = isValidMethodOfCompletion;\nexports.saveDisabled = saveDisabled;\nexports.UpdateTargetQuery = UpdateTargetQuery;\nexports.updateTarget = updateTarget;\nexports.make = make$3;\n/* markIcon Not a pure module */\n"]},"metadata":{},"sourceType":"module"}