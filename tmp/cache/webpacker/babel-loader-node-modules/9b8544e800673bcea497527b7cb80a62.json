{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\n\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\n\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar CoursesReview__Feedback = require(\"../types/CoursesReview__Feedback.bs.js\");\n\nvar CoursesReview__GradeCard = require(\"./CoursesReview__GradeCard.bs.js\");\n\nvar CoursesReview__ShowFeedback = require(\"./CoursesReview__ShowFeedback.bs.js\");\n\nvar CoursesReview__OverlaySubmission = require(\"../types/CoursesReview__OverlaySubmission.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction showSubmissionStatus(overlaySubmission) {\n  var match = CoursesReview__OverlaySubmission.passedAt(overlaySubmission);\n  var match$1 = CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission);\n  var match$2 = match !== undefined ?\n  /* tuple */\n  [\"Passed\", \"bg-green-100 border border-green-500 text-green-800\"] : match$1 !== undefined ?\n  /* tuple */\n  [\"Failed\", \"bg-red-100 border border-red-500 text-red-700\"] :\n  /* tuple */\n  [\"Pending\", \"bg-orange-100 border border-orange-500 text-orange-800 \"];\n  return React.createElement(\"div\", {\n    className: \"font-semibold px-3 py-px rounded \" + match$2[1]\n  }, match$2[0]);\n}\n\nfunction showFeedbackSent(feedbackSent) {\n  if (feedbackSent) {\n    return React.createElement(\"div\", {\n      className: \"bg-primary-100 text-primary-600 border border-transparent font-semibold px-3 py-px rounded mr-3\"\n    }, \"Feedback Sent\");\n  } else {\n    return null;\n  }\n}\n\nfunction cardClasses(overlaySubmission) {\n  var match = CoursesReview__OverlaySubmission.passedAt(overlaySubmission);\n  var match$1 = CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission);\n  return \"mt-6 rounded-b-lg bg-white border-t-3 \" + (match !== undefined ? \"border-green-500\" : match$1 !== undefined ? \"border-red-500\" : \"border-orange-300\");\n}\n\nfunction updateSubmission(feedbackUpdate, grades, passed, newFeedback, overlaySubmission, currentCoach, addGradingCB, checklist) {\n  var feedback;\n\n  if (newFeedback !== undefined) {\n    var f = newFeedback;\n    feedback = $$String.trim(f) === \"\" ? CoursesReview__OverlaySubmission.feedback(overlaySubmission) : $$Array.append([CoursesReview__Feedback.make(UserProxy.name(currentCoach), UserProxy.avatarUrl(currentCoach), UserProxy.title(currentCoach), new Date(), f)], CoursesReview__OverlaySubmission.feedback(overlaySubmission));\n  } else {\n    feedback = CoursesReview__OverlaySubmission.feedback(overlaySubmission);\n  }\n\n  var match = passed !== undefined ?\n  /* tuple */\n  [passed ? Caml_option.some(new Date()) : undefined, Caml_option.some(new Date()), grades] :\n  /* tuple */\n  [CoursesReview__OverlaySubmission.passedAt(overlaySubmission), CoursesReview__OverlaySubmission.evaluatedAt(overlaySubmission), CoursesReview__OverlaySubmission.grades(overlaySubmission)];\n  return Curry._1(addGradingCB, CoursesReview__OverlaySubmission.make(CoursesReview__OverlaySubmission.id(overlaySubmission), CoursesReview__OverlaySubmission.createdAt(overlaySubmission), match[0], feedbackUpdate ? CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission) : UserProxy.name(currentCoach), feedback, match[2], match[1], checklist));\n}\n\nfunction updateFeedbackArray(currentCoach, overlaySubmission, newFeedback) {\n  if ($$String.trim(newFeedback) === \"\") {\n    return CoursesReview__OverlaySubmission.feedback(overlaySubmission);\n  } else {\n    return $$Array.append([CoursesReview__Feedback.make(UserProxy.name(currentCoach), UserProxy.avatarUrl(currentCoach), UserProxy.title(currentCoach), new Date(), newFeedback)], CoursesReview__OverlaySubmission.feedback(overlaySubmission));\n  }\n}\n\nfunction addGrading(addGradingCB, currentCoach, overlaySubmission, newFeedback, passed, grades, checklist) {\n  var feedback = updateFeedbackArray(currentCoach, overlaySubmission, newFeedback);\n  var passedAt = passed ? Caml_option.some(new Date()) : undefined;\n  var evaluatedAt = Caml_option.some(new Date());\n  return Curry._1(addGradingCB, CoursesReview__OverlaySubmission.make(CoursesReview__OverlaySubmission.id(overlaySubmission), CoursesReview__OverlaySubmission.createdAt(overlaySubmission), passedAt, UserProxy.name(currentCoach), feedback, grades, evaluatedAt, checklist));\n}\n\nfunction addFeedback(addFeedbackCB, currentCoach, overlaySubmission, newFeedback) {\n  var feedback = updateFeedbackArray(currentCoach, overlaySubmission, newFeedback);\n  return Curry._1(addFeedbackCB, CoursesReview__OverlaySubmission.updateFeedback(feedback, overlaySubmission));\n}\n\nfunction CoursesReview__SubmissionsList(Props) {\n  var overlaySubmission = Props.overlaySubmission;\n  var teamSubmission = Props.teamSubmission;\n  var _addGradingCB = Props.addGradingCB;\n  var _addFeedbackCB = Props.addFeedbackCB;\n  var submissionNumber = Props.submissionNumber;\n  var currentCoach = Props.currentCoach;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var reviewChecklist = Props.reviewChecklist;\n  var updateReviewChecklistCB = Props.updateReviewChecklistCB;\n  var targetId = Props.targetId;\n  var targetEvaluationCriteriaIds = Props.targetEvaluationCriteriaIds;\n  return React.createElement(\"div\", {\n    \"aria-label\": \"submissions-overlay-card-\" + CoursesReview__OverlaySubmission.id(overlaySubmission),\n    className: cardClasses(overlaySubmission)\n  }, React.createElement(\"div\", {\n    className: \"rounded-b-lg shadow\"\n  }, React.createElement(\"div\", {\n    className: \"p-4 md:px-6 md:py-5 border-b bg-white flex flex-col sm:flex-row items-center justify-between\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col w-full sm:w-auto\"\n  }, React.createElement(\"h2\", {\n    className: \"font-semibold text-sm lg:text-base leading-tight\"\n  }, \"Submission #\" + String(submissionNumber)), React.createElement(\"span\", {\n    className: \"text-xs text-gray-800 pt-px\"\n  }, DateFns.formatPreset(CoursesReview__OverlaySubmission.createdAt(overlaySubmission), undefined, true, undefined,\n  /* () */\n  0))), React.createElement(\"div\", {\n    className: \"text-xs flex w-full sm:w-auto mt-2 sm:mt-0\"\n  }, showFeedbackSent(ArrayUtils.isNotEmpty(CoursesReview__OverlaySubmission.feedback(overlaySubmission))), showSubmissionStatus(overlaySubmission))), React.createElement(CoursesReview__GradeCard.make, {\n    overlaySubmission: overlaySubmission,\n    teamSubmission: teamSubmission,\n    evaluationCriteria: evaluationCriteria,\n    reviewChecklist: reviewChecklist,\n    addGradingCB: function addGradingCB(param, param$1, param$2, param$3) {\n      return addGrading(_addGradingCB, currentCoach, overlaySubmission, param, param$1, param$2, param$3);\n    },\n    updateReviewChecklistCB: updateReviewChecklistCB,\n    targetId: targetId,\n    targetEvaluationCriteriaIds: targetEvaluationCriteriaIds\n  }), React.createElement(CoursesReview__ShowFeedback.make, {\n    feedback: CoursesReview__OverlaySubmission.feedback(overlaySubmission),\n    reviewed: ArrayUtils.isNotEmpty(CoursesReview__OverlaySubmission.grades(overlaySubmission)),\n    submissionId: CoursesReview__OverlaySubmission.id(overlaySubmission),\n    reviewChecklist: reviewChecklist,\n    addFeedbackCB: function addFeedbackCB(param) {\n      return addFeedback(_addFeedbackCB, currentCoach, overlaySubmission, param);\n    },\n    updateReviewChecklistCB: updateReviewChecklistCB,\n    targetId: targetId\n  })));\n}\n\nvar make = CoursesReview__SubmissionsList;\nexports.str = str;\nexports.showSubmissionStatus = showSubmissionStatus;\nexports.showFeedbackSent = showFeedbackSent;\nexports.cardClasses = cardClasses;\nexports.updateSubmission = updateSubmission;\nexports.updateFeedbackArray = updateFeedbackArray;\nexports.addGrading = addGrading;\nexports.addFeedback = addFeedback;\nexports.make = make;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/review/components/CoursesReview__SubmissionsList.bs.js"],"names":["$$Array","require","Curry","React","$$String","DateFns","UserProxy","ArrayUtils","Caml_option","CoursesReview__Feedback","CoursesReview__GradeCard","CoursesReview__ShowFeedback","CoursesReview__OverlaySubmission","str","prim","showSubmissionStatus","overlaySubmission","match","passedAt","match$1","evaluatorName","match$2","undefined","createElement","className","showFeedbackSent","feedbackSent","cardClasses","updateSubmission","feedbackUpdate","grades","passed","newFeedback","currentCoach","addGradingCB","checklist","feedback","f","trim","append","make","name","avatarUrl","title","Date","some","evaluatedAt","_1","id","createdAt","updateFeedbackArray","addGrading","addFeedback","addFeedbackCB","updateFeedback","CoursesReview__SubmissionsList","Props","teamSubmission","submissionNumber","evaluationCriteria","reviewChecklist","updateReviewChecklistCB","targetId","targetEvaluationCriteriaIds","String","formatPreset","isNotEmpty","param","param$1","param$2","param$3","reviewed","submissionId","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar CoursesReview__Feedback = require(\"../types/CoursesReview__Feedback.bs.js\");\nvar CoursesReview__GradeCard = require(\"./CoursesReview__GradeCard.bs.js\");\nvar CoursesReview__ShowFeedback = require(\"./CoursesReview__ShowFeedback.bs.js\");\nvar CoursesReview__OverlaySubmission = require(\"../types/CoursesReview__OverlaySubmission.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction showSubmissionStatus(overlaySubmission) {\n  var match = CoursesReview__OverlaySubmission.passedAt(overlaySubmission);\n  var match$1 = CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission);\n  var match$2 = match !== undefined ? /* tuple */[\n      \"Passed\",\n      \"bg-green-100 border border-green-500 text-green-800\"\n    ] : (\n      match$1 !== undefined ? /* tuple */[\n          \"Failed\",\n          \"bg-red-100 border border-red-500 text-red-700\"\n        ] : /* tuple */[\n          \"Pending\",\n          \"bg-orange-100 border border-orange-500 text-orange-800 \"\n        ]\n    );\n  return React.createElement(\"div\", {\n              className: \"font-semibold px-3 py-px rounded \" + match$2[1]\n            }, match$2[0]);\n}\n\nfunction showFeedbackSent(feedbackSent) {\n  if (feedbackSent) {\n    return React.createElement(\"div\", {\n                className: \"bg-primary-100 text-primary-600 border border-transparent font-semibold px-3 py-px rounded mr-3\"\n              }, \"Feedback Sent\");\n  } else {\n    return null;\n  }\n}\n\nfunction cardClasses(overlaySubmission) {\n  var match = CoursesReview__OverlaySubmission.passedAt(overlaySubmission);\n  var match$1 = CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission);\n  return \"mt-6 rounded-b-lg bg-white border-t-3 \" + (\n          match !== undefined ? \"border-green-500\" : (\n              match$1 !== undefined ? \"border-red-500\" : \"border-orange-300\"\n            )\n        );\n}\n\nfunction updateSubmission(feedbackUpdate, grades, passed, newFeedback, overlaySubmission, currentCoach, addGradingCB, checklist) {\n  var feedback;\n  if (newFeedback !== undefined) {\n    var f = newFeedback;\n    feedback = $$String.trim(f) === \"\" ? CoursesReview__OverlaySubmission.feedback(overlaySubmission) : $$Array.append([CoursesReview__Feedback.make(UserProxy.name(currentCoach), UserProxy.avatarUrl(currentCoach), UserProxy.title(currentCoach), new Date(), f)], CoursesReview__OverlaySubmission.feedback(overlaySubmission));\n  } else {\n    feedback = CoursesReview__OverlaySubmission.feedback(overlaySubmission);\n  }\n  var match = passed !== undefined ? /* tuple */[\n      passed ? Caml_option.some(new Date()) : undefined,\n      Caml_option.some(new Date()),\n      grades\n    ] : /* tuple */[\n      CoursesReview__OverlaySubmission.passedAt(overlaySubmission),\n      CoursesReview__OverlaySubmission.evaluatedAt(overlaySubmission),\n      CoursesReview__OverlaySubmission.grades(overlaySubmission)\n    ];\n  return Curry._1(addGradingCB, CoursesReview__OverlaySubmission.make(CoursesReview__OverlaySubmission.id(overlaySubmission), CoursesReview__OverlaySubmission.createdAt(overlaySubmission), match[0], feedbackUpdate ? CoursesReview__OverlaySubmission.evaluatorName(overlaySubmission) : UserProxy.name(currentCoach), feedback, match[2], match[1], checklist));\n}\n\nfunction updateFeedbackArray(currentCoach, overlaySubmission, newFeedback) {\n  if ($$String.trim(newFeedback) === \"\") {\n    return CoursesReview__OverlaySubmission.feedback(overlaySubmission);\n  } else {\n    return $$Array.append([CoursesReview__Feedback.make(UserProxy.name(currentCoach), UserProxy.avatarUrl(currentCoach), UserProxy.title(currentCoach), new Date(), newFeedback)], CoursesReview__OverlaySubmission.feedback(overlaySubmission));\n  }\n}\n\nfunction addGrading(addGradingCB, currentCoach, overlaySubmission, newFeedback, passed, grades, checklist) {\n  var feedback = updateFeedbackArray(currentCoach, overlaySubmission, newFeedback);\n  var passedAt = passed ? Caml_option.some(new Date()) : undefined;\n  var evaluatedAt = Caml_option.some(new Date());\n  return Curry._1(addGradingCB, CoursesReview__OverlaySubmission.make(CoursesReview__OverlaySubmission.id(overlaySubmission), CoursesReview__OverlaySubmission.createdAt(overlaySubmission), passedAt, UserProxy.name(currentCoach), feedback, grades, evaluatedAt, checklist));\n}\n\nfunction addFeedback(addFeedbackCB, currentCoach, overlaySubmission, newFeedback) {\n  var feedback = updateFeedbackArray(currentCoach, overlaySubmission, newFeedback);\n  return Curry._1(addFeedbackCB, CoursesReview__OverlaySubmission.updateFeedback(feedback, overlaySubmission));\n}\n\nfunction CoursesReview__SubmissionsList(Props) {\n  var overlaySubmission = Props.overlaySubmission;\n  var teamSubmission = Props.teamSubmission;\n  var addGradingCB = Props.addGradingCB;\n  var addFeedbackCB = Props.addFeedbackCB;\n  var submissionNumber = Props.submissionNumber;\n  var currentCoach = Props.currentCoach;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var reviewChecklist = Props.reviewChecklist;\n  var updateReviewChecklistCB = Props.updateReviewChecklistCB;\n  var targetId = Props.targetId;\n  var targetEvaluationCriteriaIds = Props.targetEvaluationCriteriaIds;\n  return React.createElement(\"div\", {\n              \"aria-label\": \"submissions-overlay-card-\" + CoursesReview__OverlaySubmission.id(overlaySubmission),\n              className: cardClasses(overlaySubmission)\n            }, React.createElement(\"div\", {\n                  className: \"rounded-b-lg shadow\"\n                }, React.createElement(\"div\", {\n                      className: \"p-4 md:px-6 md:py-5 border-b bg-white flex flex-col sm:flex-row items-center justify-between\"\n                    }, React.createElement(\"div\", {\n                          className: \"flex flex-col w-full sm:w-auto\"\n                        }, React.createElement(\"h2\", {\n                              className: \"font-semibold text-sm lg:text-base leading-tight\"\n                            }, \"Submission #\" + String(submissionNumber)), React.createElement(\"span\", {\n                              className: \"text-xs text-gray-800 pt-px\"\n                            }, DateFns.formatPreset(CoursesReview__OverlaySubmission.createdAt(overlaySubmission), undefined, true, undefined, /* () */0))), React.createElement(\"div\", {\n                          className: \"text-xs flex w-full sm:w-auto mt-2 sm:mt-0\"\n                        }, showFeedbackSent(ArrayUtils.isNotEmpty(CoursesReview__OverlaySubmission.feedback(overlaySubmission))), showSubmissionStatus(overlaySubmission))), React.createElement(CoursesReview__GradeCard.make, {\n                      overlaySubmission: overlaySubmission,\n                      teamSubmission: teamSubmission,\n                      evaluationCriteria: evaluationCriteria,\n                      reviewChecklist: reviewChecklist,\n                      addGradingCB: (function (param, param$1, param$2, param$3) {\n                          return addGrading(addGradingCB, currentCoach, overlaySubmission, param, param$1, param$2, param$3);\n                        }),\n                      updateReviewChecklistCB: updateReviewChecklistCB,\n                      targetId: targetId,\n                      targetEvaluationCriteriaIds: targetEvaluationCriteriaIds\n                    }), React.createElement(CoursesReview__ShowFeedback.make, {\n                      feedback: CoursesReview__OverlaySubmission.feedback(overlaySubmission),\n                      reviewed: ArrayUtils.isNotEmpty(CoursesReview__OverlaySubmission.grades(overlaySubmission)),\n                      submissionId: CoursesReview__OverlaySubmission.id(overlaySubmission),\n                      reviewChecklist: reviewChecklist,\n                      addFeedbackCB: (function (param) {\n                          return addFeedback(addFeedbackCB, currentCoach, overlaySubmission, param);\n                        }),\n                      updateReviewChecklistCB: updateReviewChecklistCB,\n                      targetId: targetId\n                    })));\n}\n\nvar make = CoursesReview__SubmissionsList;\n\nexports.str = str;\nexports.showSubmissionStatus = showSubmissionStatus;\nexports.showFeedbackSent = showFeedbackSent;\nexports.cardClasses = cardClasses;\nexports.updateSubmission = updateSubmission;\nexports.updateFeedbackArray = updateFeedbackArray;\nexports.addGrading = addGrading;\nexports.addFeedback = addFeedback;\nexports.make = make;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}