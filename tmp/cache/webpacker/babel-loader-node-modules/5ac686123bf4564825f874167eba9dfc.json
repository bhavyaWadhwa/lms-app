{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Link = require(\"../../../shared/components/Link.bs.js\");\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\n\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\n\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\n\nvar StringUtils = require(\"../../../shared/utils/StringUtils.bs.js\");\n\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\n\nvar CoursesCurriculum__Team = require(\"../types/CoursesCurriculum__Team.bs.js\");\n\nvar LevelLockSvg = require(\"../images/level-lock.svg\");\n\nvar CoursesCurriculum__Level = require(\"../types/CoursesCurriculum__Level.bs.js\");\n\nvar CoursesCurriculum__Course = require(\"../types/CoursesCurriculum__Course.bs.js\");\n\nvar CoursesCurriculum__Target = require(\"../types/CoursesCurriculum__Target.bs.js\");\n\nvar CoursesCurriculum__Overlay = require(\"./CoursesCurriculum__Overlay.bs.js\");\n\nvar CoursesCurriculum__TargetGroup = require(\"../types/CoursesCurriculum__TargetGroup.bs.js\");\n\nvar CoursesCurriculum__TargetStatus = require(\"../types/CoursesCurriculum__TargetStatus.bs.js\");\n\nvar CoursesCurriculum__LevelSelector = require(\"./CoursesCurriculum__LevelSelector.bs.js\");\n\nvar CoursesCurriculum__NoticeManager = require(\"./CoursesCurriculum__NoticeManager.bs.js\");\n\nvar CoursesCurriculum__LatestSubmission = require(\"../types/CoursesCurriculum__LatestSubmission.bs.js\");\n\nrequire(\"./CoursesCurriculum.css\");\n\nvar levelLockedImage = LevelLockSvg[\"default\"];\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction targetStatusClasses(targetStatus) {\n  var statusClasses = \"curriculum__target-status--\" + CoursesCurriculum__TargetStatus.statusToString(targetStatus).toLowerCase();\n  return \"curriculum__target-status px-3 py-px ml-4 h-6 \" + statusClasses;\n}\n\nfunction rendertarget(target, statusOfTargets) {\n  var targetId = CoursesCurriculum__Target.id(target);\n  var targetStatus = ListUtils.unsafeFind(function (ts) {\n    return CoursesCurriculum__TargetStatus.targetId(ts) === targetId;\n  }, \"Could not find targetStatus for listed target with ID \" + targetId, statusOfTargets);\n  return React.createElement(Link.make, {\n    href: \"/targets/\" + targetId,\n    ariaLabel: \"Select Target \" + targetId,\n    className: \"bg-white border-t p-6 flex items-center justify-between hover:bg-gray-200 hover:text-primary-500 cursor-pointer\",\n    children: null,\n    key: \"target-\" + targetId\n  }, React.createElement(\"span\", {\n    className: \"font-semibold text-left leading-snug\"\n  }, CoursesCurriculum__Target.title(target)), React.createElement(\"span\", {\n    className: targetStatusClasses(targetStatus)\n  }, CoursesCurriculum__TargetStatus.statusToString(targetStatus)));\n}\n\nfunction renderTargetGroup(targetGroup, targets, statusOfTargets) {\n  var targetGroupId = CoursesCurriculum__TargetGroup.id(targetGroup);\n  var targets$1 = List.filter(function (t) {\n    return CoursesCurriculum__Target.targetGroupId(t) === targetGroupId;\n  })(targets);\n  return React.createElement(\"div\", {\n    key: \"target-group-\" + targetGroupId,\n    className: \"curriculum__target-group-container relative mt-5 px-3\"\n  }, React.createElement(\"div\", {\n    className: \"curriculum__target-group max-w-3xl mx-auto bg-white text-center rounded-lg shadow-md relative z-10 overflow-hidden \"\n  }, CoursesCurriculum__TargetGroup.milestone(targetGroup) ? React.createElement(\"div\", {\n    className: \"inline-block px-3 py-2 bg-orange-400 font-bold text-xs rounded-b-lg leading-tight text-white uppercase\"\n  }, \"Milestone modules\") : null, React.createElement(\"div\", {\n    className: \"p-6 pt-5\"\n  }, React.createElement(\"div\", {\n    className: \"text-2xl font-bold leading-snug\"\n  }, CoursesCurriculum__TargetGroup.name(targetGroup)), React.createElement(\"div\", {\n    className: \"text-sm max-w-md mx-auto leading-snug mt-1\"\n  }, CoursesCurriculum__TargetGroup.description(targetGroup))), $$Array.of_list(List.map(function (target) {\n    return rendertarget(target, statusOfTargets);\n  }, List.sort(function (t1, t2) {\n    return CoursesCurriculum__Target.sortIndex(t1) - CoursesCurriculum__Target.sortIndex(t2) | 0;\n  }, targets$1)))));\n}\n\nfunction addSubmission(setState, latestSubmission) {\n  return Curry._1(setState, function (state) {\n    var withoutSubmissionForThisTarget = List.filter(function (s) {\n      return CoursesCurriculum__LatestSubmission.targetId(s) !== CoursesCurriculum__LatestSubmission.targetId(latestSubmission);\n    })(state.latestSubmissions);\n    return {\n      selectedLevelId: state.selectedLevelId,\n      showLevelZero: state.showLevelZero,\n      latestSubmissions:\n      /* :: */\n      [latestSubmission, withoutSubmissionForThisTarget],\n      statusOfTargets: state.statusOfTargets,\n      notice: state.notice\n    };\n  });\n}\n\nfunction handleLockedLevel(level) {\n  var match = CoursesCurriculum__Level.unlockOn(level);\n  var tmp;\n\n  if (match !== undefined) {\n    var dateString = DateFns.format(DateFns.parseISO(match), \"MMMM d, yyyy\");\n    tmp = React.createElement(\"div\", {\n      className: \"font-semibold text-md px-3\"\n    }, React.createElement(\"p\", undefined, \"The level is currently locked!\"), React.createElement(\"p\", undefined, \"You can access the content on \" + (dateString + \".\")));\n  } else {\n    tmp = null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"max-w-xl mx-auto text-center mt-4\"\n  }, React.createElement(\"div\", {\n    className: \"font-semibold text-2xl font-bold px-3\"\n  }, \"Level Locked\"), React.createElement(\"img\", {\n    className: \"max-w-sm mx-auto\",\n    src: levelLockedImage\n  }), tmp);\n}\n\nfunction statusOfMilestoneTargets(targetGroups, targets, level, statusOfTargets) {\n  var targetGroupsInLevel = List.filter(function (tg) {\n    return CoursesCurriculum__TargetGroup.levelId(tg) === CoursesCurriculum__Level.id(level);\n  })(targetGroups);\n  var milestoneTargetGroupIds = List.map(CoursesCurriculum__TargetGroup.id, List.filter(CoursesCurriculum__TargetGroup.milestone)(targetGroupsInLevel));\n  var milestoneTargetIds = List.map(CoursesCurriculum__Target.id, List.filter(function (t) {\n    return List.mem(CoursesCurriculum__Target.targetGroupId(t), milestoneTargetGroupIds);\n  })(targets));\n  return List.filter(function (ts) {\n    return List.mem(CoursesCurriculum__TargetStatus.targetId(ts), milestoneTargetIds);\n  })(statusOfTargets);\n}\n\nfunction isLevelComplete(targetStatuses, eligibleStatuses) {\n  if (ListUtils.isNotEmpty(targetStatuses)) {\n    return CoursesCurriculum__TargetStatus.matchesStatuses(eligibleStatuses, targetStatuses);\n  } else {\n    return false;\n  }\n}\n\nfunction computeLevelUp(course, levels, teamLevel, targetGroups, targets, statusOfTargets, accessLockedLevels) {\n  var progressionBehavior = CoursesCurriculum__Course.progressionBehavior(course);\n  var currentLevelNumber = CoursesCurriculum__Level.number(teamLevel);\n  var minimumRequiredLevel;\n\n  if (typeof progressionBehavior === \"number\") {\n    minimumRequiredLevel = undefined;\n  } else {\n    var minimumLevelNumber = currentLevelNumber - progressionBehavior[1] | 0;\n    minimumRequiredLevel = minimumLevelNumber >= 1 ? ListUtils.findOpt(function (l) {\n      return CoursesCurriculum__Level.number(l) === minimumLevelNumber;\n    }, levels) : undefined;\n  }\n\n  var statusOfCurrentMilestoneTargets = statusOfMilestoneTargets(targetGroups, targets, teamLevel, statusOfTargets);\n  var currentLevelComplete = isLevelComplete(statusOfCurrentMilestoneTargets, CoursesCurriculum__TargetStatus.currentLevelStatuses(progressionBehavior));\n  var minimumRequiredLevelComplete;\n\n  if (minimumRequiredLevel !== undefined) {\n    var statusOfMinimumRequiredLevelMilestoneTargets = statusOfMilestoneTargets(targetGroups, targets, minimumRequiredLevel, statusOfTargets);\n    minimumRequiredLevelComplete = isLevelComplete(statusOfMinimumRequiredLevelMilestoneTargets, CoursesCurriculum__TargetStatus.minimumRequiredLevelStatuses);\n  } else {\n    minimumRequiredLevelComplete = true;\n  }\n\n  var nextLevel = ListUtils.findOpt(function (l) {\n    return CoursesCurriculum__Level.number(l) === (CoursesCurriculum__Level.number(teamLevel) + 1 | 0);\n  }, levels);\n\n  if (nextLevel !== undefined) {\n    if (CoursesCurriculum__Level.isUnlocked(nextLevel) || accessLockedLevels) {\n      if (typeof progressionBehavior === \"number\") {\n        if (progressionBehavior >= 751362817) {\n          if (currentLevelComplete) {\n            return (\n              /* LevelUp */\n              4\n            );\n          } else {\n            return (\n              /* Nothing */\n              5\n            );\n          }\n        } else if (currentLevelComplete) {\n          return (\n            /* LevelUp */\n            4\n          );\n        } else {\n          var currentLevelSubmitted = isLevelComplete(statusOfCurrentMilestoneTargets,\n          /* :: */\n          [\n          /* Submitted */\n          1,\n          /* :: */\n          [\n          /* Passed */\n          2,\n          /* [] */\n          0]]);\n\n          if (currentLevelSubmitted) {\n            return (\n              /* LevelUpBlocked */\n              Block.__(1, [currentLevelNumber])\n            );\n          } else {\n            return (\n              /* Nothing */\n              5\n            );\n          }\n        }\n      } else if (currentLevelComplete) {\n        if (minimumRequiredLevelComplete) {\n          return (\n            /* LevelUp */\n            4\n          );\n        } else {\n          return (\n            /* LevelUpLimited */\n            Block.__(0, [currentLevelNumber, currentLevelNumber - progressionBehavior[1] | 0])\n          );\n        }\n      } else {\n        return (\n          /* Nothing */\n          5\n        );\n      }\n    } else {\n      return (\n        /* Nothing */\n        5\n      );\n    }\n  } else if (currentLevelComplete) {\n    return (\n      /* CourseComplete */\n      2\n    );\n  } else {\n    return (\n      /* Nothing */\n      5\n    );\n  }\n}\n\nfunction computeNotice(levels, teamLevel, targetGroups, targets, statusOfTargets, course, team, preview, accessLockedLevels) {\n  var match = CoursesCurriculum__Course.hasEnded(course);\n  var match$1 = CoursesCurriculum__Team.accessEnded(team);\n\n  if (preview) {\n    return (\n      /* Preview */\n      0\n    );\n  } else if (match) {\n    return (\n      /* CourseEnded */\n      1\n    );\n  } else if (match$1) {\n    return (\n      /* AccessEnded */\n      3\n    );\n  } else {\n    return computeLevelUp(course, levels, teamLevel, targetGroups, targets, statusOfTargets, accessLockedLevels);\n  }\n}\n\nfunction navigationLink(direction, level, setState) {\n  var match = direction >= 870035731 ?\n  /* tuple */\n  [undefined, \"Next Level\", \"Next\", \"fa-arrow-right\"] :\n  /* tuple */\n  [\"fa-arrow-left\", \"Previous Level\", \"Previous\", undefined];\n\n  var arrow = function arrow(icon) {\n    return Belt_Option.mapWithDefault(icon, null, function (icon) {\n      return React.createElement(FaIcon.make, {\n        classes: \"fas \" + icon\n      });\n    });\n  };\n\n  return React.createElement(\"button\", {\n    className: \"block w-full focus:outline-none p-4 text-center border rounded-lg bg-gray-100 hover:bg-gray-200 cursor-pointer\",\n    onClick: function onClick(param) {\n      return Curry._1(setState, function (state) {\n        return {\n          selectedLevelId: CoursesCurriculum__Level.id(level),\n          showLevelZero: state.showLevelZero,\n          latestSubmissions: state.latestSubmissions,\n          statusOfTargets: state.statusOfTargets,\n          notice: state.notice\n        };\n      });\n    }\n  }, arrow(match[0]), React.createElement(\"span\", {\n    className: \"mx-2 hidden md:inline\"\n  }, match[1]), React.createElement(\"span\", {\n    className: \"mx-2 inline md:hidden\"\n  }, match[2]), arrow(match[3]));\n}\n\nfunction quickNavigationLinks(levels, selectedLevel, setState) {\n  var previous = CoursesCurriculum__Level.previous(levels, selectedLevel);\n  var next = CoursesCurriculum__Level.next(levels, selectedLevel);\n  var tmp;\n\n  if (previous !== undefined) {\n    var previousLevel = previous;\n    tmp = next !== undefined ? [React.createElement(\"div\", {\n      key: \"previous\",\n      className: \"w-1/2 mr-2\"\n    }, navigationLink(\n    /* Previous */\n    -43878313, previousLevel, setState)), React.createElement(\"div\", {\n      key: \"next\",\n      className: \"w-1/2 ml-2\"\n    }, navigationLink(\n    /* Next */\n    870035731, next, setState))] : React.createElement(\"div\", {\n      className: \"w-full\"\n    }, navigationLink(\n    /* Previous */\n    -43878313, previousLevel, setState));\n  } else {\n    tmp = next !== undefined ? React.createElement(\"div\", {\n      className: \"w-full\"\n    }, navigationLink(\n    /* Next */\n    870035731, next, setState)) : null;\n  }\n\n  return React.createElement(\"div\", undefined, React.createElement(\"hr\", {\n    className: \"my-6\"\n  }), React.createElement(\"div\", {\n    className: \"container mx-auto max-w-3xl flex px-3 lg:px-0\"\n  }, tmp));\n}\n\nfunction CoursesCurriculum(Props) {\n  var course = Props.course;\n  var levels = Props.levels;\n  var targetGroups = Props.targetGroups;\n  var targets = Props.targets;\n  var submissions = Props.submissions;\n  var team = Props.team;\n  var coaches = Props.coaches;\n  var users = Props.users;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var preview = Props.preview;\n  var accessLockedLevels = Props.accessLockedLevels;\n  var url = ReasonReactRouter.useUrl(undefined,\n  /* () */\n  0);\n  var match = url.path;\n  var selectedTarget;\n\n  if (match && match[0] === \"targets\") {\n    var match$1 = match[1];\n    selectedTarget = match$1 ? Belt_Option.map(StringUtils.paramToId(match$1[0]), function (targetId) {\n      return ListUtils.unsafeFind(function (t) {\n        return CoursesCurriculum__Target.id(t) === targetId;\n      }, \"Could not find selectedTarget with ID \" + targetId, targets);\n    }) : undefined;\n  } else {\n    selectedTarget = undefined;\n  }\n\n  var levelZero = ListUtils.findOpt(function (l) {\n    return CoursesCurriculum__Level.number(l) === 0;\n  }, levels);\n  var teamLevelId = CoursesCurriculum__Team.levelId(team);\n  var teamLevel = ListUtils.unsafeFind(function (l) {\n    return CoursesCurriculum__Level.id(l) === teamLevelId;\n  }, \"Could not find teamLevel with ID \" + teamLevelId, levels);\n  var targetLevelId;\n\n  if (selectedTarget !== undefined) {\n    var targetGroupId = CoursesCurriculum__Target.targetGroupId(selectedTarget);\n    var targetGroup = ListUtils.unsafeFind(function (t) {\n      return CoursesCurriculum__TargetGroup.id(t) === targetGroupId;\n    }, \"Could not find targetGroup with ID \" + targetGroupId, targetGroups);\n    targetLevelId = CoursesCurriculum__TargetGroup.levelId(targetGroup);\n  } else {\n    targetLevelId = undefined;\n  }\n\n  var computeTargetStatus = function computeTargetStatus(param) {\n    return CoursesCurriculum__TargetStatus.compute(preview, team, course, levels, targetGroups, targets, param);\n  };\n\n  var initialRender = React.useRef(true);\n  var match$2 = React.useState(function () {\n    var statusOfTargets = computeTargetStatus(submissions);\n    var tmp;\n    var exit = 0;\n\n    if (preview && !(targetLevelId !== undefined || levelZero !== undefined)) {\n      tmp = CoursesCurriculum__Level.id(CoursesCurriculum__Level.first(levels));\n    } else {\n      exit = 1;\n    }\n\n    if (exit === 1) {\n      if (targetLevelId !== undefined) {\n        var targetLevelId$1 = targetLevelId;\n        tmp = levelZero !== undefined && CoursesCurriculum__Level.id(levelZero) === targetLevelId$1 ? teamLevelId : targetLevelId$1;\n      } else {\n        tmp = teamLevelId;\n      }\n    }\n\n    return {\n      selectedLevelId: tmp,\n      showLevelZero: levelZero !== undefined && targetLevelId !== undefined ? CoursesCurriculum__Level.id(levelZero) === targetLevelId : false,\n      latestSubmissions: submissions,\n      statusOfTargets: statusOfTargets,\n      notice: computeNotice(levels, teamLevel, targetGroups, targets, statusOfTargets, course, team, preview, accessLockedLevels)\n    };\n  });\n  var setState = match$2[1];\n  var state = match$2[0];\n  var match$3 = state.showLevelZero;\n  var currentLevelId = levelZero !== undefined && match$3 ? CoursesCurriculum__Level.id(levelZero) : state.selectedLevelId;\n  var currentLevel = ListUtils.unsafeFind(function (l) {\n    return CoursesCurriculum__Level.id(l) === currentLevelId;\n  }, \"Could not find currentLevel with id \" + currentLevelId, levels);\n  var selectedLevel = ListUtils.unsafeFind(function (l) {\n    return CoursesCurriculum__Level.id(l) === state.selectedLevelId;\n  }, \"Could not find selectedLevel with id \" + state.selectedLevelId, levels);\n  React.useEffect(function () {\n    if (initialRender.current) {\n      initialRender.current = false;\n    } else {\n      var newStatusOfTargets = computeTargetStatus(state.latestSubmissions);\n\n      Curry._1(setState, function (state) {\n        return {\n          selectedLevelId: state.selectedLevelId,\n          showLevelZero: state.showLevelZero,\n          latestSubmissions: state.latestSubmissions,\n          statusOfTargets: newStatusOfTargets,\n          notice: computeNotice(levels, teamLevel, targetGroups, targets, newStatusOfTargets, course, team, preview, accessLockedLevels)\n        };\n      });\n    }\n\n    return;\n  }, [state.latestSubmissions]);\n  var targetGroupsInLevel = List.filter(function (tg) {\n    return CoursesCurriculum__TargetGroup.levelId(tg) === currentLevelId;\n  })(targetGroups);\n  var tmp;\n\n  if (selectedTarget !== undefined) {\n    var target = selectedTarget;\n    var targetStatus = ListUtils.unsafeFind(function (ts) {\n      return CoursesCurriculum__TargetStatus.targetId(ts) === CoursesCurriculum__Target.id(target);\n    }, \"Could not find targetStatus for selectedTarget with ID \" + CoursesCurriculum__Target.id(target), state.statusOfTargets);\n    tmp = React.createElement(CoursesCurriculum__Overlay.make, {\n      target: target,\n      course: course,\n      targetStatus: targetStatus,\n      addSubmissionCB: function addSubmissionCB(param) {\n        return addSubmission(setState, param);\n      },\n      targets: targets,\n      statusOfTargets: state.statusOfTargets,\n      users: users,\n      evaluationCriteria: evaluationCriteria,\n      coaches: coaches,\n      preview: preview\n    });\n  } else {\n    tmp = null;\n  }\n\n  var _anyOtherNotice = state.notice;\n  var tmp$1;\n  var exit = 0;\n\n  if (typeof _anyOtherNotice === \"number\" && _anyOtherNotice === 4) {\n    tmp$1 = null;\n  } else {\n    exit = 1;\n  }\n\n  if (exit === 1) {\n    tmp$1 = React.createElement(\"div\", {\n      className: \"relative\"\n    }, React.createElement(CoursesCurriculum__LevelSelector.make, {\n      levels: levels,\n      teamLevel: teamLevel,\n      selectedLevel: selectedLevel,\n      setSelectedLevelId: function setSelectedLevelId(selectedLevelId) {\n        return Curry._1(setState, function (state) {\n          return {\n            selectedLevelId: selectedLevelId,\n            showLevelZero: state.showLevelZero,\n            latestSubmissions: state.latestSubmissions,\n            statusOfTargets: state.statusOfTargets,\n            notice: state.notice\n          };\n        });\n      },\n      showLevelZero: state.showLevelZero,\n      setShowLevelZero: function setShowLevelZero(showLevelZero) {\n        return Curry._1(setState, function (state) {\n          return {\n            selectedLevelId: state.selectedLevelId,\n            showLevelZero: showLevelZero,\n            latestSubmissions: state.latestSubmissions,\n            statusOfTargets: state.statusOfTargets,\n            notice: state.notice\n          };\n        });\n      },\n      levelZero: levelZero\n    }), CoursesCurriculum__Level.isLocked(currentLevel) && accessLockedLevels ? React.createElement(\"div\", {\n      className: \"text-center p-3 mt-5 border rounded-lg bg-blue-100 max-w-3xl mx-auto\"\n    }, \"This level is still locked for students, and will be unlocked on \", React.createElement(\"strong\", undefined, CoursesCurriculum__Level.unlockDateString(currentLevel)), \".\") : null, CoursesCurriculum__Level.isUnlocked(currentLevel) || accessLockedLevels ? $$Array.of_list(List.map(function (targetGroup) {\n      return renderTargetGroup(targetGroup, targets, state.statusOfTargets);\n    }, CoursesCurriculum__TargetGroup.sort(targetGroupsInLevel))) : handleLockedLevel(currentLevel));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"bg-gray-100 pt-11 pb-8 -mt-7\"\n  }, tmp, React.createElement(CoursesCurriculum__NoticeManager.make, {\n    notice: state.notice,\n    course: course\n  }), tmp$1, state.showLevelZero ? null : quickNavigationLinks(levels, selectedLevel, setState));\n}\n\nvar make = CoursesCurriculum;\nexports.levelLockedImage = levelLockedImage;\nexports.str = str;\nexports.targetStatusClasses = targetStatusClasses;\nexports.rendertarget = rendertarget;\nexports.renderTargetGroup = renderTargetGroup;\nexports.addSubmission = addSubmission;\nexports.handleLockedLevel = handleLockedLevel;\nexports.statusOfMilestoneTargets = statusOfMilestoneTargets;\nexports.isLevelComplete = isLevelComplete;\nexports.computeLevelUp = computeLevelUp;\nexports.computeNotice = computeNotice;\nexports.navigationLink = navigationLink;\nexports.quickNavigationLinks = quickNavigationLinks;\nexports.make = make;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/curricula/components/CoursesCurriculum.bs.js"],"names":["Link","require","List","$$Array","Block","Curry","React","FaIcon","DateFns","ListUtils","Belt_Option","StringUtils","ReasonReactRouter","CoursesCurriculum__Team","LevelLockSvg","CoursesCurriculum__Level","CoursesCurriculum__Course","CoursesCurriculum__Target","CoursesCurriculum__Overlay","CoursesCurriculum__TargetGroup","CoursesCurriculum__TargetStatus","CoursesCurriculum__LevelSelector","CoursesCurriculum__NoticeManager","CoursesCurriculum__LatestSubmission","levelLockedImage","str","prim","targetStatusClasses","targetStatus","statusClasses","statusToString","toLowerCase","rendertarget","target","statusOfTargets","targetId","id","unsafeFind","ts","createElement","make","href","ariaLabel","className","children","key","title","renderTargetGroup","targetGroup","targets","targetGroupId","targets$1","filter","t","milestone","name","description","of_list","map","sort","t1","t2","sortIndex","addSubmission","setState","latestSubmission","_1","state","withoutSubmissionForThisTarget","s","latestSubmissions","selectedLevelId","showLevelZero","notice","handleLockedLevel","level","match","unlockOn","tmp","undefined","dateString","format","parseISO","src","statusOfMilestoneTargets","targetGroups","targetGroupsInLevel","tg","levelId","milestoneTargetGroupIds","milestoneTargetIds","mem","isLevelComplete","targetStatuses","eligibleStatuses","isNotEmpty","matchesStatuses","computeLevelUp","course","levels","teamLevel","accessLockedLevels","progressionBehavior","currentLevelNumber","number","minimumRequiredLevel","minimumLevelNumber","findOpt","l","statusOfCurrentMilestoneTargets","currentLevelComplete","currentLevelStatuses","minimumRequiredLevelComplete","statusOfMinimumRequiredLevelMilestoneTargets","minimumRequiredLevelStatuses","nextLevel","isUnlocked","currentLevelSubmitted","__","computeNotice","team","preview","hasEnded","match$1","accessEnded","navigationLink","direction","arrow","icon","mapWithDefault","classes","onClick","param","quickNavigationLinks","selectedLevel","previous","next","previousLevel","CoursesCurriculum","Props","submissions","coaches","users","evaluationCriteria","url","useUrl","path","selectedTarget","paramToId","levelZero","teamLevelId","targetLevelId","computeTargetStatus","compute","initialRender","useRef","match$2","useState","exit","first","targetLevelId$1","match$3","currentLevelId","currentLevel","useEffect","current","newStatusOfTargets","addSubmissionCB","_anyOtherNotice","tmp$1","setSelectedLevelId","setShowLevelZero","isLocked","unlockDateString","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Link = require(\"../../../shared/components/Link.bs.js\");\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar DateFns = require(\"../../../shared/utils/DateFns.bs.js\");\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\nvar StringUtils = require(\"../../../shared/utils/StringUtils.bs.js\");\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\nvar CoursesCurriculum__Team = require(\"../types/CoursesCurriculum__Team.bs.js\");\nvar LevelLockSvg = require(\"../images/level-lock.svg\");\nvar CoursesCurriculum__Level = require(\"../types/CoursesCurriculum__Level.bs.js\");\nvar CoursesCurriculum__Course = require(\"../types/CoursesCurriculum__Course.bs.js\");\nvar CoursesCurriculum__Target = require(\"../types/CoursesCurriculum__Target.bs.js\");\nvar CoursesCurriculum__Overlay = require(\"./CoursesCurriculum__Overlay.bs.js\");\nvar CoursesCurriculum__TargetGroup = require(\"../types/CoursesCurriculum__TargetGroup.bs.js\");\nvar CoursesCurriculum__TargetStatus = require(\"../types/CoursesCurriculum__TargetStatus.bs.js\");\nvar CoursesCurriculum__LevelSelector = require(\"./CoursesCurriculum__LevelSelector.bs.js\");\nvar CoursesCurriculum__NoticeManager = require(\"./CoursesCurriculum__NoticeManager.bs.js\");\nvar CoursesCurriculum__LatestSubmission = require(\"../types/CoursesCurriculum__LatestSubmission.bs.js\");\n\n((require(\"./CoursesCurriculum.css\")));\n\nvar levelLockedImage = LevelLockSvg.default;\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction targetStatusClasses(targetStatus) {\n  var statusClasses = \"curriculum__target-status--\" + CoursesCurriculum__TargetStatus.statusToString(targetStatus).toLowerCase();\n  return \"curriculum__target-status px-3 py-px ml-4 h-6 \" + statusClasses;\n}\n\nfunction rendertarget(target, statusOfTargets) {\n  var targetId = CoursesCurriculum__Target.id(target);\n  var targetStatus = ListUtils.unsafeFind((function (ts) {\n          return CoursesCurriculum__TargetStatus.targetId(ts) === targetId;\n        }), \"Could not find targetStatus for listed target with ID \" + targetId, statusOfTargets);\n  return React.createElement(Link.make, {\n              href: \"/targets/\" + targetId,\n              ariaLabel: \"Select Target \" + targetId,\n              className: \"bg-white border-t p-6 flex items-center justify-between hover:bg-gray-200 hover:text-primary-500 cursor-pointer\",\n              children: null,\n              key: \"target-\" + targetId\n            }, React.createElement(\"span\", {\n                  className: \"font-semibold text-left leading-snug\"\n                }, CoursesCurriculum__Target.title(target)), React.createElement(\"span\", {\n                  className: targetStatusClasses(targetStatus)\n                }, CoursesCurriculum__TargetStatus.statusToString(targetStatus)));\n}\n\nfunction renderTargetGroup(targetGroup, targets, statusOfTargets) {\n  var targetGroupId = CoursesCurriculum__TargetGroup.id(targetGroup);\n  var targets$1 = List.filter((function (t) {\n            return CoursesCurriculum__Target.targetGroupId(t) === targetGroupId;\n          }))(targets);\n  return React.createElement(\"div\", {\n              key: \"target-group-\" + targetGroupId,\n              className: \"curriculum__target-group-container relative mt-5 px-3\"\n            }, React.createElement(\"div\", {\n                  className: \"curriculum__target-group max-w-3xl mx-auto bg-white text-center rounded-lg shadow-md relative z-10 overflow-hidden \"\n                }, CoursesCurriculum__TargetGroup.milestone(targetGroup) ? React.createElement(\"div\", {\n                        className: \"inline-block px-3 py-2 bg-orange-400 font-bold text-xs rounded-b-lg leading-tight text-white uppercase\"\n                      }, \"Milestone modules\") : null, React.createElement(\"div\", {\n                      className: \"p-6 pt-5\"\n                    }, React.createElement(\"div\", {\n                          className: \"text-2xl font-bold leading-snug\"\n                        }, CoursesCurriculum__TargetGroup.name(targetGroup)), React.createElement(\"div\", {\n                          className: \"text-sm max-w-md mx-auto leading-snug mt-1\"\n                        }, CoursesCurriculum__TargetGroup.description(targetGroup))), $$Array.of_list(List.map((function (target) {\n                            return rendertarget(target, statusOfTargets);\n                          }), List.sort((function (t1, t2) {\n                                return CoursesCurriculum__Target.sortIndex(t1) - CoursesCurriculum__Target.sortIndex(t2) | 0;\n                              }), targets$1)))));\n}\n\nfunction addSubmission(setState, latestSubmission) {\n  return Curry._1(setState, (function (state) {\n                var withoutSubmissionForThisTarget = List.filter((function (s) {\n                          return CoursesCurriculum__LatestSubmission.targetId(s) !== CoursesCurriculum__LatestSubmission.targetId(latestSubmission);\n                        }))(state.latestSubmissions);\n                return {\n                        selectedLevelId: state.selectedLevelId,\n                        showLevelZero: state.showLevelZero,\n                        latestSubmissions: /* :: */[\n                          latestSubmission,\n                          withoutSubmissionForThisTarget\n                        ],\n                        statusOfTargets: state.statusOfTargets,\n                        notice: state.notice\n                      };\n              }));\n}\n\nfunction handleLockedLevel(level) {\n  var match = CoursesCurriculum__Level.unlockOn(level);\n  var tmp;\n  if (match !== undefined) {\n    var dateString = DateFns.format(DateFns.parseISO(match), \"MMMM d, yyyy\");\n    tmp = React.createElement(\"div\", {\n          className: \"font-semibold text-md px-3\"\n        }, React.createElement(\"p\", undefined, \"The level is currently locked!\"), React.createElement(\"p\", undefined, \"You can access the content on \" + (dateString + \".\")));\n  } else {\n    tmp = null;\n  }\n  return React.createElement(\"div\", {\n              className: \"max-w-xl mx-auto text-center mt-4\"\n            }, React.createElement(\"div\", {\n                  className: \"font-semibold text-2xl font-bold px-3\"\n                }, \"Level Locked\"), React.createElement(\"img\", {\n                  className: \"max-w-sm mx-auto\",\n                  src: levelLockedImage\n                }), tmp);\n}\n\nfunction statusOfMilestoneTargets(targetGroups, targets, level, statusOfTargets) {\n  var targetGroupsInLevel = List.filter((function (tg) {\n            return CoursesCurriculum__TargetGroup.levelId(tg) === CoursesCurriculum__Level.id(level);\n          }))(targetGroups);\n  var milestoneTargetGroupIds = List.map(CoursesCurriculum__TargetGroup.id, List.filter(CoursesCurriculum__TargetGroup.milestone)(targetGroupsInLevel));\n  var milestoneTargetIds = List.map(CoursesCurriculum__Target.id, List.filter((function (t) {\n                return List.mem(CoursesCurriculum__Target.targetGroupId(t), milestoneTargetGroupIds);\n              }))(targets));\n  return List.filter((function (ts) {\n                  return List.mem(CoursesCurriculum__TargetStatus.targetId(ts), milestoneTargetIds);\n                }))(statusOfTargets);\n}\n\nfunction isLevelComplete(targetStatuses, eligibleStatuses) {\n  if (ListUtils.isNotEmpty(targetStatuses)) {\n    return CoursesCurriculum__TargetStatus.matchesStatuses(eligibleStatuses, targetStatuses);\n  } else {\n    return false;\n  }\n}\n\nfunction computeLevelUp(course, levels, teamLevel, targetGroups, targets, statusOfTargets, accessLockedLevels) {\n  var progressionBehavior = CoursesCurriculum__Course.progressionBehavior(course);\n  var currentLevelNumber = CoursesCurriculum__Level.number(teamLevel);\n  var minimumRequiredLevel;\n  if (typeof progressionBehavior === \"number\") {\n    minimumRequiredLevel = undefined;\n  } else {\n    var minimumLevelNumber = currentLevelNumber - progressionBehavior[1] | 0;\n    minimumRequiredLevel = minimumLevelNumber >= 1 ? ListUtils.findOpt((function (l) {\n              return CoursesCurriculum__Level.number(l) === minimumLevelNumber;\n            }), levels) : undefined;\n  }\n  var statusOfCurrentMilestoneTargets = statusOfMilestoneTargets(targetGroups, targets, teamLevel, statusOfTargets);\n  var currentLevelComplete = isLevelComplete(statusOfCurrentMilestoneTargets, CoursesCurriculum__TargetStatus.currentLevelStatuses(progressionBehavior));\n  var minimumRequiredLevelComplete;\n  if (minimumRequiredLevel !== undefined) {\n    var statusOfMinimumRequiredLevelMilestoneTargets = statusOfMilestoneTargets(targetGroups, targets, minimumRequiredLevel, statusOfTargets);\n    minimumRequiredLevelComplete = isLevelComplete(statusOfMinimumRequiredLevelMilestoneTargets, CoursesCurriculum__TargetStatus.minimumRequiredLevelStatuses);\n  } else {\n    minimumRequiredLevelComplete = true;\n  }\n  var nextLevel = ListUtils.findOpt((function (l) {\n          return CoursesCurriculum__Level.number(l) === (CoursesCurriculum__Level.number(teamLevel) + 1 | 0);\n        }), levels);\n  if (nextLevel !== undefined) {\n    if (CoursesCurriculum__Level.isUnlocked(nextLevel) || accessLockedLevels) {\n      if (typeof progressionBehavior === \"number\") {\n        if (progressionBehavior >= 751362817) {\n          if (currentLevelComplete) {\n            return /* LevelUp */4;\n          } else {\n            return /* Nothing */5;\n          }\n        } else if (currentLevelComplete) {\n          return /* LevelUp */4;\n        } else {\n          var currentLevelSubmitted = isLevelComplete(statusOfCurrentMilestoneTargets, /* :: */[\n                /* Submitted */1,\n                /* :: */[\n                  /* Passed */2,\n                  /* [] */0\n                ]\n              ]);\n          if (currentLevelSubmitted) {\n            return /* LevelUpBlocked */Block.__(1, [currentLevelNumber]);\n          } else {\n            return /* Nothing */5;\n          }\n        }\n      } else if (currentLevelComplete) {\n        if (minimumRequiredLevelComplete) {\n          return /* LevelUp */4;\n        } else {\n          return /* LevelUpLimited */Block.__(0, [\n                    currentLevelNumber,\n                    currentLevelNumber - progressionBehavior[1] | 0\n                  ]);\n        }\n      } else {\n        return /* Nothing */5;\n      }\n    } else {\n      return /* Nothing */5;\n    }\n  } else if (currentLevelComplete) {\n    return /* CourseComplete */2;\n  } else {\n    return /* Nothing */5;\n  }\n}\n\nfunction computeNotice(levels, teamLevel, targetGroups, targets, statusOfTargets, course, team, preview, accessLockedLevels) {\n  var match = CoursesCurriculum__Course.hasEnded(course);\n  var match$1 = CoursesCurriculum__Team.accessEnded(team);\n  if (preview) {\n    return /* Preview */0;\n  } else if (match) {\n    return /* CourseEnded */1;\n  } else if (match$1) {\n    return /* AccessEnded */3;\n  } else {\n    return computeLevelUp(course, levels, teamLevel, targetGroups, targets, statusOfTargets, accessLockedLevels);\n  }\n}\n\nfunction navigationLink(direction, level, setState) {\n  var match = direction >= 870035731 ? /* tuple */[\n      undefined,\n      \"Next Level\",\n      \"Next\",\n      \"fa-arrow-right\"\n    ] : /* tuple */[\n      \"fa-arrow-left\",\n      \"Previous Level\",\n      \"Previous\",\n      undefined\n    ];\n  var arrow = function (icon) {\n    return Belt_Option.mapWithDefault(icon, null, (function (icon) {\n                  return React.createElement(FaIcon.make, {\n                              classes: \"fas \" + icon\n                            });\n                }));\n  };\n  return React.createElement(\"button\", {\n              className: \"block w-full focus:outline-none p-4 text-center border rounded-lg bg-gray-100 hover:bg-gray-200 cursor-pointer\",\n              onClick: (function (param) {\n                  return Curry._1(setState, (function (state) {\n                                return {\n                                        selectedLevelId: CoursesCurriculum__Level.id(level),\n                                        showLevelZero: state.showLevelZero,\n                                        latestSubmissions: state.latestSubmissions,\n                                        statusOfTargets: state.statusOfTargets,\n                                        notice: state.notice\n                                      };\n                              }));\n                })\n            }, arrow(match[0]), React.createElement(\"span\", {\n                  className: \"mx-2 hidden md:inline\"\n                }, match[1]), React.createElement(\"span\", {\n                  className: \"mx-2 inline md:hidden\"\n                }, match[2]), arrow(match[3]));\n}\n\nfunction quickNavigationLinks(levels, selectedLevel, setState) {\n  var previous = CoursesCurriculum__Level.previous(levels, selectedLevel);\n  var next = CoursesCurriculum__Level.next(levels, selectedLevel);\n  var tmp;\n  if (previous !== undefined) {\n    var previousLevel = previous;\n    tmp = next !== undefined ? [\n        React.createElement(\"div\", {\n              key: \"previous\",\n              className: \"w-1/2 mr-2\"\n            }, navigationLink(/* Previous */-43878313, previousLevel, setState)),\n        React.createElement(\"div\", {\n              key: \"next\",\n              className: \"w-1/2 ml-2\"\n            }, navigationLink(/* Next */870035731, next, setState))\n      ] : React.createElement(\"div\", {\n            className: \"w-full\"\n          }, navigationLink(/* Previous */-43878313, previousLevel, setState));\n  } else {\n    tmp = next !== undefined ? React.createElement(\"div\", {\n            className: \"w-full\"\n          }, navigationLink(/* Next */870035731, next, setState)) : null;\n  }\n  return React.createElement(\"div\", undefined, React.createElement(\"hr\", {\n                  className: \"my-6\"\n                }), React.createElement(\"div\", {\n                  className: \"container mx-auto max-w-3xl flex px-3 lg:px-0\"\n                }, tmp));\n}\n\nfunction CoursesCurriculum(Props) {\n  var course = Props.course;\n  var levels = Props.levels;\n  var targetGroups = Props.targetGroups;\n  var targets = Props.targets;\n  var submissions = Props.submissions;\n  var team = Props.team;\n  var coaches = Props.coaches;\n  var users = Props.users;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var preview = Props.preview;\n  var accessLockedLevels = Props.accessLockedLevels;\n  var url = ReasonReactRouter.useUrl(undefined, /* () */0);\n  var match = url.path;\n  var selectedTarget;\n  if (match && match[0] === \"targets\") {\n    var match$1 = match[1];\n    selectedTarget = match$1 ? Belt_Option.map(StringUtils.paramToId(match$1[0]), (function (targetId) {\n              return ListUtils.unsafeFind((function (t) {\n                            return CoursesCurriculum__Target.id(t) === targetId;\n                          }), \"Could not find selectedTarget with ID \" + targetId, targets);\n            })) : undefined;\n  } else {\n    selectedTarget = undefined;\n  }\n  var levelZero = ListUtils.findOpt((function (l) {\n          return CoursesCurriculum__Level.number(l) === 0;\n        }), levels);\n  var teamLevelId = CoursesCurriculum__Team.levelId(team);\n  var teamLevel = ListUtils.unsafeFind((function (l) {\n          return CoursesCurriculum__Level.id(l) === teamLevelId;\n        }), \"Could not find teamLevel with ID \" + teamLevelId, levels);\n  var targetLevelId;\n  if (selectedTarget !== undefined) {\n    var targetGroupId = CoursesCurriculum__Target.targetGroupId(selectedTarget);\n    var targetGroup = ListUtils.unsafeFind((function (t) {\n            return CoursesCurriculum__TargetGroup.id(t) === targetGroupId;\n          }), \"Could not find targetGroup with ID \" + targetGroupId, targetGroups);\n    targetLevelId = CoursesCurriculum__TargetGroup.levelId(targetGroup);\n  } else {\n    targetLevelId = undefined;\n  }\n  var computeTargetStatus = function (param) {\n    return CoursesCurriculum__TargetStatus.compute(preview, team, course, levels, targetGroups, targets, param);\n  };\n  var initialRender = React.useRef(true);\n  var match$2 = React.useState((function () {\n          var statusOfTargets = computeTargetStatus(submissions);\n          var tmp;\n          var exit = 0;\n          if (preview && !(targetLevelId !== undefined || levelZero !== undefined)) {\n            tmp = CoursesCurriculum__Level.id(CoursesCurriculum__Level.first(levels));\n          } else {\n            exit = 1;\n          }\n          if (exit === 1) {\n            if (targetLevelId !== undefined) {\n              var targetLevelId$1 = targetLevelId;\n              tmp = levelZero !== undefined && CoursesCurriculum__Level.id(levelZero) === targetLevelId$1 ? teamLevelId : targetLevelId$1;\n            } else {\n              tmp = teamLevelId;\n            }\n          }\n          return {\n                  selectedLevelId: tmp,\n                  showLevelZero: levelZero !== undefined && targetLevelId !== undefined ? CoursesCurriculum__Level.id(levelZero) === targetLevelId : false,\n                  latestSubmissions: submissions,\n                  statusOfTargets: statusOfTargets,\n                  notice: computeNotice(levels, teamLevel, targetGroups, targets, statusOfTargets, course, team, preview, accessLockedLevels)\n                };\n        }));\n  var setState = match$2[1];\n  var state = match$2[0];\n  var match$3 = state.showLevelZero;\n  var currentLevelId = levelZero !== undefined && match$3 ? CoursesCurriculum__Level.id(levelZero) : state.selectedLevelId;\n  var currentLevel = ListUtils.unsafeFind((function (l) {\n          return CoursesCurriculum__Level.id(l) === currentLevelId;\n        }), \"Could not find currentLevel with id \" + currentLevelId, levels);\n  var selectedLevel = ListUtils.unsafeFind((function (l) {\n          return CoursesCurriculum__Level.id(l) === state.selectedLevelId;\n        }), \"Could not find selectedLevel with id \" + state.selectedLevelId, levels);\n  React.useEffect((function () {\n          if (initialRender.current) {\n            initialRender.current = false;\n          } else {\n            var newStatusOfTargets = computeTargetStatus(state.latestSubmissions);\n            Curry._1(setState, (function (state) {\n                    return {\n                            selectedLevelId: state.selectedLevelId,\n                            showLevelZero: state.showLevelZero,\n                            latestSubmissions: state.latestSubmissions,\n                            statusOfTargets: newStatusOfTargets,\n                            notice: computeNotice(levels, teamLevel, targetGroups, targets, newStatusOfTargets, course, team, preview, accessLockedLevels)\n                          };\n                  }));\n          }\n          return ;\n        }), [state.latestSubmissions]);\n  var targetGroupsInLevel = List.filter((function (tg) {\n            return CoursesCurriculum__TargetGroup.levelId(tg) === currentLevelId;\n          }))(targetGroups);\n  var tmp;\n  if (selectedTarget !== undefined) {\n    var target = selectedTarget;\n    var targetStatus = ListUtils.unsafeFind((function (ts) {\n            return CoursesCurriculum__TargetStatus.targetId(ts) === CoursesCurriculum__Target.id(target);\n          }), \"Could not find targetStatus for selectedTarget with ID \" + CoursesCurriculum__Target.id(target), state.statusOfTargets);\n    tmp = React.createElement(CoursesCurriculum__Overlay.make, {\n          target: target,\n          course: course,\n          targetStatus: targetStatus,\n          addSubmissionCB: (function (param) {\n              return addSubmission(setState, param);\n            }),\n          targets: targets,\n          statusOfTargets: state.statusOfTargets,\n          users: users,\n          evaluationCriteria: evaluationCriteria,\n          coaches: coaches,\n          preview: preview\n        });\n  } else {\n    tmp = null;\n  }\n  var _anyOtherNotice = state.notice;\n  var tmp$1;\n  var exit = 0;\n  if (typeof _anyOtherNotice === \"number\" && _anyOtherNotice === 4) {\n    tmp$1 = null;\n  } else {\n    exit = 1;\n  }\n  if (exit === 1) {\n    tmp$1 = React.createElement(\"div\", {\n          className: \"relative\"\n        }, React.createElement(CoursesCurriculum__LevelSelector.make, {\n              levels: levels,\n              teamLevel: teamLevel,\n              selectedLevel: selectedLevel,\n              setSelectedLevelId: (function (selectedLevelId) {\n                  return Curry._1(setState, (function (state) {\n                                return {\n                                        selectedLevelId: selectedLevelId,\n                                        showLevelZero: state.showLevelZero,\n                                        latestSubmissions: state.latestSubmissions,\n                                        statusOfTargets: state.statusOfTargets,\n                                        notice: state.notice\n                                      };\n                              }));\n                }),\n              showLevelZero: state.showLevelZero,\n              setShowLevelZero: (function (showLevelZero) {\n                  return Curry._1(setState, (function (state) {\n                                return {\n                                        selectedLevelId: state.selectedLevelId,\n                                        showLevelZero: showLevelZero,\n                                        latestSubmissions: state.latestSubmissions,\n                                        statusOfTargets: state.statusOfTargets,\n                                        notice: state.notice\n                                      };\n                              }));\n                }),\n              levelZero: levelZero\n            }), CoursesCurriculum__Level.isLocked(currentLevel) && accessLockedLevels ? React.createElement(\"div\", {\n                className: \"text-center p-3 mt-5 border rounded-lg bg-blue-100 max-w-3xl mx-auto\"\n              }, \"This level is still locked for students, and will be unlocked on \", React.createElement(\"strong\", undefined, CoursesCurriculum__Level.unlockDateString(currentLevel)), \".\") : null, CoursesCurriculum__Level.isUnlocked(currentLevel) || accessLockedLevels ? $$Array.of_list(List.map((function (targetGroup) {\n                      return renderTargetGroup(targetGroup, targets, state.statusOfTargets);\n                    }), CoursesCurriculum__TargetGroup.sort(targetGroupsInLevel))) : handleLockedLevel(currentLevel));\n  }\n  return React.createElement(\"div\", {\n              className: \"bg-gray-100 pt-11 pb-8 -mt-7\"\n            }, tmp, React.createElement(CoursesCurriculum__NoticeManager.make, {\n                  notice: state.notice,\n                  course: course\n                }), tmp$1, state.showLevelZero ? null : quickNavigationLinks(levels, selectedLevel, setState));\n}\n\nvar make = CoursesCurriculum;\n\nexports.levelLockedImage = levelLockedImage;\nexports.str = str;\nexports.targetStatusClasses = targetStatusClasses;\nexports.rendertarget = rendertarget;\nexports.renderTargetGroup = renderTargetGroup;\nexports.addSubmission = addSubmission;\nexports.handleLockedLevel = handleLockedLevel;\nexports.statusOfMilestoneTargets = statusOfMilestoneTargets;\nexports.isLevelComplete = isLevelComplete;\nexports.computeLevelUp = computeLevelUp;\nexports.computeNotice = computeNotice;\nexports.navigationLink = navigationLink;\nexports.quickNavigationLinks = quickNavigationLinks;\nexports.make = make;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}