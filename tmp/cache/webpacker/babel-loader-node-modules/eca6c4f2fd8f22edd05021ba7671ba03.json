{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Link = require(\"../../../../shared/components/Link.bs.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar ListUtils = require(\"../../../../shared/utils/ListUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar WindowUtils = require(\"../../../../shared/utils/WindowUtils.bs.js\");\n\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\n\nvar CurriculumEditor__Course = require(\"../../types/curriculum_editor/CurriculumEditor__Course.bs.js\");\n\nvar CurriculumEditor__Target = require(\"../../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\n\nvar SchoolAdmin__EditorDrawer = require(\"../../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nvar CurriculumEditor__ContentEditor = require(\"./CurriculumEditor__ContentEditor.bs.js\");\n\nvar CurriculumEditor__VersionsEditor = require(\"./CurriculumEditor__VersionsEditor.bs.js\");\n\nvar CurriculumEditor__TargetDetailsEditor = require(\"./CurriculumEditor__TargetDetailsEditor.bs.js\");\n\nrequire(\"./CurriculumEditor__TargetDrawer.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction confirmDirtyAction(dirty, action) {\n  if (dirty) {\n    return WindowUtils.confirm(undefined, \"There are unsaved changes. Are you sure you want to discard them?\", function (param) {\n      return Curry._1(action,\n      /* () */\n      0);\n    });\n  } else {\n    return Curry._1(action,\n    /* () */\n    0);\n  }\n}\n\nfunction tab(page, selectedPage, pathPrefix, dirty, setDirty) {\n  var defaultClasses = \"curriculum-editor__target-drawer-tab cursor-pointer\";\n  var match;\n\n  switch (page) {\n    case\n    /* Content */\n    0:\n      match =\n      /* tuple */\n      [\"Content\", \"content\", \"fa-pen-nib\"];\n      break;\n\n    case\n    /* Details */\n    1:\n      match =\n      /* tuple */\n      [\"Details\", \"details\", \"fa-list-alt\"];\n      break;\n\n    case\n    /* Versions */\n    2:\n      match =\n      /* tuple */\n      [\"Versions\", \"versions\", \"fa-code-branch\"];\n      break;\n  }\n\n  var path = pathPrefix + match[1];\n  var selected = page === selectedPage;\n  var classes = selected ? \"curriculum-editor__target-drawer-tab cursor-pointer curriculum-editor__target-drawer-tab--selected\" : defaultClasses;\n  var confirm = dirty ? \"There are unsaved changes. Are you sure you want to discard them?\" : undefined;\n  var tmp = {\n    href: path,\n    className: classes,\n    onClick: function onClick(_e) {\n      return Curry._1(setDirty, function (param) {\n        return false;\n      });\n    },\n    children: null\n  };\n\n  if (confirm !== undefined) {\n    tmp.confirm = Caml_option.valFromOption(confirm);\n  }\n\n  return React.createElement(Link.make, tmp, React.createElement(\"i\", {\n    className: \"fas \" + match[2]\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, match[0]));\n}\n\nfunction closeDrawer(course) {\n  return ReasonReactRouter.push(\"/school/courses/\" + (CurriculumEditor__Course.id(course) + \"/curriculum\"));\n}\n\nfunction CurriculumEditor__TargetDrawer(Props) {\n  var targets = Props.targets;\n  var targetGroups = Props.targetGroups;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var course = Props.course;\n  var updateTargetCB = Props.updateTargetCB;\n  var url = ReasonReactRouter.useUrl(undefined,\n  /* () */\n  0);\n  var match = React.useState(function () {\n    return false;\n  });\n  var setDirty = match[1];\n  var dirty = match[0];\n  var _otherRoutes = url.path;\n\n  if (_otherRoutes && _otherRoutes[0] === \"school\") {\n    var match$1 = _otherRoutes[1];\n\n    if (match$1 && match$1[0] === \"courses\") {\n      var match$2 = match$1[1];\n\n      if (match$2) {\n        var match$3 = match$2[1];\n\n        if (match$3 && match$3[0] === \"targets\") {\n          var match$4 = match$3[1];\n\n          if (match$4) {\n            var match$5 = match$4[1];\n\n            if (match$5 && !match$5[1]) {\n              var pageName = match$5[0];\n              var targetId = match$4[0];\n              var target = ListUtils.unsafeFind(function (t) {\n                return CurriculumEditor__Target.id(t) === targetId;\n              }, \"Could not find target for editor drawer with the ID \" + targetId, targets);\n              var pathPrefix = \"/school/courses/\" + (CurriculumEditor__Course.id(course) + (\"/targets/\" + (targetId + \"/\")));\n              var match$6;\n\n              switch (pageName) {\n                case \"content\":\n                  match$6 =\n                  /* tuple */\n                  [React.createElement(CurriculumEditor__ContentEditor.make, {\n                    target: target,\n                    setDirtyCB: function setDirtyCB(dirty) {\n                      return Curry._1(setDirty, function (param) {\n                        return dirty;\n                      });\n                    }\n                  }),\n                  /* Content */\n                  0];\n                  break;\n\n                case \"details\":\n                  match$6 =\n                  /* tuple */\n                  [React.createElement(CurriculumEditor__TargetDetailsEditor.make, {\n                    target: target,\n                    targets: targets,\n                    targetGroups: targetGroups,\n                    evaluationCriteria: evaluationCriteria,\n                    updateTargetCB: updateTargetCB,\n                    setDirtyCB: function setDirtyCB(dirty) {\n                      return Curry._1(setDirty, function (param) {\n                        return dirty;\n                      });\n                    }\n                  }),\n                  /* Details */\n                  1];\n                  break;\n\n                case \"versions\":\n                  match$6 =\n                  /* tuple */\n                  [React.createElement(CurriculumEditor__VersionsEditor.make, {\n                    targetId: targetId\n                  }),\n                  /* Versions */\n                  2];\n                  break;\n\n                default:\n                  Rollbar.warning(\"Unexpected page requested for target editor drawer: \" + pageName);\n                  match$6 =\n                  /* tuple */\n                  [React.createElement(\"div\", undefined, \"Unexpected error. Please reload the page.\"),\n                  /* Content */\n                  0];\n              }\n\n              var selectedPage = match$6[1];\n              return React.createElement(SchoolAdmin__EditorDrawer.make, {\n                closeDrawerCB: function closeDrawerCB(param) {\n                  return confirmDirtyAction(dirty, function (param) {\n                    return closeDrawer(course);\n                  });\n                },\n                size:\n                /* Large */\n                1,\n                children: React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                  className: \"bg-gray-200 pt-6\"\n                }, React.createElement(\"div\", {\n                  className: \"max-w-3xl px-3 mx-auto\"\n                }, React.createElement(\"h3\", undefined, CurriculumEditor__Target.title(target))), React.createElement(\"div\", {\n                  className: \"flex w-full max-w-3xl mx-auto px-3 text-sm -mb-px mt-2\"\n                }, tab(\n                /* Content */\n                0, selectedPage, pathPrefix, dirty, setDirty), tab(\n                /* Details */\n                1, selectedPage, pathPrefix, dirty, setDirty), tab(\n                /* Versions */\n                2, selectedPage, pathPrefix, dirty, setDirty))), React.createElement(\"div\", {\n                  className: \"bg-white\"\n                }, React.createElement(\"div\", {\n                  className: \"mx-auto border-t border-gray-400\"\n                }, match$6[0])))\n              });\n            } else {\n              return null;\n            }\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nvar make = CurriculumEditor__TargetDrawer;\nexports.str = str;\nexports.confirmDirtyAction = confirmDirtyAction;\nexports.tab = tab;\nexports.closeDrawer = closeDrawer;\nexports.make = make;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/curriculum_editor/CurriculumEditor__TargetDrawer.bs.js"],"names":["Link","require","Curry","React","ListUtils","Caml_option","WindowUtils","ReasonReactRouter","CurriculumEditor__Course","CurriculumEditor__Target","SchoolAdmin__EditorDrawer","CurriculumEditor__ContentEditor","CurriculumEditor__VersionsEditor","CurriculumEditor__TargetDetailsEditor","str","prim","confirmDirtyAction","dirty","action","confirm","undefined","param","_1","tab","page","selectedPage","pathPrefix","setDirty","defaultClasses","match","path","selected","classes","tmp","href","className","onClick","_e","children","valFromOption","createElement","make","closeDrawer","course","push","id","CurriculumEditor__TargetDrawer","Props","targets","targetGroups","evaluationCriteria","updateTargetCB","url","useUrl","useState","_otherRoutes","match$1","match$2","match$3","match$4","match$5","pageName","targetId","target","unsafeFind","t","match$6","setDirtyCB","Rollbar","warning","closeDrawerCB","size","title","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Link = require(\"../../../../shared/components/Link.bs.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar ListUtils = require(\"../../../../shared/utils/ListUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar WindowUtils = require(\"../../../../shared/utils/WindowUtils.bs.js\");\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\nvar CurriculumEditor__Course = require(\"../../types/curriculum_editor/CurriculumEditor__Course.bs.js\");\nvar CurriculumEditor__Target = require(\"../../types/curriculum_editor/CurriculumEditor__Target.bs.js\");\nvar SchoolAdmin__EditorDrawer = require(\"../../../components/SchoolAdmin__EditorDrawer.bs.js\");\nvar CurriculumEditor__ContentEditor = require(\"./CurriculumEditor__ContentEditor.bs.js\");\nvar CurriculumEditor__VersionsEditor = require(\"./CurriculumEditor__VersionsEditor.bs.js\");\nvar CurriculumEditor__TargetDetailsEditor = require(\"./CurriculumEditor__TargetDetailsEditor.bs.js\");\n\n((require(\"./CurriculumEditor__TargetDrawer.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction confirmDirtyAction(dirty, action) {\n  if (dirty) {\n    return WindowUtils.confirm(undefined, \"There are unsaved changes. Are you sure you want to discard them?\", (function (param) {\n                  return Curry._1(action, /* () */0);\n                }));\n  } else {\n    return Curry._1(action, /* () */0);\n  }\n}\n\nfunction tab(page, selectedPage, pathPrefix, dirty, setDirty) {\n  var defaultClasses = \"curriculum-editor__target-drawer-tab cursor-pointer\";\n  var match;\n  switch (page) {\n    case /* Content */0 :\n        match = /* tuple */[\n          \"Content\",\n          \"content\",\n          \"fa-pen-nib\"\n        ];\n        break;\n    case /* Details */1 :\n        match = /* tuple */[\n          \"Details\",\n          \"details\",\n          \"fa-list-alt\"\n        ];\n        break;\n    case /* Versions */2 :\n        match = /* tuple */[\n          \"Versions\",\n          \"versions\",\n          \"fa-code-branch\"\n        ];\n        break;\n    \n  }\n  var path = pathPrefix + match[1];\n  var selected = page === selectedPage;\n  var classes = selected ? \"curriculum-editor__target-drawer-tab cursor-pointer curriculum-editor__target-drawer-tab--selected\" : defaultClasses;\n  var confirm = dirty ? \"There are unsaved changes. Are you sure you want to discard them?\" : undefined;\n  var tmp = {\n    href: path,\n    className: classes,\n    onClick: (function (_e) {\n        return Curry._1(setDirty, (function (param) {\n                      return false;\n                    }));\n      }),\n    children: null\n  };\n  if (confirm !== undefined) {\n    tmp.confirm = Caml_option.valFromOption(confirm);\n  }\n  return React.createElement(Link.make, tmp, React.createElement(\"i\", {\n                  className: \"fas \" + match[2]\n                }), React.createElement(\"span\", {\n                  className: \"ml-2\"\n                }, match[0]));\n}\n\nfunction closeDrawer(course) {\n  return ReasonReactRouter.push(\"/school/courses/\" + (CurriculumEditor__Course.id(course) + \"/curriculum\"));\n}\n\nfunction CurriculumEditor__TargetDrawer(Props) {\n  var targets = Props.targets;\n  var targetGroups = Props.targetGroups;\n  var evaluationCriteria = Props.evaluationCriteria;\n  var course = Props.course;\n  var updateTargetCB = Props.updateTargetCB;\n  var url = ReasonReactRouter.useUrl(undefined, /* () */0);\n  var match = React.useState((function () {\n          return false;\n        }));\n  var setDirty = match[1];\n  var dirty = match[0];\n  var _otherRoutes = url.path;\n  if (_otherRoutes && _otherRoutes[0] === \"school\") {\n    var match$1 = _otherRoutes[1];\n    if (match$1 && match$1[0] === \"courses\") {\n      var match$2 = match$1[1];\n      if (match$2) {\n        var match$3 = match$2[1];\n        if (match$3 && match$3[0] === \"targets\") {\n          var match$4 = match$3[1];\n          if (match$4) {\n            var match$5 = match$4[1];\n            if (match$5 && !match$5[1]) {\n              var pageName = match$5[0];\n              var targetId = match$4[0];\n              var target = ListUtils.unsafeFind((function (t) {\n                      return CurriculumEditor__Target.id(t) === targetId;\n                    }), \"Could not find target for editor drawer with the ID \" + targetId, targets);\n              var pathPrefix = \"/school/courses/\" + (CurriculumEditor__Course.id(course) + (\"/targets/\" + (targetId + \"/\")));\n              var match$6;\n              switch (pageName) {\n                case \"content\" :\n                    match$6 = /* tuple */[\n                      React.createElement(CurriculumEditor__ContentEditor.make, {\n                            target: target,\n                            setDirtyCB: (function (dirty) {\n                                return Curry._1(setDirty, (function (param) {\n                                              return dirty;\n                                            }));\n                              })\n                          }),\n                      /* Content */0\n                    ];\n                    break;\n                case \"details\" :\n                    match$6 = /* tuple */[\n                      React.createElement(CurriculumEditor__TargetDetailsEditor.make, {\n                            target: target,\n                            targets: targets,\n                            targetGroups: targetGroups,\n                            evaluationCriteria: evaluationCriteria,\n                            updateTargetCB: updateTargetCB,\n                            setDirtyCB: (function (dirty) {\n                                return Curry._1(setDirty, (function (param) {\n                                              return dirty;\n                                            }));\n                              })\n                          }),\n                      /* Details */1\n                    ];\n                    break;\n                case \"versions\" :\n                    match$6 = /* tuple */[\n                      React.createElement(CurriculumEditor__VersionsEditor.make, {\n                            targetId: targetId\n                          }),\n                      /* Versions */2\n                    ];\n                    break;\n                default:\n                  Rollbar.warning(\"Unexpected page requested for target editor drawer: \" + pageName);\n                  match$6 = /* tuple */[\n                    React.createElement(\"div\", undefined, \"Unexpected error. Please reload the page.\"),\n                    /* Content */0\n                  ];\n              }\n              var selectedPage = match$6[1];\n              return React.createElement(SchoolAdmin__EditorDrawer.make, {\n                          closeDrawerCB: (function (param) {\n                              return confirmDirtyAction(dirty, (function (param) {\n                                            return closeDrawer(course);\n                                          }));\n                            }),\n                          size: /* Large */1,\n                          children: React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                                    className: \"bg-gray-200 pt-6\"\n                                  }, React.createElement(\"div\", {\n                                        className: \"max-w-3xl px-3 mx-auto\"\n                                      }, React.createElement(\"h3\", undefined, CurriculumEditor__Target.title(target))), React.createElement(\"div\", {\n                                        className: \"flex w-full max-w-3xl mx-auto px-3 text-sm -mb-px mt-2\"\n                                      }, tab(/* Content */0, selectedPage, pathPrefix, dirty, setDirty), tab(/* Details */1, selectedPage, pathPrefix, dirty, setDirty), tab(/* Versions */2, selectedPage, pathPrefix, dirty, setDirty))), React.createElement(\"div\", {\n                                    className: \"bg-white\"\n                                  }, React.createElement(\"div\", {\n                                        className: \"mx-auto border-t border-gray-400\"\n                                      }, match$6[0])))\n                        });\n            } else {\n              return null;\n            }\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nvar make = CurriculumEditor__TargetDrawer;\n\nexports.str = str;\nexports.confirmDirtyAction = confirmDirtyAction;\nexports.tab = tab;\nexports.closeDrawer = closeDrawer;\nexports.make = make;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}