{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Caml_obj = require(\"bs-platform/lib/js/caml_obj.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../../../../shared/utils/OptionUtils.bs.js\");\n\nvar WindowUtils = require(\"../../../../shared/utils/WindowUtils.bs.js\");\n\nvar ContentBlock = require(\"../../../../shared/types/ContentBlock.bs.js\");\n\nvar GraphqlQuery = require(\"../../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar DisablingCover = require(\"../../../../shared/components/DisablingCover.bs.js\");\n\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\n\nvar TargetContentView = require(\"../../../../shared/components/TargetContentView.bs.js\");\n\nvar CurriculumEditor__FileBlockEditor = require(\"./CurriculumEditor__FileBlockEditor.bs.js\");\n\nvar CurriculumEditor__ImageBlockEditor = require(\"./CurriculumEditor__ImageBlockEditor.bs.js\");\n\nvar CurriculumEditor__MarkdownBlockEditor = require(\"./CurriculumEditor__MarkdownBlockEditor.bs.js\");\n\nvar InvalidBlockTypeForUpdate = Caml_exceptions.create(\"CurriculumEditor__ContentBlockEditor.InvalidBlockTypeForUpdate\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction computeInitialState(contentBlock) {\n  return {\n    dirty: false,\n    saving: undefined,\n    contentBlock: contentBlock\n  };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    if (action ===\n    /* FinishSaving */\n    0) {\n      return {\n        dirty: false,\n        saving: undefined,\n        contentBlock: state.contentBlock\n      };\n    } else {\n      return {\n        dirty: state.dirty,\n        saving: undefined,\n        contentBlock: state.contentBlock\n      };\n    }\n  } else if (action.tag) {\n    return {\n      dirty: action[1],\n      saving: state.saving,\n      contentBlock: action[0]\n    };\n  } else {\n    return {\n      dirty: state.dirty,\n      saving: action[0],\n      contentBlock: state.contentBlock\n    };\n  }\n}\n\nvar ppx_printed_query = \"mutation DeleteContentBlockMutation($id: ID!)  {\\ndeleteContentBlock(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteContentBlock\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteContentBlockPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteContentBlock on type Mutation is missing\");\n  }\n\n  return {\n    deleteContentBlock: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar DeleteContentBlockMutation = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\nvar ppx_printed_query$1 = \"mutation MoveContentBlockMutation($id: ID!, $direction: MoveDirection!)  {\\nmoveContentBlock(id: $id, direction: $direction)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"moveContentBlock\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type MoveContentBlockPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field moveContentBlock on type Mutation is missing\");\n  }\n\n  return {\n    moveContentBlock: tmp\n  };\n}\n\nfunction json_of_MoveDirection(value) {\n  if (value >= 759637122) {\n    return \"Down\";\n  } else {\n    return \"Up\";\n  }\n}\n\nfunction make$1(id, direction, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"direction\", json_of_MoveDirection(direction)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var direction = variables.direction;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"direction\", json_of_MoveDirection(direction)]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(id, direction, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"direction\", json_of_MoveDirection(direction)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, direction, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"direction\", json_of_MoveDirection(direction)]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar MoveContentBlockMutation = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  json_of_MoveDirection: json_of_MoveDirection,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\nvar ppx_printed_query$2 = \"mutation UpdateFileBlockMutation($id: ID!, $title: String!)  {\\nupdateFileBlock(id: $id, title: $title)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$2(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateFileBlock\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateFileBlock on type Mutation is missing\");\n  }\n\n  return {\n    updateFileBlock: tmp\n  };\n}\n\nfunction make$2(id, title, param) {\n  return {\n    query: ppx_printed_query$2,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"title\", title]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$2\n  };\n}\n\nfunction makeWithVariables$2(variables) {\n  var id = variables.id;\n  var title = variables.title;\n  return {\n    query: ppx_printed_query$2,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"title\", title]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$2\n  };\n}\n\nfunction makeVariables$2(id, title, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"title\", title]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$2(graphql_ppx_use_json_variables_fn, id, title, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"title\", title]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$2 =\n/* tuple */\n[parse$2, ppx_printed_query$2, definition_002$2];\n\nfunction ret_type$2(f) {\n  return {};\n}\n\nvar MT_Ret$2 = {};\nvar UpdateFileBlockMutation = {\n  ppx_printed_query: ppx_printed_query$2,\n  query: ppx_printed_query$2,\n  parse: parse$2,\n  make: make$2,\n  makeWithVariables: makeWithVariables$2,\n  makeVariables: makeVariables$2,\n  definition: definition$2,\n  ret_type: ret_type$2,\n  MT_Ret: MT_Ret$2\n};\nvar ppx_printed_query$3 = \"mutation UpdateMarkdownBlockMutation($id: ID!, $markdown: String!)  {\\nupdateMarkdownBlock(id: $id, markdown: $markdown)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$3(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateMarkdownBlock\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateMarkdownBlock on type Mutation is missing\");\n  }\n\n  return {\n    updateMarkdownBlock: tmp\n  };\n}\n\nfunction make$3(id, markdown, param) {\n  return {\n    query: ppx_printed_query$3,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"markdown\", markdown]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$3\n  };\n}\n\nfunction makeWithVariables$3(variables) {\n  var id = variables.id;\n  var markdown = variables.markdown;\n  return {\n    query: ppx_printed_query$3,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"markdown\", markdown]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$3\n  };\n}\n\nfunction makeVariables$3(id, markdown, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"markdown\", markdown]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$3(graphql_ppx_use_json_variables_fn, id, markdown, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"markdown\", markdown]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$3 =\n/* tuple */\n[parse$3, ppx_printed_query$3, definition_002$3];\n\nfunction ret_type$3(f) {\n  return {};\n}\n\nvar MT_Ret$3 = {};\nvar UpdateMarkdownBlockMutation = {\n  ppx_printed_query: ppx_printed_query$3,\n  query: ppx_printed_query$3,\n  parse: parse$3,\n  make: make$3,\n  makeWithVariables: makeWithVariables$3,\n  makeVariables: makeVariables$3,\n  definition: definition$3,\n  ret_type: ret_type$3,\n  MT_Ret: MT_Ret$3\n};\nvar ppx_printed_query$4 = \"mutation UpdateImageBlockMutation($id: ID!, $caption: String!)  {\\nupdateImageBlock(id: $id, caption: $caption)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$4(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateImageBlock\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateImageBlock on type Mutation is missing\");\n  }\n\n  return {\n    updateImageBlock: tmp\n  };\n}\n\nfunction make$4(id, caption, param) {\n  return {\n    query: ppx_printed_query$4,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"caption\", caption]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$4\n  };\n}\n\nfunction makeWithVariables$4(variables) {\n  var id = variables.id;\n  var caption = variables.caption;\n  return {\n    query: ppx_printed_query$4,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id],\n    /* tuple */\n    [\"caption\", caption]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$4\n  };\n}\n\nfunction makeVariables$4(id, caption, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"caption\", caption]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$4(graphql_ppx_use_json_variables_fn, id, caption, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id],\n  /* tuple */\n  [\"caption\", caption]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$4 =\n/* tuple */\n[parse$4, ppx_printed_query$4, definition_002$4];\n\nfunction ret_type$4(f) {\n  return {};\n}\n\nvar MT_Ret$4 = {};\nvar UpdateImageBlockMutation = {\n  ppx_printed_query: ppx_printed_query$4,\n  query: ppx_printed_query$4,\n  parse: parse$4,\n  make: make$4,\n  makeWithVariables: makeWithVariables$4,\n  makeVariables: makeVariables$4,\n  definition: definition$4,\n  ret_type: ret_type$4,\n  MT_Ret: MT_Ret$4\n};\n\nfunction controlIcon(icon, title, color, handler) {\n  var buttonClasses = color >= 793051007 ? \"hover:bg-gray-200\" : \"bg-green-600 hover:bg-green-700 text-white rounded-b\";\n\n  if (handler === undefined) {\n    return null;\n  } else {\n    var tmp = {\n      className: \"p-2 focus:outline-none \" + buttonClasses,\n      title: title,\n      disabled: handler === undefined\n    };\n\n    if (handler !== undefined) {\n      tmp.onClick = Caml_option.valFromOption(handler);\n    }\n\n    return React.createElement(\"button\", tmp, React.createElement(\"i\", {\n      className: \"fas fa-fw \" + icon\n    }));\n  }\n}\n\nfunction onMove(contentBlock, cb, direction, _event) {\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make$1(ContentBlock.id(contentBlock), direction,\n  /* () */\n  0));\n\n  return Curry._1(cb, contentBlock);\n}\n\nfunction onDelete(contentBlock, removeContentBlockCB, send, _event) {\n  return WindowUtils.confirm(undefined, \"Are you sure you want to delete this block?\", function (param) {\n    Curry._1(send,\n    /* StartSaving */\n    Block.__(0, [\"Deleting...\"]));\n\n    var id = ContentBlock.id(contentBlock);\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(id,\n    /* () */\n    0)).then(function (result) {\n      if (result.deleteContentBlock.success) {\n        Curry._1(removeContentBlockCB, id);\n      } else {\n        Curry._1(send,\n        /* FinishSaving */\n        0);\n      }\n\n      return Promise.resolve(\n      /* () */\n      0);\n    })[\"catch\"](function (_error) {\n      Curry._1(send,\n      /* FinishSaving */\n      0);\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  });\n}\n\nfunction onUndo(originalContentBlock, setDirtyCB, send, $$event) {\n  $$event.preventDefault();\n  return WindowUtils.confirm(undefined, \"Are you sure you want to undo your changes to this block?\", function (param) {\n    Curry._1(setDirtyCB, false);\n\n    return Curry._1(send,\n    /* UpdateContentBlock */\n    Block.__(1, [originalContentBlock, false]));\n  });\n}\n\nfunction handleUpdateResult(updateContentBlockCB, setDirtyCB, send, contentBlock) {\n  if (contentBlock !== undefined) {\n    Curry._1(updateContentBlockCB, ContentBlock.makeFromJs(Caml_option.valFromOption(contentBlock)));\n\n    Curry._1(send,\n    /* FinishSaving */\n    0);\n\n    Curry._1(setDirtyCB, false);\n  } else {\n    Curry._1(send,\n    /* FailSaving */\n    1);\n  }\n\n  return Promise.resolve(\n  /* () */\n  0);\n}\n\nfunction updateContentBlockBlock(mutation, contentBlockExtractor, updateContentBlockCB, setDirtyCB, send) {\n  Curry._1(send,\n  /* StartSaving */\n  Block.__(0, [\"Updating...\"]));\n\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(mutation).then(function (result) {\n    return handleUpdateResult(updateContentBlockCB, setDirtyCB, send, Curry._1(contentBlockExtractor, result));\n  })[\"catch\"](function (_error) {\n    Curry._1(send,\n    /* FinishSaving */\n    0);\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction onSave(contentBlock, updateContentBlockCB, setDirtyCB, send, $$event) {\n  $$event.preventDefault();\n  var id = ContentBlock.id(contentBlock);\n  var match = ContentBlock.blockType(contentBlock);\n\n  switch (match.tag | 0) {\n    case\n    /* Markdown */\n    0:\n      var mutation = make$3(id, match[0],\n      /* () */\n      0);\n\n      var extractor = function extractor(result) {\n        return result.updateMarkdownBlock.contentBlock;\n      };\n\n      return updateContentBlockBlock(mutation, extractor, updateContentBlockCB, setDirtyCB, send);\n\n    case\n    /* File */\n    1:\n      var mutation$1 = make$2(id, match[1],\n      /* () */\n      0);\n\n      var extractor$1 = function extractor$1(result) {\n        return result.updateFileBlock.contentBlock;\n      };\n\n      return updateContentBlockBlock(mutation$1, extractor$1, updateContentBlockCB, setDirtyCB, send);\n\n    case\n    /* Image */\n    2:\n      var mutation$2 = make$4(id, match[1],\n      /* () */\n      0);\n\n      var extractor$2 = function extractor$2(result) {\n        return result.updateImageBlock.contentBlock;\n      };\n\n      return updateContentBlockBlock(mutation$2, extractor$2, updateContentBlockCB, setDirtyCB, send);\n\n    case\n    /* Embed */\n    3:\n      throw InvalidBlockTypeForUpdate;\n  }\n}\n\nfunction updateContentBlockCB(originalContentBlock, setDirtyCB, state, send, newContentBlock) {\n  var dirty = Caml_obj.caml_notequal(newContentBlock, originalContentBlock);\n\n  if (state.dirty !== dirty) {\n    Curry._1(setDirtyCB, dirty);\n  }\n\n  return Curry._1(send,\n  /* UpdateContentBlock */\n  Block.__(1, [newContentBlock, dirty]));\n}\n\nfunction innerEditor(originalContentBlock, contentBlock, setDirtyCB, state, send) {\n  var updateContentBlockCB$1 = function updateContentBlockCB$1(param) {\n    return updateContentBlockCB(originalContentBlock, setDirtyCB, state, send, param);\n  };\n\n  var match = ContentBlock.blockType(contentBlock);\n\n  switch (match.tag | 0) {\n    case\n    /* Markdown */\n    0:\n      return React.createElement(CurriculumEditor__MarkdownBlockEditor.make, {\n        markdown: match[0],\n        contentBlock: contentBlock,\n        updateContentBlockCB: updateContentBlockCB$1\n      });\n\n    case\n    /* File */\n    1:\n      return React.createElement(CurriculumEditor__FileBlockEditor.make, {\n        url: match[0],\n        title: match[1],\n        filename: match[2],\n        contentBlock: contentBlock,\n        updateContentBlockCB: updateContentBlockCB$1\n      });\n\n    case\n    /* Image */\n    2:\n      return React.createElement(CurriculumEditor__ImageBlockEditor.make, {\n        url: match[0],\n        caption: match[1],\n        contentBlock: contentBlock,\n        updateContentBlockCB: updateContentBlockCB$1\n      });\n\n    case\n    /* Embed */\n    3:\n      return TargetContentView.embedContentBlock(\"\", match[1]);\n  }\n}\n\nfunction CurriculumEditor__ContentBlockEditor(Props) {\n  var contentBlock = Props.contentBlock;\n  var setDirtyCB = Props.setDirtyCB;\n  var removeContentBlockCB = Props.removeContentBlockCB;\n  var moveContentBlockUpCB = Props.moveContentBlockUpCB;\n  var moveContentBlockDownCB = Props.moveContentBlockDownCB;\n  var updateContentBlockCB = Props.updateContentBlockCB;\n  var match = React.useReducer(reducer, contentBlock, computeInitialState);\n  var send = match[1];\n  var state = match[0];\n  var tmp = {\n    disabled: state.saving !== undefined,\n    children: React.createElement(\"div\", {\n      \"aria-label\": \"Editor for content block \" + ContentBlock.id(contentBlock),\n      className: \"flex items-start\"\n    }, React.createElement(\"div\", {\n      className: \"flex-grow self-stretch min-w-0\"\n    }, innerEditor(contentBlock, state.contentBlock, setDirtyCB, state, send)), React.createElement(\"div\", {\n      className: \"pl-2 flex-shrink-0 border-transparent bg-gray-100 border rounded flex flex-col text-xs -mr-10 sticky top-0\"\n    }, controlIcon(\"fa-arrow-up\", \"Move Up\",\n    /* Grey */\n    793051007, OptionUtils.map(function (cb) {\n      return function (param) {\n        return onMove(contentBlock, cb,\n        /* Up */\n        19067, param);\n      };\n    }, moveContentBlockUpCB)), controlIcon(\"fa-arrow-down\", \"Move Down\",\n    /* Grey */\n    793051007, OptionUtils.map(function (cb) {\n      return function (param) {\n        return onMove(contentBlock, cb,\n        /* Down */\n        759637122, param);\n      };\n    }, moveContentBlockDownCB)), controlIcon(\"fa-trash-alt\", \"Delete\",\n    /* Grey */\n    793051007, OptionUtils.map(function (cb) {\n      return function (param) {\n        return onDelete(contentBlock, cb, send, param);\n      };\n    }, removeContentBlockCB)), controlIcon(\"fa-undo-alt\", \"Undo Changes\",\n    /* Grey */\n    793051007, OptionUtils.map(function (_cb) {\n      return function (param) {\n        return onUndo(contentBlock, setDirtyCB, send, param);\n      };\n    }, updateContentBlockCB)), controlIcon(\"fa-check\", \"Save Changes\",\n    /* Green */\n    756711075, OptionUtils.map(function (cb) {\n      var partial_arg = state.contentBlock;\n      return function (param) {\n        return onSave(partial_arg, cb, setDirtyCB, send, param);\n      };\n    }, updateContentBlockCB))))\n  };\n\n  if (state.saving !== undefined) {\n    tmp.message = Caml_option.valFromOption(state.saving);\n  }\n\n  return React.createElement(DisablingCover.make, tmp);\n}\n\nvar make$5 = CurriculumEditor__ContentBlockEditor;\nexports.InvalidBlockTypeForUpdate = InvalidBlockTypeForUpdate;\nexports.str = str;\nexports.computeInitialState = computeInitialState;\nexports.reducer = reducer;\nexports.DeleteContentBlockMutation = DeleteContentBlockMutation;\nexports.MoveContentBlockMutation = MoveContentBlockMutation;\nexports.UpdateFileBlockMutation = UpdateFileBlockMutation;\nexports.UpdateMarkdownBlockMutation = UpdateMarkdownBlockMutation;\nexports.UpdateImageBlockMutation = UpdateImageBlockMutation;\nexports.controlIcon = controlIcon;\nexports.onMove = onMove;\nexports.onDelete = onDelete;\nexports.onUndo = onUndo;\nexports.handleUpdateResult = handleUpdateResult;\nexports.updateContentBlockBlock = updateContentBlockBlock;\nexports.onSave = onSave;\nexports.updateContentBlockCB = updateContentBlockCB;\nexports.innerEditor = innerEditor;\nexports.make = make$5;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/curriculum_editor/CurriculumEditor__ContentBlockEditor.bs.js"],"names":["Block","require","Curry","React","Js_exn","Js_dict","Js_json","Caml_obj","Js_option","Caml_option","OptionUtils","WindowUtils","ContentBlock","GraphqlQuery","DisablingCover","Caml_exceptions","TargetContentView","CurriculumEditor__FileBlockEditor","CurriculumEditor__ImageBlockEditor","CurriculumEditor__MarkdownBlockEditor","InvalidBlockTypeForUpdate","create","str","prim","computeInitialState","contentBlock","dirty","saving","undefined","reducer","state","action","tag","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","deleteContentBlock","make","id","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","DeleteContentBlockMutation","ppx_printed_query$1","parse$1","moveContentBlock","json_of_MoveDirection","make$1","direction","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","MoveContentBlockMutation","ppx_printed_query$2","Fragments","AllFields","name","parse$2","decodeNull","some","updateFileBlock","make$2","title","makeWithVariables$2","makeVariables$2","definition_002$2","definition$2","ret_type$2","MT_Ret$2","UpdateFileBlockMutation","ppx_printed_query$3","parse$3","updateMarkdownBlock","make$3","markdown","makeWithVariables$3","makeVariables$3","definition_002$3","definition$3","ret_type$3","MT_Ret$3","UpdateMarkdownBlockMutation","ppx_printed_query$4","parse$4","updateImageBlock","make$4","caption","makeWithVariables$4","makeVariables$4","definition_002$4","definition$4","ret_type$4","MT_Ret$4","UpdateImageBlockMutation","controlIcon","icon","color","handler","buttonClasses","className","disabled","onClick","createElement","onMove","cb","_event","eta","sendQuery","onDelete","removeContentBlockCB","send","confirm","__","then","result","Promise","resolve","_error","onUndo","originalContentBlock","setDirtyCB","$$event","preventDefault","handleUpdateResult","updateContentBlockCB","makeFromJs","updateContentBlockBlock","mutation","contentBlockExtractor","onSave","blockType","extractor","mutation$1","extractor$1","mutation$2","extractor$2","newContentBlock","caml_notequal","innerEditor","updateContentBlockCB$1","url","filename","embedContentBlock","CurriculumEditor__ContentBlockEditor","Props","moveContentBlockUpCB","moveContentBlockDownCB","useReducer","children","map","_cb","partial_arg","message","make$5","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Caml_obj = require(\"bs-platform/lib/js/caml_obj.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../../../../shared/utils/OptionUtils.bs.js\");\nvar WindowUtils = require(\"../../../../shared/utils/WindowUtils.bs.js\");\nvar ContentBlock = require(\"../../../../shared/types/ContentBlock.bs.js\");\nvar GraphqlQuery = require(\"../../../../shared/utils/GraphqlQuery.bs.js\");\nvar DisablingCover = require(\"../../../../shared/components/DisablingCover.bs.js\");\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\nvar TargetContentView = require(\"../../../../shared/components/TargetContentView.bs.js\");\nvar CurriculumEditor__FileBlockEditor = require(\"./CurriculumEditor__FileBlockEditor.bs.js\");\nvar CurriculumEditor__ImageBlockEditor = require(\"./CurriculumEditor__ImageBlockEditor.bs.js\");\nvar CurriculumEditor__MarkdownBlockEditor = require(\"./CurriculumEditor__MarkdownBlockEditor.bs.js\");\n\nvar InvalidBlockTypeForUpdate = Caml_exceptions.create(\"CurriculumEditor__ContentBlockEditor.InvalidBlockTypeForUpdate\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction computeInitialState(contentBlock) {\n  return {\n          dirty: false,\n          saving: undefined,\n          contentBlock: contentBlock\n        };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    if (action === /* FinishSaving */0) {\n      return {\n              dirty: false,\n              saving: undefined,\n              contentBlock: state.contentBlock\n            };\n    } else {\n      return {\n              dirty: state.dirty,\n              saving: undefined,\n              contentBlock: state.contentBlock\n            };\n    }\n  } else if (action.tag) {\n    return {\n            dirty: action[1],\n            saving: state.saving,\n            contentBlock: action[0]\n          };\n  } else {\n    return {\n            dirty: state.dirty,\n            saving: action[0],\n            contentBlock: state.contentBlock\n          };\n  }\n}\n\nvar ppx_printed_query = \"mutation DeleteContentBlockMutation($id: ID!)  {\\ndeleteContentBlock(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteContentBlock\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteContentBlockPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteContentBlock on type Mutation is missing\");\n  }\n  return {\n          deleteContentBlock: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar DeleteContentBlockMutation = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nvar ppx_printed_query$1 = \"mutation MoveContentBlockMutation($id: ID!, $direction: MoveDirection!)  {\\nmoveContentBlock(id: $id, direction: $direction)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"moveContentBlock\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type MoveContentBlockPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field moveContentBlock on type Mutation is missing\");\n  }\n  return {\n          moveContentBlock: tmp\n        };\n}\n\nfunction json_of_MoveDirection(value) {\n  if (value >= 759637122) {\n    return \"Down\";\n  } else {\n    return \"Up\";\n  }\n}\n\nfunction make$1(id, direction, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"direction\",\n                    json_of_MoveDirection(direction)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var id = variables.id;\n  var direction = variables.direction;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"direction\",\n                    json_of_MoveDirection(direction)\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(id, direction, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"direction\",\n                  json_of_MoveDirection(direction)\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, id, direction, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"direction\",\n                      json_of_MoveDirection(direction)\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar MoveContentBlockMutation = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  json_of_MoveDirection: json_of_MoveDirection,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nvar ppx_printed_query$2 = \"mutation UpdateFileBlockMutation($id: ID!, $title: String!)  {\\nupdateFileBlock(id: $id, title: $title)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$2(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateFileBlock\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateFileBlock on type Mutation is missing\");\n  }\n  return {\n          updateFileBlock: tmp\n        };\n}\n\nfunction make$2(id, title, param) {\n  return {\n          query: ppx_printed_query$2,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$2\n        };\n}\n\nfunction makeWithVariables$2(variables) {\n  var id = variables.id;\n  var title = variables.title;\n  return {\n          query: ppx_printed_query$2,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$2\n        };\n}\n\nfunction makeVariables$2(id, title, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"title\",\n                  title\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$2(graphql_ppx_use_json_variables_fn, id, title, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"title\",\n                      title\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$2 = /* tuple */[\n  parse$2,\n  ppx_printed_query$2,\n  definition_002$2\n];\n\nfunction ret_type$2(f) {\n  return { };\n}\n\nvar MT_Ret$2 = { };\n\nvar UpdateFileBlockMutation = {\n  ppx_printed_query: ppx_printed_query$2,\n  query: ppx_printed_query$2,\n  parse: parse$2,\n  make: make$2,\n  makeWithVariables: makeWithVariables$2,\n  makeVariables: makeVariables$2,\n  definition: definition$2,\n  ret_type: ret_type$2,\n  MT_Ret: MT_Ret$2\n};\n\nvar ppx_printed_query$3 = \"mutation UpdateMarkdownBlockMutation($id: ID!, $markdown: String!)  {\\nupdateMarkdownBlock(id: $id, markdown: $markdown)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$3(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateMarkdownBlock\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateMarkdownBlock on type Mutation is missing\");\n  }\n  return {\n          updateMarkdownBlock: tmp\n        };\n}\n\nfunction make$3(id, markdown, param) {\n  return {\n          query: ppx_printed_query$3,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"markdown\",\n                    markdown\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$3\n        };\n}\n\nfunction makeWithVariables$3(variables) {\n  var id = variables.id;\n  var markdown = variables.markdown;\n  return {\n          query: ppx_printed_query$3,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"markdown\",\n                    markdown\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$3\n        };\n}\n\nfunction makeVariables$3(id, markdown, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"markdown\",\n                  markdown\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$3(graphql_ppx_use_json_variables_fn, id, markdown, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"markdown\",\n                      markdown\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$3 = /* tuple */[\n  parse$3,\n  ppx_printed_query$3,\n  definition_002$3\n];\n\nfunction ret_type$3(f) {\n  return { };\n}\n\nvar MT_Ret$3 = { };\n\nvar UpdateMarkdownBlockMutation = {\n  ppx_printed_query: ppx_printed_query$3,\n  query: ppx_printed_query$3,\n  parse: parse$3,\n  make: make$3,\n  makeWithVariables: makeWithVariables$3,\n  makeVariables: makeVariables$3,\n  definition: definition$3,\n  ret_type: ret_type$3,\n  MT_Ret: MT_Ret$3\n};\n\nvar ppx_printed_query$4 = \"mutation UpdateImageBlockMutation($id: ID!, $caption: String!)  {\\nupdateImageBlock(id: $id, caption: $caption)  {\\ncontentBlock  {\\n...\" + ContentBlock.Fragments.AllFields.name + \"   \\n}\\n\\n}\\n\\n}\\n\" + ContentBlock.Fragments.AllFields.query;\n\nfunction parse$4(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateImageBlock\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"contentBlock\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      tmp$1 = match$2 !== undefined ? undefined : Caml_option.some(Curry._1(ContentBlock.Fragments.AllFields.parse, value$3));\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      contentBlock: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateImageBlock on type Mutation is missing\");\n  }\n  return {\n          updateImageBlock: tmp\n        };\n}\n\nfunction make$4(id, caption, param) {\n  return {\n          query: ppx_printed_query$4,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"caption\",\n                    caption\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$4\n        };\n}\n\nfunction makeWithVariables$4(variables) {\n  var id = variables.id;\n  var caption = variables.caption;\n  return {\n          query: ppx_printed_query$4,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"id\",\n                    id\n                  ],\n                  /* tuple */[\n                    \"caption\",\n                    caption\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$4\n        };\n}\n\nfunction makeVariables$4(id, caption, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"id\",\n                  id\n                ],\n                /* tuple */[\n                  \"caption\",\n                  caption\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$4(graphql_ppx_use_json_variables_fn, id, caption, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"id\",\n                      id\n                    ],\n                    /* tuple */[\n                      \"caption\",\n                      caption\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$4 = /* tuple */[\n  parse$4,\n  ppx_printed_query$4,\n  definition_002$4\n];\n\nfunction ret_type$4(f) {\n  return { };\n}\n\nvar MT_Ret$4 = { };\n\nvar UpdateImageBlockMutation = {\n  ppx_printed_query: ppx_printed_query$4,\n  query: ppx_printed_query$4,\n  parse: parse$4,\n  make: make$4,\n  makeWithVariables: makeWithVariables$4,\n  makeVariables: makeVariables$4,\n  definition: definition$4,\n  ret_type: ret_type$4,\n  MT_Ret: MT_Ret$4\n};\n\nfunction controlIcon(icon, title, color, handler) {\n  var buttonClasses = color >= 793051007 ? \"hover:bg-gray-200\" : \"bg-green-600 hover:bg-green-700 text-white rounded-b\";\n  if (handler === undefined) {\n    return null;\n  } else {\n    var tmp = {\n      className: \"p-2 focus:outline-none \" + buttonClasses,\n      title: title,\n      disabled: handler === undefined\n    };\n    if (handler !== undefined) {\n      tmp.onClick = Caml_option.valFromOption(handler);\n    }\n    return React.createElement(\"button\", tmp, React.createElement(\"i\", {\n                    className: \"fas fa-fw \" + icon\n                  }));\n  }\n}\n\nfunction onMove(contentBlock, cb, direction, _event) {\n  ((function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make$1(ContentBlock.id(contentBlock), direction, /* () */0)));\n  return Curry._1(cb, contentBlock);\n}\n\nfunction onDelete(contentBlock, removeContentBlockCB, send, _event) {\n  return WindowUtils.confirm(undefined, \"Are you sure you want to delete this block?\", (function (param) {\n                Curry._1(send, /* StartSaving */Block.__(0, [\"Deleting...\"]));\n                var id = ContentBlock.id(contentBlock);\n                (function (eta) {\n                          return GraphqlQuery.sendQuery(undefined, eta);\n                        })(make(id, /* () */0)).then((function (result) {\n                          if (result.deleteContentBlock.success) {\n                            Curry._1(removeContentBlockCB, id);\n                          } else {\n                            Curry._1(send, /* FinishSaving */0);\n                          }\n                          return Promise.resolve(/* () */0);\n                        })).catch((function (_error) {\n                        Curry._1(send, /* FinishSaving */0);\n                        return Promise.resolve(/* () */0);\n                      }));\n                return /* () */0;\n              }));\n}\n\nfunction onUndo(originalContentBlock, setDirtyCB, send, $$event) {\n  $$event.preventDefault();\n  return WindowUtils.confirm(undefined, \"Are you sure you want to undo your changes to this block?\", (function (param) {\n                Curry._1(setDirtyCB, false);\n                return Curry._1(send, /* UpdateContentBlock */Block.__(1, [\n                              originalContentBlock,\n                              false\n                            ]));\n              }));\n}\n\nfunction handleUpdateResult(updateContentBlockCB, setDirtyCB, send, contentBlock) {\n  if (contentBlock !== undefined) {\n    Curry._1(updateContentBlockCB, ContentBlock.makeFromJs(Caml_option.valFromOption(contentBlock)));\n    Curry._1(send, /* FinishSaving */0);\n    Curry._1(setDirtyCB, false);\n  } else {\n    Curry._1(send, /* FailSaving */1);\n  }\n  return Promise.resolve(/* () */0);\n}\n\nfunction updateContentBlockBlock(mutation, contentBlockExtractor, updateContentBlockCB, setDirtyCB, send) {\n  Curry._1(send, /* StartSaving */Block.__(0, [\"Updating...\"]));\n  (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(mutation).then((function (result) {\n            return handleUpdateResult(updateContentBlockCB, setDirtyCB, send, Curry._1(contentBlockExtractor, result));\n          })).catch((function (_error) {\n          Curry._1(send, /* FinishSaving */0);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction onSave(contentBlock, updateContentBlockCB, setDirtyCB, send, $$event) {\n  $$event.preventDefault();\n  var id = ContentBlock.id(contentBlock);\n  var match = ContentBlock.blockType(contentBlock);\n  switch (match.tag | 0) {\n    case /* Markdown */0 :\n        var mutation = make$3(id, match[0], /* () */0);\n        var extractor = function (result) {\n          return result.updateMarkdownBlock.contentBlock;\n        };\n        return updateContentBlockBlock(mutation, extractor, updateContentBlockCB, setDirtyCB, send);\n    case /* File */1 :\n        var mutation$1 = make$2(id, match[1], /* () */0);\n        var extractor$1 = function (result) {\n          return result.updateFileBlock.contentBlock;\n        };\n        return updateContentBlockBlock(mutation$1, extractor$1, updateContentBlockCB, setDirtyCB, send);\n    case /* Image */2 :\n        var mutation$2 = make$4(id, match[1], /* () */0);\n        var extractor$2 = function (result) {\n          return result.updateImageBlock.contentBlock;\n        };\n        return updateContentBlockBlock(mutation$2, extractor$2, updateContentBlockCB, setDirtyCB, send);\n    case /* Embed */3 :\n        throw InvalidBlockTypeForUpdate;\n    \n  }\n}\n\nfunction updateContentBlockCB(originalContentBlock, setDirtyCB, state, send, newContentBlock) {\n  var dirty = Caml_obj.caml_notequal(newContentBlock, originalContentBlock);\n  if (state.dirty !== dirty) {\n    Curry._1(setDirtyCB, dirty);\n  }\n  return Curry._1(send, /* UpdateContentBlock */Block.__(1, [\n                newContentBlock,\n                dirty\n              ]));\n}\n\nfunction innerEditor(originalContentBlock, contentBlock, setDirtyCB, state, send) {\n  var updateContentBlockCB$1 = function (param) {\n    return updateContentBlockCB(originalContentBlock, setDirtyCB, state, send, param);\n  };\n  var match = ContentBlock.blockType(contentBlock);\n  switch (match.tag | 0) {\n    case /* Markdown */0 :\n        return React.createElement(CurriculumEditor__MarkdownBlockEditor.make, {\n                    markdown: match[0],\n                    contentBlock: contentBlock,\n                    updateContentBlockCB: updateContentBlockCB$1\n                  });\n    case /* File */1 :\n        return React.createElement(CurriculumEditor__FileBlockEditor.make, {\n                    url: match[0],\n                    title: match[1],\n                    filename: match[2],\n                    contentBlock: contentBlock,\n                    updateContentBlockCB: updateContentBlockCB$1\n                  });\n    case /* Image */2 :\n        return React.createElement(CurriculumEditor__ImageBlockEditor.make, {\n                    url: match[0],\n                    caption: match[1],\n                    contentBlock: contentBlock,\n                    updateContentBlockCB: updateContentBlockCB$1\n                  });\n    case /* Embed */3 :\n        return TargetContentView.embedContentBlock(\"\", match[1]);\n    \n  }\n}\n\nfunction CurriculumEditor__ContentBlockEditor(Props) {\n  var contentBlock = Props.contentBlock;\n  var setDirtyCB = Props.setDirtyCB;\n  var removeContentBlockCB = Props.removeContentBlockCB;\n  var moveContentBlockUpCB = Props.moveContentBlockUpCB;\n  var moveContentBlockDownCB = Props.moveContentBlockDownCB;\n  var updateContentBlockCB = Props.updateContentBlockCB;\n  var match = React.useReducer(reducer, contentBlock, computeInitialState);\n  var send = match[1];\n  var state = match[0];\n  var tmp = {\n    disabled: state.saving !== undefined,\n    children: React.createElement(\"div\", {\n          \"aria-label\": \"Editor for content block \" + ContentBlock.id(contentBlock),\n          className: \"flex items-start\"\n        }, React.createElement(\"div\", {\n              className: \"flex-grow self-stretch min-w-0\"\n            }, innerEditor(contentBlock, state.contentBlock, setDirtyCB, state, send)), React.createElement(\"div\", {\n              className: \"pl-2 flex-shrink-0 border-transparent bg-gray-100 border rounded flex flex-col text-xs -mr-10 sticky top-0\"\n            }, controlIcon(\"fa-arrow-up\", \"Move Up\", /* Grey */793051007, OptionUtils.map((function (cb) {\n                        return (function (param) {\n                            return onMove(contentBlock, cb, /* Up */19067, param);\n                          });\n                      }), moveContentBlockUpCB)), controlIcon(\"fa-arrow-down\", \"Move Down\", /* Grey */793051007, OptionUtils.map((function (cb) {\n                        return (function (param) {\n                            return onMove(contentBlock, cb, /* Down */759637122, param);\n                          });\n                      }), moveContentBlockDownCB)), controlIcon(\"fa-trash-alt\", \"Delete\", /* Grey */793051007, OptionUtils.map((function (cb) {\n                        return (function (param) {\n                            return onDelete(contentBlock, cb, send, param);\n                          });\n                      }), removeContentBlockCB)), controlIcon(\"fa-undo-alt\", \"Undo Changes\", /* Grey */793051007, OptionUtils.map((function (_cb) {\n                        return (function (param) {\n                            return onUndo(contentBlock, setDirtyCB, send, param);\n                          });\n                      }), updateContentBlockCB)), controlIcon(\"fa-check\", \"Save Changes\", /* Green */756711075, OptionUtils.map((function (cb) {\n                        var partial_arg = state.contentBlock;\n                        return (function (param) {\n                            return onSave(partial_arg, cb, setDirtyCB, send, param);\n                          });\n                      }), updateContentBlockCB))))\n  };\n  if (state.saving !== undefined) {\n    tmp.message = Caml_option.valFromOption(state.saving);\n  }\n  return React.createElement(DisablingCover.make, tmp);\n}\n\nvar make$5 = CurriculumEditor__ContentBlockEditor;\n\nexports.InvalidBlockTypeForUpdate = InvalidBlockTypeForUpdate;\nexports.str = str;\nexports.computeInitialState = computeInitialState;\nexports.reducer = reducer;\nexports.DeleteContentBlockMutation = DeleteContentBlockMutation;\nexports.MoveContentBlockMutation = MoveContentBlockMutation;\nexports.UpdateFileBlockMutation = UpdateFileBlockMutation;\nexports.UpdateMarkdownBlockMutation = UpdateMarkdownBlockMutation;\nexports.UpdateImageBlockMutation = UpdateImageBlockMutation;\nexports.controlIcon = controlIcon;\nexports.onMove = onMove;\nexports.onDelete = onDelete;\nexports.onUndo = onUndo;\nexports.handleUpdateResult = handleUpdateResult;\nexports.updateContentBlockBlock = updateContentBlockBlock;\nexports.onSave = onSave;\nexports.updateContentBlockCB = updateContentBlockCB;\nexports.innerEditor = innerEditor;\nexports.make = make$5;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}