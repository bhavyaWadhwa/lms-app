{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar GraphqlErrorHandler = require(\"../../../shared/utils/GraphqlErrorHandler.bs.js\");\n\nvar SchoolCustomize__Customizations = require(\"../types/SchoolCustomize__Customizations.bs.js\");\n\nvar SchoolCustomize__UpdateSchoolStringError = require(\"./SchoolCustomize__UpdateSchoolStringError.bs.js\");\n\nrequire(\"./SchoolCustomize__AgreementsEditor.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction kindToString(kind) {\n  if (kind) {\n    return \"Terms of Use\";\n  } else {\n    return \"Privacy Policy\";\n  }\n}\n\nfunction kindToKey(kind) {\n  if (kind) {\n    return \"terms_of_use\";\n  } else {\n    return \"privacy_policy\";\n  }\n}\n\nfunction handleAgreementChange(send, $$event) {\n  var agreement = $$event.target.value;\n  return Curry._1(send,\n  /* UpdateAgreement */\n  [agreement]);\n}\n\nfunction updateAgreementText(updating, kind) {\n  if (updating) {\n    return \"Updating...\";\n  } else {\n    return \"Update \" + (kind ? \"Terms of Use\" : \"Privacy Policy\");\n  }\n}\n\nvar ppx_printed_query = \"mutation UpdateSchoolStringMutation($key: String!, $value: String!)  {\\nupdateSchoolString(key: $key, value: $value)  {\\nerrors  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchoolString\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"errors\");\n    tmp = {\n      errors: match$1 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$1))).map(function (value) {\n        var match = Js_json.decodeString(value);\n\n        if (match !== undefined) {\n          var value$1 = match;\n\n          switch (value$1) {\n            case \"InvalidKey\":\n              return (\n                /* InvalidKey */\n                -37069048\n              );\n\n            case \"InvalidLengthValue\":\n              return (\n                /* InvalidLengthValue */\n                718585620\n              );\n\n            case \"InvalidValue\":\n              return (\n                /* InvalidValue */\n                522207514\n              );\n\n            default:\n              return Js_exn.raiseError(\"graphql_ppx: Unknown enum variant for UpdateSchoolStringError: \" + value$1);\n          }\n        } else {\n          return Js_exn.raiseError(\"graphql_ppx: Expected enum value for UpdateSchoolStringError, got \" + JSON.stringify(value));\n        }\n      }) : Js_exn.raiseError(\"graphql_ppx: Field errors on type UpdateSchoolStringPayload is missing\")\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchoolString on type Mutation is missing\");\n  }\n\n  return {\n    updateSchoolString: tmp\n  };\n}\n\nfunction make(key, value, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"key\", key],\n    /* tuple */\n    [\"value\", value]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var key = variables.key;\n  var value = variables.value;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"key\", key],\n    /* tuple */\n    [\"value\", value]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(key, value, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"key\", key],\n  /* tuple */\n  [\"value\", value]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, key, value, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"key\", key],\n  /* tuple */\n  [\"value\", value]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar UpdateSchoolStringQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\nvar UpdateSchoolStringErrorHandler = GraphqlErrorHandler.Make(SchoolCustomize__UpdateSchoolStringError);\n\nfunction handleUpdateAgreement(state, send, kind, updatePrivacyPolicyCB, updateTermsOfUseCB, $$event) {\n  $$event.preventDefault();\n\n  Curry._1(send,\n  /* BeginUpdate */\n  0);\n\n  Curry._2(UpdateSchoolStringErrorHandler.$$catch, function (param) {\n    return Curry._1(send,\n    /* ErrorOccured */\n    1);\n  }, function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  }(make(kind ? \"terms_of_use\" : \"privacy_policy\", state.agreement,\n  /* () */\n  0)).then(function (result) {\n    var errors = result.updateSchoolString.errors;\n\n    if (errors.length !== 0) {\n      return Promise.reject([UpdateSchoolStringErrorHandler.Errors, errors]);\n    } else {\n      $$Notification.success(\"Done!\", (kind ? \"Terms of Use\" : \"Privacy Policy\") + \" has been updated.\");\n\n      if (kind) {\n        Curry._1(updateTermsOfUseCB, state.agreement);\n      } else {\n        Curry._1(updatePrivacyPolicyCB, state.agreement);\n      }\n\n      Curry._1(send,\n      /* DoneUpdating */\n      2);\n\n      return Promise.resolve(\n      /* () */\n      0);\n    }\n  }));\n\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction updateAgreementDisabled(state) {\n  return !state.formDirty;\n}\n\nfunction initialState(kind, customizations) {\n  var agreement = kind ? SchoolCustomize__Customizations.termsOfUse(customizations) : SchoolCustomize__Customizations.privacyPolicy(customizations);\n  return {\n    agreement: agreement !== undefined ? agreement : \"\",\n    updating: false,\n    formDirty: false\n  };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* BeginUpdate */\n      0:\n        return {\n          agreement: state.agreement,\n          updating: true,\n          formDirty: state.formDirty\n        };\n\n      case\n      /* ErrorOccured */\n      1:\n        return {\n          agreement: state.agreement,\n          updating: false,\n          formDirty: state.formDirty\n        };\n\n      case\n      /* DoneUpdating */\n      2:\n        return {\n          agreement: state.agreement,\n          updating: false,\n          formDirty: false\n        };\n    }\n  } else {\n    return {\n      agreement: action[0],\n      updating: state.updating,\n      formDirty: true\n    };\n  }\n}\n\nfunction SchoolCustomize__AgreementsEditor(Props) {\n  var kind = Props.kind;\n  var customizations = Props.customizations;\n  var updatePrivacyPolicyCB = Props.updatePrivacyPolicyCB;\n  var updateTermsOfUseCB = Props.updateTermsOfUseCB;\n  var match = React.useReducer(reducer, initialState(kind, customizations));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n    className: \"mx-8 pt-8 flex flex-col agreements-editor__container\"\n  }, React.createElement(\"h5\", {\n    className: \"uppercase text-center border-b border-gray-400 pb-2\"\n  }, \"Manage \" + (kind ? \"Terms of Use\" : \"Privacy Policy\")), React.createElement(DisablingCover.make, {\n    disabled: state.updating,\n    containerClasses: \"flex flex-col flex-1\",\n    children: null\n  }, React.createElement(\"div\", {\n    key: \"agreements-editor__input-group\",\n    className: \"mt-3 flex flex-col flex-1\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"agreements-editor__value\"\n  }, \"Body of Agreement \", React.createElement(\"i\", {\n    className: \"fab fa-markdown text-base\"\n  })), React.createElement(\"textarea\", {\n    className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500 flex-1\",\n    id: \"agreements-editor__value\",\n    maxLength: 10000,\n    placeholder: \"Leave the agreement body empty to hide the footer link.\",\n    value: state.agreement,\n    onChange: function onChange(param) {\n      return handleAgreementChange(send, param);\n    }\n  })), React.createElement(\"button\", {\n    key: \"agreements-editor__update-button\",\n    className: \"w-full btn btn-large btn-primary mt-4\",\n    disabled: !state.formDirty,\n    onClick: function onClick(param) {\n      return handleUpdateAgreement(state, send, kind, updatePrivacyPolicyCB, updateTermsOfUseCB, param);\n    }\n  }, updateAgreementText(state.updating, kind))));\n}\n\nvar make$1 = SchoolCustomize__AgreementsEditor;\nexports.str = str;\nexports.kindToString = kindToString;\nexports.kindToKey = kindToKey;\nexports.handleAgreementChange = handleAgreementChange;\nexports.updateAgreementText = updateAgreementText;\nexports.UpdateSchoolStringQuery = UpdateSchoolStringQuery;\nexports.UpdateSchoolStringErrorHandler = UpdateSchoolStringErrorHandler;\nexports.handleUpdateAgreement = handleUpdateAgreement;\nexports.updateAgreementDisabled = updateAgreementDisabled;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.make = make$1;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/settings/components/SchoolCustomize__AgreementsEditor.bs.js"],"names":["Curry","require","React","Js_exn","Js_dict","Js_json","Js_option","Caml_option","GraphqlQuery","$$Notification","DisablingCover","GraphqlErrorHandler","SchoolCustomize__Customizations","SchoolCustomize__UpdateSchoolStringError","str","prim","kindToString","kind","kindToKey","handleAgreementChange","send","$$event","agreement","target","value","_1","updateAgreementText","updating","ppx_printed_query","parse","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","errors","decodeArray","map","decodeString","raiseError","JSON","stringify","updateSchoolString","make","key","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","definition","ret_type","f","MT_Ret","UpdateSchoolStringQuery","UpdateSchoolStringErrorHandler","Make","handleUpdateAgreement","state","updatePrivacyPolicyCB","updateTermsOfUseCB","preventDefault","_2","$$catch","eta","sendQuery","then","result","length","Promise","reject","Errors","success","resolve","updateAgreementDisabled","formDirty","initialState","customizations","termsOfUse","privacyPolicy","reducer","action","SchoolCustomize__AgreementsEditor","Props","useReducer","createElement","className","disabled","containerClasses","children","htmlFor","id","maxLength","placeholder","onChange","onClick","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar GraphqlErrorHandler = require(\"../../../shared/utils/GraphqlErrorHandler.bs.js\");\nvar SchoolCustomize__Customizations = require(\"../types/SchoolCustomize__Customizations.bs.js\");\nvar SchoolCustomize__UpdateSchoolStringError = require(\"./SchoolCustomize__UpdateSchoolStringError.bs.js\");\n\n((require(\"./SchoolCustomize__AgreementsEditor.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction kindToString(kind) {\n  if (kind) {\n    return \"Terms of Use\";\n  } else {\n    return \"Privacy Policy\";\n  }\n}\n\nfunction kindToKey(kind) {\n  if (kind) {\n    return \"terms_of_use\";\n  } else {\n    return \"privacy_policy\";\n  }\n}\n\nfunction handleAgreementChange(send, $$event) {\n  var agreement = $$event.target.value;\n  return Curry._1(send, /* UpdateAgreement */[agreement]);\n}\n\nfunction updateAgreementText(updating, kind) {\n  if (updating) {\n    return \"Updating...\";\n  } else {\n    return \"Update \" + (\n            kind ? \"Terms of Use\" : \"Privacy Policy\"\n          );\n  }\n}\n\nvar ppx_printed_query = \"mutation UpdateSchoolStringMutation($key: String!, $value: String!)  {\\nupdateSchoolString(key: $key, value: $value)  {\\nerrors  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchoolString\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"errors\");\n    tmp = {\n      errors: match$1 !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match$1))).map((function (value) {\n                var match = Js_json.decodeString(value);\n                if (match !== undefined) {\n                  var value$1 = match;\n                  switch (value$1) {\n                    case \"InvalidKey\" :\n                        return /* InvalidKey */-37069048;\n                    case \"InvalidLengthValue\" :\n                        return /* InvalidLengthValue */718585620;\n                    case \"InvalidValue\" :\n                        return /* InvalidValue */522207514;\n                    default:\n                      return Js_exn.raiseError(\"graphql_ppx: Unknown enum variant for UpdateSchoolStringError: \" + value$1);\n                  }\n                } else {\n                  return Js_exn.raiseError(\"graphql_ppx: Expected enum value for UpdateSchoolStringError, got \" + JSON.stringify(value));\n                }\n              })) : Js_exn.raiseError(\"graphql_ppx: Field errors on type UpdateSchoolStringPayload is missing\")\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchoolString on type Mutation is missing\");\n  }\n  return {\n          updateSchoolString: tmp\n        };\n}\n\nfunction make(key, value, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"key\",\n                    key\n                  ],\n                  /* tuple */[\n                    \"value\",\n                    value\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var key = variables.key;\n  var value = variables.value;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"key\",\n                    key\n                  ],\n                  /* tuple */[\n                    \"value\",\n                    value\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(key, value, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"key\",\n                  key\n                ],\n                /* tuple */[\n                  \"value\",\n                  value\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, key, value, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"key\",\n                      key\n                    ],\n                    /* tuple */[\n                      \"value\",\n                      value\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar UpdateSchoolStringQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nvar UpdateSchoolStringErrorHandler = GraphqlErrorHandler.Make(SchoolCustomize__UpdateSchoolStringError);\n\nfunction handleUpdateAgreement(state, send, kind, updatePrivacyPolicyCB, updateTermsOfUseCB, $$event) {\n  $$event.preventDefault();\n  Curry._1(send, /* BeginUpdate */0);\n  Curry._2(UpdateSchoolStringErrorHandler.$$catch, (function (param) {\n          return Curry._1(send, /* ErrorOccured */1);\n        }), (function (eta) {\n              return GraphqlQuery.sendQuery(undefined, eta);\n            })(make(kind ? \"terms_of_use\" : \"privacy_policy\", state.agreement, /* () */0)).then((function (result) {\n              var errors = result.updateSchoolString.errors;\n              if (errors.length !== 0) {\n                return Promise.reject([\n                            UpdateSchoolStringErrorHandler.Errors,\n                            errors\n                          ]);\n              } else {\n                $$Notification.success(\"Done!\", (\n                      kind ? \"Terms of Use\" : \"Privacy Policy\"\n                    ) + \" has been updated.\");\n                if (kind) {\n                  Curry._1(updateTermsOfUseCB, state.agreement);\n                } else {\n                  Curry._1(updatePrivacyPolicyCB, state.agreement);\n                }\n                Curry._1(send, /* DoneUpdating */2);\n                return Promise.resolve(/* () */0);\n              }\n            })));\n  return /* () */0;\n}\n\nfunction updateAgreementDisabled(state) {\n  return !state.formDirty;\n}\n\nfunction initialState(kind, customizations) {\n  var agreement = kind ? SchoolCustomize__Customizations.termsOfUse(customizations) : SchoolCustomize__Customizations.privacyPolicy(customizations);\n  return {\n          agreement: agreement !== undefined ? agreement : \"\",\n          updating: false,\n          formDirty: false\n        };\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* BeginUpdate */0 :\n          return {\n                  agreement: state.agreement,\n                  updating: true,\n                  formDirty: state.formDirty\n                };\n      case /* ErrorOccured */1 :\n          return {\n                  agreement: state.agreement,\n                  updating: false,\n                  formDirty: state.formDirty\n                };\n      case /* DoneUpdating */2 :\n          return {\n                  agreement: state.agreement,\n                  updating: false,\n                  formDirty: false\n                };\n      \n    }\n  } else {\n    return {\n            agreement: action[0],\n            updating: state.updating,\n            formDirty: true\n          };\n  }\n}\n\nfunction SchoolCustomize__AgreementsEditor(Props) {\n  var kind = Props.kind;\n  var customizations = Props.customizations;\n  var updatePrivacyPolicyCB = Props.updatePrivacyPolicyCB;\n  var updateTermsOfUseCB = Props.updateTermsOfUseCB;\n  var match = React.useReducer(reducer, initialState(kind, customizations));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n              className: \"mx-8 pt-8 flex flex-col agreements-editor__container\"\n            }, React.createElement(\"h5\", {\n                  className: \"uppercase text-center border-b border-gray-400 pb-2\"\n                }, \"Manage \" + (\n                  kind ? \"Terms of Use\" : \"Privacy Policy\"\n                )), React.createElement(DisablingCover.make, {\n                  disabled: state.updating,\n                  containerClasses: \"flex flex-col flex-1\",\n                  children: null\n                }, React.createElement(\"div\", {\n                      key: \"agreements-editor__input-group\",\n                      className: \"mt-3 flex flex-col flex-1\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-xs font-semibold\",\n                          htmlFor: \"agreements-editor__value\"\n                        }, \"Body of Agreement \", React.createElement(\"i\", {\n                              className: \"fab fa-markdown text-base\"\n                            })), React.createElement(\"textarea\", {\n                          className: \"appearance-none block w-full bg-white border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500 flex-1\",\n                          id: \"agreements-editor__value\",\n                          maxLength: 10000,\n                          placeholder: \"Leave the agreement body empty to hide the footer link.\",\n                          value: state.agreement,\n                          onChange: (function (param) {\n                              return handleAgreementChange(send, param);\n                            })\n                        })), React.createElement(\"button\", {\n                      key: \"agreements-editor__update-button\",\n                      className: \"w-full btn btn-large btn-primary mt-4\",\n                      disabled: !state.formDirty,\n                      onClick: (function (param) {\n                          return handleUpdateAgreement(state, send, kind, updatePrivacyPolicyCB, updateTermsOfUseCB, param);\n                        })\n                    }, updateAgreementText(state.updating, kind))));\n}\n\nvar make$1 = SchoolCustomize__AgreementsEditor;\n\nexports.str = str;\nexports.kindToString = kindToString;\nexports.kindToKey = kindToKey;\nexports.handleAgreementChange = handleAgreementChange;\nexports.updateAgreementText = updateAgreementText;\nexports.UpdateSchoolStringQuery = UpdateSchoolStringQuery;\nexports.UpdateSchoolStringErrorHandler = UpdateSchoolStringErrorHandler;\nexports.handleUpdateAgreement = handleUpdateAgreement;\nexports.updateAgreementDisabled = updateAgreementDisabled;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.make = make$1;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}