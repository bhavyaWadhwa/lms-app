{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar EmailUtils = require(\"../../../shared/utils/EmailUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation CreateApplicantMutation($courseId: ID!, $email: String!, $name: String!)  {\\ncreateApplicant(courseId: $courseId, email: $email, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createApplicant\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type CreateApplicantPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createApplicant on type Mutation is missing\");\n  }\n\n  return {\n    createApplicant: tmp\n  };\n}\n\nfunction make(courseId, email, name, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"email\", email],\n    /* tuple */\n    [\"name\", name]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var email = variables.email;\n  var name = variables.name;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"courseId\", courseId],\n    /* tuple */\n    [\"email\", email],\n    /* tuple */\n    [\"name\", name]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(courseId, email, name, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"email\", email],\n  /* tuple */\n  [\"name\", name]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, email, name, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"courseId\", courseId],\n  /* tuple */\n  [\"email\", email],\n  /* tuple */\n  [\"name\", name]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar CreateApplicantQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction createApplicant(courseId, email, name, setSaving, setViewEmailSent, $$event) {\n  $$event.preventDefault();\n\n  Curry._1(setSaving, function (param) {\n    return true;\n  });\n\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(courseId, email, name,\n  /* () */\n  0)).then(function (response) {\n    if (response.createApplicant.success) {\n      Curry._1(setViewEmailSent,\n      /* () */\n      0);\n    } else {\n      Curry._1(setSaving, function (param) {\n        return false;\n      });\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction isInvalidEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction saveDisabled(email, name, saving) {\n  if (EmailUtils.isInvalid(false, email) || saving) {\n    return true;\n  } else {\n    return name === \"\";\n  }\n}\n\nfunction buttonText(email, name, saving) {\n  var match = email === \"\";\n  var match$1 = EmailUtils.isInvalid(false, email);\n  var match$2 = name === \"\";\n\n  if (saving) {\n    return \"Saving\";\n  } else if (match) {\n    return \"Enter your Email\";\n  } else if (match$1) {\n    return \"Enter a valid Email\";\n  } else if (match$2) {\n    return \"Enter your full name\";\n  } else {\n    return \"Apply\";\n  }\n}\n\nfunction CoursesApply__Form(Props) {\n  var courseName = Props.courseName;\n  var courseId = Props.courseId;\n  var setViewEmailSent = Props.setViewEmailSent;\n  var email = Props.email;\n  var name = Props.name;\n  var match = React.useState(function () {\n    return OptionUtils.$$default(\"\", email);\n  });\n  var setEmail = match[1];\n  var email$1 = match[0];\n  var match$1 = React.useState(function () {\n    return OptionUtils.$$default(\"\", name);\n  });\n  var setName = match$1[1];\n  var name$1 = match$1[0];\n  var match$2 = React.useState(function () {\n    return false;\n  });\n  var setSaving = match$2[1];\n  var saving = match$2[0];\n  return React.createElement(\"div\", {\n    className: \"flex flex-col\"\n  }, React.createElement(\"h4\", {\n    className: \"font-bold\"\n  }, \"Enroll to \" + (courseName + \" course\")), React.createElement(\"div\", {\n    className: \"w-full\"\n  }, React.createElement(\"div\", {\n    className: \"mt-4\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"email\"\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"appearance-none h-10 mt-1 block w-full border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n    id: \"email\",\n    disabled: saving,\n    maxLength: 128,\n    placeholder: \"johnDoe@example.com\",\n    type: \"text\",\n    value: email$1,\n    onChange: function onChange($$event) {\n      return Curry._1(setEmail, $$event.target.value);\n    }\n  })), React.createElement(\"div\", {\n    className: \"mt-4\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"name\"\n  }, \"Name\"), React.createElement(\"input\", {\n    className: \"appearance-none h-10 mt-1 block w-full border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n    id: \"name\",\n    disabled: saving,\n    maxLength: 128,\n    placeholder: \"John Doe\",\n    type: \"text\",\n    value: name$1,\n    onChange: function onChange($$event) {\n      return Curry._1(setName, $$event.target.value);\n    }\n  }))), React.createElement(\"button\", {\n    className: \"btn btn-primary btn-large text-center w-full mt-6\",\n    disabled: saveDisabled(email$1, name$1, saving),\n    onClick: function onClick(param) {\n      return createApplicant(courseId, email$1, name$1, setSaving, setViewEmailSent, param);\n    }\n  }, saving ? React.createElement(FaIcon.make, {\n    classes: \"fas fa-spinner fa-spin mr-2\"\n  }) : null, React.createElement(\"span\", undefined, buttonText(email$1, name$1, saving))));\n}\n\nvar make$1 = CoursesApply__Form;\nexports.str = str;\nexports.CreateApplicantQuery = CreateApplicantQuery;\nexports.createApplicant = createApplicant;\nexports.isInvalidEmail = isInvalidEmail;\nexports.saveDisabled = saveDisabled;\nexports.buttonText = buttonText;\nexports.make = make$1;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/apply/components/CoursesApply__Form.bs.js"],"names":["Curry","require","React","FaIcon","Js_exn","Js_dict","Js_json","Js_option","EmailUtils","Caml_option","OptionUtils","GraphqlQuery","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","createApplicant","make","courseId","email","name","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","CreateApplicantQuery","setSaving","setViewEmailSent","$$event","preventDefault","eta","sendQuery","then","response","Promise","resolve","isInvalidEmail","isInvalid","saveDisabled","saving","buttonText","CoursesApply__Form","Props","courseName","useState","$$default","setEmail","email$1","setName","name$1","createElement","className","htmlFor","id","disabled","maxLength","placeholder","type","onChange","target","onClick","classes","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar EmailUtils = require(\"../../../shared/utils/EmailUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation CreateApplicantMutation($courseId: ID!, $email: String!, $name: String!)  {\\ncreateApplicant(courseId: $courseId, email: $email, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createApplicant\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type CreateApplicantPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createApplicant on type Mutation is missing\");\n  }\n  return {\n          createApplicant: tmp\n        };\n}\n\nfunction make(courseId, email, name, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"email\",\n                    email\n                  ],\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var courseId = variables.courseId;\n  var email = variables.email;\n  var name = variables.name;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"courseId\",\n                    courseId\n                  ],\n                  /* tuple */[\n                    \"email\",\n                    email\n                  ],\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(courseId, email, name, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"courseId\",\n                  courseId\n                ],\n                /* tuple */[\n                  \"email\",\n                  email\n                ],\n                /* tuple */[\n                  \"name\",\n                  name\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, courseId, email, name, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"courseId\",\n                      courseId\n                    ],\n                    /* tuple */[\n                      \"email\",\n                      email\n                    ],\n                    /* tuple */[\n                      \"name\",\n                      name\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar CreateApplicantQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction createApplicant(courseId, email, name, setSaving, setViewEmailSent, $$event) {\n  $$event.preventDefault();\n  Curry._1(setSaving, (function (param) {\n          return true;\n        }));\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make(courseId, email, name, /* () */0)).then((function (response) {\n          if (response.createApplicant.success) {\n            Curry._1(setViewEmailSent, /* () */0);\n          } else {\n            Curry._1(setSaving, (function (param) {\n                    return false;\n                  }));\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction isInvalidEmail(email) {\n  return EmailUtils.isInvalid(false, email);\n}\n\nfunction saveDisabled(email, name, saving) {\n  if (EmailUtils.isInvalid(false, email) || saving) {\n    return true;\n  } else {\n    return name === \"\";\n  }\n}\n\nfunction buttonText(email, name, saving) {\n  var match = email === \"\";\n  var match$1 = EmailUtils.isInvalid(false, email);\n  var match$2 = name === \"\";\n  if (saving) {\n    return \"Saving\";\n  } else if (match) {\n    return \"Enter your Email\";\n  } else if (match$1) {\n    return \"Enter a valid Email\";\n  } else if (match$2) {\n    return \"Enter your full name\";\n  } else {\n    return \"Apply\";\n  }\n}\n\nfunction CoursesApply__Form(Props) {\n  var courseName = Props.courseName;\n  var courseId = Props.courseId;\n  var setViewEmailSent = Props.setViewEmailSent;\n  var email = Props.email;\n  var name = Props.name;\n  var match = React.useState((function () {\n          return OptionUtils.$$default(\"\", email);\n        }));\n  var setEmail = match[1];\n  var email$1 = match[0];\n  var match$1 = React.useState((function () {\n          return OptionUtils.$$default(\"\", name);\n        }));\n  var setName = match$1[1];\n  var name$1 = match$1[0];\n  var match$2 = React.useState((function () {\n          return false;\n        }));\n  var setSaving = match$2[1];\n  var saving = match$2[0];\n  return React.createElement(\"div\", {\n              className: \"flex flex-col\"\n            }, React.createElement(\"h4\", {\n                  className: \"font-bold\"\n                }, \"Enroll to \" + (courseName + \" course\")), React.createElement(\"div\", {\n                  className: \"w-full\"\n                }, React.createElement(\"div\", {\n                      className: \"mt-4\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-xs font-semibold\",\n                          htmlFor: \"email\"\n                        }, \"Email\"), React.createElement(\"input\", {\n                          className: \"appearance-none h-10 mt-1 block w-full border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n                          id: \"email\",\n                          disabled: saving,\n                          maxLength: 128,\n                          placeholder: \"johnDoe@example.com\",\n                          type: \"text\",\n                          value: email$1,\n                          onChange: (function ($$event) {\n                              return Curry._1(setEmail, $$event.target.value);\n                            })\n                        })), React.createElement(\"div\", {\n                      className: \"mt-4\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-xs font-semibold\",\n                          htmlFor: \"name\"\n                        }, \"Name\"), React.createElement(\"input\", {\n                          className: \"appearance-none h-10 mt-1 block w-full border border-gray-400 rounded py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-white focus:border-primary-400\",\n                          id: \"name\",\n                          disabled: saving,\n                          maxLength: 128,\n                          placeholder: \"John Doe\",\n                          type: \"text\",\n                          value: name$1,\n                          onChange: (function ($$event) {\n                              return Curry._1(setName, $$event.target.value);\n                            })\n                        }))), React.createElement(\"button\", {\n                  className: \"btn btn-primary btn-large text-center w-full mt-6\",\n                  disabled: saveDisabled(email$1, name$1, saving),\n                  onClick: (function (param) {\n                      return createApplicant(courseId, email$1, name$1, setSaving, setViewEmailSent, param);\n                    })\n                }, saving ? React.createElement(FaIcon.make, {\n                        classes: \"fas fa-spinner fa-spin mr-2\"\n                      }) : null, React.createElement(\"span\", undefined, buttonText(email$1, name$1, saving))));\n}\n\nvar make$1 = CoursesApply__Form;\n\nexports.str = str;\nexports.CreateApplicantQuery = CreateApplicantQuery;\nexports.createApplicant = createApplicant;\nexports.isInvalidEmail = isInvalidEmail;\nexports.saveDisabled = saveDisabled;\nexports.buttonText = buttonText;\nexports.make = make$1;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}