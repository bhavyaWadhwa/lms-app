{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction updateButtonText(saving) {\n  if (saving) {\n    return \"Updating...\";\n  } else {\n    return \"Update\";\n  }\n}\n\nvar ppx_printed_query = \"mutation UpdateSchoolMutation($name: String!, $about: String!)  {\\nupdateSchool(about: $about, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchool\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateSchoolPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchool on type Mutation is missing\");\n  }\n\n  return {\n    updateSchool: tmp\n  };\n}\n\nfunction make(name, about, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"name\", name],\n    /* tuple */\n    [\"about\", about]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var name = variables.name;\n  var about = variables.about;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"name\", name],\n    /* tuple */\n    [\"about\", about]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(name, about, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"name\", name],\n  /* tuple */\n  [\"about\", about]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, name, about, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"name\", name],\n  /* tuple */\n  [\"about\", about]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar UpdateSchoolQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction optionAbout(about) {\n  if (about === \"\") {\n    return;\n  } else {\n    return about;\n  }\n}\n\nfunction updateSchoolQuery(state, send, updateDetailsCB) {\n  Curry._1(send,\n  /* UpdateSaving */\n  Block.__(2, [true]));\n\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(state.name, state.about,\n  /* () */\n  0)).then(function (response) {\n    if (response.updateSchool.success) {\n      Curry._2(updateDetailsCB, state.name, optionAbout(state.about));\n    } else {\n      Curry._1(send,\n      /* UpdateSaving */\n      Block.__(2, [false]));\n    }\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction updateButtonDisabled(state) {\n  if (!state.formDirty || state.saving) {\n    return true;\n  } else {\n    return state.name.length < 1;\n  }\n}\n\nfunction initialState(name, about) {\n  return {\n    name: name,\n    about: OptionUtils.$$default(\"\", about),\n    saving: false,\n    formDirty: false\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case\n    /* UpdateName */\n    0:\n      return {\n        name: action[0],\n        about: state.about,\n        saving: state.saving,\n        formDirty: true\n      };\n\n    case\n    /* UpdateAbout */\n    1:\n      return {\n        name: state.name,\n        about: action[0],\n        saving: state.saving,\n        formDirty: true\n      };\n\n    case\n    /* UpdateSaving */\n    2:\n      return {\n        name: state.name,\n        about: state.about,\n        saving: action[0],\n        formDirty: state.formDirty\n      };\n  }\n}\n\nfunction handleInputChange(callback, $$event) {\n  return Curry._1(callback, $$event.target.value);\n}\n\nfunction SchoolCustomize__DetailsEditor(Props) {\n  var name = Props.name;\n  var about = Props.about;\n  var updateDetailsCB = Props.updateDetailsCB;\n  var match = React.useReducer(reducer, initialState(name, about));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n    className: \"mx-8 pt-8\"\n  }, React.createElement(\"h5\", {\n    className: \"uppercase text-center border-b border-gray-400 pb-2\"\n  }, \"Update Details\"), React.createElement(DisablingCover.make, {\n    disabled: state.saving,\n    children: null\n  }, React.createElement(\"div\", {\n    className: \"mt-3\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"details-editor__name\"\n  }, \"School Name\"), React.createElement(\"input\", {\n    className: \"appearance-none block w-full bg-white text-gray-800 border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"details-editor__name\",\n    maxLength: 50,\n    placeholder: \"Type school name here\",\n    type: \"text\",\n    value: state.name,\n    onChange: function onChange(param) {\n      var name = param.target.value;\n      return Curry._1(send,\n      /* UpdateName */\n      Block.__(0, [name]));\n    }\n  }), React.createElement(School__InputGroupError.make, {\n    message: \"name should be greater than 2 characters in length\",\n    active: state.name.length < 2\n  })), React.createElement(\"div\", {\n    className: \"mt-3\"\n  }, React.createElement(\"label\", {\n    className: \"inline-block tracking-wide text-xs font-semibold\",\n    htmlFor: \"details-editor__about\"\n  }, \"About\", React.createElement(\"span\", {\n    className: \"font-normal\"\n  }, \" (Maximum 500 characters)\")), React.createElement(\"textarea\", {\n    className: \"appearance-none block w-full bg-white text-gray-800 border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"details-editor__about\",\n    maxLength: 500,\n    placeholder: \"Add more details about the school.\",\n    rows: 7,\n    value: state.about,\n    onChange: function onChange(param) {\n      var about = param.target.value;\n      return Curry._1(send,\n      /* UpdateAbout */\n      Block.__(1, [about]));\n    }\n  })), React.createElement(\"button\", {\n    key: \"details-editor__update-button\",\n    className: \"w-full bg-indigo-600 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded focus:outline-none mt-3\",\n    disabled: updateButtonDisabled(state),\n    onClick: function onClick(param) {\n      return updateSchoolQuery(state, send, updateDetailsCB);\n    }\n  }, state.saving ? \"Updating...\" : \"Update\")));\n}\n\nvar make$1 = SchoolCustomize__DetailsEditor;\nexports.str = str;\nexports.updateButtonText = updateButtonText;\nexports.UpdateSchoolQuery = UpdateSchoolQuery;\nexports.optionAbout = optionAbout;\nexports.updateSchoolQuery = updateSchoolQuery;\nexports.updateButtonDisabled = updateButtonDisabled;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.handleInputChange = handleInputChange;\nexports.make = make$1;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/settings/components/SchoolCustomize__DetailsEditor.bs.js"],"names":["Block","require","Curry","React","Js_exn","Js_dict","Js_json","Js_option","Caml_option","OptionUtils","GraphqlQuery","DisablingCover","School__InputGroupError","str","prim","updateButtonText","saving","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","updateSchool","make","name","about","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","UpdateSchoolQuery","optionAbout","updateSchoolQuery","state","send","updateDetailsCB","__","eta","sendQuery","then","response","_2","Promise","resolve","updateButtonDisabled","formDirty","length","initialState","$$default","reducer","action","tag","handleInputChange","callback","$$event","target","SchoolCustomize__DetailsEditor","Props","useReducer","createElement","className","disabled","children","htmlFor","id","maxLength","placeholder","type","onChange","message","active","rows","key","onClick","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar School__InputGroupError = require(\"../../shared/components/School__InputGroupError.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction updateButtonText(saving) {\n  if (saving) {\n    return \"Updating...\";\n  } else {\n    return \"Update\";\n  }\n}\n\nvar ppx_printed_query = \"mutation UpdateSchoolMutation($name: String!, $about: String!)  {\\nupdateSchool(about: $about, name: $name)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"updateSchool\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type UpdateSchoolPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field updateSchool on type Mutation is missing\");\n  }\n  return {\n          updateSchool: tmp\n        };\n}\n\nfunction make(name, about, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ],\n                  /* tuple */[\n                    \"about\",\n                    about\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var name = variables.name;\n  var about = variables.about;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"name\",\n                    name\n                  ],\n                  /* tuple */[\n                    \"about\",\n                    about\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(name, about, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"name\",\n                  name\n                ],\n                /* tuple */[\n                  \"about\",\n                  about\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, name, about, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"name\",\n                      name\n                    ],\n                    /* tuple */[\n                      \"about\",\n                      about\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar UpdateSchoolQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction optionAbout(about) {\n  if (about === \"\") {\n    return ;\n  } else {\n    return about;\n  }\n}\n\nfunction updateSchoolQuery(state, send, updateDetailsCB) {\n  Curry._1(send, /* UpdateSaving */Block.__(2, [true]));\n  (function (eta) {\n          return GraphqlQuery.sendQuery(undefined, eta);\n        })(make(state.name, state.about, /* () */0)).then((function (response) {\n          if (response.updateSchool.success) {\n            Curry._2(updateDetailsCB, state.name, optionAbout(state.about));\n          } else {\n            Curry._1(send, /* UpdateSaving */Block.__(2, [false]));\n          }\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction updateButtonDisabled(state) {\n  if (!state.formDirty || state.saving) {\n    return true;\n  } else {\n    return state.name.length < 1;\n  }\n}\n\nfunction initialState(name, about) {\n  return {\n          name: name,\n          about: OptionUtils.$$default(\"\", about),\n          saving: false,\n          formDirty: false\n        };\n}\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case /* UpdateName */0 :\n        return {\n                name: action[0],\n                about: state.about,\n                saving: state.saving,\n                formDirty: true\n              };\n    case /* UpdateAbout */1 :\n        return {\n                name: state.name,\n                about: action[0],\n                saving: state.saving,\n                formDirty: true\n              };\n    case /* UpdateSaving */2 :\n        return {\n                name: state.name,\n                about: state.about,\n                saving: action[0],\n                formDirty: state.formDirty\n              };\n    \n  }\n}\n\nfunction handleInputChange(callback, $$event) {\n  return Curry._1(callback, $$event.target.value);\n}\n\nfunction SchoolCustomize__DetailsEditor(Props) {\n  var name = Props.name;\n  var about = Props.about;\n  var updateDetailsCB = Props.updateDetailsCB;\n  var match = React.useReducer(reducer, initialState(name, about));\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n              className: \"mx-8 pt-8\"\n            }, React.createElement(\"h5\", {\n                  className: \"uppercase text-center border-b border-gray-400 pb-2\"\n                }, \"Update Details\"), React.createElement(DisablingCover.make, {\n                  disabled: state.saving,\n                  children: null\n                }, React.createElement(\"div\", {\n                      className: \"mt-3\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-xs font-semibold\",\n                          htmlFor: \"details-editor__name\"\n                        }, \"School Name\"), React.createElement(\"input\", {\n                          className: \"appearance-none block w-full bg-white text-gray-800 border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n                          id: \"details-editor__name\",\n                          maxLength: 50,\n                          placeholder: \"Type school name here\",\n                          type: \"text\",\n                          value: state.name,\n                          onChange: (function (param) {\n                              var name = param.target.value;\n                              return Curry._1(send, /* UpdateName */Block.__(0, [name]));\n                            })\n                        }), React.createElement(School__InputGroupError.make, {\n                          message: \"name should be greater than 2 characters in length\",\n                          active: state.name.length < 2\n                        })), React.createElement(\"div\", {\n                      className: \"mt-3\"\n                    }, React.createElement(\"label\", {\n                          className: \"inline-block tracking-wide text-xs font-semibold\",\n                          htmlFor: \"details-editor__about\"\n                        }, \"About\", React.createElement(\"span\", {\n                              className: \"font-normal\"\n                            }, \" (Maximum 500 characters)\")), React.createElement(\"textarea\", {\n                          className: \"appearance-none block w-full bg-white text-gray-800 border border-gray-400 rounded py-3 px-4 mt-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n                          id: \"details-editor__about\",\n                          maxLength: 500,\n                          placeholder: \"Add more details about the school.\",\n                          rows: 7,\n                          value: state.about,\n                          onChange: (function (param) {\n                              var about = param.target.value;\n                              return Curry._1(send, /* UpdateAbout */Block.__(1, [about]));\n                            })\n                        })), React.createElement(\"button\", {\n                      key: \"details-editor__update-button\",\n                      className: \"w-full bg-indigo-600 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded focus:outline-none mt-3\",\n                      disabled: updateButtonDisabled(state),\n                      onClick: (function (param) {\n                          return updateSchoolQuery(state, send, updateDetailsCB);\n                        })\n                    }, state.saving ? \"Updating...\" : \"Update\")));\n}\n\nvar make$1 = SchoolCustomize__DetailsEditor;\n\nexports.str = str;\nexports.updateButtonText = updateButtonText;\nexports.UpdateSchoolQuery = UpdateSchoolQuery;\nexports.optionAbout = optionAbout;\nexports.updateSchoolQuery = updateSchoolQuery;\nexports.updateButtonDisabled = updateButtonDisabled;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.handleInputChange = handleInputChange;\nexports.make = make$1;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}