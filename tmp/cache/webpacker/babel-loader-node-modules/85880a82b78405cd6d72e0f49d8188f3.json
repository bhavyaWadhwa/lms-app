{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar User = require(\"../../../shared/types/User.bs.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\n\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar MarkdownBlock = require(\"../../../shared/components/MarkdownBlock.bs.js\");\n\nvar CoursesStudents__CoachNote = require(\"../types/CoursesStudents__CoachNote.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation ArchiveCoachNoteMutation($id: ID!)  {\\narchiveCoachNote(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"archiveCoachNote\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type ArchiveCoachNotePayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field archiveCoachNote on type Mutation is missing\");\n  }\n\n  return {\n    archiveCoachNote: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar ArchiveCoachNoteMutation = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeCoachNote(id, removeNoteCB, setArchiving, $$event) {\n  $$event.preventDefault();\n\n  Curry._1(setArchiving, function (param) {\n    return true;\n  });\n\n  if (window.confirm(\"Are you sure you want to delete this note?\")) {\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(id,\n    /* () */\n    0)).then(function (response) {\n      if (response.archiveCoachNote.success) {\n        Curry._1(removeNoteCB, id);\n      } else {\n        Curry._1(setArchiving, function (param) {\n          return false;\n        });\n      }\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  } else {\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction deleteIcon(note, removeCoachNote, removeNoteCB, setArchiving, archiving) {\n  return React.createElement(\"button\", {\n    className: \"w-10 text-sm text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center rounded hover:bg-gray-200 focus:outline-none \",\n    title: \"Delete \" + CoursesStudents__CoachNote.id(note),\n    disabled: archiving,\n    onClick: Curry._3(removeCoachNote, CoursesStudents__CoachNote.id(note), removeNoteCB, setArchiving)\n  }, React.createElement(FaIcon.make, {\n    classes: archiving ? \"fas fa-spinner fa-spin\" : \"fas fa-trash-alt\"\n  }));\n}\n\nfunction CoursesStudents__CoachNoteShow(Props) {\n  var note = Props.note;\n  var userId = Props.userId;\n  var removeNoteCB = Props.removeNoteCB;\n  var match = React.useState(function () {\n    return false;\n  });\n  var match$1 = CoursesStudents__CoachNote.author(note);\n  var tmp;\n\n  if (match$1 !== undefined) {\n    var user = match$1;\n    var match$2 = User.avatarUrl(user);\n    tmp = match$2 !== undefined ? React.createElement(\"img\", {\n      className: \"w-8 h-8 md:w-10 md:h-10 text-xs border border-gray-400 rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\",\n      src: match$2\n    }) : React.createElement(Avatar.make, {\n      name: User.name(user),\n      className: \"w-8 h-8 md:w-10 md:h-10 text-xs border border-gray-400 rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\"\n    });\n  } else {\n    tmp = React.createElement(Avatar.make, {\n      name: \"?\",\n      className: \"w-8 h-8 md:w-10 md:h-10 text-xs border rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\"\n    });\n  }\n\n  var match$3 = CoursesStudents__CoachNote.author(note);\n  var match$4 = CoursesStudents__CoachNote.author(note);\n  var match$5 = CoursesStudents__CoachNote.author(note);\n  var showDeleteIcon = match$5 !== undefined ? User.id(match$5) === userId : false;\n  return React.createElement(\"div\", {\n    key: CoursesStudents__CoachNote.id(note),\n    \"aria-label\": \"Note \" + CoursesStudents__CoachNote.id(note),\n    className: \"mt-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex justify-between\"\n  }, React.createElement(\"div\", {\n    className: \"flex\"\n  }, tmp, React.createElement(\"div\", undefined, React.createElement(\"p\", {\n    className: \"text-sm font-semibold inline-block leading-snug\"\n  }, match$3 !== undefined ? User.name(match$3) : \"Deleted Coach\"), React.createElement(\"p\", {\n    className: \"text-gray-600 font-semibold text-xs mt-px leading-snug\"\n  }, match$4 !== undefined ? User.title(match$4) : \"Unknown\"))), showDeleteIcon ? deleteIcon(note, removeCoachNote, removeNoteCB, match[1], match[0]) : null), React.createElement(\"div\", {\n    className: \"ml-10 md:ml-13 mt-2\"\n  }, React.createElement(\"p\", {\n    className: \"inline-block text-xs font-semibold leading-tight bg-gray-300 text-gray-800 mt-px px-1 py-px rounded\"\n  }, \"on \" + CoursesStudents__CoachNote.noteOn(note)), React.createElement(MarkdownBlock.make, {\n    markdown: CoursesStudents__CoachNote.note(note),\n    className: \"pt-1 text-sm\",\n    profile:\n    /* Permissive */\n    2\n  })));\n}\n\nvar make$1 = CoursesStudents__CoachNoteShow;\nexports.str = str;\nexports.ArchiveCoachNoteMutation = ArchiveCoachNoteMutation;\nexports.removeCoachNote = removeCoachNote;\nexports.deleteIcon = deleteIcon;\nexports.make = make$1;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/students/components/CoursesStudents__CoachNoteShow.bs.js"],"names":["User","require","Curry","React","Avatar","FaIcon","Js_exn","Js_dict","Js_json","Js_option","Caml_option","GraphqlQuery","MarkdownBlock","CoursesStudents__CoachNote","str","prim","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","archiveCoachNote","make","id","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","ArchiveCoachNoteMutation","removeCoachNote","removeNoteCB","setArchiving","$$event","preventDefault","window","confirm","eta","sendQuery","then","response","Promise","resolve","deleteIcon","note","archiving","createElement","className","title","disabled","onClick","_3","classes","CoursesStudents__CoachNoteShow","Props","userId","useState","author","user","avatarUrl","src","name","match$3","match$4","match$5","showDeleteIcon","key","noteOn","markdown","profile","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar User = require(\"../../../shared/types/User.bs.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\nvar FaIcon = require(\"../../../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar MarkdownBlock = require(\"../../../shared/components/MarkdownBlock.bs.js\");\nvar CoursesStudents__CoachNote = require(\"../types/CoursesStudents__CoachNote.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar ppx_printed_query = \"mutation ArchiveCoachNoteMutation($id: ID!)  {\\narchiveCoachNote(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"archiveCoachNote\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type ArchiveCoachNotePayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field archiveCoachNote on type Mutation is missing\");\n  }\n  return {\n          archiveCoachNote: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar ArchiveCoachNoteMutation = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeCoachNote(id, removeNoteCB, setArchiving, $$event) {\n  $$event.preventDefault();\n  Curry._1(setArchiving, (function (param) {\n          return true;\n        }));\n  if (window.confirm(\"Are you sure you want to delete this note?\")) {\n    (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(id, /* () */0)).then((function (response) {\n            if (response.archiveCoachNote.success) {\n              Curry._1(removeNoteCB, id);\n            } else {\n              Curry._1(setArchiving, (function (param) {\n                      return false;\n                    }));\n            }\n            return Promise.resolve(/* () */0);\n          }));\n    return /* () */0;\n  } else {\n    return /* () */0;\n  }\n}\n\nfunction deleteIcon(note, removeCoachNote, removeNoteCB, setArchiving, archiving) {\n  return React.createElement(\"button\", {\n              className: \"w-10 text-sm text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center rounded hover:bg-gray-200 focus:outline-none \",\n              title: \"Delete \" + CoursesStudents__CoachNote.id(note),\n              disabled: archiving,\n              onClick: Curry._3(removeCoachNote, CoursesStudents__CoachNote.id(note), removeNoteCB, setArchiving)\n            }, React.createElement(FaIcon.make, {\n                  classes: archiving ? \"fas fa-spinner fa-spin\" : \"fas fa-trash-alt\"\n                }));\n}\n\nfunction CoursesStudents__CoachNoteShow(Props) {\n  var note = Props.note;\n  var userId = Props.userId;\n  var removeNoteCB = Props.removeNoteCB;\n  var match = React.useState((function () {\n          return false;\n        }));\n  var match$1 = CoursesStudents__CoachNote.author(note);\n  var tmp;\n  if (match$1 !== undefined) {\n    var user = match$1;\n    var match$2 = User.avatarUrl(user);\n    tmp = match$2 !== undefined ? React.createElement(\"img\", {\n            className: \"w-8 h-8 md:w-10 md:h-10 text-xs border border-gray-400 rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\",\n            src: match$2\n          }) : React.createElement(Avatar.make, {\n            name: User.name(user),\n            className: \"w-8 h-8 md:w-10 md:h-10 text-xs border border-gray-400 rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\"\n          });\n  } else {\n    tmp = React.createElement(Avatar.make, {\n          name: \"?\",\n          className: \"w-8 h-8 md:w-10 md:h-10 text-xs border rounded-full overflow-hidden flex-shrink-0 mt-1 md:mt-0 mr-2 md:mr-3 object-cover\"\n        });\n  }\n  var match$3 = CoursesStudents__CoachNote.author(note);\n  var match$4 = CoursesStudents__CoachNote.author(note);\n  var match$5 = CoursesStudents__CoachNote.author(note);\n  var showDeleteIcon = match$5 !== undefined ? User.id(match$5) === userId : false;\n  return React.createElement(\"div\", {\n              key: CoursesStudents__CoachNote.id(note),\n              \"aria-label\": \"Note \" + CoursesStudents__CoachNote.id(note),\n              className: \"mt-4\"\n            }, React.createElement(\"div\", {\n                  className: \"flex justify-between\"\n                }, React.createElement(\"div\", {\n                      className: \"flex\"\n                    }, tmp, React.createElement(\"div\", undefined, React.createElement(\"p\", {\n                              className: \"text-sm font-semibold inline-block leading-snug\"\n                            }, match$3 !== undefined ? User.name(match$3) : \"Deleted Coach\"), React.createElement(\"p\", {\n                              className: \"text-gray-600 font-semibold text-xs mt-px leading-snug\"\n                            }, match$4 !== undefined ? User.title(match$4) : \"Unknown\"))), showDeleteIcon ? deleteIcon(note, removeCoachNote, removeNoteCB, match[1], match[0]) : null), React.createElement(\"div\", {\n                  className: \"ml-10 md:ml-13 mt-2\"\n                }, React.createElement(\"p\", {\n                      className: \"inline-block text-xs font-semibold leading-tight bg-gray-300 text-gray-800 mt-px px-1 py-px rounded\"\n                    }, \"on \" + CoursesStudents__CoachNote.noteOn(note)), React.createElement(MarkdownBlock.make, {\n                      markdown: CoursesStudents__CoachNote.note(note),\n                      className: \"pt-1 text-sm\",\n                      profile: /* Permissive */2\n                    })));\n}\n\nvar make$1 = CoursesStudents__CoachNoteShow;\n\nexports.str = str;\nexports.ArchiveCoachNoteMutation = ArchiveCoachNoteMutation;\nexports.removeCoachNote = removeCoachNote;\nexports.deleteIcon = deleteIcon;\nexports.make = make$1;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}