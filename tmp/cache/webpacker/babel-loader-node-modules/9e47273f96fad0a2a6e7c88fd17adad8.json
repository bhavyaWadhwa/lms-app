{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Sorter = require(\"../../../shared/components/Sorter.bs.js\");\n\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\n\nvar Belt_Array = require(\"bs-platform/lib/js/belt_Array.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\n\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\n\nvar MultiselectDropdown = require(\"../../../packages/multiselect-dropdown/src/components/MultiselectDropdown.bs.js\");\n\nvar CoursesReview__Level = require(\"../types/CoursesReview__Level.bs.js\");\n\nvar CoursesReview__Submissions = require(\"../types/CoursesReview__Submissions.bs.js\");\n\nvar CoursesReview__SubmissionsTab = require(\"./CoursesReview__SubmissionsTab.bs.js\");\n\nvar CoursesReview__IndexSubmission = require(\"../types/CoursesReview__IndexSubmission.bs.js\");\n\nvar CoursesReview__OverlaySubmission = require(\"../types/CoursesReview__OverlaySubmission.bs.js\");\n\nvar CoursesReview__SubmissionOverlay = require(\"./CoursesReview__SubmissionOverlay.bs.js\");\n\nrequire(\"./CoursesReview__Root.css\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* DeselectLevel */\n      0:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: undefined,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* ReloadSubmissions */\n      1:\n        return {\n          pendingSubmissions:\n          /* Unloaded */\n          0,\n          reviewedSubmissions:\n          /* Unloaded */\n          0,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: new Date()\n        };\n\n      case\n      /* SelectPendingTab */\n      2:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab:\n          /* Pending */\n          -113393609,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* SelectReviewedTab */\n      3:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab:\n          /* Reviewed */\n          544019991,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* DeselectCoach */\n      4:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: undefined,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* SelectLevel */\n      0:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: action[0],\n          selectedCoach: state.selectedCoach,\n          filterString: \"\",\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* SetSubmissions */\n      1:\n        var totalCount = action[4];\n        var endCursor = action[3];\n        var submissions = action[0];\n        var filter = CoursesReview__Submissions.makeFilter(state.selectedLevel, state.selectedCoach);\n        var updatedSubmissions;\n        var exit = 0;\n\n        if (action[2] && endCursor !== undefined) {\n          updatedSubmissions = CoursesReview__Submissions.partiallyLoaded(submissions, filter, state.sortDirection, totalCount, endCursor);\n        } else {\n          exit = 1;\n        }\n\n        if (exit === 1) {\n          updatedSubmissions = CoursesReview__Submissions.fullyLoaded(submissions, filter, state.sortDirection, totalCount);\n        }\n\n        if (action[1] >= 544019991) {\n          return {\n            pendingSubmissions: state.pendingSubmissions,\n            reviewedSubmissions: updatedSubmissions,\n            selectedTab: state.selectedTab,\n            selectedLevel: state.selectedLevel,\n            selectedCoach: state.selectedCoach,\n            filterString: state.filterString,\n            sortBy: state.sortBy,\n            sortDirection: state.sortDirection,\n            reloadAt: state.reloadAt\n          };\n        } else {\n          return {\n            pendingSubmissions: updatedSubmissions,\n            reviewedSubmissions: state.reviewedSubmissions,\n            selectedTab: state.selectedTab,\n            selectedLevel: state.selectedLevel,\n            selectedCoach: state.selectedCoach,\n            filterString: state.filterString,\n            sortBy: state.sortBy,\n            sortDirection: state.sortDirection,\n            reloadAt: state.reloadAt\n          };\n        }\n\n      case\n      /* UpdateReviewedSubmission */\n      2:\n        var submission = action[0];\n        var filter$1 = CoursesReview__Submissions.makeFilter(state.selectedLevel, state.selectedCoach);\n        var match = state.reviewedSubmissions;\n        var tmp;\n\n        if (typeof match === \"number\") {\n          tmp =\n          /* Unloaded */\n          0;\n        } else if (match.tag) {\n          var match$1 = match[0];\n          tmp = CoursesReview__Submissions.fullyLoaded(CoursesReview__IndexSubmission.replace(submission, match$1.submissions), filter$1, state.sortDirection, match$1.totalCount);\n        } else {\n          var match$2 = match[0];\n          tmp = CoursesReview__Submissions.partiallyLoaded(CoursesReview__IndexSubmission.replace(submission, match$2.submissions), filter$1, state.sortDirection, match$2.totalCount, match[1]);\n        }\n\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: tmp,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* SelectCoach */\n      3:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: action[0],\n          filterString: \"\",\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* UpdateFilterString */\n      4:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: action[0],\n          sortBy: state.sortBy,\n          sortDirection: state.sortDirection,\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* UpdateSortDirection */\n      5:\n        return {\n          pendingSubmissions: state.pendingSubmissions,\n          reviewedSubmissions: state.reviewedSubmissions,\n          selectedTab: state.selectedTab,\n          selectedLevel: state.selectedLevel,\n          selectedCoach: state.selectedCoach,\n          filterString: state.filterString,\n          sortBy: state.sortBy,\n          sortDirection: action[0],\n          reloadAt: state.reloadAt\n        };\n\n      case\n      /* SyncSubmissionStatus */\n      6:\n        var overlaySubmission = action[0];\n        var skipReload = OptionUtils.mapWithDefault(function (indexSubmission) {\n          return CoursesReview__IndexSubmission.statusEq(overlaySubmission, indexSubmission);\n        }, true, Caml_option.undefined_to_opt($$Array.append(CoursesReview__Submissions.toArray(state.reviewedSubmissions), CoursesReview__Submissions.toArray(state.pendingSubmissions)).find(function (indexSubmission) {\n          return CoursesReview__IndexSubmission.id(indexSubmission) === CoursesReview__OverlaySubmission.id(overlaySubmission);\n        })));\n\n        if (skipReload) {\n          return state;\n        } else {\n          return {\n            pendingSubmissions:\n            /* Unloaded */\n            0,\n            reviewedSubmissions:\n            /* Unloaded */\n            0,\n            selectedTab: state.selectedTab,\n            selectedLevel: state.selectedLevel,\n            selectedCoach: state.selectedCoach,\n            filterString: state.filterString,\n            sortBy: state.sortBy,\n            sortDirection: state.sortDirection,\n            reloadAt: new Date()\n          };\n        }\n\n    }\n  }\n}\n\nfunction computeInitialState(currentTeamCoach) {\n  return {\n    pendingSubmissions:\n    /* Unloaded */\n    0,\n    reviewedSubmissions:\n    /* Unloaded */\n    0,\n    selectedTab:\n    /* Pending */\n    -113393609,\n    selectedLevel: undefined,\n    selectedCoach: currentTeamCoach,\n    filterString: \"\",\n    sortBy: {\n      criterion: \"Submitted At\",\n      criterionType:\n      /* Number */\n      -703661335\n    },\n    sortDirection:\n    /* Descending */\n    235215128,\n    reloadAt: new Date()\n  };\n}\n\nfunction openOverlay(submissionId, $$event) {\n  $$event.preventDefault();\n  return ReasonReactRouter.push(\"/submissions/\" + submissionId);\n}\n\nfunction dropdownElementClasses(level, selectedLevel) {\n  return \"p-3 w-full text-left font-semibold focus:outline-none \" + (selectedLevel !== undefined ? level !== undefined && CoursesReview__Level.id(level) === CoursesReview__Level.id(selectedLevel) ? \"bg-gray-200 text-primary-500\" : \"\" : level !== undefined ? \"\" : \"bg-gray-200 text-primary-500\");\n}\n\nfunction buttonClasses(selected) {\n  return \"w-1/2 md:w-auto py-2 px-3 md:px-6 font-semibold text-sm focus:outline-none \" + (selected ? \"bg-primary-100 shadow-inner text-primary-500\" : \"bg-white shadow-md hover:shadow hover:text-primary-500 hover:bg-gray-100\");\n}\n\nfunction label(t) {\n  if (t.tag) {\n    return \"Assigned to\";\n  } else {\n    return \"Level \" + String(CoursesReview__Level.number(t[0]));\n  }\n}\n\nfunction value(t) {\n  if (t.tag) {\n    var coach = t[0];\n\n    if (UserProxy.id(coach) === t[1]) {\n      return \"Me\";\n    } else {\n      return UserProxy.name(coach);\n    }\n  } else {\n    return CoursesReview__Level.name(t[0]);\n  }\n}\n\nfunction searchString(t) {\n  if (t.tag) {\n    var coach = t[0];\n\n    if (UserProxy.id(coach) === t[1]) {\n      return UserProxy.name(coach) + \" assigned to me\";\n    } else {\n      return \"assigned to \" + UserProxy.name(coach);\n    }\n  } else {\n    var level = t[0];\n    return \"level \" + (String(CoursesReview__Level.number(level)) + (\" \" + CoursesReview__Level.name(level)));\n  }\n}\n\nfunction color(_t) {\n  return \"gray\";\n}\n\nfunction level(level$1) {\n  return (\n    /* Level */\n    Block.__(0, [level$1])\n  );\n}\n\nfunction assignedToCoach(coach, currentCoachId) {\n  return (\n    /* AssignedToCoach */\n    Block.__(1, [coach, currentCoachId])\n  );\n}\n\nvar Selectable = {\n  label: label,\n  value: value,\n  searchString: searchString,\n  color: color,\n  level: level,\n  assignedToCoach: assignedToCoach\n};\nvar Multiselect = MultiselectDropdown.Make(Selectable);\n\nfunction unselected(levels, coaches, currentCoachId, state) {\n  var unselectedLevels = $$Array.map(level, levels.filter(function (level) {\n    return OptionUtils.mapWithDefault(function (selectedLevel) {\n      return CoursesReview__Level.id(level) !== CoursesReview__Level.id(selectedLevel);\n    }, true, state.selectedLevel);\n  }));\n  var unselectedCoaches = $$Array.map(function (coach) {\n    return (\n      /* AssignedToCoach */\n      Block.__(1, [coach, currentCoachId])\n    );\n  }, coaches.filter(function (coach) {\n    return OptionUtils.mapWithDefault(function (selectedCoach) {\n      return UserProxy.id(coach) !== UserProxy.id(selectedCoach);\n    }, true, state.selectedCoach);\n  }));\n  return $$Array.append(unselectedCoaches, unselectedLevels);\n}\n\nfunction selected(state, currentCoachId) {\n  var selectedLevel = OptionUtils.mapWithDefault(function (selectedLevel) {\n    return [\n    /* Level */\n    Block.__(0, [selectedLevel])];\n  }, [], state.selectedLevel);\n  var selectedCoach = OptionUtils.mapWithDefault(function (selectedCoach) {\n    return [\n    /* AssignedToCoach */\n    Block.__(1, [selectedCoach, currentCoachId])];\n  }, [], state.selectedCoach);\n  return $$Array.append(selectedCoach, selectedLevel);\n}\n\nfunction onSelectFilter(send, selectable) {\n  if (selectable.tag) {\n    return Curry._1(send,\n    /* SelectCoach */\n    Block.__(3, [selectable[0]]));\n  } else {\n    return Curry._1(send,\n    /* SelectLevel */\n    Block.__(0, [selectable[0]]));\n  }\n}\n\nfunction onDeselectFilter(send, selectable) {\n  if (selectable.tag) {\n    return Curry._1(send,\n    /* DeselectCoach */\n    4);\n  } else {\n    return Curry._1(send,\n    /* DeselectLevel */\n    0);\n  }\n}\n\nfunction filterPlaceholder(state) {\n  var match = state.selectedLevel;\n  var match$1 = state.selectedCoach;\n\n  if (match !== undefined) {\n    if (match$1 !== undefined) {\n      return \"Filter by another level\";\n    } else {\n      return \"Filter by another level, or only show submissions assigned to a coach\";\n    }\n  } else if (match$1 !== undefined) {\n    return \"Filter by level\";\n  } else {\n    return \"Filter by level, or only show submissions assigned to a coach\";\n  }\n}\n\nfunction restoreFilterNotice(send, currentCoach, message) {\n  return React.createElement(\"div\", {\n    className: \"mb-4 text-sm italic flex flex-col md:flex-row items-center justify-between p-3 border border-gray-300 bg-white rounded-lg\"\n  }, React.createElement(\"span\", undefined, message), React.createElement(\"button\", {\n    className: \"px-2 py-1 rounded text-xs overflow-hidden border border-gray-300 bg-gray-200 text-gray-800 border-gray-300 bg-gray-200 hover:bg-gray-300 mt-1 md:mt-0\",\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* SelectCoach */\n      Block.__(3, [currentCoach]));\n    }\n  }, \"Assigned to: Me\", React.createElement(\"i\", {\n    className: \"fas fa-level-up-alt ml-2\"\n  })));\n}\n\nfunction restoreAssignedToMeFilter(state, send, currentTeamCoach) {\n  return OptionUtils.mapWithDefault(function (currentCoach) {\n    var match = state.selectedCoach;\n\n    if (match !== undefined) {\n      var selectedCoach = match;\n\n      if (UserProxy.id(selectedCoach) === UserProxy.id(currentCoach)) {\n        return null;\n      } else {\n        return restoreFilterNotice(send, currentCoach, \"Now showing submissions assigned to \" + (UserProxy.name(selectedCoach) + \".\"));\n      }\n    } else {\n      return restoreFilterNotice(send, currentCoach, \"Now showing submissions from all students in this course.\");\n    }\n  }, null, currentTeamCoach);\n}\n\nfunction filterSubmissions(selectedLevel, selectedCoach, submissions) {\n  var levelFiltered = OptionUtils.mapWithDefault(function (level) {\n    return submissions.filter(function (l) {\n      return CoursesReview__IndexSubmission.levelId(l) === CoursesReview__Level.id(level);\n    });\n  }, submissions, selectedLevel);\n  return OptionUtils.mapWithDefault(function (coach) {\n    return levelFiltered.filter(function (l) {\n      return $$Array.mem(UserProxy.id(coach), CoursesReview__IndexSubmission.coachIds(l));\n    });\n  }, levelFiltered, selectedCoach);\n}\n\nfunction criterion(t) {\n  return t.criterion;\n}\n\nfunction criterionType(t) {\n  return t.criterionType;\n}\n\nvar Sortable = {\n  criterion: criterion,\n  criterionType: criterionType\n};\nvar SubmissionsSorter = Sorter.Make(Sortable);\n\nfunction submissionsSorter(state, send) {\n  var criteria = [{\n    criterion: \"Submitted At\",\n    criterionType:\n    /* Number */\n    -703661335\n  }];\n  return React.createElement(\"div\", {\n    \"aria-label\": \"Change submissions sorting\",\n    className: \"flex-shrink-0 mt-3 md:mt-0 md:ml-2\"\n  }, React.createElement(\"label\", {\n    className: \"block text-tiny font-semibold uppercase\"\n  }, \"Sort by:\"), React.createElement(SubmissionsSorter.make, {\n    criteria: criteria,\n    selectedCriterion: state.sortBy,\n    direction: state.sortDirection,\n    onDirectionChange: function onDirectionChange(sortDirection) {\n      return Curry._1(send,\n      /* UpdateSortDirection */\n      Block.__(5, [sortDirection]));\n    },\n    onCriterionChange: function onCriterionChange(param) {\n      return (\n        /* () */\n        0\n      );\n    }\n  }));\n}\n\nfunction displayedSubmissions(state) {\n  var match = state.selectedTab;\n\n  if (match >= 544019991) {\n    return state.reviewedSubmissions;\n  } else {\n    return state.pendingSubmissions;\n  }\n}\n\nfunction submissionsCount(submissions) {\n  return OptionUtils.mapWithDefault(function (count) {\n    return React.createElement(\"span\", {\n      className: \"course-review__status-tab-badge ml-2 text-white text-xs bg-red-500 w-auto h-5 px-1 inline-flex items-center justify-center rounded-full\"\n    }, String(count));\n  }, null, CoursesReview__Submissions.totalCount(submissions));\n}\n\nfunction CoursesReview__Root(Props) {\n  var levels = Props.levels;\n  var courseId = Props.courseId;\n  var teamCoaches = Props.teamCoaches;\n  var currentCoach = Props.currentCoach;\n  var match = React.useState(function () {\n    if (Belt_Array.some(teamCoaches, function (coach) {\n      return UserProxy.id(coach) === UserProxy.id(currentCoach);\n    })) {\n      return currentCoach;\n    }\n  });\n  var currentTeamCoach = match[0];\n  var match$1 = React.useReducer(reducer, currentTeamCoach, computeInitialState);\n  var send = match$1[1];\n  var state = match$1[0];\n  var url = ReasonReactRouter.useUrl(undefined,\n  /* () */\n  0);\n  var match$2 = url.path;\n  var tmp;\n\n  if (match$2 && match$2[0] === \"submissions\") {\n    var match$3 = match$2[1];\n\n    if (match$3) {\n      var match$4 = match$3[1];\n      tmp = match$4 && match$4[0] === \"review\" && !match$4[1] ? React.createElement(CoursesReview__SubmissionOverlay.make, {\n        courseId: courseId,\n        submissionId: match$3[0],\n        teamCoaches: teamCoaches,\n        currentCoach: currentCoach,\n        syncSubmissionCB: function syncSubmissionCB(submission) {\n          return Curry._1(send,\n          /* SyncSubmissionStatus */\n          Block.__(6, [submission]));\n        },\n        removePendingSubmissionCB: function removePendingSubmissionCB(param) {\n          return Curry._1(send,\n          /* ReloadSubmissions */\n          1);\n        },\n        updateReviewedSubmissionCB: function updateReviewedSubmissionCB(submission) {\n          return Curry._1(send,\n          /* UpdateReviewedSubmission */\n          Block.__(2, [submission]));\n        }\n      }) : null;\n    } else {\n      tmp = null;\n    }\n  } else {\n    tmp = null;\n  }\n\n  return React.createElement(\"div\", undefined, tmp, React.createElement(\"div\", {\n    className: \"bg-gray-100 pt-9 pb-8 px-3 -mt-7\"\n  }, React.createElement(\"div\", {\n    className: \"bg-gray-100 static md:sticky md:top-0\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col md:flex-row items-end lg:items-center py-4\"\n  }, React.createElement(\"div\", {\n    \"aria-label\": \"status-tab\",\n    className: \"course-review__status-tab w-full md:w-auto flex rounded-lg border border-gray-400\"\n  }, React.createElement(\"button\", {\n    className: buttonClasses(state.selectedTab ===\n    /* Pending */\n    -113393609),\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* SelectPendingTab */\n      2);\n    }\n  }, \"Pending\", submissionsCount(state.pendingSubmissions)), React.createElement(\"button\", {\n    className: buttonClasses(state.selectedTab ===\n    /* Reviewed */\n    544019991),\n    onClick: function onClick(param) {\n      return Curry._1(send,\n      /* SelectReviewedTab */\n      3);\n    }\n  }, \"Reviewed\"))), React.createElement(\"div\", {\n    className: \"md:flex w-full items-start pb-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex-1\"\n  }, React.createElement(\"label\", {\n    className: \"block text-tiny font-semibold uppercase\"\n  }, \"Filter by:\"), React.createElement(Multiselect.make, {\n    id: \"filter\",\n    placeholder: filterPlaceholder(state),\n    onChange: function onChange(filterString) {\n      return Curry._1(send,\n      /* UpdateFilterString */\n      Block.__(4, [filterString]));\n    },\n    value: state.filterString,\n    unselected: unselected(levels, teamCoaches, UserProxy.id(currentCoach), state),\n    selected: selected(state, UserProxy.id(currentCoach)),\n    onSelect: function onSelect(param) {\n      return onSelectFilter(send, param);\n    },\n    onDeselect: function onDeselect(param) {\n      return onDeselectFilter(send, param);\n    }\n  })), submissionsSorter(state, send)))), React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto\"\n  }, restoreAssignedToMeFilter(state, send, currentTeamCoach)), React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto\"\n  }, React.createElement(CoursesReview__SubmissionsTab.make, {\n    courseId: courseId,\n    selectedTab: state.selectedTab,\n    selectedLevel: state.selectedLevel,\n    selectedCoach: state.selectedCoach,\n    sortDirection: state.sortDirection,\n    levels: levels,\n    submissions: displayedSubmissions(state),\n    updateSubmissionsCB: function updateSubmissionsCB(submissions, selectedTab, hasNextPage, totalCount, endCursor) {\n      return Curry._1(send,\n      /* SetSubmissions */\n      Block.__(1, [submissions, selectedTab, hasNextPage, endCursor, totalCount]));\n    },\n    reloadAt: state.reloadAt\n  }))));\n}\n\nvar make = CoursesReview__Root;\nexports.str = str;\nexports.reducer = reducer;\nexports.computeInitialState = computeInitialState;\nexports.openOverlay = openOverlay;\nexports.dropdownElementClasses = dropdownElementClasses;\nexports.buttonClasses = buttonClasses;\nexports.Selectable = Selectable;\nexports.Multiselect = Multiselect;\nexports.unselected = unselected;\nexports.selected = selected;\nexports.onSelectFilter = onSelectFilter;\nexports.onDeselectFilter = onDeselectFilter;\nexports.filterPlaceholder = filterPlaceholder;\nexports.restoreFilterNotice = restoreFilterNotice;\nexports.restoreAssignedToMeFilter = restoreAssignedToMeFilter;\nexports.filterSubmissions = filterSubmissions;\nexports.Sortable = Sortable;\nexports.SubmissionsSorter = SubmissionsSorter;\nexports.submissionsSorter = submissionsSorter;\nexports.displayedSubmissions = displayedSubmissions;\nexports.submissionsCount = submissionsCount;\nexports.make = make;\n/*  Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/courses/review/components/CoursesReview__Root.bs.js"],"names":["$$Array","require","Block","Curry","React","Sorter","UserProxy","Belt_Array","Caml_option","OptionUtils","ReasonReactRouter","MultiselectDropdown","CoursesReview__Level","CoursesReview__Submissions","CoursesReview__SubmissionsTab","CoursesReview__IndexSubmission","CoursesReview__OverlaySubmission","CoursesReview__SubmissionOverlay","str","prim","reducer","state","action","pendingSubmissions","reviewedSubmissions","selectedTab","selectedLevel","undefined","selectedCoach","filterString","sortBy","sortDirection","reloadAt","Date","tag","totalCount","endCursor","submissions","filter","makeFilter","updatedSubmissions","exit","partiallyLoaded","fullyLoaded","submission","filter$1","match","tmp","match$1","replace","match$2","overlaySubmission","skipReload","mapWithDefault","indexSubmission","statusEq","undefined_to_opt","append","toArray","find","id","computeInitialState","currentTeamCoach","criterion","criterionType","openOverlay","submissionId","$$event","preventDefault","push","dropdownElementClasses","level","buttonClasses","selected","label","t","String","number","value","coach","name","searchString","color","_t","level$1","__","assignedToCoach","currentCoachId","Selectable","Multiselect","Make","unselected","levels","coaches","unselectedLevels","map","unselectedCoaches","onSelectFilter","send","selectable","_1","onDeselectFilter","filterPlaceholder","restoreFilterNotice","currentCoach","message","createElement","className","onClick","param","restoreAssignedToMeFilter","filterSubmissions","levelFiltered","l","levelId","mem","coachIds","Sortable","SubmissionsSorter","submissionsSorter","criteria","make","selectedCriterion","direction","onDirectionChange","onCriterionChange","displayedSubmissions","submissionsCount","count","CoursesReview__Root","Props","courseId","teamCoaches","useState","some","useReducer","url","useUrl","path","match$3","match$4","syncSubmissionCB","removePendingSubmissionCB","updateReviewedSubmissionCB","placeholder","onChange","onSelect","onDeselect","updateSubmissionsCB","hasNextPage","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Sorter = require(\"../../../shared/components/Sorter.bs.js\");\nvar UserProxy = require(\"../../../shared/types/UserProxy.bs.js\");\nvar Belt_Array = require(\"bs-platform/lib/js/belt_Array.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../../../shared/utils/OptionUtils.bs.js\");\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\nvar MultiselectDropdown = require(\"../../../packages/multiselect-dropdown/src/components/MultiselectDropdown.bs.js\");\nvar CoursesReview__Level = require(\"../types/CoursesReview__Level.bs.js\");\nvar CoursesReview__Submissions = require(\"../types/CoursesReview__Submissions.bs.js\");\nvar CoursesReview__SubmissionsTab = require(\"./CoursesReview__SubmissionsTab.bs.js\");\nvar CoursesReview__IndexSubmission = require(\"../types/CoursesReview__IndexSubmission.bs.js\");\nvar CoursesReview__OverlaySubmission = require(\"../types/CoursesReview__OverlaySubmission.bs.js\");\nvar CoursesReview__SubmissionOverlay = require(\"./CoursesReview__SubmissionOverlay.bs.js\");\n\n((require(\"./CoursesReview__Root.css\")));\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* DeselectLevel */0 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: undefined,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* ReloadSubmissions */1 :\n          return {\n                  pendingSubmissions: /* Unloaded */0,\n                  reviewedSubmissions: /* Unloaded */0,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: new Date()\n                };\n      case /* SelectPendingTab */2 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: /* Pending */-113393609,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* SelectReviewedTab */3 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: /* Reviewed */544019991,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* DeselectCoach */4 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: undefined,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      \n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* SelectLevel */0 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: action[0],\n                  selectedCoach: state.selectedCoach,\n                  filterString: \"\",\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* SetSubmissions */1 :\n          var totalCount = action[4];\n          var endCursor = action[3];\n          var submissions = action[0];\n          var filter = CoursesReview__Submissions.makeFilter(state.selectedLevel, state.selectedCoach);\n          var updatedSubmissions;\n          var exit = 0;\n          if (action[2] && endCursor !== undefined) {\n            updatedSubmissions = CoursesReview__Submissions.partiallyLoaded(submissions, filter, state.sortDirection, totalCount, endCursor);\n          } else {\n            exit = 1;\n          }\n          if (exit === 1) {\n            updatedSubmissions = CoursesReview__Submissions.fullyLoaded(submissions, filter, state.sortDirection, totalCount);\n          }\n          if (action[1] >= 544019991) {\n            return {\n                    pendingSubmissions: state.pendingSubmissions,\n                    reviewedSubmissions: updatedSubmissions,\n                    selectedTab: state.selectedTab,\n                    selectedLevel: state.selectedLevel,\n                    selectedCoach: state.selectedCoach,\n                    filterString: state.filterString,\n                    sortBy: state.sortBy,\n                    sortDirection: state.sortDirection,\n                    reloadAt: state.reloadAt\n                  };\n          } else {\n            return {\n                    pendingSubmissions: updatedSubmissions,\n                    reviewedSubmissions: state.reviewedSubmissions,\n                    selectedTab: state.selectedTab,\n                    selectedLevel: state.selectedLevel,\n                    selectedCoach: state.selectedCoach,\n                    filterString: state.filterString,\n                    sortBy: state.sortBy,\n                    sortDirection: state.sortDirection,\n                    reloadAt: state.reloadAt\n                  };\n          }\n      case /* UpdateReviewedSubmission */2 :\n          var submission = action[0];\n          var filter$1 = CoursesReview__Submissions.makeFilter(state.selectedLevel, state.selectedCoach);\n          var match = state.reviewedSubmissions;\n          var tmp;\n          if (typeof match === \"number\") {\n            tmp = /* Unloaded */0;\n          } else if (match.tag) {\n            var match$1 = match[0];\n            tmp = CoursesReview__Submissions.fullyLoaded(CoursesReview__IndexSubmission.replace(submission, match$1.submissions), filter$1, state.sortDirection, match$1.totalCount);\n          } else {\n            var match$2 = match[0];\n            tmp = CoursesReview__Submissions.partiallyLoaded(CoursesReview__IndexSubmission.replace(submission, match$2.submissions), filter$1, state.sortDirection, match$2.totalCount, match[1]);\n          }\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: tmp,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* SelectCoach */3 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: action[0],\n                  filterString: \"\",\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* UpdateFilterString */4 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: action[0],\n                  sortBy: state.sortBy,\n                  sortDirection: state.sortDirection,\n                  reloadAt: state.reloadAt\n                };\n      case /* UpdateSortDirection */5 :\n          return {\n                  pendingSubmissions: state.pendingSubmissions,\n                  reviewedSubmissions: state.reviewedSubmissions,\n                  selectedTab: state.selectedTab,\n                  selectedLevel: state.selectedLevel,\n                  selectedCoach: state.selectedCoach,\n                  filterString: state.filterString,\n                  sortBy: state.sortBy,\n                  sortDirection: action[0],\n                  reloadAt: state.reloadAt\n                };\n      case /* SyncSubmissionStatus */6 :\n          var overlaySubmission = action[0];\n          var skipReload = OptionUtils.mapWithDefault((function (indexSubmission) {\n                  return CoursesReview__IndexSubmission.statusEq(overlaySubmission, indexSubmission);\n                }), true, Caml_option.undefined_to_opt($$Array.append(CoursesReview__Submissions.toArray(state.reviewedSubmissions), CoursesReview__Submissions.toArray(state.pendingSubmissions)).find((function (indexSubmission) {\n                          return CoursesReview__IndexSubmission.id(indexSubmission) === CoursesReview__OverlaySubmission.id(overlaySubmission);\n                        }))));\n          if (skipReload) {\n            return state;\n          } else {\n            return {\n                    pendingSubmissions: /* Unloaded */0,\n                    reviewedSubmissions: /* Unloaded */0,\n                    selectedTab: state.selectedTab,\n                    selectedLevel: state.selectedLevel,\n                    selectedCoach: state.selectedCoach,\n                    filterString: state.filterString,\n                    sortBy: state.sortBy,\n                    sortDirection: state.sortDirection,\n                    reloadAt: new Date()\n                  };\n          }\n      \n    }\n  }\n}\n\nfunction computeInitialState(currentTeamCoach) {\n  return {\n          pendingSubmissions: /* Unloaded */0,\n          reviewedSubmissions: /* Unloaded */0,\n          selectedTab: /* Pending */-113393609,\n          selectedLevel: undefined,\n          selectedCoach: currentTeamCoach,\n          filterString: \"\",\n          sortBy: {\n            criterion: \"Submitted At\",\n            criterionType: /* Number */-703661335\n          },\n          sortDirection: /* Descending */235215128,\n          reloadAt: new Date()\n        };\n}\n\nfunction openOverlay(submissionId, $$event) {\n  $$event.preventDefault();\n  return ReasonReactRouter.push(\"/submissions/\" + submissionId);\n}\n\nfunction dropdownElementClasses(level, selectedLevel) {\n  return \"p-3 w-full text-left font-semibold focus:outline-none \" + (\n          selectedLevel !== undefined ? (\n              level !== undefined && CoursesReview__Level.id(level) === CoursesReview__Level.id(selectedLevel) ? \"bg-gray-200 text-primary-500\" : \"\"\n            ) : (\n              level !== undefined ? \"\" : \"bg-gray-200 text-primary-500\"\n            )\n        );\n}\n\nfunction buttonClasses(selected) {\n  return \"w-1/2 md:w-auto py-2 px-3 md:px-6 font-semibold text-sm focus:outline-none \" + (\n          selected ? \"bg-primary-100 shadow-inner text-primary-500\" : \"bg-white shadow-md hover:shadow hover:text-primary-500 hover:bg-gray-100\"\n        );\n}\n\nfunction label(t) {\n  if (t.tag) {\n    return \"Assigned to\";\n  } else {\n    return \"Level \" + String(CoursesReview__Level.number(t[0]));\n  }\n}\n\nfunction value(t) {\n  if (t.tag) {\n    var coach = t[0];\n    if (UserProxy.id(coach) === t[1]) {\n      return \"Me\";\n    } else {\n      return UserProxy.name(coach);\n    }\n  } else {\n    return CoursesReview__Level.name(t[0]);\n  }\n}\n\nfunction searchString(t) {\n  if (t.tag) {\n    var coach = t[0];\n    if (UserProxy.id(coach) === t[1]) {\n      return UserProxy.name(coach) + \" assigned to me\";\n    } else {\n      return \"assigned to \" + UserProxy.name(coach);\n    }\n  } else {\n    var level = t[0];\n    return \"level \" + (String(CoursesReview__Level.number(level)) + (\" \" + CoursesReview__Level.name(level)));\n  }\n}\n\nfunction color(_t) {\n  return \"gray\";\n}\n\nfunction level(level$1) {\n  return /* Level */Block.__(0, [level$1]);\n}\n\nfunction assignedToCoach(coach, currentCoachId) {\n  return /* AssignedToCoach */Block.__(1, [\n            coach,\n            currentCoachId\n          ]);\n}\n\nvar Selectable = {\n  label: label,\n  value: value,\n  searchString: searchString,\n  color: color,\n  level: level,\n  assignedToCoach: assignedToCoach\n};\n\nvar Multiselect = MultiselectDropdown.Make(Selectable);\n\nfunction unselected(levels, coaches, currentCoachId, state) {\n  var unselectedLevels = $$Array.map(level, levels.filter((function (level) {\n              return OptionUtils.mapWithDefault((function (selectedLevel) {\n                            return CoursesReview__Level.id(level) !== CoursesReview__Level.id(selectedLevel);\n                          }), true, state.selectedLevel);\n            })));\n  var unselectedCoaches = $$Array.map((function (coach) {\n          return /* AssignedToCoach */Block.__(1, [\n                    coach,\n                    currentCoachId\n                  ]);\n        }), coaches.filter((function (coach) {\n              return OptionUtils.mapWithDefault((function (selectedCoach) {\n                            return UserProxy.id(coach) !== UserProxy.id(selectedCoach);\n                          }), true, state.selectedCoach);\n            })));\n  return $$Array.append(unselectedCoaches, unselectedLevels);\n}\n\nfunction selected(state, currentCoachId) {\n  var selectedLevel = OptionUtils.mapWithDefault((function (selectedLevel) {\n          return [/* Level */Block.__(0, [selectedLevel])];\n        }), [], state.selectedLevel);\n  var selectedCoach = OptionUtils.mapWithDefault((function (selectedCoach) {\n          return [/* AssignedToCoach */Block.__(1, [\n                      selectedCoach,\n                      currentCoachId\n                    ])];\n        }), [], state.selectedCoach);\n  return $$Array.append(selectedCoach, selectedLevel);\n}\n\nfunction onSelectFilter(send, selectable) {\n  if (selectable.tag) {\n    return Curry._1(send, /* SelectCoach */Block.__(3, [selectable[0]]));\n  } else {\n    return Curry._1(send, /* SelectLevel */Block.__(0, [selectable[0]]));\n  }\n}\n\nfunction onDeselectFilter(send, selectable) {\n  if (selectable.tag) {\n    return Curry._1(send, /* DeselectCoach */4);\n  } else {\n    return Curry._1(send, /* DeselectLevel */0);\n  }\n}\n\nfunction filterPlaceholder(state) {\n  var match = state.selectedLevel;\n  var match$1 = state.selectedCoach;\n  if (match !== undefined) {\n    if (match$1 !== undefined) {\n      return \"Filter by another level\";\n    } else {\n      return \"Filter by another level, or only show submissions assigned to a coach\";\n    }\n  } else if (match$1 !== undefined) {\n    return \"Filter by level\";\n  } else {\n    return \"Filter by level, or only show submissions assigned to a coach\";\n  }\n}\n\nfunction restoreFilterNotice(send, currentCoach, message) {\n  return React.createElement(\"div\", {\n              className: \"mb-4 text-sm italic flex flex-col md:flex-row items-center justify-between p-3 border border-gray-300 bg-white rounded-lg\"\n            }, React.createElement(\"span\", undefined, message), React.createElement(\"button\", {\n                  className: \"px-2 py-1 rounded text-xs overflow-hidden border border-gray-300 bg-gray-200 text-gray-800 border-gray-300 bg-gray-200 hover:bg-gray-300 mt-1 md:mt-0\",\n                  onClick: (function (param) {\n                      return Curry._1(send, /* SelectCoach */Block.__(3, [currentCoach]));\n                    })\n                }, \"Assigned to: Me\", React.createElement(\"i\", {\n                      className: \"fas fa-level-up-alt ml-2\"\n                    })));\n}\n\nfunction restoreAssignedToMeFilter(state, send, currentTeamCoach) {\n  return OptionUtils.mapWithDefault((function (currentCoach) {\n                var match = state.selectedCoach;\n                if (match !== undefined) {\n                  var selectedCoach = match;\n                  if (UserProxy.id(selectedCoach) === UserProxy.id(currentCoach)) {\n                    return null;\n                  } else {\n                    return restoreFilterNotice(send, currentCoach, \"Now showing submissions assigned to \" + (UserProxy.name(selectedCoach) + \".\"));\n                  }\n                } else {\n                  return restoreFilterNotice(send, currentCoach, \"Now showing submissions from all students in this course.\");\n                }\n              }), null, currentTeamCoach);\n}\n\nfunction filterSubmissions(selectedLevel, selectedCoach, submissions) {\n  var levelFiltered = OptionUtils.mapWithDefault((function (level) {\n          return submissions.filter((function (l) {\n                        return CoursesReview__IndexSubmission.levelId(l) === CoursesReview__Level.id(level);\n                      }));\n        }), submissions, selectedLevel);\n  return OptionUtils.mapWithDefault((function (coach) {\n                return levelFiltered.filter((function (l) {\n                              return $$Array.mem(UserProxy.id(coach), CoursesReview__IndexSubmission.coachIds(l));\n                            }));\n              }), levelFiltered, selectedCoach);\n}\n\nfunction criterion(t) {\n  return t.criterion;\n}\n\nfunction criterionType(t) {\n  return t.criterionType;\n}\n\nvar Sortable = {\n  criterion: criterion,\n  criterionType: criterionType\n};\n\nvar SubmissionsSorter = Sorter.Make(Sortable);\n\nfunction submissionsSorter(state, send) {\n  var criteria = [{\n      criterion: \"Submitted At\",\n      criterionType: /* Number */-703661335\n    }];\n  return React.createElement(\"div\", {\n              \"aria-label\": \"Change submissions sorting\",\n              className: \"flex-shrink-0 mt-3 md:mt-0 md:ml-2\"\n            }, React.createElement(\"label\", {\n                  className: \"block text-tiny font-semibold uppercase\"\n                }, \"Sort by:\"), React.createElement(SubmissionsSorter.make, {\n                  criteria: criteria,\n                  selectedCriterion: state.sortBy,\n                  direction: state.sortDirection,\n                  onDirectionChange: (function (sortDirection) {\n                      return Curry._1(send, /* UpdateSortDirection */Block.__(5, [sortDirection]));\n                    }),\n                  onCriterionChange: (function (param) {\n                      return /* () */0;\n                    })\n                }));\n}\n\nfunction displayedSubmissions(state) {\n  var match = state.selectedTab;\n  if (match >= 544019991) {\n    return state.reviewedSubmissions;\n  } else {\n    return state.pendingSubmissions;\n  }\n}\n\nfunction submissionsCount(submissions) {\n  return OptionUtils.mapWithDefault((function (count) {\n                return React.createElement(\"span\", {\n                            className: \"course-review__status-tab-badge ml-2 text-white text-xs bg-red-500 w-auto h-5 px-1 inline-flex items-center justify-center rounded-full\"\n                          }, String(count));\n              }), null, CoursesReview__Submissions.totalCount(submissions));\n}\n\nfunction CoursesReview__Root(Props) {\n  var levels = Props.levels;\n  var courseId = Props.courseId;\n  var teamCoaches = Props.teamCoaches;\n  var currentCoach = Props.currentCoach;\n  var match = React.useState((function () {\n          if (Belt_Array.some(teamCoaches, (function (coach) {\n                    return UserProxy.id(coach) === UserProxy.id(currentCoach);\n                  }))) {\n            return currentCoach;\n          }\n          \n        }));\n  var currentTeamCoach = match[0];\n  var match$1 = React.useReducer(reducer, currentTeamCoach, computeInitialState);\n  var send = match$1[1];\n  var state = match$1[0];\n  var url = ReasonReactRouter.useUrl(undefined, /* () */0);\n  var match$2 = url.path;\n  var tmp;\n  if (match$2 && match$2[0] === \"submissions\") {\n    var match$3 = match$2[1];\n    if (match$3) {\n      var match$4 = match$3[1];\n      tmp = match$4 && match$4[0] === \"review\" && !match$4[1] ? React.createElement(CoursesReview__SubmissionOverlay.make, {\n              courseId: courseId,\n              submissionId: match$3[0],\n              teamCoaches: teamCoaches,\n              currentCoach: currentCoach,\n              syncSubmissionCB: (function (submission) {\n                  return Curry._1(send, /* SyncSubmissionStatus */Block.__(6, [submission]));\n                }),\n              removePendingSubmissionCB: (function (param) {\n                  return Curry._1(send, /* ReloadSubmissions */1);\n                }),\n              updateReviewedSubmissionCB: (function (submission) {\n                  return Curry._1(send, /* UpdateReviewedSubmission */Block.__(2, [submission]));\n                })\n            }) : null;\n    } else {\n      tmp = null;\n    }\n  } else {\n    tmp = null;\n  }\n  return React.createElement(\"div\", undefined, tmp, React.createElement(\"div\", {\n                  className: \"bg-gray-100 pt-9 pb-8 px-3 -mt-7\"\n                }, React.createElement(\"div\", {\n                      className: \"bg-gray-100 static md:sticky md:top-0\"\n                    }, React.createElement(\"div\", {\n                          className: \"max-w-3xl mx-auto\"\n                        }, React.createElement(\"div\", {\n                              className: \"flex flex-col md:flex-row items-end lg:items-center py-4\"\n                            }, React.createElement(\"div\", {\n                                  \"aria-label\": \"status-tab\",\n                                  className: \"course-review__status-tab w-full md:w-auto flex rounded-lg border border-gray-400\"\n                                }, React.createElement(\"button\", {\n                                      className: buttonClasses(state.selectedTab === /* Pending */-113393609),\n                                      onClick: (function (param) {\n                                          return Curry._1(send, /* SelectPendingTab */2);\n                                        })\n                                    }, \"Pending\", submissionsCount(state.pendingSubmissions)), React.createElement(\"button\", {\n                                      className: buttonClasses(state.selectedTab === /* Reviewed */544019991),\n                                      onClick: (function (param) {\n                                          return Curry._1(send, /* SelectReviewedTab */3);\n                                        })\n                                    }, \"Reviewed\"))), React.createElement(\"div\", {\n                              className: \"md:flex w-full items-start pb-4\"\n                            }, React.createElement(\"div\", {\n                                  className: \"flex-1\"\n                                }, React.createElement(\"label\", {\n                                      className: \"block text-tiny font-semibold uppercase\"\n                                    }, \"Filter by:\"), React.createElement(Multiselect.make, {\n                                      id: \"filter\",\n                                      placeholder: filterPlaceholder(state),\n                                      onChange: (function (filterString) {\n                                          return Curry._1(send, /* UpdateFilterString */Block.__(4, [filterString]));\n                                        }),\n                                      value: state.filterString,\n                                      unselected: unselected(levels, teamCoaches, UserProxy.id(currentCoach), state),\n                                      selected: selected(state, UserProxy.id(currentCoach)),\n                                      onSelect: (function (param) {\n                                          return onSelectFilter(send, param);\n                                        }),\n                                      onDeselect: (function (param) {\n                                          return onDeselectFilter(send, param);\n                                        })\n                                    })), submissionsSorter(state, send)))), React.createElement(\"div\", {\n                      className: \"max-w-3xl mx-auto\"\n                    }, restoreAssignedToMeFilter(state, send, currentTeamCoach)), React.createElement(\"div\", {\n                      className: \"max-w-3xl mx-auto\"\n                    }, React.createElement(CoursesReview__SubmissionsTab.make, {\n                          courseId: courseId,\n                          selectedTab: state.selectedTab,\n                          selectedLevel: state.selectedLevel,\n                          selectedCoach: state.selectedCoach,\n                          sortDirection: state.sortDirection,\n                          levels: levels,\n                          submissions: displayedSubmissions(state),\n                          updateSubmissionsCB: (function (submissions, selectedTab, hasNextPage, totalCount, endCursor) {\n                              return Curry._1(send, /* SetSubmissions */Block.__(1, [\n                                            submissions,\n                                            selectedTab,\n                                            hasNextPage,\n                                            endCursor,\n                                            totalCount\n                                          ]));\n                            }),\n                          reloadAt: state.reloadAt\n                        }))));\n}\n\nvar make = CoursesReview__Root;\n\nexports.str = str;\nexports.reducer = reducer;\nexports.computeInitialState = computeInitialState;\nexports.openOverlay = openOverlay;\nexports.dropdownElementClasses = dropdownElementClasses;\nexports.buttonClasses = buttonClasses;\nexports.Selectable = Selectable;\nexports.Multiselect = Multiselect;\nexports.unselected = unselected;\nexports.selected = selected;\nexports.onSelectFilter = onSelectFilter;\nexports.onDeselectFilter = onDeselectFilter;\nexports.filterPlaceholder = filterPlaceholder;\nexports.restoreFilterNotice = restoreFilterNotice;\nexports.restoreAssignedToMeFilter = restoreAssignedToMeFilter;\nexports.filterSubmissions = filterSubmissions;\nexports.Sortable = Sortable;\nexports.SubmissionsSorter = SubmissionsSorter;\nexports.submissionsSorter = submissionsSorter;\nexports.displayedSubmissions = displayedSubmissions;\nexports.submissionsCount = submissionsCount;\nexports.make = make;\n/*  Not a pure module */\n"]},"metadata":{},"sourceType":"module"}