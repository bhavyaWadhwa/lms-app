{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar ArrayUtils = require(\"../../../../shared/utils/ArrayUtils.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleClick(tag, send, clickCB) {\n  Curry._1(clickCB, tag);\n\n  return Curry._1(send, \"\");\n}\n\nfunction search(state, send, allowNewTags, selectedTags, unselectedTags, addTagCB) {\n  var normalizedString = state.trim().replace(new RegExp(\"\\\\s+\", \"g\"), \" \");\n\n  if (normalizedString === \"\") {\n    return [];\n  } else {\n    var allTags = $$Array.map($$String.lowercase_ascii, $$Array.append(selectedTags, unselectedTags));\n    var initial = allowNewTags && !$$Array.mem($$String.lowercase_ascii(normalizedString), allTags) ? [React.createElement(\"span\", {\n      key: normalizedString,\n      className: \"inline-flex cursor-pointer items-center bg-primary-100 border border-dashed border-primary-500 text-primary-700 hover:shadow-md hover:text-primary-800 rounded-lg px-2 py-px mt-1 mr-2 text-xs overflow-hidden\",\n      title: \"Add new tag \" + normalizedString,\n      onMouseDown: function onMouseDown(_e) {\n        Curry._1(addTagCB, normalizedString);\n\n        return Curry._1(send, \"\");\n      }\n    }, normalizedString, React.createElement(\"i\", {\n      className: \"fas fa-plus ml-1 text-sm text-primary-600\"\n    }))] : [];\n    var searchResults = $$Array.map(function (tag) {\n      return React.createElement(\"span\", {\n        key: tag,\n        className: \"inline-flex cursor-pointer items-center bg-gray-200 border border-gray-500 text-gray-900 hover:shadow hover:border-primary-500 hover:bg-primary-100 hover:text-primary-600 rounded-lg px-2 py-px mt-1 mr-1 text-xs overflow-hidden\",\n        title: \"Pick tag \" + tag,\n        onMouseDown: function onMouseDown(_e) {\n          Curry._1(addTagCB, tag);\n\n          return Curry._1(send, \"\");\n        }\n      }, tag);\n    }, ArrayUtils.copyAndSort($$String.compare, unselectedTags.filter(function (tag) {\n      return $$String.lowercase_ascii(tag).includes($$String.lowercase_ascii(normalizedString));\n    })));\n    return $$Array.append(searchResults, initial);\n  }\n}\n\nfunction reducer(_state, searchString) {\n  return searchString;\n}\n\nfunction StudentsEditor__SearchableTagList(Props) {\n  var unselectedTags = Props.unselectedTags;\n  var selectedTags = Props.selectedTags;\n  var addTagCB = Props.addTagCB;\n  var removeTagCB = Props.removeTagCB;\n  var allowNewTags = Props.allowNewTags;\n  var match = React.useReducer(reducer, \"\");\n  var send = match[1];\n  var state = match[0];\n  var results = search(state, send, allowNewTags, selectedTags, unselectedTags, addTagCB);\n  return React.createElement(\"div\", {\n    className: \"mt-2\"\n  }, ArrayUtils.isNotEmpty(selectedTags) ? React.createElement(\"div\", {\n    className: \"flex flex-wrap\"\n  }, $$Array.map(function (tag) {\n    return React.createElement(\"div\", {\n      key: tag,\n      className: \"flex items-center bg-gray-200 border border-gray-500 rounded-lg mt-1 mr-1 text-xs text-gray-900 overflow-hidden\"\n    }, React.createElement(\"span\", {\n      className: \"px-2 py-px\"\n    }, tag), React.createElement(\"span\", {\n      className: \"flex items-center px-2 h-full cursor-pointer px-2 text-gray-700 hover:text-black hover:bg-gray-300 border-l border-gray-400\",\n      title: \"Remove tag \" + tag,\n      onClick: function onClick(_e) {\n        Curry._1(removeTagCB, tag);\n\n        return Curry._1(send, \"\");\n      }\n    }, React.createElement(\"i\", {\n      className: \"fas fa-times\"\n    })));\n  }, ArrayUtils.copyAndSort($$String.compare, selectedTags))) : null, React.createElement(\"input\", {\n    className: \"appearance-none block bg-white leading-snug border border-gray-400 rounded w-full py-3 px-4 mt-2 focus:outline-none focus:bg-white focus:border-gray-500\",\n    id: \"tags\",\n    placeholder: allowNewTags ? \"Search for, or add new tags\" : \"Select tags\",\n    type: \"text\",\n    value: state,\n    onChange: function onChange($$event) {\n      return Curry._1(send, $$event.target.value);\n    }\n  }), ArrayUtils.isNotEmpty(results) ? React.createElement(\"div\", {\n    className: \"flex flex-wrap border border-gray-400 bg-white mt-1 rounded-lg shadow-lg searchable-tag-list__dropdown relative px-4 pt-2 pb-3\"\n  }, results) : null);\n}\n\nvar make = StudentsEditor__SearchableTagList;\nexports.str = str;\nexports.handleClick = handleClick;\nexports.search = search;\nexports.reducer = reducer;\nexports.make = make;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/students_editor/StudentsEditor__SearchableTagList.bs.js"],"names":["$$Array","require","Curry","React","$$String","ArrayUtils","str","prim","handleClick","tag","send","clickCB","_1","search","state","allowNewTags","selectedTags","unselectedTags","addTagCB","normalizedString","trim","replace","RegExp","allTags","map","lowercase_ascii","append","initial","mem","createElement","key","className","title","onMouseDown","_e","searchResults","copyAndSort","compare","filter","includes","reducer","_state","searchString","StudentsEditor__SearchableTagList","Props","removeTagCB","match","useReducer","results","isNotEmpty","onClick","id","placeholder","type","value","onChange","$$event","target","make","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar ArrayUtils = require(\"../../../../shared/utils/ArrayUtils.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction handleClick(tag, send, clickCB) {\n  Curry._1(clickCB, tag);\n  return Curry._1(send, \"\");\n}\n\nfunction search(state, send, allowNewTags, selectedTags, unselectedTags, addTagCB) {\n  var normalizedString = state.trim().replace(new RegExp(\"\\\\s+\", \"g\"), \" \");\n  if (normalizedString === \"\") {\n    return [];\n  } else {\n    var allTags = $$Array.map($$String.lowercase_ascii, $$Array.append(selectedTags, unselectedTags));\n    var initial = allowNewTags && !$$Array.mem($$String.lowercase_ascii(normalizedString), allTags) ? [React.createElement(\"span\", {\n              key: normalizedString,\n              className: \"inline-flex cursor-pointer items-center bg-primary-100 border border-dashed border-primary-500 text-primary-700 hover:shadow-md hover:text-primary-800 rounded-lg px-2 py-px mt-1 mr-2 text-xs overflow-hidden\",\n              title: \"Add new tag \" + normalizedString,\n              onMouseDown: (function (_e) {\n                  Curry._1(addTagCB, normalizedString);\n                  return Curry._1(send, \"\");\n                })\n            }, normalizedString, React.createElement(\"i\", {\n                  className: \"fas fa-plus ml-1 text-sm text-primary-600\"\n                }))] : [];\n    var searchResults = $$Array.map((function (tag) {\n            return React.createElement(\"span\", {\n                        key: tag,\n                        className: \"inline-flex cursor-pointer items-center bg-gray-200 border border-gray-500 text-gray-900 hover:shadow hover:border-primary-500 hover:bg-primary-100 hover:text-primary-600 rounded-lg px-2 py-px mt-1 mr-1 text-xs overflow-hidden\",\n                        title: \"Pick tag \" + tag,\n                        onMouseDown: (function (_e) {\n                            Curry._1(addTagCB, tag);\n                            return Curry._1(send, \"\");\n                          })\n                      }, tag);\n          }), ArrayUtils.copyAndSort($$String.compare, unselectedTags.filter((function (tag) {\n                    return $$String.lowercase_ascii(tag).includes($$String.lowercase_ascii(normalizedString));\n                  }))));\n    return $$Array.append(searchResults, initial);\n  }\n}\n\nfunction reducer(_state, searchString) {\n  return searchString;\n}\n\nfunction StudentsEditor__SearchableTagList(Props) {\n  var unselectedTags = Props.unselectedTags;\n  var selectedTags = Props.selectedTags;\n  var addTagCB = Props.addTagCB;\n  var removeTagCB = Props.removeTagCB;\n  var allowNewTags = Props.allowNewTags;\n  var match = React.useReducer(reducer, \"\");\n  var send = match[1];\n  var state = match[0];\n  var results = search(state, send, allowNewTags, selectedTags, unselectedTags, addTagCB);\n  return React.createElement(\"div\", {\n              className: \"mt-2\"\n            }, ArrayUtils.isNotEmpty(selectedTags) ? React.createElement(\"div\", {\n                    className: \"flex flex-wrap\"\n                  }, $$Array.map((function (tag) {\n                          return React.createElement(\"div\", {\n                                      key: tag,\n                                      className: \"flex items-center bg-gray-200 border border-gray-500 rounded-lg mt-1 mr-1 text-xs text-gray-900 overflow-hidden\"\n                                    }, React.createElement(\"span\", {\n                                          className: \"px-2 py-px\"\n                                        }, tag), React.createElement(\"span\", {\n                                          className: \"flex items-center px-2 h-full cursor-pointer px-2 text-gray-700 hover:text-black hover:bg-gray-300 border-l border-gray-400\",\n                                          title: \"Remove tag \" + tag,\n                                          onClick: (function (_e) {\n                                              Curry._1(removeTagCB, tag);\n                                              return Curry._1(send, \"\");\n                                            })\n                                        }, React.createElement(\"i\", {\n                                              className: \"fas fa-times\"\n                                            })));\n                        }), ArrayUtils.copyAndSort($$String.compare, selectedTags))) : null, React.createElement(\"input\", {\n                  className: \"appearance-none block bg-white leading-snug border border-gray-400 rounded w-full py-3 px-4 mt-2 focus:outline-none focus:bg-white focus:border-gray-500\",\n                  id: \"tags\",\n                  placeholder: allowNewTags ? \"Search for, or add new tags\" : \"Select tags\",\n                  type: \"text\",\n                  value: state,\n                  onChange: (function ($$event) {\n                      return Curry._1(send, $$event.target.value);\n                    })\n                }), ArrayUtils.isNotEmpty(results) ? React.createElement(\"div\", {\n                    className: \"flex flex-wrap border border-gray-400 bg-white mt-1 rounded-lg shadow-lg searchable-tag-list__dropdown relative px-4 pt-2 pb-3\"\n                  }, results) : null);\n}\n\nvar make = StudentsEditor__SearchableTagList;\n\nexports.str = str;\nexports.handleClick = handleClick;\nexports.search = search;\nexports.reducer = reducer;\nexports.make = make;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}