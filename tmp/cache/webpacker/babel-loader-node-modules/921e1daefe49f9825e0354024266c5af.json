{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar FaIcon = require(\"../shared/components/FaIcon.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar $$String = require(\"bs-platform/lib/js/string.js\");\n\nvar DateFns = require(\"../shared/utils/DateFns.bs.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar DomUtils = require(\"../shared/utils/DomUtils.bs.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ArrayUtils = require(\"../shared/utils/ArrayUtils.bs.js\");\n\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar OptionUtils = require(\"../shared/utils/OptionUtils.bs.js\");\n\nvar StringUtils = require(\"../shared/utils/StringUtils.bs.js\");\n\nvar GraphqlQuery = require(\"../shared/utils/GraphqlQuery.bs.js\");\n\nvar $$Notification = require(\"../shared/Notification.bs.js\");\n\nvar DisablingCover = require(\"../shared/components/DisablingCover.bs.js\");\n\nvar MarkdownEditor = require(\"../shared/components/MarkdownEditor.bs.js\");\n\nvar TopicsShow__LinkedTarget = require(\"../topics/types/TopicsShow__LinkedTarget.bs.js\");\n\nvar CommunitiesNewTopic__TopicSuggestion = require(\"./types/CommunitiesNewTopic__TopicSuggestion.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar initialState_similar = {\n  search: \"\",\n  suggestions: []\n};\nvar initialState = {\n  title: \"\",\n  titleTimeoutId: undefined,\n  similar: initialState_similar,\n  searching: false,\n  body: \"\",\n  saving: false\n};\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case\n      /* BeginSaving */\n      0:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: state.similar,\n          searching: state.searching,\n          body: state.body,\n          saving: true\n        };\n\n      case\n      /* FailSaving */\n      1:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: state.similar,\n          searching: state.searching,\n          body: state.body,\n          saving: false\n        };\n\n      case\n      /* BeginSearching */\n      2:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: state.similar,\n          searching: true,\n          body: state.body,\n          saving: state.saving\n        };\n\n      case\n      /* FailSearching */\n      3:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: state.similar,\n          searching: false,\n          body: state.body,\n          saving: state.saving\n        };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* UpdateTitle */\n      0:\n        var title = action[0];\n        var similar = $$String.trim(title) === \"\" ? {\n          search: \"\",\n          suggestions: []\n        } : state.similar;\n        return {\n          title: title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: similar,\n          searching: state.searching,\n          body: state.body,\n          saving: state.saving\n        };\n\n      case\n      /* UpdateTitleAndTimeout */\n      1:\n        return {\n          title: action[0],\n          titleTimeoutId: Caml_option.some(action[1]),\n          similar: state.similar,\n          searching: state.searching,\n          body: state.body,\n          saving: state.saving\n        };\n\n      case\n      /* UpdateBody */\n      2:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: state.similar,\n          searching: state.searching,\n          body: action[0],\n          saving: state.saving\n        };\n\n      case\n      /* FinishSearching */\n      3:\n        return {\n          title: state.title,\n          titleTimeoutId: state.titleTimeoutId,\n          similar: {\n            search: action[0],\n            suggestions: action[1]\n          },\n          searching: false,\n          body: state.body,\n          saving: state.saving\n        };\n    }\n  }\n}\n\nvar ppx_printed_query = \"query SimilarTopicsQuery($communityId: ID!, $title: String!)  {\\nsimilarTopics(communityId: $communityId, title: $title)  {\\nid  \\ntitle  \\ncreatedAt  \\nrepliesCount  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"similarTopics\");\n  return {\n    similarTopics: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map(function (value) {\n      var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n      var match = Js_dict.get(value$1, \"id\");\n      var tmp;\n\n      if (match !== undefined) {\n        var value$2 = Caml_option.valFromOption(match);\n        var match$1 = Js_json.decodeString(value$2);\n        tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n      } else {\n        tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type Topic is missing\");\n      }\n\n      var match$2 = Js_dict.get(value$1, \"title\");\n      var tmp$1;\n\n      if (match$2 !== undefined) {\n        var value$3 = Caml_option.valFromOption(match$2);\n        var match$3 = Js_json.decodeString(value$3);\n        tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n      } else {\n        tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field title on type Topic is missing\");\n      }\n\n      var match$4 = Js_dict.get(value$1, \"createdAt\");\n      var match$5 = Js_dict.get(value$1, \"repliesCount\");\n      var tmp$2;\n\n      if (match$5 !== undefined) {\n        var value$4 = Caml_option.valFromOption(match$5);\n        var match$6 = Js_json.decodeNumber(value$4);\n        tmp$2 = match$6 !== undefined ? match$6 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$4));\n      } else {\n        tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field repliesCount on type Topic is missing\");\n      }\n\n      return {\n        id: tmp,\n        title: tmp$1,\n        createdAt: match$4 !== undefined ? Caml_option.valFromOption(match$4) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type Topic is missing\"),\n        repliesCount: tmp$2\n      };\n    }) : Js_exn.raiseError(\"graphql_ppx: Field similarTopics on type Query is missing\")\n  };\n}\n\nfunction make(communityId, title, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"communityId\", communityId],\n    /* tuple */\n    [\"title\", title]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var communityId = variables.communityId;\n  var title = variables.title;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"communityId\", communityId],\n    /* tuple */\n    [\"title\", title]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(communityId, title, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"communityId\", communityId],\n  /* tuple */\n  [\"title\", title]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, communityId, title, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"communityId\", communityId],\n  /* tuple */\n  [\"title\", title]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar SimilarTopicsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction searchForSimilarTopics(send, title, communityId, param) {\n  Curry._1(send,\n  /* BeginSearching */\n  2);\n\n  var trimmedTitle = $$String.trim(title);\n  (function (eta) {\n    return GraphqlQuery.sendQuery(undefined, eta);\n  })(make(communityId, trimmedTitle,\n  /* () */\n  0)).then(function (result) {\n    var suggestions = $$Array.map(CommunitiesNewTopic__TopicSuggestion.makeFromJs, result.similarTopics);\n\n    Curry._1(send,\n    /* FinishSearching */\n    Block.__(3, [trimmedTitle, suggestions]));\n\n    return Promise.resolve(\n    /* () */\n    0);\n  })[\"catch\"](function (e) {\n    console.log(e);\n    $$Notification.warn(\"Oops!\", \"We failed to fetch similar topics from the server! Our team has been notified about this error.\");\n\n    Curry._1(send,\n    /* FailSaving */\n    1);\n\n    return Promise.resolve(\n    /* () */\n    0);\n  });\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction isInvalidString(s) {\n  return $$String.trim(s) === \"\";\n}\n\nfunction updateTitleAndSearch(state, send, communityId, title) {\n  Belt_Option.forEach(state.titleTimeoutId, function (prim) {\n    clearTimeout(prim);\n    return (\n      /* () */\n      0\n    );\n  });\n  var trimmedTitle = $$String.trim(title);\n\n  if ($$String.trim(title) === \"\" || trimmedTitle === state.similar.search) {\n    return Curry._1(send,\n    /* UpdateTitle */\n    Block.__(0, [title]));\n  } else {\n    var timeoutId = setTimeout(function (param) {\n      return searchForSimilarTopics(send, trimmedTitle, communityId, param);\n    }, 1500);\n    return Curry._1(send,\n    /* UpdateTitleAndTimeout */\n    Block.__(1, [title, timeoutId]));\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation CreateTopicQuery($title: String!, $body: String!, $communityId: ID!, $targetId: ID)  {\\ncreateTopic(body: $body, title: $title, communityId: $communityId, targetId: $targetId)  {\\ntopicId  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createTopic\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"topicId\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var match$3 = Js_json.decodeString(value$3);\n        tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n\n    tmp = {\n      topicId: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createTopic on type Mutation is missing\");\n  }\n\n  return {\n    createTopic: tmp\n  };\n}\n\nfunction make$1(title, body, communityId, targetId, param) {\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"title\", title],\n    /* tuple */\n    [\"body\", body],\n    /* tuple */\n    [\"communityId\", communityId],\n    /* tuple */\n    [\"targetId\", targetId !== undefined ? targetId : null]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeWithVariables$1(variables) {\n  var title = variables.title;\n  var body = variables.body;\n  var communityId = variables.communityId;\n  var targetId = variables.targetId;\n  return {\n    query: ppx_printed_query$1,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"title\", title],\n    /* tuple */\n    [\"body\", body],\n    /* tuple */\n    [\"communityId\", communityId],\n    /* tuple */\n    [\"targetId\", targetId !== undefined ? targetId : null]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse$1\n  };\n}\n\nfunction makeVariables$1(title, body, communityId, targetId, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"title\", title],\n  /* tuple */\n  [\"body\", body],\n  /* tuple */\n  [\"communityId\", communityId],\n  /* tuple */\n  [\"targetId\", targetId !== undefined ? targetId : null]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, title, body, communityId, targetId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"title\", title],\n  /* tuple */\n  [\"body\", body],\n  /* tuple */\n  [\"communityId\", communityId],\n  /* tuple */\n  [\"targetId\", targetId !== undefined ? targetId : null]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition$1 =\n/* tuple */\n[parse$1, ppx_printed_query$1, definition_002$1];\n\nfunction ret_type$1(f) {\n  return {};\n}\n\nvar MT_Ret$1 = {};\nvar CreateTopicQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction redirectToNewTopic(id, title) {\n  var redirectPath = \"/topics/\" + (id + (\"/\" + StringUtils.parameterize(title)));\n  window.location = redirectPath;\n  return (\n    /* () */\n    0\n  );\n}\n\nfunction saveDisabled(state) {\n  if ($$String.trim(state.body) === \"\") {\n    return true;\n  } else {\n    return $$String.trim(state.title) === \"\";\n  }\n}\n\nfunction handleCreateTopic(state, send, communityId, target, $$event) {\n  $$event.preventDefault();\n\n  if (saveDisabled(state)) {\n    return $$Notification.error(\"Missing Info!\", \"Topic title and body must be present.\");\n  } else {\n    Curry._1(send,\n    /* BeginSaving */\n    0);\n\n    var targetId = OptionUtils.flatMap(TopicsShow__LinkedTarget.id, target);\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make$1(state.title, state.body, communityId, targetId,\n    /* () */\n    0)).then(function (response) {\n      var match = response.createTopic.topicId;\n\n      if (match !== undefined) {\n        $$Notification.success(\"Done!\", \"Redirecting to new topic now...\");\n        redirectToNewTopic(match, state.title);\n      } else {\n        Curry._1(send,\n        /* FailSaving */\n        1);\n      }\n\n      return Promise.resolve(\n      /* () */\n      0);\n    })[\"catch\"](function (error) {\n      console.log(error);\n      $$Notification.error(\"Unexpected Error!\", \"Please reload the page before trying to post again.\");\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  }\n}\n\nfunction suggestions(state) {\n  var suggestions$1 = state.similar.suggestions;\n\n  if (ArrayUtils.isNotEmpty(suggestions$1)) {\n    return React.createElement(\"div\", {\n      className: \"pt-3\"\n    }, React.createElement(\"span\", {\n      className: \"tracking-wide text-gray-900 text-xs font-semibold\"\n    }, \"Similar Topics\"), state.searching ? React.createElement(\"span\", {\n      className: \"ml-2\"\n    }, React.createElement(FaIcon.make, {\n      classes: \"fa fa-spinner fa-pulse\"\n    })) : null, $$Array.map(function (suggestion) {\n      var askedOn = DateFns.formatPreset(CommunitiesNewTopic__TopicSuggestion.createdAt(suggestion), true, true, undefined,\n      /* () */\n      0);\n      var n = CommunitiesNewTopic__TopicSuggestion.repliesCount(suggestion);\n      var match = n !== 0 ? n !== 1 ?\n      /* tuple */\n      [String(n) + \" replies\", \"bg-green-500 text-white\"] :\n      /* tuple */\n      [\"1 reply\", \"bg-green-500 text-white\"] :\n      /* tuple */\n      [\"No replies\", \"bg-gray-300 text-gray-700\"];\n      return React.createElement(\"a\", {\n        key: CommunitiesNewTopic__TopicSuggestion.id(suggestion),\n        className: \"flex w-full items-center justify-between mt-1 p-3 rounded cursor-pointer border bg-gray-100 hover:text-primary-500 hover:bg-gray-200\",\n        href: \"/topics/\" + (CommunitiesNewTopic__TopicSuggestion.id(suggestion) + (\"/\" + StringUtils.parameterize(CommunitiesNewTopic__TopicSuggestion.title(suggestion)))),\n        target: \"_blank\"\n      }, React.createElement(\"div\", {\n        className: \"flex flex-col min-w-0\"\n      }, React.createElement(\"h5\", {\n        className: \"font-semibold text-sm leading-snug md:text-base pr-1 truncate flex-1\",\n        title: CommunitiesNewTopic__TopicSuggestion.title(suggestion)\n      }, CommunitiesNewTopic__TopicSuggestion.title(suggestion)), React.createElement(\"p\", {\n        className: \"text-xs mt-1 leading-tight text-gray-800\"\n      }, \"Asked on \" + askedOn)), React.createElement(\"div\", {\n        className: \"text-xs px-1 py-px ml-2 rounded font-semibold flex-shrink-0 \" + match[1]\n      }, match[0]));\n    }, suggestions$1));\n  } else {\n    return null;\n  }\n}\n\nfunction searchingIndicator(state) {\n  if (ArrayUtils.isEmpty(state.similar.suggestions) && state.searching) {\n    return React.createElement(\"div\", {\n      className: \"md:flex-1 pl-1 pb-3 md:p-0\"\n    }, React.createElement(FaIcon.make, {\n      classes: \"fas fa-spinner fa-pulse\"\n    }));\n  } else {\n    return null;\n  }\n}\n\nfunction CommunitiesNewTopic__Root(Props) {\n  var communityId = Props.communityId;\n  var target = Props.target;\n  var match = React.useReducer(reducer, initialState);\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(DisablingCover.make, {\n    disabled: state.saving,\n    children: React.createElement(\"div\", {\n      className: \"bg-gray-100\"\n    }, React.createElement(\"div\", {\n      className: \"flex-1 flex flex-col\"\n    }, React.createElement(\"div\", {\n      className: \"px-3 lg:px-0\"\n    }, React.createElement(\"div\", {\n      className: \"max-w-3xl w-full mx-auto mt-5 pb-2\"\n    }, React.createElement(\"a\", {\n      className: \"btn btn-subtle\",\n      onClick: function onClick(param) {\n        return DomUtils.goBack(\n        /* () */\n        0);\n      }\n    }, React.createElement(\"i\", {\n      className: \"fas fa-arrow-left\"\n    }), React.createElement(\"span\", {\n      className: \"ml-2\"\n    }, \"Back\")))), target !== undefined ? React.createElement(\"div\", {\n      className: \"max-w-3xl w-full mt-5 mx-auto px-3 lg:px-0\"\n    }, React.createElement(\"div\", {\n      className: \"flex py-4 px-4 md:px-5 w-full bg-white border border-primary-500  shadow-md rounded-lg justify-between items-center mb-2\"\n    }, React.createElement(\"p\", {\n      className: \"w-3/5 md:w-4/5 text-sm\"\n    }, React.createElement(\"span\", {\n      className: \"font-semibold block text-xs\"\n    }, \"Linked Target: \"), React.createElement(\"span\", undefined, TopicsShow__LinkedTarget.title(target))), React.createElement(\"a\", {\n      className: \"btn btn-default\",\n      href: \"./new_topic\"\n    }, \"Clear\"))) : null, React.createElement(\"h4\", {\n      className: \"max-w-3xl w-full mx-auto pb-2 mt-2 px-3 lg:px-0\"\n    }, \"Create a new topic of discussion\"), React.createElement(\"div\", {\n      className: \"md:px-3\"\n    }, React.createElement(\"div\", {\n      className: \"mb-8 max-w-3xl w-full mx-auto relative border-t border-b md:border-0 bg-white md:shadow md:rounded-lg\"\n    }, React.createElement(\"div\", {\n      className: \"flex w-full flex-col p-3 md:p-6\"\n    }, React.createElement(\"label\", {\n      className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold mb-2\",\n      htmlFor: \"title\"\n    }, \"Title\"), React.createElement(\"input\", {\n      className: \"appearance-none block w-full bg-white text-gray-900 font-semibold border border-gray-400 rounded py-3 px-4 mb-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n      id: \"title\",\n      tabIndex: 1,\n      placeholder: \"Title for the new topic\",\n      value: state.title,\n      onChange: function onChange($$event) {\n        var newTitle = $$event.target.value;\n        return updateTitleAndSearch(state, send, communityId, newTitle);\n      }\n    }), React.createElement(\"label\", {\n      className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold mb-2\",\n      htmlFor: \"body\"\n    }, \"Body\"), React.createElement(\"div\", {\n      className: \"w-full flex flex-col\"\n    }, React.createElement(MarkdownEditor.make, {\n      value: state.body,\n      onChange: function onChange(markdown) {\n        return Curry._1(send,\n        /* UpdateBody */\n        Block.__(2, [markdown]));\n      },\n      profile:\n      /* QuestionAndAnswer */\n      1,\n      textareaId: \"body\",\n      maxLength: 10000,\n      placeholder: \"If you're asking a question, try to be as descriptive as possible to make it easier for others to post answers. You can use Markdown to format this text.\",\n      tabIndex: 2\n    }), React.createElement(\"div\", undefined, suggestions(state), React.createElement(\"div\", {\n      className: \"flex flex-col md:flex-row justify-end mt-3 items-center md:items-start\"\n    }, searchingIndicator(state), React.createElement(\"button\", {\n      className: \"btn btn-primary border border-transparent w-full md:w-auto\",\n      tabIndex: 3,\n      disabled: saveDisabled(state),\n      onClick: function onClick(param) {\n        return handleCreateTopic(state, send, communityId, target, param);\n      }\n    }, \"Create Post\")))))))))\n  });\n}\n\nvar make$2 = CommunitiesNewTopic__Root;\nexports.str = str;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.SimilarTopicsQuery = SimilarTopicsQuery;\nexports.searchForSimilarTopics = searchForSimilarTopics;\nexports.isInvalidString = isInvalidString;\nexports.updateTitleAndSearch = updateTitleAndSearch;\nexports.CreateTopicQuery = CreateTopicQuery;\nexports.redirectToNewTopic = redirectToNewTopic;\nexports.saveDisabled = saveDisabled;\nexports.handleCreateTopic = handleCreateTopic;\nexports.suggestions = suggestions;\nexports.searchingIndicator = searchingIndicator;\nexports.make = make$2;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/communities/CommunitiesNewTopic__Root.bs.js"],"names":["$$Array","require","Block","Curry","React","FaIcon","Js_exn","$$String","DateFns","Js_dict","Js_json","DomUtils","Js_option","ArrayUtils","Belt_Option","Caml_option","OptionUtils","StringUtils","GraphqlQuery","$$Notification","DisablingCover","MarkdownEditor","TopicsShow__LinkedTarget","CommunitiesNewTopic__TopicSuggestion","str","prim","initialState_similar","search","suggestions","initialState","title","titleTimeoutId","undefined","similar","searching","body","saving","reducer","state","action","tag","trim","some","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","similarTopics","decodeArray","valFromOption","map","tmp","value$2","match$1","decodeString","raiseError","JSON","stringify","match$2","tmp$1","value$3","match$3","match$4","match$5","tmp$2","value$4","match$6","decodeNumber","id","createdAt","repliesCount","make","communityId","param","query","variables","fromArray","filter","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","SimilarTopicsQuery","searchForSimilarTopics","send","trimmedTitle","eta","sendQuery","then","result","makeFromJs","__","Promise","resolve","e","console","log","warn","isInvalidString","s","updateTitleAndSearch","forEach","clearTimeout","timeoutId","setTimeout","ppx_printed_query$1","parse$1","decodeNull","topicId","createTopic","make$1","targetId","makeWithVariables$1","makeVariables$1","definition_002$1","definition$1","ret_type$1","MT_Ret$1","CreateTopicQuery","redirectToNewTopic","redirectPath","parameterize","window","location","saveDisabled","handleCreateTopic","target","$$event","preventDefault","error","flatMap","response","success","suggestions$1","isNotEmpty","createElement","className","classes","suggestion","askedOn","formatPreset","n","String","key","href","searchingIndicator","isEmpty","CommunitiesNewTopic__Root","Props","useReducer","disabled","children","onClick","goBack","htmlFor","tabIndex","placeholder","onChange","newTitle","markdown","profile","textareaId","maxLength","make$2","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar FaIcon = require(\"../shared/components/FaIcon.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar $$String = require(\"bs-platform/lib/js/string.js\");\nvar DateFns = require(\"../shared/utils/DateFns.bs.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar DomUtils = require(\"../shared/utils/DomUtils.bs.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ArrayUtils = require(\"../shared/utils/ArrayUtils.bs.js\");\nvar Belt_Option = require(\"bs-platform/lib/js/belt_Option.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar OptionUtils = require(\"../shared/utils/OptionUtils.bs.js\");\nvar StringUtils = require(\"../shared/utils/StringUtils.bs.js\");\nvar GraphqlQuery = require(\"../shared/utils/GraphqlQuery.bs.js\");\nvar $$Notification = require(\"../shared/Notification.bs.js\");\nvar DisablingCover = require(\"../shared/components/DisablingCover.bs.js\");\nvar MarkdownEditor = require(\"../shared/components/MarkdownEditor.bs.js\");\nvar TopicsShow__LinkedTarget = require(\"../topics/types/TopicsShow__LinkedTarget.bs.js\");\nvar CommunitiesNewTopic__TopicSuggestion = require(\"./types/CommunitiesNewTopic__TopicSuggestion.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nvar initialState_similar = {\n  search: \"\",\n  suggestions: []\n};\n\nvar initialState = {\n  title: \"\",\n  titleTimeoutId: undefined,\n  similar: initialState_similar,\n  searching: false,\n  body: \"\",\n  saving: false\n};\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    switch (action) {\n      case /* BeginSaving */0 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: state.similar,\n                  searching: state.searching,\n                  body: state.body,\n                  saving: true\n                };\n      case /* FailSaving */1 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: state.similar,\n                  searching: state.searching,\n                  body: state.body,\n                  saving: false\n                };\n      case /* BeginSearching */2 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: state.similar,\n                  searching: true,\n                  body: state.body,\n                  saving: state.saving\n                };\n      case /* FailSearching */3 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: state.similar,\n                  searching: false,\n                  body: state.body,\n                  saving: state.saving\n                };\n      \n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* UpdateTitle */0 :\n          var title = action[0];\n          var similar = $$String.trim(title) === \"\" ? ({\n                search: \"\",\n                suggestions: []\n              }) : state.similar;\n          return {\n                  title: title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: similar,\n                  searching: state.searching,\n                  body: state.body,\n                  saving: state.saving\n                };\n      case /* UpdateTitleAndTimeout */1 :\n          return {\n                  title: action[0],\n                  titleTimeoutId: Caml_option.some(action[1]),\n                  similar: state.similar,\n                  searching: state.searching,\n                  body: state.body,\n                  saving: state.saving\n                };\n      case /* UpdateBody */2 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: state.similar,\n                  searching: state.searching,\n                  body: action[0],\n                  saving: state.saving\n                };\n      case /* FinishSearching */3 :\n          return {\n                  title: state.title,\n                  titleTimeoutId: state.titleTimeoutId,\n                  similar: {\n                    search: action[0],\n                    suggestions: action[1]\n                  },\n                  searching: false,\n                  body: state.body,\n                  saving: state.saving\n                };\n      \n    }\n  }\n}\n\nvar ppx_printed_query = \"query SimilarTopicsQuery($communityId: ID!, $title: String!)  {\\nsimilarTopics(communityId: $communityId, title: $title)  {\\nid  \\ntitle  \\ncreatedAt  \\nrepliesCount  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"similarTopics\");\n  return {\n          similarTopics: match !== undefined ? Js_option.getExn(Js_json.decodeArray(Caml_option.valFromOption(match))).map((function (value) {\n                    var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n                    var match = Js_dict.get(value$1, \"id\");\n                    var tmp;\n                    if (match !== undefined) {\n                      var value$2 = Caml_option.valFromOption(match);\n                      var match$1 = Js_json.decodeString(value$2);\n                      tmp = match$1 !== undefined ? match$1 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$2));\n                    } else {\n                      tmp = Js_exn.raiseError(\"graphql_ppx: Field id on type Topic is missing\");\n                    }\n                    var match$2 = Js_dict.get(value$1, \"title\");\n                    var tmp$1;\n                    if (match$2 !== undefined) {\n                      var value$3 = Caml_option.valFromOption(match$2);\n                      var match$3 = Js_json.decodeString(value$3);\n                      tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n                    } else {\n                      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field title on type Topic is missing\");\n                    }\n                    var match$4 = Js_dict.get(value$1, \"createdAt\");\n                    var match$5 = Js_dict.get(value$1, \"repliesCount\");\n                    var tmp$2;\n                    if (match$5 !== undefined) {\n                      var value$4 = Caml_option.valFromOption(match$5);\n                      var match$6 = Js_json.decodeNumber(value$4);\n                      tmp$2 = match$6 !== undefined ? match$6 | 0 : Js_exn.raiseError(\"graphql_ppx: Expected int, got \" + JSON.stringify(value$4));\n                    } else {\n                      tmp$2 = Js_exn.raiseError(\"graphql_ppx: Field repliesCount on type Topic is missing\");\n                    }\n                    return {\n                            id: tmp,\n                            title: tmp$1,\n                            createdAt: match$4 !== undefined ? Caml_option.valFromOption(match$4) : Js_exn.raiseError(\"graphql_ppx: Field createdAt on type Topic is missing\"),\n                            repliesCount: tmp$2\n                          };\n                  })) : Js_exn.raiseError(\"graphql_ppx: Field similarTopics on type Query is missing\")\n        };\n}\n\nfunction make(communityId, title, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"communityId\",\n                    communityId\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var communityId = variables.communityId;\n  var title = variables.title;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"communityId\",\n                    communityId\n                  ],\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(communityId, title, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"communityId\",\n                  communityId\n                ],\n                /* tuple */[\n                  \"title\",\n                  title\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, communityId, title, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"communityId\",\n                      communityId\n                    ],\n                    /* tuple */[\n                      \"title\",\n                      title\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar SimilarTopicsQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction searchForSimilarTopics(send, title, communityId, param) {\n  Curry._1(send, /* BeginSearching */2);\n  var trimmedTitle = $$String.trim(title);\n  (function (eta) {\n            return GraphqlQuery.sendQuery(undefined, eta);\n          })(make(communityId, trimmedTitle, /* () */0)).then((function (result) {\n            var suggestions = $$Array.map(CommunitiesNewTopic__TopicSuggestion.makeFromJs, result.similarTopics);\n            Curry._1(send, /* FinishSearching */Block.__(3, [\n                    trimmedTitle,\n                    suggestions\n                  ]));\n            return Promise.resolve(/* () */0);\n          })).catch((function (e) {\n          console.log(e);\n          $$Notification.warn(\"Oops!\", \"We failed to fetch similar topics from the server! Our team has been notified about this error.\");\n          Curry._1(send, /* FailSaving */1);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nfunction isInvalidString(s) {\n  return $$String.trim(s) === \"\";\n}\n\nfunction updateTitleAndSearch(state, send, communityId, title) {\n  Belt_Option.forEach(state.titleTimeoutId, (function (prim) {\n          clearTimeout(prim);\n          return /* () */0;\n        }));\n  var trimmedTitle = $$String.trim(title);\n  if ($$String.trim(title) === \"\" || trimmedTitle === state.similar.search) {\n    return Curry._1(send, /* UpdateTitle */Block.__(0, [title]));\n  } else {\n    var timeoutId = setTimeout((function (param) {\n            return searchForSimilarTopics(send, trimmedTitle, communityId, param);\n          }), 1500);\n    return Curry._1(send, /* UpdateTitleAndTimeout */Block.__(1, [\n                  title,\n                  timeoutId\n                ]));\n  }\n}\n\nvar ppx_printed_query$1 = \"mutation CreateTopicQuery($title: String!, $body: String!, $communityId: ID!, $targetId: ID)  {\\ncreateTopic(body: $body, title: $title, communityId: $communityId, targetId: $targetId)  {\\ntopicId  \\n}\\n\\n}\\n\";\n\nfunction parse$1(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"createTopic\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"topicId\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeNull(value$3);\n      if (match$2 !== undefined) {\n        tmp$1 = undefined;\n      } else {\n        var match$3 = Js_json.decodeString(value$3);\n        tmp$1 = match$3 !== undefined ? match$3 : Js_exn.raiseError(\"graphql_ppx: Expected string, got \" + JSON.stringify(value$3));\n      }\n    } else {\n      tmp$1 = undefined;\n    }\n    tmp = {\n      topicId: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field createTopic on type Mutation is missing\");\n  }\n  return {\n          createTopic: tmp\n        };\n}\n\nfunction make$1(title, body, communityId, targetId, param) {\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ],\n                  /* tuple */[\n                    \"body\",\n                    body\n                  ],\n                  /* tuple */[\n                    \"communityId\",\n                    communityId\n                  ],\n                  /* tuple */[\n                    \"targetId\",\n                    targetId !== undefined ? targetId : null\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeWithVariables$1(variables) {\n  var title = variables.title;\n  var body = variables.body;\n  var communityId = variables.communityId;\n  var targetId = variables.targetId;\n  return {\n          query: ppx_printed_query$1,\n          variables: Js_dict.fromArray([\n                  /* tuple */[\n                    \"title\",\n                    title\n                  ],\n                  /* tuple */[\n                    \"body\",\n                    body\n                  ],\n                  /* tuple */[\n                    \"communityId\",\n                    communityId\n                  ],\n                  /* tuple */[\n                    \"targetId\",\n                    targetId !== undefined ? targetId : null\n                  ]\n                ].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse$1\n        };\n}\n\nfunction makeVariables$1(title, body, communityId, targetId, param) {\n  return Js_dict.fromArray([\n                /* tuple */[\n                  \"title\",\n                  title\n                ],\n                /* tuple */[\n                  \"body\",\n                  body\n                ],\n                /* tuple */[\n                  \"communityId\",\n                  communityId\n                ],\n                /* tuple */[\n                  \"targetId\",\n                  targetId !== undefined ? targetId : null\n                ]\n              ].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002$1(graphql_ppx_use_json_variables_fn, title, body, communityId, targetId, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n                    /* tuple */[\n                      \"title\",\n                      title\n                    ],\n                    /* tuple */[\n                      \"body\",\n                      body\n                    ],\n                    /* tuple */[\n                      \"communityId\",\n                      communityId\n                    ],\n                    /* tuple */[\n                      \"targetId\",\n                      targetId !== undefined ? targetId : null\n                    ]\n                  ].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition$1 = /* tuple */[\n  parse$1,\n  ppx_printed_query$1,\n  definition_002$1\n];\n\nfunction ret_type$1(f) {\n  return { };\n}\n\nvar MT_Ret$1 = { };\n\nvar CreateTopicQuery = {\n  ppx_printed_query: ppx_printed_query$1,\n  query: ppx_printed_query$1,\n  parse: parse$1,\n  make: make$1,\n  makeWithVariables: makeWithVariables$1,\n  makeVariables: makeVariables$1,\n  definition: definition$1,\n  ret_type: ret_type$1,\n  MT_Ret: MT_Ret$1\n};\n\nfunction redirectToNewTopic(id, title) {\n  var redirectPath = \"/topics/\" + (id + (\"/\" + StringUtils.parameterize(title)));\n  window.location = redirectPath;\n  return /* () */0;\n}\n\nfunction saveDisabled(state) {\n  if ($$String.trim(state.body) === \"\") {\n    return true;\n  } else {\n    return $$String.trim(state.title) === \"\";\n  }\n}\n\nfunction handleCreateTopic(state, send, communityId, target, $$event) {\n  $$event.preventDefault();\n  if (saveDisabled(state)) {\n    return $$Notification.error(\"Missing Info!\", \"Topic title and body must be present.\");\n  } else {\n    Curry._1(send, /* BeginSaving */0);\n    var targetId = OptionUtils.flatMap(TopicsShow__LinkedTarget.id, target);\n    (function (eta) {\n              return GraphqlQuery.sendQuery(undefined, eta);\n            })(make$1(state.title, state.body, communityId, targetId, /* () */0)).then((function (response) {\n              var match = response.createTopic.topicId;\n              if (match !== undefined) {\n                $$Notification.success(\"Done!\", \"Redirecting to new topic now...\");\n                redirectToNewTopic(match, state.title);\n              } else {\n                Curry._1(send, /* FailSaving */1);\n              }\n              return Promise.resolve(/* () */0);\n            })).catch((function (error) {\n            console.log(error);\n            $$Notification.error(\"Unexpected Error!\", \"Please reload the page before trying to post again.\");\n            return Promise.resolve(/* () */0);\n          }));\n    return /* () */0;\n  }\n}\n\nfunction suggestions(state) {\n  var suggestions$1 = state.similar.suggestions;\n  if (ArrayUtils.isNotEmpty(suggestions$1)) {\n    return React.createElement(\"div\", {\n                className: \"pt-3\"\n              }, React.createElement(\"span\", {\n                    className: \"tracking-wide text-gray-900 text-xs font-semibold\"\n                  }, \"Similar Topics\"), state.searching ? React.createElement(\"span\", {\n                      className: \"ml-2\"\n                    }, React.createElement(FaIcon.make, {\n                          classes: \"fa fa-spinner fa-pulse\"\n                        })) : null, $$Array.map((function (suggestion) {\n                      var askedOn = DateFns.formatPreset(CommunitiesNewTopic__TopicSuggestion.createdAt(suggestion), true, true, undefined, /* () */0);\n                      var n = CommunitiesNewTopic__TopicSuggestion.repliesCount(suggestion);\n                      var match = n !== 0 ? (\n                          n !== 1 ? /* tuple */[\n                              String(n) + \" replies\",\n                              \"bg-green-500 text-white\"\n                            ] : /* tuple */[\n                              \"1 reply\",\n                              \"bg-green-500 text-white\"\n                            ]\n                        ) : /* tuple */[\n                          \"No replies\",\n                          \"bg-gray-300 text-gray-700\"\n                        ];\n                      return React.createElement(\"a\", {\n                                  key: CommunitiesNewTopic__TopicSuggestion.id(suggestion),\n                                  className: \"flex w-full items-center justify-between mt-1 p-3 rounded cursor-pointer border bg-gray-100 hover:text-primary-500 hover:bg-gray-200\",\n                                  href: \"/topics/\" + (CommunitiesNewTopic__TopicSuggestion.id(suggestion) + (\"/\" + StringUtils.parameterize(CommunitiesNewTopic__TopicSuggestion.title(suggestion)))),\n                                  target: \"_blank\"\n                                }, React.createElement(\"div\", {\n                                      className: \"flex flex-col min-w-0\"\n                                    }, React.createElement(\"h5\", {\n                                          className: \"font-semibold text-sm leading-snug md:text-base pr-1 truncate flex-1\",\n                                          title: CommunitiesNewTopic__TopicSuggestion.title(suggestion)\n                                        }, CommunitiesNewTopic__TopicSuggestion.title(suggestion)), React.createElement(\"p\", {\n                                          className: \"text-xs mt-1 leading-tight text-gray-800\"\n                                        }, \"Asked on \" + askedOn)), React.createElement(\"div\", {\n                                      className: \"text-xs px-1 py-px ml-2 rounded font-semibold flex-shrink-0 \" + match[1]\n                                    }, match[0]));\n                    }), suggestions$1));\n  } else {\n    return null;\n  }\n}\n\nfunction searchingIndicator(state) {\n  if (ArrayUtils.isEmpty(state.similar.suggestions) && state.searching) {\n    return React.createElement(\"div\", {\n                className: \"md:flex-1 pl-1 pb-3 md:p-0\"\n              }, React.createElement(FaIcon.make, {\n                    classes: \"fas fa-spinner fa-pulse\"\n                  }));\n  } else {\n    return null;\n  }\n}\n\nfunction CommunitiesNewTopic__Root(Props) {\n  var communityId = Props.communityId;\n  var target = Props.target;\n  var match = React.useReducer(reducer, initialState);\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(DisablingCover.make, {\n              disabled: state.saving,\n              children: React.createElement(\"div\", {\n                    className: \"bg-gray-100\"\n                  }, React.createElement(\"div\", {\n                        className: \"flex-1 flex flex-col\"\n                      }, React.createElement(\"div\", {\n                            className: \"px-3 lg:px-0\"\n                          }, React.createElement(\"div\", {\n                                className: \"max-w-3xl w-full mx-auto mt-5 pb-2\"\n                              }, React.createElement(\"a\", {\n                                    className: \"btn btn-subtle\",\n                                    onClick: (function (param) {\n                                        return DomUtils.goBack(/* () */0);\n                                      })\n                                  }, React.createElement(\"i\", {\n                                        className: \"fas fa-arrow-left\"\n                                      }), React.createElement(\"span\", {\n                                        className: \"ml-2\"\n                                      }, \"Back\")))), target !== undefined ? React.createElement(\"div\", {\n                              className: \"max-w-3xl w-full mt-5 mx-auto px-3 lg:px-0\"\n                            }, React.createElement(\"div\", {\n                                  className: \"flex py-4 px-4 md:px-5 w-full bg-white border border-primary-500  shadow-md rounded-lg justify-between items-center mb-2\"\n                                }, React.createElement(\"p\", {\n                                      className: \"w-3/5 md:w-4/5 text-sm\"\n                                    }, React.createElement(\"span\", {\n                                          className: \"font-semibold block text-xs\"\n                                        }, \"Linked Target: \"), React.createElement(\"span\", undefined, TopicsShow__LinkedTarget.title(target))), React.createElement(\"a\", {\n                                      className: \"btn btn-default\",\n                                      href: \"./new_topic\"\n                                    }, \"Clear\"))) : null, React.createElement(\"h4\", {\n                            className: \"max-w-3xl w-full mx-auto pb-2 mt-2 px-3 lg:px-0\"\n                          }, \"Create a new topic of discussion\"), React.createElement(\"div\", {\n                            className: \"md:px-3\"\n                          }, React.createElement(\"div\", {\n                                className: \"mb-8 max-w-3xl w-full mx-auto relative border-t border-b md:border-0 bg-white md:shadow md:rounded-lg\"\n                              }, React.createElement(\"div\", {\n                                    className: \"flex w-full flex-col p-3 md:p-6\"\n                                  }, React.createElement(\"label\", {\n                                        className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold mb-2\",\n                                        htmlFor: \"title\"\n                                      }, \"Title\"), React.createElement(\"input\", {\n                                        className: \"appearance-none block w-full bg-white text-gray-900 font-semibold border border-gray-400 rounded py-3 px-4 mb-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n                                        id: \"title\",\n                                        tabIndex: 1,\n                                        placeholder: \"Title for the new topic\",\n                                        value: state.title,\n                                        onChange: (function ($$event) {\n                                            var newTitle = $$event.target.value;\n                                            return updateTitleAndSearch(state, send, communityId, newTitle);\n                                          })\n                                      }), React.createElement(\"label\", {\n                                        className: \"inline-block tracking-wide text-gray-900 text-xs font-semibold mb-2\",\n                                        htmlFor: \"body\"\n                                      }, \"Body\"), React.createElement(\"div\", {\n                                        className: \"w-full flex flex-col\"\n                                      }, React.createElement(MarkdownEditor.make, {\n                                            value: state.body,\n                                            onChange: (function (markdown) {\n                                                return Curry._1(send, /* UpdateBody */Block.__(2, [markdown]));\n                                              }),\n                                            profile: /* QuestionAndAnswer */1,\n                                            textareaId: \"body\",\n                                            maxLength: 10000,\n                                            placeholder: \"If you're asking a question, try to be as descriptive as possible to make it easier for others to post answers. You can use Markdown to format this text.\",\n                                            tabIndex: 2\n                                          }), React.createElement(\"div\", undefined, suggestions(state), React.createElement(\"div\", {\n                                                className: \"flex flex-col md:flex-row justify-end mt-3 items-center md:items-start\"\n                                              }, searchingIndicator(state), React.createElement(\"button\", {\n                                                    className: \"btn btn-primary border border-transparent w-full md:w-auto\",\n                                                    tabIndex: 3,\n                                                    disabled: saveDisabled(state),\n                                                    onClick: (function (param) {\n                                                        return handleCreateTopic(state, send, communityId, target, param);\n                                                      })\n                                                  }, \"Create Post\")))))))))\n            });\n}\n\nvar make$2 = CommunitiesNewTopic__Root;\n\nexports.str = str;\nexports.initialState = initialState;\nexports.reducer = reducer;\nexports.SimilarTopicsQuery = SimilarTopicsQuery;\nexports.searchForSimilarTopics = searchForSimilarTopics;\nexports.isInvalidString = isInvalidString;\nexports.updateTitleAndSearch = updateTitleAndSearch;\nexports.CreateTopicQuery = CreateTopicQuery;\nexports.redirectToNewTopic = redirectToNewTopic;\nexports.saveDisabled = saveDisabled;\nexports.handleCreateTopic = handleCreateTopic;\nexports.suggestions = suggestions;\nexports.searchingIndicator = searchingIndicator;\nexports.make = make$2;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}