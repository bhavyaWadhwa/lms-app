{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Api = require(\"../../../shared/Api.bs.js\");\n\nvar List = require(\"bs-platform/lib/js/list.js\");\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\n\nvar Caml_format = require(\"bs-platform/lib/js/caml_format.js\");\n\nvar Json_decode = require(\"@glennsl/bs-json/src/Json_decode.bs.js\");\n\nvar Json_encode = require(\"@glennsl/bs-json/src/Json_encode.bs.js\");\n\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\n\nvar InactiveStudentsPanel__Team = require(\"../types/inactive_students_panel/InactiveStudentsPanel__Team.bs.js\");\n\nvar InactiveStudentsPanel__Student = require(\"../types/inactive_students_panel/InactiveStudentsPanel__Student.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case\n    /* RefreshData */\n    0:\n      return {\n        teams: action[0],\n        students: state.students,\n        selectedTeams:\n        /* [] */\n        0,\n        searchString: state.searchString\n      };\n\n    case\n    /* SelectTeam */\n    1:\n      return {\n        teams: state.teams,\n        students: state.students,\n        selectedTeams:\n        /* :: */\n        [action[0], state.selectedTeams],\n        searchString: state.searchString\n      };\n\n    case\n    /* DeselectTeam */\n    2:\n      var team = action[0];\n      return {\n        teams: state.teams,\n        students: state.students,\n        selectedTeams: List.filter(function (s) {\n          return InactiveStudentsPanel__Team.id(s) !== InactiveStudentsPanel__Team.id(team);\n        })(state.selectedTeams),\n        searchString: state.searchString\n      };\n\n    case\n    /* UpdateSearchString */\n    3:\n      return {\n        teams: state.teams,\n        students: state.students,\n        selectedTeams: state.selectedTeams,\n        searchString: action[0]\n      };\n  }\n}\n\nfunction studentsInTeam(students, team) {\n  return List.filter(function (student) {\n    return InactiveStudentsPanel__Student.teamId(student) === InactiveStudentsPanel__Team.id(team);\n  })(students);\n}\n\nfunction markActive(teams, courseId, responseCB, authenticityToken) {\n  var payload = {};\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"team_ids\"] = Json_encode.list(function (prim) {\n    return prim;\n  }, List.map(function (s) {\n    return Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(s));\n  }, teams));\n  var url = \"/school/courses/\" + (courseId + \"/mark_teams_active\");\n  return Api.create(url, payload, responseCB, function (param) {\n    return (\n      /* () */\n      0\n    );\n  });\n}\n\nfunction handleActiveTeamResponse(send, state, json) {\n  var message = Json_decode.field(\"message\", Json_decode.string, json);\n  var updatedTeams = List.filter(function (team) {\n    return !List.exists(function (removedTeam) {\n      return InactiveStudentsPanel__Team.id(team) === InactiveStudentsPanel__Team.id(removedTeam);\n    }, state.selectedTeams);\n  })(state.teams);\n\n  Curry._1(send,\n  /* RefreshData */\n  Block.__(0, [updatedTeams]));\n\n  return $$Notification.success(\"Success!\", message);\n}\n\nfunction SA_InactiveStudentsPanel(Props) {\n  var teams = Props.teams;\n  var courseId = Props.courseId;\n  var students = Props.students;\n  var authenticityToken = Props.authenticityToken;\n  var isLastPage = Props.isLastPage;\n  var currentPage = Props.currentPage;\n  var match = React.useReducer(reducer, {\n    teams: teams,\n    students: students,\n    selectedTeams:\n    /* [] */\n    0,\n    searchString: \"\"\n  });\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n    className: \"flex flex-1 px-6 pb-4 flex-col bg-gray-100 overflow-y-scroll\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-3xl w-full mx-auto flex justify-between border-b mt-4\"\n  }, React.createElement(\"ul\", {\n    className: \"flex font-semibold text-sm\"\n  }, React.createElement(\"li\", {\n    className: \"rounded-t-lg cursor-pointer border-b-3 border-transparent hover:bg-gray-200 hover:text-gray-900\"\n  }, React.createElement(\"a\", {\n    className: \"block px-3 py-3 md:py-2 text-gray-800\",\n    href: \"/school/courses/\" + (courseId + \"/students\")\n  }, \"All Students\")), React.createElement(\"li\", {\n    className: \"px-3 py-3 md:py-2 text-primary-500 border-b-3 border-primary-500 -mb-px\"\n  }, React.createElement(\"span\", undefined, \"Inactive Students\")))), React.createElement(\"div\", {\n    className: \"bg-gray-100 sticky top-0 py-3\"\n  }, React.createElement(\"div\", {\n    className: \"border rounded-lg mx-auto max-w-3xl bg-white \"\n  }, React.createElement(\"div\", {\n    className: \"flex w-full items-center justify-between p-4\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-1\"\n  }, React.createElement(\"input\", {\n    className: \"text-sm bg-white border border-gray-400 rounded leading-relaxed max-w-xs w-full py-2 px-3 mr-2 focus:outline-none focus:bg-white focus:border-primary-300\",\n    id: \"search\",\n    placeholder: \"Search by student or team name...\",\n    type: \"search\",\n    value: state.searchString,\n    onChange: function onChange($$event) {\n      return Curry._1(send,\n      /* UpdateSearchString */\n      Block.__(3, [$$event.target.value]));\n    }\n  }), React.createElement(\"a\", {\n    className: \"btn btn-default no-underline\",\n    href: \"/school/courses/\" + (courseId + (\"/inactive_students?search=\" + state.searchString))\n  }, \"Search\")), ListUtils.isEmpty(state.selectedTeams) ? null : React.createElement(\"button\", {\n    className: \"btn btn-success ml-3 mr-3 focus:outline-none\",\n    onClick: function onClick(_e) {\n      return markActive(state.selectedTeams, courseId, function (param) {\n        return handleActiveTeamResponse(send, state, param);\n      }, authenticityToken);\n    }\n  }, \"Reactivate Students\")))), React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto w-full\"\n  }, List.length(state.teams) > 0 ? $$Array.of_list(List.map(function (team) {\n    var isSingleFounder = List.length(studentsInTeam(state.students, team)) === 1;\n    var isChecked = List.mem(team, state.selectedTeams);\n    var checkboxId = \"select-team-\" + InactiveStudentsPanel__Team.id(team);\n    return React.createElement(\"div\", {\n      key: InactiveStudentsPanel__Team.id(team),\n      className: \"student-team-container flex items-center shadow bg-white rounded-lg mb-4 overflow-hidden\",\n      id: InactiveStudentsPanel__Team.name(team)\n    }, React.createElement(\"label\", {\n      className: \"flex self-stretch items-center text-grey leading-tight font-bold px-4 py-5 hover:bg-gray-100\",\n      htmlFor: checkboxId\n    }, React.createElement(\"input\", {\n      className: \"leading-tight\",\n      id: checkboxId,\n      checked: isChecked,\n      type: \"checkbox\",\n      onChange: isChecked ? function (_e) {\n        return Curry._1(send,\n        /* DeselectTeam */\n        Block.__(2, [team]));\n      } : function (_e) {\n        return Curry._1(send,\n        /* SelectTeam */\n        Block.__(1, [team]));\n      }\n    })), React.createElement(\"div\", {\n      className: \"flex-1 w-3/5 order-last border-l\"\n    }, $$Array.of_list(List.map(function (student) {\n      return React.createElement(\"div\", {\n        key: InactiveStudentsPanel__Student.id(student),\n        className: \"student-team__card flex items-center bg-white pl-4\",\n        id: InactiveStudentsPanel__Student.name(student)\n      }, React.createElement(\"div\", {\n        className: \"flex-1 w-3/5\"\n      }, React.createElement(\"div\", {\n        className: \"flex items-center\"\n      }, React.createElement(\"a\", {\n        className: \"flex flex-1 self-stretch items-center py-4 pr-4\",\n        id: InactiveStudentsPanel__Student.name(student) + \"_edit\"\n      }, React.createElement(\"img\", {\n        className: \"w-10 h-10 rounded-full mr-4 object-cover\",\n        src: InactiveStudentsPanel__Student.avatarUrl(student)\n      }), React.createElement(\"div\", {\n        className: \"text-sm flex flex-col\"\n      }, React.createElement(\"p\", {\n        className: \"text-black font-semibold inline-block \"\n      }, InactiveStudentsPanel__Student.name(student)))))));\n    }, studentsInTeam(state.students, team)))), isSingleFounder ? null : React.createElement(\"div\", {\n      className: \"flex w-2/5 items-center\"\n    }, React.createElement(\"div\", {\n      className: \"w-3/5 py-4 px-3\"\n    }, React.createElement(\"div\", {\n      className: \"students-team--name mb-5\"\n    }, React.createElement(\"p\", {\n      className: \"mb-1 text-xs\"\n    }, \"Team\"), React.createElement(\"h4\", undefined, InactiveStudentsPanel__Team.name(team))))));\n  }, List.sort(function (team1, team2) {\n    return Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(team2)) - Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(team1)) | 0;\n  }, state.teams))) : React.createElement(\"div\", {\n    className: \"shadow bg-white rounded-lg mb-4 p-4\"\n  }, \"No inactive user matches your search criteria.\"), ListUtils.isNotEmpty(teams) ? React.createElement(\"div\", {\n    className: \"max-w-3xl w-full flex flex-row mx-auto justify-center pb-8\"\n  }, currentPage > 1 ? React.createElement(\"a\", {\n    className: \"block btn btn-default no-underline border shadow mx-2\",\n    href: \"/school/courses/\" + (courseId + (\"/inactive_students?page=\" + String(currentPage - 1 | 0)))\n  }, React.createElement(\"i\", {\n    className: \"fas fa-arrow-left\"\n  }), React.createElement(\"span\", {\n    className: \"ml-2\"\n  }, \"Prev\")) : null, isLastPage ? null : React.createElement(\"a\", {\n    className: \"block btn btn-default no-underline border shadow mx-2\",\n    href: \"/school/courses/\" + (courseId + (\"/inactive_students?page=\" + String(currentPage + 1 | 0)))\n  }, React.createElement(\"span\", {\n    className: \"mr-2\"\n  }, \"Next\"), React.createElement(\"i\", {\n    className: \"fas fa-arrow-right\"\n  }))) : null));\n}\n\nvar make = SA_InactiveStudentsPanel;\nexports.str = str;\nexports.reducer = reducer;\nexports.studentsInTeam = studentsInTeam;\nexports.markActive = markActive;\nexports.handleActiveTeamResponse = handleActiveTeamResponse;\nexports.make = make;\n/* Api Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/founders/components/SA_InactiveStudentsPanel.bs.js"],"names":["Api","require","List","$$Array","Block","Curry","React","ListUtils","Caml_format","Json_decode","Json_encode","$$Notification","InactiveStudentsPanel__Team","InactiveStudentsPanel__Student","str","prim","reducer","state","action","tag","teams","students","selectedTeams","searchString","team","filter","s","id","studentsInTeam","student","teamId","markActive","courseId","responseCB","authenticityToken","payload","list","map","caml_int_of_string","url","create","param","handleActiveTeamResponse","send","json","message","field","string","updatedTeams","exists","removedTeam","_1","__","success","SA_InactiveStudentsPanel","Props","isLastPage","currentPage","match","useReducer","createElement","className","href","undefined","placeholder","type","value","onChange","$$event","target","isEmpty","onClick","_e","length","of_list","isSingleFounder","isChecked","mem","checkboxId","key","name","htmlFor","checked","src","avatarUrl","sort","team1","team2","isNotEmpty","String","make","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar Api = require(\"../../../shared/Api.bs.js\");\nvar List = require(\"bs-platform/lib/js/list.js\");\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar ListUtils = require(\"../../../shared/utils/ListUtils.bs.js\");\nvar Caml_format = require(\"bs-platform/lib/js/caml_format.js\");\nvar Json_decode = require(\"@glennsl/bs-json/src/Json_decode.bs.js\");\nvar Json_encode = require(\"@glennsl/bs-json/src/Json_encode.bs.js\");\nvar $$Notification = require(\"../../../shared/Notification.bs.js\");\nvar InactiveStudentsPanel__Team = require(\"../types/inactive_students_panel/InactiveStudentsPanel__Team.bs.js\");\nvar InactiveStudentsPanel__Student = require(\"../types/inactive_students_panel/InactiveStudentsPanel__Student.bs.js\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  switch (action.tag | 0) {\n    case /* RefreshData */0 :\n        return {\n                teams: action[0],\n                students: state.students,\n                selectedTeams: /* [] */0,\n                searchString: state.searchString\n              };\n    case /* SelectTeam */1 :\n        return {\n                teams: state.teams,\n                students: state.students,\n                selectedTeams: /* :: */[\n                  action[0],\n                  state.selectedTeams\n                ],\n                searchString: state.searchString\n              };\n    case /* DeselectTeam */2 :\n        var team = action[0];\n        return {\n                teams: state.teams,\n                students: state.students,\n                selectedTeams: List.filter((function (s) {\n                          return InactiveStudentsPanel__Team.id(s) !== InactiveStudentsPanel__Team.id(team);\n                        }))(state.selectedTeams),\n                searchString: state.searchString\n              };\n    case /* UpdateSearchString */3 :\n        return {\n                teams: state.teams,\n                students: state.students,\n                selectedTeams: state.selectedTeams,\n                searchString: action[0]\n              };\n    \n  }\n}\n\nfunction studentsInTeam(students, team) {\n  return List.filter((function (student) {\n                  return InactiveStudentsPanel__Student.teamId(student) === InactiveStudentsPanel__Team.id(team);\n                }))(students);\n}\n\nfunction markActive(teams, courseId, responseCB, authenticityToken) {\n  var payload = { };\n  payload[\"authenticity_token\"] = authenticityToken;\n  payload[\"team_ids\"] = Json_encode.list((function (prim) {\n          return prim;\n        }), List.map((function (s) {\n              return Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(s));\n            }), teams));\n  var url = \"/school/courses/\" + (courseId + \"/mark_teams_active\");\n  return Api.create(url, payload, responseCB, (function (param) {\n                return /* () */0;\n              }));\n}\n\nfunction handleActiveTeamResponse(send, state, json) {\n  var message = Json_decode.field(\"message\", Json_decode.string, json);\n  var updatedTeams = List.filter((function (team) {\n            return !List.exists((function (removedTeam) {\n                          return InactiveStudentsPanel__Team.id(team) === InactiveStudentsPanel__Team.id(removedTeam);\n                        }), state.selectedTeams);\n          }))(state.teams);\n  Curry._1(send, /* RefreshData */Block.__(0, [updatedTeams]));\n  return $$Notification.success(\"Success!\", message);\n}\n\nfunction SA_InactiveStudentsPanel(Props) {\n  var teams = Props.teams;\n  var courseId = Props.courseId;\n  var students = Props.students;\n  var authenticityToken = Props.authenticityToken;\n  var isLastPage = Props.isLastPage;\n  var currentPage = Props.currentPage;\n  var match = React.useReducer(reducer, {\n        teams: teams,\n        students: students,\n        selectedTeams: /* [] */0,\n        searchString: \"\"\n      });\n  var send = match[1];\n  var state = match[0];\n  return React.createElement(\"div\", {\n              className: \"flex flex-1 px-6 pb-4 flex-col bg-gray-100 overflow-y-scroll\"\n            }, React.createElement(\"div\", {\n                  className: \"max-w-3xl w-full mx-auto flex justify-between border-b mt-4\"\n                }, React.createElement(\"ul\", {\n                      className: \"flex font-semibold text-sm\"\n                    }, React.createElement(\"li\", {\n                          className: \"rounded-t-lg cursor-pointer border-b-3 border-transparent hover:bg-gray-200 hover:text-gray-900\"\n                        }, React.createElement(\"a\", {\n                              className: \"block px-3 py-3 md:py-2 text-gray-800\",\n                              href: \"/school/courses/\" + (courseId + \"/students\")\n                            }, \"All Students\")), React.createElement(\"li\", {\n                          className: \"px-3 py-3 md:py-2 text-primary-500 border-b-3 border-primary-500 -mb-px\"\n                        }, React.createElement(\"span\", undefined, \"Inactive Students\")))), React.createElement(\"div\", {\n                  className: \"bg-gray-100 sticky top-0 py-3\"\n                }, React.createElement(\"div\", {\n                      className: \"border rounded-lg mx-auto max-w-3xl bg-white \"\n                    }, React.createElement(\"div\", {\n                          className: \"flex w-full items-center justify-between p-4\"\n                        }, React.createElement(\"div\", {\n                              className: \"flex flex-1\"\n                            }, React.createElement(\"input\", {\n                                  className: \"text-sm bg-white border border-gray-400 rounded leading-relaxed max-w-xs w-full py-2 px-3 mr-2 focus:outline-none focus:bg-white focus:border-primary-300\",\n                                  id: \"search\",\n                                  placeholder: \"Search by student or team name...\",\n                                  type: \"search\",\n                                  value: state.searchString,\n                                  onChange: (function ($$event) {\n                                      return Curry._1(send, /* UpdateSearchString */Block.__(3, [$$event.target.value]));\n                                    })\n                                }), React.createElement(\"a\", {\n                                  className: \"btn btn-default no-underline\",\n                                  href: \"/school/courses/\" + (courseId + (\"/inactive_students?search=\" + state.searchString))\n                                }, \"Search\")), ListUtils.isEmpty(state.selectedTeams) ? null : React.createElement(\"button\", {\n                                className: \"btn btn-success ml-3 mr-3 focus:outline-none\",\n                                onClick: (function (_e) {\n                                    return markActive(state.selectedTeams, courseId, (function (param) {\n                                                  return handleActiveTeamResponse(send, state, param);\n                                                }), authenticityToken);\n                                  })\n                              }, \"Reactivate Students\")))), React.createElement(\"div\", {\n                  className: \"max-w-3xl mx-auto w-full\"\n                }, List.length(state.teams) > 0 ? $$Array.of_list(List.map((function (team) {\n                              var isSingleFounder = List.length(studentsInTeam(state.students, team)) === 1;\n                              var isChecked = List.mem(team, state.selectedTeams);\n                              var checkboxId = \"select-team-\" + InactiveStudentsPanel__Team.id(team);\n                              return React.createElement(\"div\", {\n                                          key: InactiveStudentsPanel__Team.id(team),\n                                          className: \"student-team-container flex items-center shadow bg-white rounded-lg mb-4 overflow-hidden\",\n                                          id: InactiveStudentsPanel__Team.name(team)\n                                        }, React.createElement(\"label\", {\n                                              className: \"flex self-stretch items-center text-grey leading-tight font-bold px-4 py-5 hover:bg-gray-100\",\n                                              htmlFor: checkboxId\n                                            }, React.createElement(\"input\", {\n                                                  className: \"leading-tight\",\n                                                  id: checkboxId,\n                                                  checked: isChecked,\n                                                  type: \"checkbox\",\n                                                  onChange: isChecked ? (function (_e) {\n                                                        return Curry._1(send, /* DeselectTeam */Block.__(2, [team]));\n                                                      }) : (function (_e) {\n                                                        return Curry._1(send, /* SelectTeam */Block.__(1, [team]));\n                                                      })\n                                                })), React.createElement(\"div\", {\n                                              className: \"flex-1 w-3/5 order-last border-l\"\n                                            }, $$Array.of_list(List.map((function (student) {\n                                                        return React.createElement(\"div\", {\n                                                                    key: InactiveStudentsPanel__Student.id(student),\n                                                                    className: \"student-team__card flex items-center bg-white pl-4\",\n                                                                    id: InactiveStudentsPanel__Student.name(student)\n                                                                  }, React.createElement(\"div\", {\n                                                                        className: \"flex-1 w-3/5\"\n                                                                      }, React.createElement(\"div\", {\n                                                                            className: \"flex items-center\"\n                                                                          }, React.createElement(\"a\", {\n                                                                                className: \"flex flex-1 self-stretch items-center py-4 pr-4\",\n                                                                                id: InactiveStudentsPanel__Student.name(student) + \"_edit\"\n                                                                              }, React.createElement(\"img\", {\n                                                                                    className: \"w-10 h-10 rounded-full mr-4 object-cover\",\n                                                                                    src: InactiveStudentsPanel__Student.avatarUrl(student)\n                                                                                  }), React.createElement(\"div\", {\n                                                                                    className: \"text-sm flex flex-col\"\n                                                                                  }, React.createElement(\"p\", {\n                                                                                        className: \"text-black font-semibold inline-block \"\n                                                                                      }, InactiveStudentsPanel__Student.name(student)))))));\n                                                      }), studentsInTeam(state.students, team)))), isSingleFounder ? null : React.createElement(\"div\", {\n                                                className: \"flex w-2/5 items-center\"\n                                              }, React.createElement(\"div\", {\n                                                    className: \"w-3/5 py-4 px-3\"\n                                                  }, React.createElement(\"div\", {\n                                                        className: \"students-team--name mb-5\"\n                                                      }, React.createElement(\"p\", {\n                                                            className: \"mb-1 text-xs\"\n                                                          }, \"Team\"), React.createElement(\"h4\", undefined, InactiveStudentsPanel__Team.name(team))))));\n                            }), List.sort((function (team1, team2) {\n                                  return Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(team2)) - Caml_format.caml_int_of_string(InactiveStudentsPanel__Team.id(team1)) | 0;\n                                }), state.teams))) : React.createElement(\"div\", {\n                        className: \"shadow bg-white rounded-lg mb-4 p-4\"\n                      }, \"No inactive user matches your search criteria.\"), ListUtils.isNotEmpty(teams) ? React.createElement(\"div\", {\n                        className: \"max-w-3xl w-full flex flex-row mx-auto justify-center pb-8\"\n                      }, currentPage > 1 ? React.createElement(\"a\", {\n                              className: \"block btn btn-default no-underline border shadow mx-2\",\n                              href: \"/school/courses/\" + (courseId + (\"/inactive_students?page=\" + String(currentPage - 1 | 0)))\n                            }, React.createElement(\"i\", {\n                                  className: \"fas fa-arrow-left\"\n                                }), React.createElement(\"span\", {\n                                  className: \"ml-2\"\n                                }, \"Prev\")) : null, isLastPage ? null : React.createElement(\"a\", {\n                              className: \"block btn btn-default no-underline border shadow mx-2\",\n                              href: \"/school/courses/\" + (courseId + (\"/inactive_students?page=\" + String(currentPage + 1 | 0)))\n                            }, React.createElement(\"span\", {\n                                  className: \"mr-2\"\n                                }, \"Next\"), React.createElement(\"i\", {\n                                  className: \"fas fa-arrow-right\"\n                                }))) : null));\n}\n\nvar make = SA_InactiveStudentsPanel;\n\nexports.str = str;\nexports.reducer = reducer;\nexports.studentsInTeam = studentsInTeam;\nexports.markActive = markActive;\nexports.handleActiveTeamResponse = handleActiveTeamResponse;\nexports.make = make;\n/* Api Not a pure module */\n"]},"metadata":{},"sourceType":"module"}