{"ast":null,"code":"// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\n\nvar Block = require(\"bs-platform/lib/js/block.js\");\n\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\n\nvar React = require(\"react\");\n\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\n\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\n\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\n\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\n\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\n\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\n\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\n\nvar WindowUtils = require(\"../../../shared/utils/WindowUtils.bs.js\");\n\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\n\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\n\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\n\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\n\nvar CourseAuthors__Form = require(\"./course_authors/CourseAuthors__Form.bs.js\");\n\nvar CourseAuthors__Author = require(\"../types/course_authors/CourseAuthors__Author.bs.js\");\n\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nvar UnexpectedPathOnAuthorsInterface = Caml_exceptions.create(\"CourseAuthors__Root.UnexpectedPathOnAuthorsInterface\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    if (action ===\n    /* BeginDeleting */\n    0) {\n      return {\n        authors: state.authors,\n        deleting: true\n      };\n    } else {\n      return {\n        authors: state.authors,\n        deleting: false\n      };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case\n      /* FinishDeleting */\n      0:\n        var author = action[0];\n        return {\n          authors: state.authors.filter(function (a) {\n            return CourseAuthors__Author.id(a) !== CourseAuthors__Author.id(author);\n          }),\n          deleting: false\n        };\n\n      case\n      /* AddAuthor */\n      1:\n        return {\n          authors: state.authors.concat([action[0]]),\n          deleting: state.deleting\n        };\n\n      case\n      /* UpdateAuthor */\n      2:\n        var author$1 = action[0];\n        return {\n          authors: $$Array.map(function (a) {\n            if (CourseAuthors__Author.id(a) === CourseAuthors__Author.id(author$1)) {\n              return author$1;\n            } else {\n              return a;\n            }\n          }, state.authors),\n          deleting: state.deleting\n        };\n    }\n  }\n}\n\nvar ppx_printed_query = \"mutation DeleteCourseAuthorMutation($id: ID!)  {\\ndeleteCourseAuthor(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteCourseAuthor\");\n  var tmp;\n\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteCourseAuthorPayload is missing\");\n    }\n\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteCourseAuthor on type Mutation is missing\");\n  }\n\n  return {\n    deleteCourseAuthor: tmp\n  };\n}\n\nfunction make(id, param) {\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n    query: ppx_printed_query,\n    variables: Js_dict.fromArray([\n    /* tuple */\n    [\"id\", id]].filter(function (param) {\n      return !Js_json.test(param[1],\n      /* Null */\n      5);\n    })),\n    parse: parse\n  };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  }));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([\n  /* tuple */\n  [\"id\", id]].filter(function (param) {\n    return !Js_json.test(param[1],\n    /* Null */\n    5);\n  })));\n}\n\nvar definition =\n/* tuple */\n[parse, ppx_printed_query, definition_002];\n\nfunction ret_type(f) {\n  return {};\n}\n\nvar MT_Ret = {};\nvar DeleteCourseAuthorQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeCourseAuthor(send, author, $$event) {\n  $$event.preventDefault();\n  return WindowUtils.confirm(undefined, \"Are you sure you want to remove \" + (CourseAuthors__Author.name(author) + \" from the list of authors?\"), function (param) {\n    Curry._1(send,\n    /* BeginDeleting */\n    0);\n\n    (function (eta) {\n      return GraphqlQuery.sendQuery(undefined, eta);\n    })(make(CourseAuthors__Author.id(author),\n    /* () */\n    0)).then(function (response) {\n      if (response.deleteCourseAuthor.success) {\n        Curry._1(send,\n        /* FinishDeleting */\n        Block.__(0, [author]));\n      } else {\n        Curry._1(send,\n        /* FailToDelete */\n        1);\n      }\n\n      return Promise.resolve(\n      /* () */\n      0);\n    })[\"catch\"](function (param) {\n      Curry._1(send,\n      /* FailToDelete */\n      1);\n\n      return Promise.resolve(\n      /* () */\n      0);\n    });\n    return (\n      /* () */\n      0\n    );\n  });\n}\n\nfunction renderAuthor(rootPath, author, send) {\n  var authorPath = rootPath + (\"/\" + CourseAuthors__Author.id(author));\n  var match = CourseAuthors__Author.avatarUrl(author);\n  return React.createElement(\"div\", {\n    key: CourseAuthors__Author.id(author),\n    className: \"flex w-1/2 flex-shrink-0 mb-5 px-3\"\n  }, React.createElement(\"div\", {\n    className: \"shadow bg-white rounded-lg flex w-full border border-transparent overflow-hidden hover:border-primary-400 hover:bg-gray-100\"\n  }, React.createElement(\"a\", {\n    className: \"w-full cursor-pointer p-4 overflow-hidden\",\n    href: authorPath,\n    onClick: function onClick($$event) {\n      $$event.preventDefault();\n      return ReasonReactRouter.push(authorPath);\n    }\n  }, React.createElement(\"div\", {\n    className: \"flex\"\n  }, React.createElement(\"span\", {\n    className: \"mr-4 flex-shrink-0\"\n  }, match !== undefined ? React.createElement(\"img\", {\n    className: \"w-10 h-10 rounded-full object-cover\",\n    src: match\n  }) : React.createElement(Avatar.make, {\n    name: CourseAuthors__Author.name(author),\n    className: \"w-10 h-10 rounded-full\"\n  })), React.createElement(\"div\", {\n    className: \"flex flex-col\"\n  }, React.createElement(\"span\", {\n    className: \"text-black font-semibold text-sm\"\n  }, CourseAuthors__Author.name(author)), React.createElement(\"span\", {\n    className: \"text-black font-normal text-xs\"\n  }, CourseAuthors__Author.email(author))))), React.createElement(\"div\", {\n    className: \"w-10 text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200 hover:text-red-600\",\n    title: \"Delete \" + CourseAuthors__Author.name(author),\n    onClick: function onClick(param) {\n      return removeCourseAuthor(send, author, param);\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\"\n  }))));\n}\n\nfunction CourseAuthors__Root(Props) {\n  var courseId = Props.courseId;\n  var authors = Props.authors;\n  var match = React.useReducer(reducer, {\n    authors: authors,\n    deleting: false\n  });\n  var send = match[1];\n  var state = match[0];\n  var rootPath = \"/school/courses/\" + (courseId + \"/authors\");\n  var url = ReasonReactRouter.useUrl(undefined,\n  /* () */\n  0);\n  var otherPath = url.path;\n  var tmp;\n\n  if (otherPath) {\n    if (otherPath[0] === \"school\") {\n      var match$1 = otherPath[1];\n\n      if (match$1) {\n        if (match$1[0] === \"courses\") {\n          var match$2 = match$1[1];\n\n          if (match$2) {\n            var match$3 = match$2[1];\n\n            if (match$3) {\n              if (match$3[0] === \"authors\") {\n                var match$4 = match$3[1];\n\n                if (match$4) {\n                  if (match$4[1]) {\n                    throw [UnexpectedPathOnAuthorsInterface, otherPath];\n                  }\n\n                  var authorId = match$4[0];\n                  var author = authorId === \"new\" ? undefined : ArrayUtils.unsafeFind(function (author) {\n                    return CourseAuthors__Author.id(author) === authorId;\n                  }, \"Could not find author with ID \" + (authorId + (\" in the list of known authors for course with ID \" + courseId)), state.authors);\n                  tmp = React.createElement(SchoolAdmin__EditorDrawer.make, {\n                    closeDrawerCB: function closeDrawerCB(param) {\n                      return ReasonReactRouter.push(rootPath);\n                    },\n                    children: React.createElement(CourseAuthors__Form.make, {\n                      courseId: courseId,\n                      rootPath: rootPath,\n                      author: author,\n                      addAuthorCB: function addAuthorCB(author) {\n                        return Curry._1(send,\n                        /* AddAuthor */\n                        Block.__(1, [author]));\n                      },\n                      updateAuthorCB: function updateAuthorCB(author) {\n                        return Curry._1(send,\n                        /* UpdateAuthor */\n                        Block.__(2, [author]));\n                      }\n                    })\n                  });\n                } else {\n                  tmp = null;\n                }\n              } else {\n                throw [UnexpectedPathOnAuthorsInterface, otherPath];\n              }\n            } else {\n              throw [UnexpectedPathOnAuthorsInterface, otherPath];\n            }\n          } else {\n            throw [UnexpectedPathOnAuthorsInterface, otherPath];\n          }\n        } else {\n          throw [UnexpectedPathOnAuthorsInterface, otherPath];\n        }\n      } else {\n        throw [UnexpectedPathOnAuthorsInterface, otherPath];\n      }\n    } else {\n      throw [UnexpectedPathOnAuthorsInterface, otherPath];\n    }\n  } else {\n    throw [UnexpectedPathOnAuthorsInterface, otherPath];\n  }\n\n  return React.createElement(\"div\", {\n    className: \"flex flex-1 h-full overflow-y-scroll bg-gray-100\"\n  }, React.createElement(\"div\", {\n    className: \"flex-1 flex flex-col\"\n  }, tmp, React.createElement(DisablingCover.make, {\n    disabled: state.deleting,\n    message: \"Deleting...\",\n    children: null\n  }, React.createElement(\"div\", {\n    className: \"flex px-6 py-2 items-center justify-between\"\n  }, React.createElement(\"button\", {\n    className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer\",\n    onClick: function onClick(param) {\n      return ReasonReactRouter.push(rootPath + \"/new\");\n    }\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle\"\n  }), React.createElement(\"h5\", {\n    className: \"font-semibold ml-2\"\n  }, \"Add New Author\"))), React.createElement(\"div\", {\n    className: \"px-6 pb-4 mt-5 flex\"\n  }, React.createElement(\"div\", {\n    className: \"max-w-2xl w-full mx-auto\"\n  }, React.createElement(\"div\", {\n    className: \"flex -mx-3 flex-wrap\"\n  }, $$Array.map(function (author) {\n    return renderAuthor(rootPath, author, send);\n  }, CourseAuthors__Author.sort(state.authors))))))));\n}\n\nvar make$1 = CourseAuthors__Root;\nexports.UnexpectedPathOnAuthorsInterface = UnexpectedPathOnAuthorsInterface;\nexports.str = str;\nexports.reducer = reducer;\nexports.DeleteCourseAuthorQuery = DeleteCourseAuthorQuery;\nexports.removeCourseAuthor = removeCourseAuthor;\nexports.renderAuthor = renderAuthor;\nexports.make = make$1;\n/* react Not a pure module */","map":{"version":3,"sources":["/home/kochar/Documents/pupilfirst-master/app/javascript/schools/courses/components/CourseAuthors__Root.bs.js"],"names":["$$Array","require","Block","Curry","React","Avatar","Js_exn","Js_dict","Js_json","Js_option","ArrayUtils","Caml_option","WindowUtils","GraphqlQuery","DisablingCover","Caml_exceptions","ReasonReactRouter","CourseAuthors__Form","CourseAuthors__Author","SchoolAdmin__EditorDrawer","UnexpectedPathOnAuthorsInterface","create","str","prim","reducer","state","action","authors","deleting","tag","author","filter","a","id","concat","author$1","map","ppx_printed_query","parse","value","value$1","getExn","decodeObject","match","get","tmp","undefined","value$2","valFromOption","match$1","tmp$1","value$3","match$2","decodeBoolean","raiseError","JSON","stringify","success","deleteCourseAuthor","make","param","query","variables","fromArray","test","makeWithVariables","makeVariables","definition_002","graphql_ppx_use_json_variables_fn","_1","definition","ret_type","f","MT_Ret","DeleteCourseAuthorQuery","removeCourseAuthor","send","$$event","preventDefault","confirm","name","eta","sendQuery","then","response","__","Promise","resolve","renderAuthor","rootPath","authorPath","avatarUrl","createElement","key","className","href","onClick","push","src","email","title","CourseAuthors__Root","Props","courseId","useReducer","url","useUrl","otherPath","path","match$3","match$4","authorId","unsafeFind","closeDrawerCB","children","addAuthorCB","updateAuthorCB","disabled","message","sort","make$1","exports"],"mappings":"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","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n'use strict';\n\nvar $$Array = require(\"bs-platform/lib/js/array.js\");\nvar Block = require(\"bs-platform/lib/js/block.js\");\nvar Curry = require(\"bs-platform/lib/js/curry.js\");\nvar React = require(\"react\");\nvar Avatar = require(\"../../../shared/Avatar.bs.js\");\nvar Js_exn = require(\"bs-platform/lib/js/js_exn.js\");\nvar Js_dict = require(\"bs-platform/lib/js/js_dict.js\");\nvar Js_json = require(\"bs-platform/lib/js/js_json.js\");\nvar Js_option = require(\"bs-platform/lib/js/js_option.js\");\nvar ArrayUtils = require(\"../../../shared/utils/ArrayUtils.bs.js\");\nvar Caml_option = require(\"bs-platform/lib/js/caml_option.js\");\nvar WindowUtils = require(\"../../../shared/utils/WindowUtils.bs.js\");\nvar GraphqlQuery = require(\"../../../shared/utils/GraphqlQuery.bs.js\");\nvar DisablingCover = require(\"../../../shared/components/DisablingCover.bs.js\");\nvar Caml_exceptions = require(\"bs-platform/lib/js/caml_exceptions.js\");\nvar ReasonReactRouter = require(\"reason-react/src/ReasonReactRouter.js\");\nvar CourseAuthors__Form = require(\"./course_authors/CourseAuthors__Form.bs.js\");\nvar CourseAuthors__Author = require(\"../types/course_authors/CourseAuthors__Author.bs.js\");\nvar SchoolAdmin__EditorDrawer = require(\"../../components/SchoolAdmin__EditorDrawer.bs.js\");\n\nvar UnexpectedPathOnAuthorsInterface = Caml_exceptions.create(\"CourseAuthors__Root.UnexpectedPathOnAuthorsInterface\");\n\nfunction str(prim) {\n  return prim;\n}\n\nfunction reducer(state, action) {\n  if (typeof action === \"number\") {\n    if (action === /* BeginDeleting */0) {\n      return {\n              authors: state.authors,\n              deleting: true\n            };\n    } else {\n      return {\n              authors: state.authors,\n              deleting: false\n            };\n    }\n  } else {\n    switch (action.tag | 0) {\n      case /* FinishDeleting */0 :\n          var author = action[0];\n          return {\n                  authors: state.authors.filter((function (a) {\n                          return CourseAuthors__Author.id(a) !== CourseAuthors__Author.id(author);\n                        })),\n                  deleting: false\n                };\n      case /* AddAuthor */1 :\n          return {\n                  authors: state.authors.concat([action[0]]),\n                  deleting: state.deleting\n                };\n      case /* UpdateAuthor */2 :\n          var author$1 = action[0];\n          return {\n                  authors: $$Array.map((function (a) {\n                          if (CourseAuthors__Author.id(a) === CourseAuthors__Author.id(author$1)) {\n                            return author$1;\n                          } else {\n                            return a;\n                          }\n                        }), state.authors),\n                  deleting: state.deleting\n                };\n      \n    }\n  }\n}\n\nvar ppx_printed_query = \"mutation DeleteCourseAuthorMutation($id: ID!)  {\\ndeleteCourseAuthor(id: $id)  {\\nsuccess  \\n}\\n\\n}\\n\";\n\nfunction parse(value) {\n  var value$1 = Js_option.getExn(Js_json.decodeObject(value));\n  var match = Js_dict.get(value$1, \"deleteCourseAuthor\");\n  var tmp;\n  if (match !== undefined) {\n    var value$2 = Js_option.getExn(Js_json.decodeObject(Caml_option.valFromOption(match)));\n    var match$1 = Js_dict.get(value$2, \"success\");\n    var tmp$1;\n    if (match$1 !== undefined) {\n      var value$3 = Caml_option.valFromOption(match$1);\n      var match$2 = Js_json.decodeBoolean(value$3);\n      tmp$1 = match$2 !== undefined ? match$2 : Js_exn.raiseError(\"graphql_ppx: Expected boolean, got \" + JSON.stringify(value$3));\n    } else {\n      tmp$1 = Js_exn.raiseError(\"graphql_ppx: Field success on type DeleteCourseAuthorPayload is missing\");\n    }\n    tmp = {\n      success: tmp$1\n    };\n  } else {\n    tmp = Js_exn.raiseError(\"graphql_ppx: Field deleteCourseAuthor on type Mutation is missing\");\n  }\n  return {\n          deleteCourseAuthor: tmp\n        };\n}\n\nfunction make(id, param) {\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeWithVariables(variables) {\n  var id = variables.id;\n  return {\n          query: ppx_printed_query,\n          variables: Js_dict.fromArray([/* tuple */[\n                    \"id\",\n                    id\n                  ]].filter((function (param) {\n                      return !Js_json.test(param[1], /* Null */5);\n                    }))),\n          parse: parse\n        };\n}\n\nfunction makeVariables(id, param) {\n  return Js_dict.fromArray([/* tuple */[\n                  \"id\",\n                  id\n                ]].filter((function (param) {\n                    return !Js_json.test(param[1], /* Null */5);\n                  })));\n}\n\nfunction definition_002(graphql_ppx_use_json_variables_fn, id, param) {\n  return Curry._1(graphql_ppx_use_json_variables_fn, Js_dict.fromArray([/* tuple */[\n                      \"id\",\n                      id\n                    ]].filter((function (param) {\n                        return !Js_json.test(param[1], /* Null */5);\n                      }))));\n}\n\nvar definition = /* tuple */[\n  parse,\n  ppx_printed_query,\n  definition_002\n];\n\nfunction ret_type(f) {\n  return { };\n}\n\nvar MT_Ret = { };\n\nvar DeleteCourseAuthorQuery = {\n  ppx_printed_query: ppx_printed_query,\n  query: ppx_printed_query,\n  parse: parse,\n  make: make,\n  makeWithVariables: makeWithVariables,\n  makeVariables: makeVariables,\n  definition: definition,\n  ret_type: ret_type,\n  MT_Ret: MT_Ret\n};\n\nfunction removeCourseAuthor(send, author, $$event) {\n  $$event.preventDefault();\n  return WindowUtils.confirm(undefined, \"Are you sure you want to remove \" + (CourseAuthors__Author.name(author) + \" from the list of authors?\"), (function (param) {\n                Curry._1(send, /* BeginDeleting */0);\n                (function (eta) {\n                          return GraphqlQuery.sendQuery(undefined, eta);\n                        })(make(CourseAuthors__Author.id(author), /* () */0)).then((function (response) {\n                          if (response.deleteCourseAuthor.success) {\n                            Curry._1(send, /* FinishDeleting */Block.__(0, [author]));\n                          } else {\n                            Curry._1(send, /* FailToDelete */1);\n                          }\n                          return Promise.resolve(/* () */0);\n                        })).catch((function (param) {\n                        Curry._1(send, /* FailToDelete */1);\n                        return Promise.resolve(/* () */0);\n                      }));\n                return /* () */0;\n              }));\n}\n\nfunction renderAuthor(rootPath, author, send) {\n  var authorPath = rootPath + (\"/\" + CourseAuthors__Author.id(author));\n  var match = CourseAuthors__Author.avatarUrl(author);\n  return React.createElement(\"div\", {\n              key: CourseAuthors__Author.id(author),\n              className: \"flex w-1/2 flex-shrink-0 mb-5 px-3\"\n            }, React.createElement(\"div\", {\n                  className: \"shadow bg-white rounded-lg flex w-full border border-transparent overflow-hidden hover:border-primary-400 hover:bg-gray-100\"\n                }, React.createElement(\"a\", {\n                      className: \"w-full cursor-pointer p-4 overflow-hidden\",\n                      href: authorPath,\n                      onClick: (function ($$event) {\n                          $$event.preventDefault();\n                          return ReasonReactRouter.push(authorPath);\n                        })\n                    }, React.createElement(\"div\", {\n                          className: \"flex\"\n                        }, React.createElement(\"span\", {\n                              className: \"mr-4 flex-shrink-0\"\n                            }, match !== undefined ? React.createElement(\"img\", {\n                                    className: \"w-10 h-10 rounded-full object-cover\",\n                                    src: match\n                                  }) : React.createElement(Avatar.make, {\n                                    name: CourseAuthors__Author.name(author),\n                                    className: \"w-10 h-10 rounded-full\"\n                                  })), React.createElement(\"div\", {\n                              className: \"flex flex-col\"\n                            }, React.createElement(\"span\", {\n                                  className: \"text-black font-semibold text-sm\"\n                                }, CourseAuthors__Author.name(author)), React.createElement(\"span\", {\n                                  className: \"text-black font-normal text-xs\"\n                                }, CourseAuthors__Author.email(author))))), React.createElement(\"div\", {\n                      className: \"w-10 text-sm course-faculty__list-item-remove text-gray-700 hover:text-gray-900 cursor-pointer flex items-center justify-center hover:bg-gray-200 hover:text-red-600\",\n                      title: \"Delete \" + CourseAuthors__Author.name(author),\n                      onClick: (function (param) {\n                          return removeCourseAuthor(send, author, param);\n                        })\n                    }, React.createElement(\"i\", {\n                          className: \"fas fa-trash-alt\"\n                        }))));\n}\n\nfunction CourseAuthors__Root(Props) {\n  var courseId = Props.courseId;\n  var authors = Props.authors;\n  var match = React.useReducer(reducer, {\n        authors: authors,\n        deleting: false\n      });\n  var send = match[1];\n  var state = match[0];\n  var rootPath = \"/school/courses/\" + (courseId + \"/authors\");\n  var url = ReasonReactRouter.useUrl(undefined, /* () */0);\n  var otherPath = url.path;\n  var tmp;\n  if (otherPath) {\n    if (otherPath[0] === \"school\") {\n      var match$1 = otherPath[1];\n      if (match$1) {\n        if (match$1[0] === \"courses\") {\n          var match$2 = match$1[1];\n          if (match$2) {\n            var match$3 = match$2[1];\n            if (match$3) {\n              if (match$3[0] === \"authors\") {\n                var match$4 = match$3[1];\n                if (match$4) {\n                  if (match$4[1]) {\n                    throw [\n                          UnexpectedPathOnAuthorsInterface,\n                          otherPath\n                        ];\n                  }\n                  var authorId = match$4[0];\n                  var author = authorId === \"new\" ? undefined : ArrayUtils.unsafeFind((function (author) {\n                            return CourseAuthors__Author.id(author) === authorId;\n                          }), \"Could not find author with ID \" + (authorId + (\" in the list of known authors for course with ID \" + courseId)), state.authors);\n                  tmp = React.createElement(SchoolAdmin__EditorDrawer.make, {\n                        closeDrawerCB: (function (param) {\n                            return ReasonReactRouter.push(rootPath);\n                          }),\n                        children: React.createElement(CourseAuthors__Form.make, {\n                              courseId: courseId,\n                              rootPath: rootPath,\n                              author: author,\n                              addAuthorCB: (function (author) {\n                                  return Curry._1(send, /* AddAuthor */Block.__(1, [author]));\n                                }),\n                              updateAuthorCB: (function (author) {\n                                  return Curry._1(send, /* UpdateAuthor */Block.__(2, [author]));\n                                })\n                            })\n                      });\n                } else {\n                  tmp = null;\n                }\n              } else {\n                throw [\n                      UnexpectedPathOnAuthorsInterface,\n                      otherPath\n                    ];\n              }\n            } else {\n              throw [\n                    UnexpectedPathOnAuthorsInterface,\n                    otherPath\n                  ];\n            }\n          } else {\n            throw [\n                  UnexpectedPathOnAuthorsInterface,\n                  otherPath\n                ];\n          }\n        } else {\n          throw [\n                UnexpectedPathOnAuthorsInterface,\n                otherPath\n              ];\n        }\n      } else {\n        throw [\n              UnexpectedPathOnAuthorsInterface,\n              otherPath\n            ];\n      }\n    } else {\n      throw [\n            UnexpectedPathOnAuthorsInterface,\n            otherPath\n          ];\n    }\n  } else {\n    throw [\n          UnexpectedPathOnAuthorsInterface,\n          otherPath\n        ];\n  }\n  return React.createElement(\"div\", {\n              className: \"flex flex-1 h-full overflow-y-scroll bg-gray-100\"\n            }, React.createElement(\"div\", {\n                  className: \"flex-1 flex flex-col\"\n                }, tmp, React.createElement(DisablingCover.make, {\n                      disabled: state.deleting,\n                      message: \"Deleting...\",\n                      children: null\n                    }, React.createElement(\"div\", {\n                          className: \"flex px-6 py-2 items-center justify-between\"\n                        }, React.createElement(\"button\", {\n                              className: \"max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer\",\n                              onClick: (function (param) {\n                                  return ReasonReactRouter.push(rootPath + \"/new\");\n                                })\n                            }, React.createElement(\"i\", {\n                                  className: \"fas fa-plus-circle\"\n                                }), React.createElement(\"h5\", {\n                                  className: \"font-semibold ml-2\"\n                                }, \"Add New Author\"))), React.createElement(\"div\", {\n                          className: \"px-6 pb-4 mt-5 flex\"\n                        }, React.createElement(\"div\", {\n                              className: \"max-w-2xl w-full mx-auto\"\n                            }, React.createElement(\"div\", {\n                                  className: \"flex -mx-3 flex-wrap\"\n                                }, $$Array.map((function (author) {\n                                        return renderAuthor(rootPath, author, send);\n                                      }), CourseAuthors__Author.sort(state.authors))))))));\n}\n\nvar make$1 = CourseAuthors__Root;\n\nexports.UnexpectedPathOnAuthorsInterface = UnexpectedPathOnAuthorsInterface;\nexports.str = str;\nexports.reducer = reducer;\nexports.DeleteCourseAuthorQuery = DeleteCourseAuthorQuery;\nexports.removeCourseAuthor = removeCourseAuthor;\nexports.renderAuthor = renderAuthor;\nexports.make = make$1;\n/* react Not a pure module */\n"]},"metadata":{},"sourceType":"module"}