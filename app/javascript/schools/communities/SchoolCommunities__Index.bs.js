// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var List = require("bs-platform/lib/js/list.js");
var $$Array = require("bs-platform/lib/js/array.js");
var Curry = require("bs-platform/lib/js/curry.js");
var React = require("react");
var SchoolAdmin__EditorDrawer = require("../components/SchoolAdmin__EditorDrawer.bs.js");
var SchoolCommunities__Editor = require("./components/SchoolCommunities__Editor.bs.js");
var SchoolCommunities__Community = require("./types/index/SchoolCommunities__Community.bs.js");

function str(prim) {
  return prim;
}

function SchoolCommunities__Index(Props) {
  var communities = Props.communities;
  var courses = Props.courses;
  var connections = Props.connections;
  var match = React.useState((function () {
          return /* Hidden */0;
        }));
  var setEditorAction = match[1];
  var editorAction = match[0];
  var match$1 = React.useState((function () {
          return connections;
        }));
  var setStateConnections = match$1[1];
  var match$2 = React.useState((function () {
          return communities;
        }));
  var setStateCommunities = match$2[1];
  var stateCommunities = match$2[0];
  var updateCommunitiesCB = function (community, connections) {
    Curry._1(setStateCommunities, (function (param) {
            return SchoolCommunities__Community.updateList(community, stateCommunities);
          }));
    Curry._1(setStateConnections, (function (param) {
            return connections;
          }));
    return Curry._1(setEditorAction, (function (param) {
                  return /* Hidden */0;
                }));
  };
  var addCommunityCB = function (community, connections) {
    Curry._1(setStateCommunities, (function (param) {
            return List.append(/* :: */[
                        community,
                        /* [] */0
                      ], communities);
          }));
    Curry._1(setStateConnections, (function (param) {
            return connections;
          }));
    return Curry._1(setEditorAction, (function (param) {
                  return /* Hidden */0;
                }));
  };
  return React.createElement("div", {
              className: "flex-1 flex flex-col overflow-y-scroll bg-gray-200"
            }, editorAction ? React.createElement(SchoolAdmin__EditorDrawer.make, {
                    closeDrawerCB: (function (param) {
                        return Curry._1(setEditorAction, (function (param) {
                                      return /* Hidden */0;
                                    }));
                      }),
                    children: React.createElement(SchoolCommunities__Editor.make, {
                          courses: courses,
                          community: editorAction[0],
                          connections: match$1[0],
                          addCommunityCB: addCommunityCB,
                          updateCommunitiesCB: updateCommunitiesCB
                        })
                  }) : null, React.createElement("div", {
                  className: "flex px-6 py-2 items-center justify-between"
                }, React.createElement("button", {
                      className: "max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hover:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer",
                      onClick: (function (param) {
                          return Curry._1(setEditorAction, (function (param) {
                                        return /* ShowEditor */[undefined];
                                      }));
                        })
                    }, React.createElement("i", {
                          className: "fas fa-plus-circle"
                        }), React.createElement("h5", {
                          className: "font-semibold ml-2"
                        }, "Add New Community"))), React.createElement("div", {
                  className: "px-6 pb-4 mt-5 flex flex-1"
                }, React.createElement("div", {
                      className: "max-w-2xl w-full mx-auto relative"
                    }, $$Array.of_list(List.map((function (community) {
                                return React.createElement("div", {
                                            key: SchoolCommunities__Community.id(community),
                                            className: "flex items-center shadow bg-white rounded-lg mb-4"
                                          }, React.createElement("div", {
                                                className: "course-faculty__list-item flex w-full items-center"
                                              }, React.createElement("a", {
                                                    className: "course-faculty__list-item-details flex flex-1 items-center justify-between border border-transparent cursor-pointer rounded-l-lg hover:bg-gray-100 hover:text-primary-500 hover:border-primary-400",
                                                    onClick: (function (_event) {
                                                        _event.preventDefault();
                                                        return Curry._1(setEditorAction, (function (param) {
                                                                      return /* ShowEditor */[community];
                                                                    }));
                                                      })
                                                  }, React.createElement("div", {
                                                        className: "flex w-full text-sm justify-between"
                                                      }, React.createElement("span", {
                                                            className: "flex-1 font-semibold py-5 px-5"
                                                          }, SchoolCommunities__Community.name(community)), React.createElement("span", {
                                                            className: "ml-2 py-5 px-5 font-semibold text-gray-700 hover:text-primary-500"
                                                          }, React.createElement("i", {
                                                                className: "fas fa-edit text-normal"
                                                              }), React.createElement("span", {
                                                                className: "ml-1"
                                                              }, "Edit")))), React.createElement("a", {
                                                    className: "text-sm flex items-center border-l text-gray-700 hover:bg-gray-100 hover:text-primary-500 font-semibold px-5 py-5",
                                                    href: "/communities/" + SchoolCommunities__Community.id(community),
                                                    target: "_blank"
                                                  }, React.createElement("i", {
                                                        className: "fas fa-external-link-alt text-normal"
                                                      }), React.createElement("span", {
                                                        className: "ml-1"
                                                      }, "View"))));
                              }), stateCommunities)))));
}

var make = SchoolCommunities__Index;

exports.str = str;
exports.make = make;
/* react Not a pure module */
