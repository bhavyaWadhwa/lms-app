// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var List = require("bs-platform/lib/js/list.js");
var $$Array = require("bs-platform/lib/js/array.js");
var Block = require("bs-platform/lib/js/block.js");
var Curry = require("bs-platform/lib/js/curry.js");
var React = require("react");
var Caml_option = require("bs-platform/lib/js/caml_option.js");
var SA_Coaches_CoachEditor = require("./school_index/SA_Coaches_CoachEditor.bs.js");
var CoachesSchoolIndex__Coach = require("../types/school_index/CoachesSchoolIndex__Coach.bs.js");

function str(prim) {
  return prim;
}

function reducer(state, action) {
  if (action.tag) {
    var newCoachesList = CoachesSchoolIndex__Coach.updateList(state.coaches, action[0]);
    return {
            coaches: newCoachesList,
            formVisible: state.formVisible
          };
  } else {
    return {
            coaches: state.coaches,
            formVisible: action[0]
          };
  }
}

function SA_Coaches_SchoolIndex(Props) {
  var coaches = Props.coaches;
  var authenticityToken = Props.authenticityToken;
  var match = React.useReducer(reducer, {
        coaches: coaches,
        formVisible: /* None */0
      });
  var send = match[1];
  var state = match[0];
  var closeFormCB = function (param) {
    return Curry._1(send, /* UpdateFormVisible */Block.__(0, [/* None */0]));
  };
  var updateCoachCB = function (coach) {
    return Curry._1(send, /* UpdateCoaches */Block.__(1, [coach]));
  };
  var match$1 = state.formVisible;
  return React.createElement("div", {
              className: "flex flex-1 h-full overflow-y-scroll"
            }, match$1 ? React.createElement(SA_Coaches_CoachEditor.make, {
                    coach: match$1[0],
                    closeFormCB: closeFormCB,
                    updateCoachCB: updateCoachCB,
                    authenticityToken: authenticityToken
                  }) : null, React.createElement("div", {
                  className: "flex-1 flex flex-col"
                }, React.createElement("div", {
                      className: "flex px-6 py-2 items-center justify-between"
                    }, React.createElement("button", {
                          className: "max-w-2xl w-full flex mx-auto items-center justify-center relative bg-white text-primary-500 hove:bg-gray-100 hover:text-primary-600 hover:shadow-lg focus:outline-none border-2 border-gray-400 border-dashed hover:border-primary-300 p-6 rounded-lg mt-8 cursor-pointer",
                          onClick: (function (_event) {
                              _event.preventDefault();
                              return Curry._1(send, /* UpdateFormVisible */Block.__(0, [/* CoachEditor */[undefined]]));
                            })
                        }, React.createElement("i", {
                              className: "fas fa-plus-circle text-lg"
                            }), React.createElement("h5", {
                              className: "font-semibold ml-2"
                            }, "Add New Coach"))), React.createElement("div", {
                      className: "px-6 pb-4 mt-5 flex flex-1"
                    }, React.createElement("div", {
                          className: "max-w-2xl w-full mx-auto relative"
                        }, $$Array.of_list(List.map((function (coach) {
                                    return React.createElement("div", {
                                                key: String(CoachesSchoolIndex__Coach.id(coach)),
                                                className: "flex items-center shadow bg-white rounded-lg mb-4 overflow-hidden"
                                              }, React.createElement("div", {
                                                    className: "course-faculty__list-item flex w-full"
                                                  }, React.createElement("div", {
                                                        className: "course-faculty__list-item-details flex flex-1 items-center justify-between cursor-pointer hover:bg-gray-100 hover:text-primary-500",
                                                        onClick: (function (_event) {
                                                            _event.preventDefault();
                                                            return Curry._1(send, /* UpdateFormVisible */Block.__(0, [/* CoachEditor */[Caml_option.some(coach)]]));
                                                          })
                                                      }, React.createElement("div", {
                                                            className: "flex flex-1 py-4 px-4"
                                                          }, React.createElement("img", {
                                                                className: "w-10 h-10 rounded-full mr-4 object-cover",
                                                                alt: "Avatar of " + CoachesSchoolIndex__Coach.name(coach),
                                                                src: CoachesSchoolIndex__Coach.imageUrl(coach)
                                                              }), React.createElement("div", {
                                                                className: "text-sm"
                                                              }, React.createElement("p", {
                                                                    className: "font-semibold"
                                                                  }, CoachesSchoolIndex__Coach.name(coach)), React.createElement("p", {
                                                                    className: "text-gray-600 font-semibold text-xs mt-px"
                                                                  }, CoachesSchoolIndex__Coach.title(coach)))), React.createElement("span", {
                                                            className: "flex items-center flex-shrink-0 ml-2 py-4 px-4 font-semibold text-gray-700 hover:text-primary-500 text-sm"
                                                          }, React.createElement("i", {
                                                                className: "fas fa-edit text-normal"
                                                              }), React.createElement("span", {
                                                                className: "ml-1"
                                                              }, "Edit")))));
                                  }), List.sort((function (x, y) {
                                        return CoachesSchoolIndex__Coach.id(x) - CoachesSchoolIndex__Coach.id(y) | 0;
                                      }), state.coaches)))))));
}

var make = SA_Coaches_SchoolIndex;

exports.str = str;
exports.reducer = reducer;
exports.make = make;
/* react Not a pure module */
