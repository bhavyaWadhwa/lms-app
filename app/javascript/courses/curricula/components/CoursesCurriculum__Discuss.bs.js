// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var List = require("bs-platform/lib/js/list.js");
var $$Array = require("bs-platform/lib/js/array.js");
var React = require("react");
var CoursesCurriculum__Community = require("../types/CoursesCurriculum__Community.bs.js");

function str(prim) {
  return prim;
}

function linkToCommunity(communityId, targetId) {
  return "/communities/" + (communityId + ("?target_id=" + targetId));
}

function linkToNewPost(communityId, targetId) {
  return "/communities/" + (communityId + ("/new_topic?target_id=" + targetId));
}

function topicCard(topic) {
  var topicId = CoursesCurriculum__Community.topicId(topic);
  var topicLink = "/topics/" + topicId;
  return React.createElement("div", {
              key: topicId,
              className: "flex justify-between items-center px-5 py-4 bg-white border-t",
              href: topicLink
            }, React.createElement("span", {
                  className: "text-sm font-semibold"
                }, CoursesCurriculum__Community.topicTitle(topic)), React.createElement("a", {
                  className: "btn btn-primary-ghost btn-small",
                  href: topicLink
                }, "View"));
}

function handleEmpty(param) {
  return React.createElement("div", {
              className: "flex flex-col justify-center items-center bg-white px-3 py-10"
            }, React.createElement("i", {
                  className: "fa fa-comments text-5xl text-gray-600 mb-2 "
                }), React.createElement("div", {
                  className: "text-center"
                }, React.createElement("h4", {
                      className: "font-bold"
                    }, "There's been no recent discussion about this target."), React.createElement("p", undefined, "Use the community to clear your doubts, and to help your peers!")));
}

function actionButtons(community, targetId) {
  var communityId = CoursesCurriculum__Community.id(community);
  var communityName = CoursesCurriculum__Community.name(community);
  return React.createElement("div", {
              className: "flex"
            }, React.createElement("a", {
                  className: "btn btn-default mr-3",
                  title: "Browse all topics about this target in the " + (communityName + " community"),
                  href: linkToCommunity(communityId, targetId)
                }, "Go to community"), React.createElement("a", {
                  className: "btn btn-primary",
                  title: "Create a topic in the " + (communityName + " community"),
                  href: linkToNewPost(communityId, targetId)
                }, "Create a topic"));
}

function communityTitle(community) {
  return React.createElement("h5", {
              className: "font-bold"
            }, "Topics from " + (CoursesCurriculum__Community.name(community) + " community"));
}

function CoursesCurriculum__Discuss(Props) {
  var targetId = Props.targetId;
  var communities = Props.communities;
  return React.createElement("div", {
              className: ""
            }, $$Array.of_list(List.map((function (community) {
                        var communityId = CoursesCurriculum__Community.id(community);
                        var topics = CoursesCurriculum__Community.topics(community);
                        return React.createElement("div", {
                                    key: communityId,
                                    className: "mt-12 bg-gray-100 px-6 py-4 rounded-lg"
                                  }, React.createElement("div", {
                                        className: "flex flex-col md:flex-row w-full justify-between pb-3 items-center"
                                      }, React.createElement("div", undefined, communityTitle(community)), actionButtons(community, targetId)), React.createElement("div", {
                                        className: "justify-between rounded-lg overflow-hidden shadow"
                                      }, topics.length !== 0 ? $$Array.map(topicCard, topics) : handleEmpty(/* () */0)));
                      }), communities)));
}

var make = CoursesCurriculum__Discuss;

exports.str = str;
exports.linkToCommunity = linkToCommunity;
exports.linkToNewPost = linkToNewPost;
exports.topicCard = topicCard;
exports.handleEmpty = handleEmpty;
exports.actionButtons = actionButtons;
exports.communityTitle = communityTitle;
exports.make = make;
/* react Not a pure module */
